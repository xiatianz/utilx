<!doctype html><html lang=zh-cn dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>æ€§èƒ½ä¼˜åŒ– | æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</title><meta name=keywords content><meta name=description content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·ï¼šåˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒ"><meta name=author content="util.cn Team"><link rel=canonical href=/blog/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.7e8505b7cdf8bb22ab2305e53c2700bb06c7e64faeb72cd3468823a9a3bd3d6e.css integrity="sha256-foUFt834uyKrIwXlPCcAuwbH5k+utyzTRogjqaO9PW4=" rel="preload stylesheet" as=style><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/blog/favicon-32x32.png><link rel=apple-touch-icon href=/blog/apple-touch-icon.png><link rel=mask-icon href=/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=/blog/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/feed.xml title=rss><link rel=alternate hreflang=zh-cn href=/blog/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script src=/js/external-link-config.js></script><script src=/js/external-link-interceptor.js></script><link rel=stylesheet href=/blog/css/custom.css media=screen><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«","url":"https://www.util.cn/blog/","description":"æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚","publisher":{"@type":"Organization","name":"æœ‰æ¡å·¥å…·","url":"https://www.util.cn","logo":{"@type":"ImageObject","url":"https://www.util.cn/blog/logo/logo-256.png","width":256,"height":256}},"potentialAction":[{"@type":"SearchAction","target":"https://www.util.cn/blog/search?q={search_term_string}","query-input":"required name=search_term_string"}]}</script><meta property="og:type" content="website"><meta property="og:title" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta property="og:description" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚"><meta property="og:url" content="https://www.util.cn/blog/"><meta property="og:site_name" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢"><meta property="og:image" content="https://www.util.cn/blog/logo/logo-256.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta name=twitter:description content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚"><meta name=twitter:image content="https://www.util.cn/blog/logo/logo-256.png"><meta name=baidu-site-verification content><meta name=category content="æŠ€æœ¯åšå®¢,å¼€å‘è€…å·¥å…·,ç¼–ç¨‹æ•™ç¨‹"><meta name=coverage content="Worldwide"><meta name=distribution content="Global"><meta name=rating content="General"><script id=51la_code async crossorigin=anonymous src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=pro"></script><script>window.addEventListener("load",function(){setTimeout(function(){typeof la!="undefined"?console.log("51laç»Ÿè®¡å·²åŠ è½½"):(console.warn("51laç»Ÿè®¡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ"),function(){var e=document.createElement("script");e.src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=backup",e.async=!0,document.head.appendChild(e)}())},3e3)})</script><meta property="og:url" content="/blog/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"><meta property="og:site_name" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·"><meta property="og:title" content="æ€§èƒ½ä¼˜åŒ–"><meta property="og:description" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·ï¼šåˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒ"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="æ€§èƒ½ä¼˜åŒ–"><meta name=twitter:description content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·ï¼šåˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒ"></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=/blog/ accesskey=h title="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· (Alt + H)">æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=/blog/posts/ title="æ‰€æœ‰æ–‡ç« åˆ—è¡¨ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŸ¥çœ‹æ‰€æœ‰æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ–‡ç« </span></a></li><li><a href=https://www.util.cn title="æœ‰æ¡å·¥å…· - å¼€å‘è€…çš„å¸¸ç”¨å·¥å…·é›†åˆï¼šæ— å¹¿å‘Š Â· æœ¬åœ°è®¡ç®— Â· å³å¼€å³ç”¨çš„åœ¨çº¿å·¥å…·å¹³å°ï¼Œæä¾›JSONæ ¼å¼åŒ–ã€SQLæ ¼å¼åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰å®ç”¨å·¥å…·"><span>æœ‰æ¡å·¥å…·</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=/blog/categories/ title="æ–‡ç« åˆ†ç±» - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æŠ€æœ¯é¢†åŸŸåˆ†ç±»çš„ä¼˜è´¨æ–‡ç« ï¼ŒåŒ…æ‹¬å‰ç«¯å¼€å‘ã€å·¥å…·ä½¿ç”¨ã€ç¼–ç¨‹æŠ€å·§ç­‰"><span>åˆ†ç±»</span></a></li><li><a href=/blog/tags/ title="æ ‡ç­¾äº‘ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡æ ‡ç­¾å¿«é€Ÿæ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ ‡ç­¾</span></a></li><li><a href=/blog/archives/ title="æ–‡ç« å½’æ¡£ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æ—¶é—´æŸ¥çœ‹å†å²æ–‡ç« "><span>å½’æ¡£</span></a></li><li><a href=/blog/search/ title="æœç´¢æ–‡ç«  - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡å…³é”®è¯æœç´¢æ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹ï¼Œæ”¯æŒæ ‡é¢˜ã€å†…å®¹ã€åˆ†ç±»å’Œæ ‡ç­¾æœç´¢"><span>æœç´¢</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>æ€§èƒ½ä¼˜åŒ–</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>SQLæ ¼å¼åŒ–ä¸æŸ¥è¯¢ä¼˜åŒ–å®Œå…¨æŒ‡å—</h2></header><div class=entry-content><p>æ·±å…¥è®²è§£SQLæ ¼å¼åŒ–çš„æœ€ä½³å®è·µå’ŒæŸ¥è¯¢ä¼˜åŒ–æŠ€å·§ï¼Œå¸®åŠ©å¼€å‘è€…ç¼–å†™é«˜æ•ˆã€å¯è¯»çš„SQLä»£ç </p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E6%8A%80%E6%9C%AF%E6%95%99%E7%A8%8B/ class=category-link>æŠ€æœ¯æ•™ç¨‹</a></div><span class=post-date>2026-01-03</span><span class=post-author>util.cn Team</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to SQLæ ¼å¼åŒ–ä¸æŸ¥è¯¢ä¼˜åŒ–å®Œå…¨æŒ‡å—" href=/blog/articles/sql-formatting-optimization/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>WebAssembly 2025ï¼šä»è¾¹ç¼˜æŠ€æœ¯åˆ°ä¸»æµå¹³å°çš„è·¨è¶Š</h2></header><div class=entry-content><p>å¼•è¨€ 2025å¹´æ˜¯WebAssemblyï¼ˆWASMï¼‰èµ°å‘æˆç†Ÿçš„å…³é”®ä¸€å¹´ã€‚ä»å®éªŒæ€§æŠ€æœ¯åˆ°ä¸»æµå¹³å°ï¼ŒWASMæ­£åœ¨é‡å¡‘Webåº”ç”¨çš„è¾¹ç•Œã€‚æœ¬æ–‡å°†æ·±å…¥åˆ†æWASMç”Ÿæ€åœ¨2025å¹´çš„é‡å¤§çªç ´ï¼Œå¹¶å±•æœ›2026å¹´çš„å‘å±•æ–¹å‘ã€‚
ä¸€ã€WASM 2025æŠ€æœ¯çªç ´ 1.1 GCææ¡ˆè½åœ° åƒåœ¾å›æ”¶æ”¯æŒ
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 // 2025å¹´WASM GCçš„å®é™…åº”ç”¨ // ä»¥å‰ï¼šæ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œç±»ä¼¼Cè¯­è¨€ mod manual_memory { #[no_mangle] pub fn allocate_string(size: usize) -> *mut u8 { let layout = std::alloc::Layout::from_size_align(size, 1).unwrap(); unsafe { let ptr = std::alloc::alloc(layout); ptr as *mut u8 } } #[no_mangle] pub fn free_string(ptr: *mut u8, size: usize) { let layout = std::alloc::Layout::from_size_align(size, 1).unwrap(); unsafe { std::alloc::dealloc(ptr as *mut u8, layout); } } } // ç°åœ¨ï¼šä½¿ç”¨WASM GCï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Rustçš„Vecã€HashMapç­‰ mod with_gc { use wasm_bindgen::prelude::*; #[wasm_bindgen] pub struct DataProcessor { // å¯ä»¥ç›´æ¥ä½¿ç”¨é›†åˆç±»å‹ items: Vec&lt;DataItem>, cache: HashMap&lt;String, ProcessedData>, } #[wasm_bindgen] impl DataProcessor { #[wasm_bindgen(constructor)] pub fn new() -> Self { Self { items: Vec::new(), cache: HashMap::new(), } } #[wasm_bindgen] pub fn process(&amp;mut self, input: &amp;str) -> String { // ä½¿ç”¨Rustæ ‡å‡†åº“ï¼Œæ— éœ€æ‰‹åŠ¨å†…å­˜ç®¡ç† if let Some(cached) = self.cache.get(input) { return cached.result.clone(); } let result = self.heavy_computation(input); self.cache.insert(input.to_string(), result.clone()); result } fn heavy_computation(&amp;self, input: &amp;str) -> String { // å¤æ‚è®¡ç®—é€»è¾‘ format!("Processed: {}", input) } } } GCå¸¦æ¥çš„å˜é©
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/webassembly/ class=category-link>WebAssembly</a><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/ class=category-link>å‰ç«¯æŠ€æœ¯</a></div><span class=post-date>2025-12-31</span><span class=post-author>æœ‰æ¡å·¥å…·å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to WebAssembly 2025ï¼šä»è¾¹ç¼˜æŠ€æœ¯åˆ°ä¸»æµå¹³å°çš„è·¨è¶Š" href=/blog/articles/webassembly-2025%E4%BB%8E%E8%BE%B9%E7%BC%98%E6%8A%80%E6%9C%AF%E5%88%B0%E4%B8%BB%E6%B5%81%E5%B9%B3%E5%8F%B0%E7%9A%84%E8%B7%A8%E8%B6%8A/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ç°ä»£å‰ç«¯æ¶æ„æ·±åº¦è§£æï¼šæ„å»ºå¯æ‰©å±•çš„å¤§å‹åº”ç”¨</h2></header><div class=entry-content><p>å¼•è¨€ éšç€å‰ç«¯åº”ç”¨çš„å¤æ‚åº¦ä¸æ–­å¢åŠ ï¼Œä¼ ç»Ÿçš„å•ä½“å‰ç«¯æ¶æ„å·²éš¾ä»¥æ»¡è¶³å¤§å‹é¡¹ç›®çš„éœ€æ±‚ã€‚ç°ä»£å‰ç«¯æ¶æ„éœ€è¦è§£å†³ä»£ç åˆ†å‰²ã€å›¢é˜Ÿåä½œã€æ€§èƒ½ä¼˜åŒ–ã€å¯ç»´æŠ¤æ€§ç­‰å¤šæ–¹é¢çš„æŒ‘æˆ˜ã€‚æœ¬æ–‡å°†ä»æ¶æ„è®¾è®¡çš„è§’åº¦ï¼Œæ·±å…¥æ¢è®¨å¦‚ä½•æ„å»ºå¯æ‰©å±•çš„å¤§å‹å‰ç«¯åº”ç”¨ã€‚
ä¸€ã€å‰ç«¯æ¶æ„æ¼”è¿›å² 1.1 ä»é¡µé¢åˆ°åº”ç”¨çš„å‘å±•å†ç¨‹ jQueryæ—¶ä»£ â†’ AMD/RequireJS â†’ CommonJS/Node.js â†’ ES6 Modules â†’ ç°ä»£æ¡†æ¶æ—¶ä»£ å‘å±•é˜¶æ®µ
é˜¶æ®µ ç‰¹ç‚¹ ä»£è¡¨æŠ€æœ¯ å±€é™æ€§ é™æ€é¡µé¢ HTML + CSS + å°‘é‡JS jQueryã€Prototype ä»£ç å¤ç”¨å·® æ¨¡å—åŒ–åˆæœŸ RequireJSã€SeaJS AMDã€CMD åŠ è½½å¤æ‚ ç»„ä»¶åŒ– Reactã€Vueè¯ç”Ÿ Virtual DOM çŠ¶æ€ç®¡ç†æ··ä¹± å·¥ç¨‹åŒ– Webpackã€Rollup ES6 Modules æ„å»ºå¤æ‚åº¦é«˜ ç°ä»£åŒ– Next.jsã€Nuxt.js SSRã€SSR Streaming å­¦ä¹ æ›²çº¿é™¡å³­ 1.2 å½“å‰æ¶æ„æŒ‘æˆ˜ å¤§å‹å‰ç«¯åº”ç”¨é¢ä¸´çš„æ ¸å¿ƒé—®é¢˜
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // é—®é¢˜1: ä»£ç ç»„ç»‡æ··ä¹± // src/ // components/ // 1000+ ç»„ä»¶ // pages/ // 200+ é¡µé¢ // utils/ // å·¥å…·å‡½æ•°æ•£è½å„å¤„ // api/ // APIè°ƒç”¨ä¸è§„èŒƒ // é—®é¢˜2: çŠ¶æ€ç®¡ç†å¤æ‚ // - å…¨å±€çŠ¶æ€ä¸å±€éƒ¨çŠ¶æ€è¾¹ç•Œæ¨¡ç³Š // - çŠ¶æ€æµè½¬éš¾ä»¥è¿½è¸ª // - å¤šä¸ªçŠ¶æ€ç®¡ç†æ–¹æ¡ˆæ··ç”¨ // é—®é¢˜3: æ€§èƒ½ç“¶é¢ˆ // - é¦–å±åŠ è½½æ—¶é—´é•¿ // - è·¯ç”±åˆ‡æ¢å¡é¡¿ // - å†…å­˜æ³„æ¼é£é™© // é—®é¢˜4: å›¢é˜Ÿåä½œå›°éš¾ // - ä»£ç å†²çªé¢‘ç¹ // - å‘å¸ƒå‘¨æœŸé•¿ // - æŠ€æœ¯æ ˆä¸ç»Ÿä¸€ äºŒã€æ¶æ„è®¾è®¡åŸåˆ™ 2.1 SOLIDåŸåˆ™åœ¨å‰ç«¯çš„åº”ç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 // S - å•ä¸€èŒè´£åŸåˆ™ // âŒ è¿åå•ä¸€èŒè´£ class UserComponent { render() { } fetchUser() { } validateInput() { } formatData() { } logAnalytics() { } } // âœ… éµå¾ªå•ä¸€èŒè´£ class UserComponent { constructor( private renderer: UserRenderer, private userService: UserService, private validator: InputValidator ) { } render() { this.renderer.render() } fetchUser() { this.userService.fetch() } } // O - å¼€é—­åŸåˆ™ // ä½¿ç”¨æ’ä»¶ç³»ç»Ÿæ‰©å±•åŠŸèƒ½ interface ComponentPlugin { install(component: any): void uninstall(component: any): void } class Component { private plugins: ComponentPlugin[] = [] use(plugin: ComponentPlugin) { this.plugins.push(plugin) plugin.install(this) return this } } // L - é‡Œæ°æ›¿æ¢åŸåˆ™ // åŸºç±»å¯è¢«å­ç±»æ— ç¼æ›¿æ¢ abstract class BaseStore&lt;T> { abstract get(id: string): Promise&lt;T> abstract set(id: string, data: T): Promise&lt;void> } class UserStore extends BaseStore&lt;User> { async get(id: string): Promise&lt;User> { } async set(id: string, data: User): Promise&lt;void> { } } // I - æ¥å£éš”ç¦»åŸåˆ™ // æ‹†åˆ†å¤§æ¥å£ä¸ºå°æ¥å£ interface ReadOnlyRepository&lt;T> { findById(id: string): Promise&lt;T> findAll(): Promise&lt;T[]> } interface WriteOnlyRepository&lt;T> { create(data: T): Promise&lt;T> update(id: string, data: Partial&lt;T>): Promise&lt;T> delete(id: string): Promise&lt;void> } // D - ä¾èµ–å€’ç½®åŸåˆ™ // ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç° interface CacheService { get(key: string): Promise&lt;any> set(key: string, value: any): Promise&lt;void> } class UserService { constructor(private cache: CacheService) { } } 2.2 åˆ†å±‚æ¶æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 // æ ‡å‡†å‰ç«¯åˆ†å±‚æ¶æ„ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Presentation Layer â”‚ â”‚ (Components, Pages, UI Logic) â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Business Logic Layer â”‚ â”‚ (Hooks, Composables, Use Cases) â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Data Access Layer â”‚ â”‚ (API Client, Cache, State Management) â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Infrastructure Layer â”‚ â”‚ (HTTP, WebSocket, LocalStorage) â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ // å®ç°ç¤ºä¾‹ // ========== Presentation Layer ========== // views/UserList.vue &lt;template> &lt;UserDataTable :users="users" :loading="loading" @refresh="handleRefresh" /> &lt;/template> // ========== Business Logic Layer ========== // composables/useUserList.ts export function useUserList() { const { users, loading, error, fetch } = userRepository() const refresh = async () => { await fetch() analytics.track('user_list_refreshed') } const filteredUsers = computed(() => { return users.value.filter(user => user.active) }) return { users: filteredUsers, loading, error, refresh } } // ========== Data Access Layer ========== // repositories/userRepository.ts export function userRepository() { const api = useApiClient() const cache = useCache() const fetch = async () => { const cached = await cache.get('users') if (cached) return cached const data = await api.get('/users') await cache.set('users', data, 300) // 5åˆ†é’Ÿ return data } return { users: ref([]), loading: ref(false), error: ref(null), fetch } } // ========== Infrastructure Layer =========== // utils/apiClient.ts class ApiClient { private baseURL: string private interceptors: RequestInterceptor[] async get&lt;T>(url: string): Promise&lt;T> { const request = new Request(this.baseURL + url) return this.execute&lt;T>(request) } } 2.3 é¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)åœ¨å‰ç«¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 // 1. é¢†åŸŸæ¨¡å‹å®šä¹‰ // domains/user/User.ts export class User { constructor( private readonly id: UserId, private readonly email: Email, private name: UserName, private status: UserStatus ) {} // é¢†åŸŸé€»è¾‘ activate(): void { if (this.status === UserStatus.ACTIVE) { throw new Error('User already active') } this.status = UserStatus.ACTIVE } deactivate(): void { this.status = UserStatus.INACTIVE } isActive(): boolean { return this.status === UserStatus.ACTIVE } } // å€¼å¯¹è±¡ export class Email { constructor(private readonly value: string) { if (!this.validate(value)) { throw new Error('Invalid email') } } private validate(email: string): boolean { return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email) } getValue(): string { return this.value } } // 2. é¢†åŸŸæœåŠ¡ // domains/user/UserService.ts export class UserService { constructor( private userRepo: UserRepository, private emailService: EmailService ) {} async registerUser(data: RegisterUserData): Promise&lt;User> { // ä¸šåŠ¡è§„åˆ™éªŒè¯ if (await this.userRepo.existsByEmail(data.email)) { throw new Error('Email already registered') } // åˆ›å»ºé¢†åŸŸå¯¹è±¡ const user = new User( UserId.generate(), new Email(data.email), new UserName(data.name), UserStatus.PENDING ) // æŒä¹…åŒ– await this.userRepo.save(user) // å‘é€æ¬¢è¿é‚®ä»¶ await this.emailService.sendWelcome(user.email.getValue()) return user } } // 3. åº”ç”¨æœåŠ¡ï¼ˆç”¨ä¾‹ï¼‰ // application/useCases/RegisterUserUseCase.ts export class RegisterUserUseCase { constructor(private userService: UserService) { } async execute(request: RegisterUserRequest): Promise&lt;RegisterUserResponse> { try { const user = await this.userService.registerUser(request.data) return { success: true, userId: user.id.getValue(), message: 'Registration successful' } } catch (error) { return { success: false, error: error.message } } } } // 4. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ // components/RegisterForm.vue export default { setup() { const registerUser = useRegisterUserUseCase() const handleSubmit = async (formData) => { const result = await registerUser.execute({ data: { email: formData.email, name: formData.name, password: formData.password } }) if (result.success) { router.push(`/welcome/${result.userId}`) } else { showError(result.error) } } return { handleSubmit } } } ä¸‰ã€å¾®å‰ç«¯æ¶æ„ 3.1 å¾®å‰ç«¯æ¶æ„æ¨¡å¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 // æ¨¡å¼1: è·¯ç”±åˆ†å‘ // ä¸»åº”ç”¨æ ¹æ®è·¯ç”±åŠ è½½ä¸åŒå­åº”ç”¨ const microApps = [ { name: 'user-center', entry: '//localhost:3001', container: '#subapp', activeRule: '/users' }, { name: 'order-system', entry: '//localhost:3002', container: '#subapp', activeRule: '/orders' } ] // æ¨¡å¼2: ç»„åˆå¼é›†æˆ // ä¸»åº”ç”¨æä¾›å®¹å™¨ï¼Œå­åº”ç”¨ä½œä¸ºç»„ä»¶æ¸²æŸ“ &lt;template> &lt;div> &lt;AppHeader /> &lt;MicroApp name="user-center" :props="userProps" /> &lt;AppFooter /> &lt;/div> &lt;/template> // æ¨¡å¼3: EMP (EMP Module Federation) // å»ä¸­å¿ƒåŒ–çš„æ¨¡å—å…±äº« // å­åº”ç”¨A new ModuleFederationPlugin({ name: 'appA', exposes: { './UserList': './src/components/UserList' }, shared: ['vue', 'vue-router'] }) // å­åº”ç”¨Bä½¿ç”¨Açš„ç»„ä»¶ import UserList from 'appA/UserList' 3.2 æ¨¡å—è”é‚¦å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 // webpack.config.js - ä¸»åº”ç”¨ const ModuleFederationPlugin = require('webpack/lib/container/ModuleFederationPlugin') module.exports = { plugins: [ new ModuleFederationPlugin({ name: 'host_app', remotes: { userApp: 'user_app@http://localhost:3001/remoteEntry.js', orderApp: 'order_app@http://localhost:3002/remoteEntry.js' }, shared: { vue: { singleton: true, requiredVersion: '^3.0.0' }, 'vue-router': { singleton: true } } }) ] } // åœ¨ä¸»åº”ç”¨ä¸­ä½¿ç”¨è¿œç¨‹æ¨¡å— // src/App.vue &lt;script> import { defineAsyncComponent } from 'vue' // åŠ¨æ€åŠ è½½è¿œç¨‹ç»„ä»¶ const UserDashboard = defineAsyncComponent(() => import('userApp/Dashboard') ) const OrderList = defineAsyncComponent(() => import('orderApp/OrderList') ) export default { components: { UserDashboard, OrderList } } &lt;/script> // å­åº”ç”¨é…ç½® - userApp // webpack.config.js module.exports = { plugins: [ new ModuleFederationPlugin({ name: 'user_app', filename: 'remoteEntry.js', exposes: { './Dashboard': './src/components/Dashboard.vue', './UserProfile': './src/components/UserProfile.vue', './UserStore': './src/stores/user' }, shared: { vue: { singleton: true, requiredVersion: '^3.0.0' } } }) ] } 3.3 å¾®å‰ç«¯é€šä¿¡æ–¹æ¡ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 // ========== æ–¹æ¡ˆ1: è‡ªå®šä¹‰äº‹ä»¶æ€»çº¿ ========== // utils/eventBus.ts class MicroEventBus { private events: Map&lt;string, Set&lt;Function>> constructor() { this.events = new Map() } on(event: string, callback: Function) { if (!this.events.has(event)) { this.events.set(event, new Set()) } this.events.get(event)!.add(callback) } off(event: string, callback: Function) { this.events.get(event)?.delete(callback) } emit(event: string, data?: any) { this.events.get(event)?.forEach(callback => callback(data)) } } // å…¨å±€å•ä¾‹ export const microEventBus = new MicroEventBus() // å­åº”ç”¨A - å‘é€äº‹ä»¶ import { microEventBus } from './eventBus' microEventBus.emit('user:login', { userId: '123', userName: 'Alice' }) // å­åº”ç”¨B - ç›‘å¬äº‹ä»¶ microEventBus.on('user:login', (user) => { console.log('User logged in:', user) updateUI(user) }) // ========== æ–¹æ¡ˆ2: çŠ¶æ€å…±äº« ========== // stores/sharedStore.ts import { reactive, readonly } from 'vue' const state = reactive({ user: null, theme: 'light', locale: 'zh-CN' }) export const sharedStore = { state: readonly(state), setUser(user: any) { state.user = user }, setTheme(theme: string) { state.theme = theme }, setLocale(locale: string) { state.locale = locale } } // ========== æ–¹æ¡ˆ3: å…¨å±€çŠ¶æ€ç®¡ç† ========== // ä½¿ç”¨Piniaåˆ›å»ºè·¨åº”ç”¨store // stores/global.ts import { defineStore } from 'pinia' export const useGlobalStore = defineStore('global', { state: () => ({ currentUser: null, notifications: [] }), actions: { async login(credentials) { const user = await api.login(credentials) this.currentUser = user }, logout() { this.currentUser = null }, addNotification(notification) { this.notifications.push(notification) } } }) 3.4 æ ·å¼éš”ç¦» 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 // ========== æ–¹æ¡ˆ1: CSS Modules ========== // components/UserCard.module.css .card { padding: 20px; border-radius: 8px; background: white; } .title { font-size: 18px; color: #333; } // components/UserCard.vue &lt;template> &lt;div :class="$style.card"> &lt;h3 :class="$style.title">{{ title }}&lt;/h3> &lt;/div> &lt;/template> &lt;script> import styles from './UserCard.module.css' export default { $style: styles } &lt;/script> // ========== æ–¹æ¡ˆ2: Shadow DOM ========== // components/ShadowWidget.ts class ShadowWidget extends HTMLElement { constructor() { super() // åˆ›å»ºShadow DOM const shadow = this.attachShadow({ mode: 'open' }) // éš”ç¦»çš„æ ·å¼ const style = document.createElement('style') style.textContent = ` .widget { padding: 20px; background: #f5f5f5; } .widget h3 { color: #333; margin: 0 0 10px 0; } ` // éš”ç¦»çš„å†…å®¹ const wrapper = document.createElement('div') wrapper.className = 'widget' wrapper.innerHTML = ` &lt;h3>Shadow DOM Widget&lt;/h3> &lt;p>This is isolated from host page styles&lt;/p> ` shadow.appendChild(style) shadow.appendChild(wrapper) } } customElements.define('shadow-widget', ShadowWidget) // ========== æ–¹æ¡ˆ3: CSS-in-JS ========== // ä½¿ç”¨styled-componentsæˆ–emotion import styled from 'styled-components' const Card = styled.div` padding: 20px; border-radius: 8px; background: white; h3 { font-size: 18px; color: #333; } ` // ç»„ä»¶è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ç±»å &lt;Card> &lt;h3>Title&lt;/h3> &lt;/Card> // ========== æ–¹æ¡ˆ4: å‘½åç©ºé—´ ========== // æ¨èçš„BEM + å‘½åç©ºé—´ç»„åˆ // [å­åº”ç”¨å]-[å—]__[å…ƒç´ ]--[ä¿®é¥°å™¨] .user-center-card__header--active { background: #007bff; } .order-system-list__item--highlighted { background: #ffc107; } å››ã€çŠ¶æ€ç®¡ç†æ¶æ„ 4.1 çŠ¶æ€ç®¡ç†é€‰å‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 // ========== æ–¹æ¡ˆå¯¹æ¯” ========== // 1. Redux Toolkit - å¤æ‚åº”ç”¨ import { createSlice, configureStore } from '@reduxjs/toolkit' const userSlice = createSlice({ name: 'user', initialState: { user: null, status: 'idle' }, reducers: { setUser(state, action) { state.user = action.payload }, clearUser(state) { state.user = null } }, extraReducers: (builder) => { builder .addCase(fetchUser.pending, (state) => { state.status = 'loading' }) .addCase(fetchUser.fulfilled, (state, action) => { state.status = 'succeeded' state.user = action.payload }) } }) export const { setUser, clearUser } = userSlice.actions export default configureStore({ reducer: { user: userSlice.reducer } }) // 2. Zustand - è½»é‡çº§ import create from 'zustand' const useUserStore = create((set, get) => ({ user: null, status: 'idle', setUser: (user) => set({ user }), fetchUser: async (id) => { set({ status: 'loading' }) const user = await api.getUser(id) set({ user, status: 'succeeded' }) }, getUserAge: () => { const { user } = get() return user ? calculateAge(user.birthday) : 0 } })) // 3. Pinia - Vueæ¨è import { defineStore } from 'pinia' export const useUserStore = defineStore('user', { state: () => ({ user: null, status: 'idle' }), getters: { isLoggedIn: (state) => !!state.user, userName: (state) => state.user?.name || 'Guest' }, actions: { async fetchUser(id) { this.status = 'loading' this.user = await api.getUser(id) this.status = 'succeeded' } } }) // 4. Jotai - åŸå­åŒ–çŠ¶æ€ import { atom, useAtom } from 'jotai' // åŸå­çŠ¶æ€ const userAtom = atom(null) const statusAtom = atom('idle') // æ´¾ç”ŸåŸå­ const isLoggedInAtom = atom( (get) => !!get(userAtom) ) // ç»„ä»¶ä¸­ä½¿ç”¨ function UserProfile() { const [user, setUser] = useAtom(userAtom) const [status] = useAtom(statusAtom) const [isLoggedIn] = useAtom(isLoggedInAtom) // ... } 4.2 åˆ†å±‚çŠ¶æ€æ¶æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 // ========== çŠ¶æ€åˆ†å±‚è®¾è®¡ ========== // 1. æœåŠ¡ç«¯çŠ¶æ€ - React Query / SWR import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query' // è·å–æ•°æ® function useUser(id: string) { return useQuery({ queryKey: ['user', id], queryFn: () => api.getUser(id), staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿ cacheTime: 10 * 60 * 1000 // 10åˆ†é’Ÿ }) } // ä¿®æ”¹æ•°æ® function useUpdateUser() { const queryClient = useQueryClient() return useMutation({ mutationFn: ({ id, data }) => api.updateUser(id, data), onSuccess: (data, variables) => { // è‡ªåŠ¨æ›´æ–°ç¼“å­˜ queryClient.setQueryData(['user', variables.id], data) // æˆ–ä½¿ç¼“å­˜å¤±æ•ˆ queryClient.invalidateQueries(['user', variables.id]) } }) } // 2. å…¨å±€UIçŠ¶æ€ - Zustand import create from 'zustand/vanilla' const uiStore = create((set) => ({ theme: 'light', sidebarOpen: true, modalOpen: false, toggleTheme: () => set((state) => ({ theme: state.theme === 'light' ? 'dark' : 'light' })), toggleSidebar: () => set((state) => ({ sidebarOpen: !state.sidebarOpen })), openModal: () => set({ modalOpen: true }), closeModal: () => set({ modalOpen: false }) })) // 3. è¡¨å•çŠ¶æ€ - åŸå­çŠ¶æ€ import { atom, useAtom } from 'jotai' const formDataAtom = atom({ username: '', email: '', password: '' }) const formErrorsAtom = atom({}) const useForm = () => { const [data, setData] = useAtom(formDataAtom) const [errors, setErrors] = useAtom(formErrorsAtom) const updateField = (field, value) => { setData((prev) => ({ ...prev, [field]: value })) } const validate = () => { const newErrors = {} if (!data.username) newErrors.username = 'Required' if (!data.email) newErrors.email = 'Required' setErrors(newErrors) return Object.keys(newErrors).length === 0 } return { data, errors, updateField, validate } } // ========== çŠ¶æ€ç»„åˆä½¿ç”¨ ========== function UserProfile({ userId }) { // æœåŠ¡ç«¯çŠ¶æ€ const { data: user, isLoading } = useUser(userId) const updateUser = useUpdateUser() // UIçŠ¶æ€ const { theme, toggleTheme } = useUiStore() // æœ¬åœ°çŠ¶æ€ const [isEditing, setIsEditing] = useState(false) if (isLoading) return &lt;Spinner /> return ( &lt;div className={theme}> {isEditing ? ( &lt;EditForm user={user} onSave={(data) => updateUser.mutate({ id: userId, data })} onCancel={() => setIsEditing(false)} /> ) : ( &lt;UserDetail user={user} onEdit={() => setIsEditing(true)} /> )} &lt;button onClick={toggleTheme}>Toggle Theme&lt;/button> &lt;/div> ) } 4.3 çŠ¶æ€æŒä¹…åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 // ========== æœ¬åœ°æŒä¹…åŒ–æ–¹æ¡ˆ ========== // 1. Zustand + localStorage import { persist } from 'zustand/middleware' export const useUserStore = create( persist( (set) => ({ user: null, token: null, setUser: (user) => set({ user }), setToken: (token) => set({ token }), logout: () => set({ user: null, token: null }) }), { name: 'user-storage', // éƒ¨åˆ†æŒä¹…åŒ– partialize: (state) => ({ user: state.user, token: state.token }) } ) ) // 2. Pinia + localStorage import { createPinia } from 'pinia' import piniaPluginPersistedstate from 'pinia-plugin-persistedstate' const pinia = createPinia() pinia.use(piniaPluginPersistedstate) export const useAuthStore = defineStore('auth', { state: () => ({ token: null, refreshToken: null }), actions: { setTokens(token, refreshToken) { this.token = token this.refreshToken = refreshToken } }, persist: { key: 'auth', storage: localStorage, pick: ['token', 'refreshToken'] } }) // 3. IndexedDB - å¤§é‡æ•°æ® import { openDB } from 'idb' const dbPromise = openDB('app-db', 1, { upgrade(db) { db.createObjectStore('cache') } }) export const idbStorage = { async getItem(key) { const db = await dbPromise return await db.get('cache', key) }, async setItem(key, value) { const db = await dbPromise return await db.put('cache', value, key) }, async removeItem(key) { const db = await dbPromise return await db.delete('cache', key) } } // 4. æœåŠ¡ç«¯çŠ¶æ€åŒæ­¥ import { useQuery, useMutation } from '@tanstack/react-query' // è‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡ç«¯ function useSyncedState(key, initialValue) { const queryClient = useQueryClient() const { data } = useQuery({ queryKey: ['state', key], queryFn: () => api.getState(key), initialData: initialValue }) const mutation = useMutation({ mutationFn: (value) => api.setState(key, value), onSuccess: () => { queryClient.invalidateQueries(['state', key]) } }) const setState = (value) => { mutation.mutate(value) } return [data, setState] } äº”ã€æ€§èƒ½ä¼˜åŒ–æ¶æ„ 5.1 ä»£ç åˆ†å‰²ç­–ç•¥ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 // ========== è·¯ç”±çº§åˆ«åˆ†å‰² ========== // Vue Router const routes = [ { path: '/dashboard', component: () => import( /* webpackChunkName: "dashboard" */ './views/Dashboard.vue' ) }, { path: '/users', component: () => import( /* webpackChunkName: "users" */ './views/Users.vue' ) } ] // React Router const Dashboard = lazy(() => import('./views/Dashboard')) const Users = lazy(() => import('./views/Users')) function App() { return ( &lt;Suspense fallback={&lt;Spinner />}> &lt;Routes> &lt;Route path="/dashboard" element={&lt;Dashboard />} /> &lt;Route path="/users" element={&lt;Users />} /> &lt;/Routes> &lt;/Suspense> ) } // ========== ç»„ä»¶çº§åˆ«åˆ†å‰² ========== // Vue 3 - defineAsyncComponent const HeavyComponent = defineAsyncComponent({ loader: () => import('./HeavyComponent.vue'), loadingComponent: LoadingSpinner, errorComponent: ErrorDisplay, delay: 200, timeout: 5000 }) // React - lazy + Suspense const HeavyChart = lazy(() => import('./HeavyChart')) function Dashboard() { const [showChart, setShowChart] = useState(false) return ( &lt;div> &lt;button onClick={() => setShowChart(true)}> Show Chart &lt;/button> {showChart && ( &lt;Suspense fallback={&lt;Spinner />}> &lt;HeavyChart /> &lt;/Suspense> )} &lt;/div> ) } // ========== æ¡ä»¶åŠ è½½ ========== // åªåœ¨éœ€è¦æ—¶åŠ è½½åº“ const loadMonaco = async () => { const monaco = await import('monaco-editor') return monaco } const loadChartLibrary = async () => { if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) { return null // ç”¨æˆ·ä¸å–œæ¬¢åŠ¨ç”» } const chart = await import('echarts') return chart } // ========== é¢„åŠ è½½ç­–ç•¥ ========== // é¢„åŠ è½½ä¸‹ä¸€ä¸ªå¯èƒ½è®¿é—®çš„é¡µé¢ function ProductList({ products }) { const prefetch = usePrefetch() const handleMouseEnter = (productId) => { // é¼ æ ‡æ‚¬åœæ—¶é¢„åŠ è½½ prefetch(`/products/${productId}`) } return ( &lt;ul> {products.map(product => ( &lt;li key={product.id} onMouseEnter={() => handleMouseEnter(product.id)} > &lt;Link to={`/products/${product.id}`}> {product.name} &lt;/Link> &lt;/li> ))} &lt;/ul> ) } // Webpacké­”æ³•æ³¨é‡Š const ProductDetail = lazy(() => import( /* webpackPrefetch: true */ /* webpackChunkName: "product-detail" */ './ProductDetail' )) 5.2 æ¸²æŸ“ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 // ========== è™šæ‹Ÿåˆ—è¡¨ ========== import { useVirtualizer } from '@tanstack/react-virtual' function VirtualList({ items }) { const parentRef = useRef() const virtualizer = useVirtualizer({ count: items.length, getScrollElement: () => parentRef.current, estimateSize: () => 50, // æ¯é¡¹é«˜åº¦ overscan: 5 // é¢å¤–æ¸²æŸ“é¡¹æ•° }) return ( &lt;div ref={parentRef} style={{ height: '400px', overflow: 'auto' }}> &lt;div style={{ height: `${virtualizer.getTotalSize()}px`, position: 'relative' }} > {virtualizer.getVirtualItems().map(virtualItem => ( &lt;div key={virtualItem.key} style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: `${virtualItem.size}px`, transform: `translateY(${virtualItem.start}px)` }} > {items[virtualItem.index].content} &lt;/div> ))} &lt;/div> &lt;/div> ) } // ========== é˜²æŠ–/èŠ‚æµ ========== import { useDebouncedCallback, useThrottledCallback } from '@hooks' function SearchInput() { // é˜²æŠ–æœç´¢ const debouncedSearch = useDebouncedCallback( (query) => { performSearch(query) }, 500 // å»¶è¿Ÿ ) return ( &lt;input type="text" onChange={(e) => debouncedSearch(e.target.value)} /> ) } function ScrollHandler() { // èŠ‚æµæ»šåŠ¨äº‹ä»¶ const throttledScroll = useThrottledCallback( () => { updatePosition() }, 100 // é—´éš” ) useEffect(() => { window.addEventListener('scroll', throttledScroll) return () => window.removeEventListener('scroll', throttledScroll) }, [throttledScroll]) } // ========== Reactä¼˜åŒ– ========== import { memo, useMemo, useCallback, useRef } from 'react' // 1. ç»„ä»¶è®°å¿†åŒ– const ExpensiveComponent = memo(function ExpensiveComponent({ data }) { return &lt;div>{/* å¤æ‚æ¸²æŸ“ */}&lt;/div> }) // 2. è®¡ç®—ç¼“å­˜ function DataProcessor({ items }) { const sorted = useMemo(() => { return items.sort((a, b) => a.value - b.value) }, [items]) // åªåœ¨itemså˜åŒ–æ—¶é‡æ–°è®¡ç®— const filtered = useMemo(() => { return sorted.filter(item => item.active) }, [sorted]) return &lt;List items={filtered} /> } // 3. å‡½æ•°ç¨³å®šåŒ– function ParentComponent() { const [count, setCount] = useState(0) // ä¸ç¨³å®šçš„å‡½æ•°å¼•ç”¨ const handleClickBad = () => { setCount(count + 1) } // ç¨³å®šçš„å‡½æ•°å¼•ç”¨ const handleClickGood = useCallback(() => { setCount(c => c + 1) }, []) // ä¾èµ–ä¸ºç©ºï¼Œå‡½æ•°å¼•ç”¨ä¸å˜ return &lt;ChildComponent onClick={handleClickGood} /> } // 4. åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ– function TodoList({ todos, onToggle }) { const todoRefs = useRef(new Map()) const handleToggle = useCallback((id) => { // æ‰¹é‡æ›´æ–° startTransition(() => { onToggle(id) }) }, [onToggle]) return ( &lt;ul> {todos.map(todo => ( &lt;TodoItem key={todo.id} ref={(node) => { if (node) { todoRefs.current.set(todo.id, node) } else { todoRefs.current.delete(todo.id) } }} todo={todo} onToggle={handleToggle} /> ))} &lt;/ul> ) } const TodoItem = memo(function TodoItem({ todo, onToggle }) { return ( &lt;li onClick={() => onToggle(todo.id)}> {todo.text} &lt;/li> ) }) // ========== Vueä¼˜åŒ– ========== // 1. computedç¼“å­˜ export default { setup() { const items = ref([]) // è®¡ç®—å±æ€§è‡ªåŠ¨ç¼“å­˜ const filtered = computed(() => { return items.value.filter(item => item.active) }) const sorted = computed(() => { return filtered.value.sort((a, b) => a.value - b.value) }) return { sorted } } } // 2. v-once/v-memo &lt;template> &lt;!-- åªæ¸²æŸ“ä¸€æ¬¡ --> &lt;Logo v-once /> &lt;!-- æŒ‰æ¡ä»¶è®°å¿† --> &lt;div v-for="item in list" :key="item.id" v-memo="[item.id, item.selected]"> {{ item.text }} &lt;/div> &lt;/template> // 3. watchEffectä¼˜åŒ– watchEffect((onCleanup) => { const timer = setInterval(() => { updateData() }, 1000) onCleanup(() => { clearInterval(timer) // æ¸…ç†å‰¯ä½œç”¨ }) }) // 4. shallowRef/shallowReactive // å¤§å¯¹è±¡ä¼˜åŒ– const state = shallowReactive({ // åªé¡¶å±‚æ˜¯å“åº”å¼çš„ items: largeItemsArray }) // åªéœ€è¦é‡æ–°èµ‹å€¼æ—¶ä½¿ç”¨ const data = shallowRef(null) 5.3 èµ„æºä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 // ========== å›¾ç‰‡ä¼˜åŒ– ========== // 1. å“åº”å¼å›¾ç‰‡ &lt;picture> &lt;source media="(min-width: 1024px)" srcSet="image-large.webp" type="image/webp" /> &lt;source media="(min-width: 768px)" srcSet="image-medium.webp" type="image/webp" /> &lt;source srcSet="image-small.webp" type="image/webp" /> &lt;img src="image-fallback.jpg" alt="Description" loading="lazy" /> &lt;/picture> // 2. æ‡’åŠ è½½å›¾ç‰‡ import { lazyload } from '@utils/lazyload' function ImageWithLazy({ src, alt }) { const imgRef = useRef() const [isLoaded, setIsLoaded] = useState(false) useEffect(() => { const observer = new IntersectionObserver( (entries) => { entries.forEach(entry => { if (entry.isIntersecting) { const img = entry.target img.src = img.dataset.src observer.unobserve(img) } }) }, { rootMargin: '50px' } ) if (imgRef.current) { observer.observe(imgRef.current) } return () => observer.disconnect() }, []) return ( &lt;img ref={imgRef} data-src={src} alt={alt} onLoad={() => setIsLoaded(true)} style={{ opacity: isLoaded ? 1 : 0 }} /> ) } // 3. å›¾ç‰‡ç»„ä»¶å°è£… function OptimizedImage({ src, alt, width, height, priority = false }) { const [imageSrc, setImageSrc] = useState(null) useEffect(() => { const load = async () => { // ä½¿ç”¨WebPè½¬æ¢æœåŠ¡ const webpSrc = await convertToWebP(src, width) setImageSrc(webpSrc) } if (priority) { load() } else { const observer = new IntersectionObserver((entries) => { if (entries[0].isIntersecting) { load() observer.disconnect() } }) // ... observe logic } }, [src, width, priority]) return &lt;img src={imageSrc} alt={alt} loading={!priority ? 'lazy' : 'eager'} /> } // ========== å­—ä½“ä¼˜åŒ– ========== // 1. å­—ä½“é¢„åŠ è½½ &lt;link rel="preload" href="/fonts/main.woff2" as="font" type="font/woff2" crossOrigin="anonymous" /> // 2. å­—ä½“æ˜¾ç¤ºç­–ç•¥ @font-face { font-family: 'CustomFont'; src: url('/fonts/custom.woff2') format('woff2'); font-display: swap; /* ç«‹å³æ˜¾ç¤ºåå¤‡å­—ä½“ */ /* font-display: optional; çŸ­æš‚ç­‰å¾…åä½¿ç”¨åå¤‡å­—ä½“ */ /* font-display: fallback; çŸ­æš‚ç­‰å¾…ï¼Œéšè—çŸ­æ—¶é—´ */ } // 3. å­—ä½“å­é›†åŒ– // åªåŒ…å«ä½¿ç”¨çš„å­—ç¬¦ // ä½¿ç”¨fonttoolsæˆ–åœ¨çº¿å·¥å…·ç”Ÿæˆsubset // ========== ç¬¬ä¸‰æ–¹èµ„æºä¼˜åŒ– ========== // åŠ¨æ€åŠ è½½é‡å‹åº“ const loadGoogleMaps = () => { return new Promise((resolve) => { if (window.google) { resolve(window.google) return } const script = document.createElement('script') script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}` script.async = true script.onload = () => resolve(window.google) document.head.appendChild(script) }) } // ä½¿ç”¨åœºæ™¯ function MapComponent() { const [map, setMap] = useState(null) useEffect(() => { let mounted = true loadGoogleMaps().then(google => { if (mounted) { setMap(new google.maps.Map(/* ... */)) } }) return () => { mounted = false } }, []) return &lt;div ref={mapRef} /> } // ========== ç¼“å­˜ç­–ç•¥ ========== // Service Workerç¼“å­˜ // sw.js const CACHE_NAME = 'app-v1' const STATIC_CACHE = [ '/', '/styles/main.css', '/scripts/main.js' ] self.addEventListener('install', (event) => { event.waitUntil( caches.open(CACHE_NAME).then((cache) => { return cache.addAll(STATIC_CACHE) }) ) }) self.addEventListener('fetch', (event) => { event.respondWith( caches.match(event.request).then((response) => { return response || fetch(event.request) }) ) }) // ç½‘ç»œä¼˜å…ˆç­–ç•¥ async function networkFirst(request) { try { const response = await fetch(request) const cache = await caches.open(CACHE_NAME) cache.put(request, response.clone()) return response } catch { return caches.match(request) } } // ç¼“å­˜ä¼˜å…ˆç­–ç•¥ async function cacheFirst(request) { const cached = await caches.match(request) if (cached) return cached const response = await fetch(request) const cache = await caches.open(CACHE_NAME) cache.put(request, response.clone()) return response } // è¿‡æœŸç­–ç•¥ async function staleWhileRevalidate(request) { const cache = await caches.open(CACHE_NAME) const cached = await cache.match(request) const fetchPromise = fetch(request).then((response) => { cache.put(request, response.clone()) return response }) return cached || fetchPromise } å…­ã€æ„å»ºä¼˜åŒ– 6.1 Webpackä¼˜åŒ–é…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 // webpack.config.js const path = require('path') const TerserPlugin = require('terser-webpack-plugin') const CssMinimizerPlugin = require('css-minimizer-webpack-plugin') module.exports = { // ========== 1. æ„å»ºæ¨¡å¼ ========== mode: 'production', // ========== 2. ä»£ç åˆ†å‰² ========== optimization: { splitChunks: { chunks: 'all', cacheGroups: { // æ¡†æ¶ä»£ç å•ç‹¬æ‰“åŒ… framework: { test: /[\\/]node_modules[\\/](react|react-dom|vue)[\\/]/, name: 'framework', priority: 40 }, // UIåº“å•ç‹¬æ‰“åŒ… ui: { test: /[\\/]node_modules[\\/](@mui|@ant-design|element-plus)[\\/]/, name: 'ui', priority: 30 }, // å·¥å…·åº“ lib: { test: /[\\/]node_modules[\\/](lodash|axios|dayjs)[\\/]/, name: 'lib', priority: 20 }, // å…¬å…±ä»£ç  commons: { minChunks: 2, priority: 10, reuseExistingChunk: true } } }, // è¿è¡Œæ—¶ä»£ç å•ç‹¬æå– runtimeChunk: 'single', // å‹ç¼©é…ç½® minimize: true, minimizer: [ new TerserPlugin({ terserOptions: { parse: { ecma: 8 }, compress: { ecma: 5, warnings: false, comparisons: false, inline: 2, drop_console: true }, mangle: { safari10: true }, output: { ecma: 5, comments: false, ascii_only: true } } }), new CssMinimizerPlugin() ] }, // ========== 3. æ¨¡å—è§£æ ========== resolve: { // è·¯å¾„åˆ«å alias: { '@': path.resolve(__dirname, 'src'), '@components': path.resolve(__dirname, 'src/components'), '@utils': path.resolve(__dirname, 'src/utils') }, // æ‰©å±•å extensions: ['.js', '.jsx', '.ts', '.tsx', '.vue', '.json'], // æ¨¡å—æŸ¥æ‰¾è·¯å¾„ modules: ['node_modules', path.resolve(__dirname, 'src')] }, // ========== 4. ç¼“å­˜é…ç½® ========== cache: { type: 'filesystem', buildDependencies: { config: [__filename] } }, // ========== 5. è¾“å‡ºé…ç½® ========== output: { path: path.resolve(__dirname, 'dist'), filename: 'js/[name].[contenthash:8].js', chunkFilename: 'js/[name].[contenthash:8].chunk.js', // èµ„æºæ–‡ä»¶å assetModuleFilename: 'assets/[name].[hash:8][ext]' }, // ========== 6. æ€§èƒ½ä¼˜åŒ– ========== performance: { hints: 'warning', maxAssetSize: 244 * 1024, // 244KB maxEntrypointSize: 244 * 1024 } } 6.2 Viteä¼˜åŒ–é…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 // vite.config.ts import { defineConfig } from 'vite' import vue from '@vitejs/plugin-vue' import { visualizer } from 'rollup-plugin-visualizer' import viteCompression from 'vite-plugin-compression' export default defineConfig({ plugins: [ vue(), // æ„å»ºåˆ†æ visualizer({ open: true, gzipSize: true, brotliSize: true }), // Gzipå‹ç¼© viteCompression({ algorithm: 'gzip', ext: '.gz' }), // Brotliå‹ç¼© viteCompression({ algorithm: 'brotliCompress', ext: '.br' }) ], build: { // äº§ç‰©ç›®å½• outDir: 'dist', // é™æ€èµ„æºç›®å½• assetsDir: 'assets', // ç”Ÿæˆsource map sourcemap: false, // æ„å»ºåæ˜¯å¦ç”Ÿæˆ manifest.json manifest: true, // chunkå¤§å°è­¦å‘Šé˜ˆå€¼ chunkSizeWarningLimit: 1000, // ä»£ç åˆ†å‰² rollupOptions: { output: { // æ‰‹åŠ¨åˆ†åŒ… manualChunks: { 'vue-vendor': ['vue', 'vue-router', 'pinia'], 'ui-lib': ['element-plus'], 'utils': ['axios', 'lodash-es', 'dayjs'] }, // æ–‡ä»¶å‘½å chunkFileNames: 'js/[name]-[hash].js', entryFileNames: 'js/[name]-[hash].js', assetFileNames: '[ext]/[name]-[hash].[ext]' } }, // å‹ç¼© minify: 'terser', terserOptions: { compress: { drop_console: true, drop_debugger: true } } }, // ä¾èµ–ä¼˜åŒ– optimizeDeps: { include: ['vue', 'vue-router', 'pinia'], exclude: ['some-large-dep'] }, // CSSé…ç½® css: { modules: { localsConvention: 'camelCase' }, preprocessorOptions: { scss: { additionalData: `@import "@/styles/variables.scss";` } } }, // å¼€å‘æœåŠ¡å™¨ server: { port: 3000, open: true, proxy: { '/api': { target: 'http://localhost:8080', changeOrigin: true, rewrite: (path) => path.replace(/^\/api/, '') } } } }) ä¸ƒã€ç›‘æ§ä¸è°ƒè¯• 7.1 æ€§èƒ½ç›‘æ§ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 // ========== Core Web Vitalsç›‘æ§ ========== // utils/performanceMonitor.ts interface PerformanceMetrics { FCP: number // First Contentful Paint LCP: number // Largest Contentful Paint FID: number // First Input Delay CLS: number // Cumulative Layout Shift TTFB: number // Time to First Byte } export class PerformanceMonitor { private metrics: Partial&lt;PerformanceMetrics> = {} async collectMetrics(): Promise&lt;PerformanceMetrics> { // ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆ await new Promise(resolve => window.addEventListener('load', resolve)) // FCP const fcpEntry = performance.getEntriesByName('first-contentful-paint')[0] as any this.metrics.FCP = fcpEntry?.startTime || 0 // LCP this.metrics.LCP = await this.getLCP() // FID this.metrics.FID = await this.getFID() // CLS this.metrics.CLS = await this.getCLS() // TTFB const navigation = performance.getEntriesByType('navigation')[0] as any this.metrics.TTFB = navigation?.responseStart || 0 return this.metrics as PerformanceMetrics } private getLCP(): Promise&lt;number> { return new Promise(resolve => { new PerformanceObserver((list) => { const entries = list.getEntries() const lastEntry = entries[entries.length - 1] as any resolve(lastEntry?.startTime || 0) }).observe({ entryTypes: ['largest-contentful-paint'] }) }) } private getFID(): Promise&lt;number> { return new Promise(resolve => { new PerformanceObserver((list) => { const firstInput = list.getEntries()[0] as any resolve(firstInput?.processingStart - firstInput?.startTime || 0) }).observe({ entryTypes: ['first-input'] }) }) } private getCLS(): Promise&lt;number> { return new Promise(resolve => { let clsValue = 0 new PerformanceObserver((list) => { for (const entry of list.getEntries() as any[]) { if (!entry.hadRecentInput) { clsValue += entry.value } } resolve(clsValue) }).observe({ entryTypes: ['layout-shift'] }) }) } reportToAnalytics(metrics: PerformanceMetrics) { // å‘é€åˆ°åˆ†æå¹³å° analytics.track('page_performance', { fcp: metrics.FCP, lcp: metrics.LCP, fid: metrics.FID, cls: metrics.CLS, ttfb: metrics.TTFB, url: window.location.href, userAgent: navigator.userAgent }) } } // ========== é”™è¯¯ç›‘æ§ ========== // utils/errorTracker.ts export class ErrorTracker { private errors: Error[] = [] init() { // å…¨å±€é”™è¯¯æ•è· window.addEventListener('error', (event) => { this.captureError(event.error || new Error(event.message)) }) // Promiseæ‹’ç»æ•è· window.addEventListener('unhandledrejection', (event) => { this.captureError(event.reason) }) // Vueé”™è¯¯å¤„ç† if (typeof app !== 'undefined' && app.config) { app.config.errorHandler = (err, instance, info) => { this.captureError(err, { componentName: instance?.$options?.name, lifecycle: info }) } } } captureError(error: Error, context?: any) { const errorInfo = { message: error.message, stack: error.stack, timestamp: Date.now(), url: window.location.href, userAgent: navigator.userAgent, context } this.errors.push(error as any) // å‘é€åˆ°é”™è¯¯è¿½è¸ªæœåŠ¡ this.sendToService(errorInfo) } private sendToService(errorInfo: any) { // å‘é€åˆ°Sentryã€è‡ªå»ºæœåŠ¡ç­‰ fetch('/api/errors', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(errorInfo) }).catch(console.error) } } // ========== ç”¨æˆ·è¡Œä¸ºè¿½è¸ª ========== // utils/analytics.ts export class UserBehaviorTracker { private events: any[] = [] trackPageView() { this.trackEvent('page_view', { url: window.location.href, referrer: document.referrer, title: document.title }) } trackClick(element: HTMLElement) { this.trackEvent('click', { tagName: element.tagName, id: element.id, className: element.className, text: element.textContent?.substring(0, 50) }) } trackScroll(depth: number) { this.trackEvent('scroll', { scrollDepth: depth, pageHeight: document.body.scrollHeight }) } trackEngagement(duration: number) { this.trackEvent('engagement', { duration, interactions: this.events.length }) } private trackEvent(type: string, data: any) { const event = { type, data, timestamp: Date.now() } this.events.push(event) this.sendEvent(event) } private sendEvent(event: any) { // æ‰¹é‡å‘é€æˆ–å®æ—¶å‘é€ if (this.events.length >= 10) { this.flush() } } flush() { if (this.events.length === 0) return fetch('/api/analytics/events', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ events: this.events }) }).then(() => { this.events = [] }).catch(console.error) } } 7.2 è°ƒè¯•å·¥å…· 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 // ========== Vue DevToolsé›†æˆ ========== // å¼€å‘ç¯å¢ƒå¯ç”¨è°ƒè¯•åŠŸèƒ½ if (import.meta.env.DEV) { app.config.devtools = true // æ·»åŠ ç»„ä»¶åç§°ä¾¿äºè°ƒè¯• app.component('UserProfile', UserProfile) } // ========== React DevTools ========== // ä½¿ç”¨React Developer Tools Profiler import { Profiler } from 'react' function onRenderCallback( id, phase, actualDuration, baseDuration, startTime, commitTime ) { console.log({ id, phase, actualDuration, baseDuration, startTime, commitTime }) } &lt;Profiler id="UserProfile" onRender={onRenderCallback}> &lt;UserProfile /> &lt;/Profiler> // ========== è‡ªå®šä¹‰è°ƒè¯•å·¥å…· ========== // utils/debug.ts export const debug = { log: (...args: any[]) => { if (import.meta.env.DEV) { console.log('[DEBUG]', ...args) } }, group: (label: string, fn: () => void) => { if (import.meta.env.DEV) { console.group(label) fn() console.groupEnd() } }, time: (label: string) => { if (import.meta.env.DEV) { console.time(label) } }, timeEnd: (label: string) => { if (import.meta.env.DEV) { console.timeEnd(label) } }, track: (name: string, value: any) => { if (import.meta.env.DEV) { console.log(`[TRACK] ${name}:`, value) } } } // ä½¿ç”¨ç¤ºä¾‹ debug.time('dataFetch') fetchData().then(data => { debug.track('fetchedData', data) debug.timeEnd('dataFetch') }) æ€»ç»“ æ„å»ºç°ä»£å‰ç«¯æ¶æ„éœ€è¦ç»¼åˆè€ƒè™‘å¤šä¸ªç»´åº¦ï¼š
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ class=category-link>å‰ç«¯å¼€å‘</a><a href=/blog/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/ class=category-link>æ¶æ„è®¾è®¡</a></div><span class=post-date>2025-12-30</span><span class=post-author>æœ‰æ¡å·¥å…·å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to ç°ä»£å‰ç«¯æ¶æ„æ·±åº¦è§£æï¼šæ„å»ºå¯æ‰©å±•çš„å¤§å‹åº”ç”¨" href=/blog/articles/%E7%8E%B0%E4%BB%A3%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%E6%9E%84%E5%BB%BA%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84%E5%A4%A7%E5%9E%8B%E5%BA%94%E7%94%A8/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>WebAssemblyæ€§èƒ½ä¼˜åŒ–å®è·µï¼šçªç ´Webåº”ç”¨æ€§èƒ½ç“¶é¢ˆ</h2></header><div class=entry-content><p>æ·±å…¥æ¢è®¨WebAssemblyçš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œä»å†…å­˜ç®¡ç†åˆ°SIMDä¼˜åŒ–ï¼Œå¸®åŠ©å¼€å‘è€…æ„å»ºé«˜æ€§èƒ½çš„Webåº”ç”¨ã€‚</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ class=category-link>å‰ç«¯å¼€å‘</a></div><span class=post-date>2025-12-30</span><span class=post-author>æœ‰æ¡å·¥å…·å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to WebAssemblyæ€§èƒ½ä¼˜åŒ–å®è·µï¼šçªç ´Webåº”ç”¨æ€§èƒ½ç“¶é¢ˆ" href=/blog/articles/webassembly%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5%E7%AA%81%E7%A0%B4web%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E7%93%B6%E9%A2%88/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>å‰ç«¯æ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŠ è½½åˆ°æ¸²æŸ“çš„å…¨æ–¹ä½ä¼˜åŒ–</h2></header><div class=entry-content><p>æ·±å…¥æ¢è®¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæŠ€æœ¯ï¼ŒåŒ…æ‹¬èµ„æºåŠ è½½ä¼˜åŒ–ã€æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–ã€ç½‘ç»œä¼˜åŒ–å’ŒJavaScriptæ€§èƒ½ä¼˜åŒ–ï¼Œå¸®åŠ©ä½ æ‰“é€ ç§’å¼€çš„Webåº”ç”¨ã€‚</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ class=category-link>å‰ç«¯å¼€å‘</a></div><span class=post-date>2025-12-25</span><span class=post-author>æœ‰æ¡å·¥å…·å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to å‰ç«¯æ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŠ è½½åˆ°æ¸²æŸ“çš„å…¨æ–¹ä½ä¼˜åŒ–" href=/blog/articles/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97%E4%BB%8E%E5%8A%A0%E8%BD%BD%E5%88%B0%E6%B8%B2%E6%9F%93%E7%9A%84%E5%85%A8%E6%96%B9%E4%BD%8D%E4%BC%98%E5%8C%96/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>åç«¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»è¯Šæ–­åˆ°ä¼˜åŒ–çš„å®Œæ•´æ–¹æ³•è®º</h2></header><div class=entry-content><p>æ·±å…¥å‰–æåç«¯æ€§èƒ½ä¼˜åŒ–çš„å…¨æµç¨‹ï¼ŒåŒ…æ‹¬æ€§èƒ½è¯Šæ–­ã€æ•°æ®åº“ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥ã€å¹¶å‘å¤„ç†ã€å¼‚æ­¥ç¼–ç¨‹ç­‰å®æˆ˜æŠ€å·§ï¼Œå¸®åŠ©ä½ æ„å»ºé«˜æ€§èƒ½çš„åç«¯ç³»ç»Ÿã€‚</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/ class=category-link>åç«¯å¼€å‘</a></div><span class=post-date>2025-12-25</span><span class=post-author>æœ‰æ¡å·¥å…·å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to åç«¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»è¯Šæ–­åˆ°ä¼˜åŒ–çš„å®Œæ•´æ–¹æ³•è®º" href=/blog/articles/%E5%90%8E%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98%E4%BB%8E%E8%AF%8A%E6%96%AD%E5%88%B0%E4%BC%98%E5%8C%96%E7%9A%84%E5%AE%8C%E6%95%B4%E6%96%B9%E6%B3%95%E8%AE%BA/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Webæ€§èƒ½ç›‘æ§ä¸è¯Šæ–­å®æˆ˜ï¼šä»Core Web Vitalsåˆ°æ€§èƒ½ä¼˜åŒ–</h2></header><div class=entry-content><p>å¼•è¨€ Webæ€§èƒ½ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒå’Œä¸šåŠ¡è½¬åŒ–ã€‚ç°ä»£Webæ€§èƒ½ç›‘æ§å·²ç»ä»ç®€å•çš„é¡µé¢åŠ è½½æ—¶é—´ï¼Œå‘å±•åˆ°ç²¾ç»†åŒ–çš„ç”¨æˆ·ä½“éªŒæŒ‡æ ‡ä½“ç³»ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Webæ€§èƒ½ç›‘æ§çš„å®Œæ•´ä½“ç³»ï¼Œä»æŒ‡æ ‡å®šä¹‰åˆ°é‡‡é›†åˆ†æï¼Œå†åˆ°ä¼˜åŒ–å®è·µã€‚
ä¸€ã€Core Web Vitalsè¯¦è§£ 1.1 LCPï¼ˆæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼‰ å®šä¹‰ä¸æ ‡å‡†
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 // LCPæµ‹é‡é¡µé¢ä¸»è¦å†…å®¹åŠ è½½å®Œæˆçš„æ—¶é—´ // è‰¯å¥½ï¼šâ‰¤2.5ç§’ // éœ€æ”¹è¿›ï¼š2.5-4ç§’ // å·®ï¼š>4ç§’ // ä½¿ç”¨Performance Observeræµ‹é‡LCP function measureLCP() { return new Promise&lt;PerformanceEntry>((resolve) => { new PerformanceObserver((list) => { const entries = list.getEntries() const lastEntry = entries[entries.length - 1] resolve(lastEntry) }).observe({ entryTypes: ['largest-contentful-paint'] }) }) } // ä½¿ç”¨web-vitalsåº“ import { onLCP } from 'web-vitals' onLCP((metric) => { console.log('LCP:', metric.value) // ä¸ŠæŠ¥æ•°æ®åˆ°åˆ†æå¹³å° sendToAnalytics({ metric: 'LCP', value: metric.value, rating: metric.rating, // 'good' | 'needs-improvement' | 'poor' }) }) LCPä¼˜åŒ–ç­–ç•¥
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ class=category-link>æ€§èƒ½ä¼˜åŒ–</a><a href=/blog/categories/web%E5%BC%80%E5%8F%91/ class=category-link>Webå¼€å‘</a></div><span class=post-date>2025-12-24</span><span class=post-author>æœ‰æ¡å·¥å…·å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to Webæ€§èƒ½ç›‘æ§ä¸è¯Šæ–­å®æˆ˜ï¼šä»Core Web Vitalsåˆ°æ€§èƒ½ä¼˜åŒ–" href=/blog/articles/web%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E4%B8%8E%E8%AF%8A%E6%96%AD%E5%AE%9E%E6%88%98%E4%BB%8Ecore-web-vitals%E5%88%B0%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>2025å¹´å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—ï¼šä»Core Web Vitalsåˆ°ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h2></header><div class=entry-content><p>æ·±å…¥æ¢è®¨2025å¹´å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æœ€æ–°æŠ€æœ¯å’Œæœ€ä½³å®è·µï¼ŒåŒ…æ‹¬Core Web Vitalsä¼˜åŒ–ã€ä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€ç¼“å­˜ç­–ç•¥å’Œç°ä»£Webæ€§èƒ½å·¥å…·çš„ä½¿ç”¨ã€‚</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ class=category-link>å‰ç«¯å¼€å‘</a></div><span class=post-date>2025-12-22</span><span class=post-author>util.cn Team</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to 2025å¹´å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—ï¼šä»Core Web Vitalsåˆ°ç”¨æˆ·ä½“éªŒä¼˜åŒ–" href=/blog/articles/2025%E5%B9%B4%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97%E4%BB%8Ecore-web-vitals%E5%88%B0%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C%E4%BC%98%E5%8C%96/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>CDNåŠ é€Ÿä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åŸç†åˆ°é«˜çº§é…ç½®å®æˆ˜</h2></header><div class=entry-content><p>å…¨é¢è§£æCDNåŠ é€ŸæŠ€æœ¯çš„æ ¸å¿ƒåŸç†ã€é…ç½®æ–¹æ³•å’Œä¼˜åŒ–ç­–ç•¥ï¼ŒåŒ…æ‹¬ç¼“å­˜ç­–ç•¥ã€è¾¹ç¼˜è®¡ç®—ã€å®‰å…¨é˜²æŠ¤å’Œæ€§èƒ½ç›‘æ§ï¼Œå¸®åŠ©å¼€å‘è€…æ„å»ºé«˜æ€§èƒ½çš„å…¨çƒå†…å®¹åˆ†å‘ç½‘ç»œã€‚</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ class=category-link>æ€§èƒ½ä¼˜åŒ–</a></div><span class=post-date>2025-12-22</span><span class=post-author>util.cn Team</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to CDNåŠ é€Ÿä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åŸç†åˆ°é«˜çº§é…ç½®å®æˆ˜" href=/blog/articles/cdn%E5%8A%A0%E9%80%9F%E4%BC%98%E5%8C%96%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86%E5%88%B0%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE%E5%AE%9E%E6%88%98/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ç°ä»£å‰ç«¯å¼€å‘è°ƒè¯•æŠ€å·§ï¼šä»Consoleåˆ°DevToolsçš„å®Œæ•´æŒ‡å—</h2></header><div class=entry-content><p>æ·±å…¥æ¢è®¨ç°ä»£å‰ç«¯å¼€å‘ä¸­çš„è°ƒè¯•æŠ€å·§ï¼ŒåŒ…æ‹¬æµè§ˆå™¨DevToolsé«˜çº§åŠŸèƒ½ã€Source Mapé…ç½®ã€æ–­ç‚¹è°ƒè¯•ã€æ€§èƒ½åˆ†æå’Œå¸¸è§é—®é¢˜æ’æŸ¥æ–¹æ³•ã€‚</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ class=category-link>å‰ç«¯å¼€å‘</a></div><span class=post-date>2025-12-22</span><span class=post-author>util.cn Team</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to ç°ä»£å‰ç«¯å¼€å‘è°ƒè¯•æŠ€å·§ï¼šä»Consoleåˆ°DevToolsçš„å®Œæ•´æŒ‡å—" href=/blog/articles/%E7%8E%B0%E4%BB%A3%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%E4%BB%8Econsole%E5%88%B0devtools%E7%9A%84%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/></a></article><footer class=page-footer><nav class=pagination><a class=next href=/blog/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/page/2/>&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>Â© 2024-2025 æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢</span> Â·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>