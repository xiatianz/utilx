{"file":"websocket-test-CbFWglxU.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_unref","_ssrIncludeBooleanAttr","_ssrInterpolate","_ssrRenderAttr","_ssrRenderClass","_ssrRenderVNode","_createVNode","_resolveDynamicComponent","_ssrRenderList","_push","_parent","_createBlock","_toDisplayString"],"sources":["../../../../src/pages/tools/websocket-test.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-8xl mx-auto\">\n    <!-- 面包屑导航 -->\n    <!-- <Breadcrumb :category=\"category\" :tool=\"tool\" /> -->\n\n    <!-- Hero 头部区 -->\n    <div class=\"mb-8\">\n      <h1 class=\"text-3xl font-bold text-foreground mb-3\">WebSocket测试工具 - 在线WebSocket连接调试工具</h1>\n      <p class=\"text-muted-foreground\">一款专业的在线WebSocket测试工具。支持实时连接测试、消息收发、心跳检测等功能，帮助开发者快速调试WebSocket应用，纯前端实现，数据安全可靠。</p>\n    </div>\n\n    <!-- 工具交互区 -->\n    <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\n      <!-- 左侧配置面板 -->\n      <div class=\"lg:col-span-1 space-y-6\">\n        <!-- 连接配置 -->\n        <div class=\"bg-card border border-border rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4 flex items-center\">\n            <Settings class=\"h-5 w-5 mr-2 text-primary\" />\n            连接配置\n          </h2>\n\n          <div class=\"space-y-4\">\n            <!-- WebSocket URL -->\n            <div>\n              <label class=\"block text-sm font-medium text-foreground mb-2\">WebSocket URL</label>\n              <input\n                v-model=\"wsUrl\"\n                type=\"text\"\n                placeholder=\"wss://echo.websocket.org\"\n                class=\"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n                :disabled=\"isConnected\"\n              />\n            </div>\n\n            <!-- 协议 -->\n            <div>\n              <label class=\"block text-sm font-medium text-foreground mb-2\">子协议（可选）</label>\n              <input\n                v-model=\"protocol\"\n                type=\"text\"\n                placeholder=\"chat\"\n                class=\"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n                :disabled=\"isConnected\"\n              />\n            </div>\n\n            <!-- 快速示例 -->\n            <div>\n              <label class=\"block text-sm font-medium text-foreground mb-2\">快速示例</label>\n              <select\n                @change=\"loadExample\"\n                class=\"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n                :disabled=\"isConnected\"\n              >\n                <option value=\"\">选择示例...</option>\n                <option value=\"echo\">WebSocket Echo</option>\n                <option value=\"test\">测试服务器</option>\n              </select>\n            </div>\n\n            <!-- 连接按钮 -->\n            <button\n              @click=\"toggleConnection\"\n              :disabled=\"!wsUrl || connecting\"\n              class=\"w-full py-2 px-4 rounded-md transition-colors flex items-center justify-center\"\n              :class=\"isConnected\n                ? 'bg-destructive text-destructive-foreground hover:bg-destructive/90'\n                : 'bg-primary text-primary-foreground hover:bg-primary/90 disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed'\"\n            >\n              <Loader2 v-if=\"connecting\" class=\"h-5 w-5 mr-2 animate-spin\" />\n              <X v-else-if=\"isConnected\" class=\"h-5 w-5 mr-2\" />\n              <Wifi v-else class=\"h-5 w-5 mr-2\" />\n              {{ connecting ? '连接中...' : (isConnected ? '断开连接' : '连接') }}\n            </button>\n\n            <!-- 连接状态 -->\n            <div class=\"flex items-center justify-between p-3 rounded-lg\" :class=\"getStatusClass()\">\n              <span class=\"text-sm font-medium\">{{ getStatusText() }}</span>\n              <component :is=\"getStatusIcon()\" class=\"h-5 w-5\" />\n            </div>\n          </div>\n        </div>\n\n        <!-- 发送消息 -->\n        <div class=\"bg-card border border-border rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4 flex items-center\">\n            <Send class=\"h-5 w-5 mr-2 text-primary\" />\n            发送消息\n          </h2>\n\n          <div class=\"space-y-4\">\n            <!-- 消息类型 -->\n            <div>\n              <label class=\"block text-sm font-medium text-foreground mb-2\">消息类型</label>\n              <select\n                v-model=\"messageType\"\n                class=\"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n              >\n                <option value=\"text\">文本</option>\n                <option value=\"json\">JSON</option>\n                <option value=\"binary\">二进制</option>\n              </select>\n            </div>\n\n            <!-- 消息内容 -->\n            <div>\n              <label class=\"block text-sm font-medium text-foreground mb-2\">消息内容</label>\n              <textarea\n                v-model=\"messageContent\"\n                :placeholder=\"getMessagePlaceholder()\"\n                class=\"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm resize-none\"\n                rows=\"4\"\n              ></textarea>\n            </div>\n\n            <!-- 发送按钮 -->\n            <button\n              @click=\"sendMessage\"\n              :disabled=\"!isConnected || !messageContent\"\n              class=\"w-full bg-primary text-primary-foreground py-2 px-4 rounded-md hover:bg-primary/90 disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed transition-colors flex items-center justify-center\"\n            >\n              <Send class=\"h-5 w-5 mr-2\" />\n              发送消息\n            </button>\n\n            <!-- 心跳检测 -->\n            <div class=\"flex items-center justify-between\">\n              <span class=\"text-sm text-muted-foreground\">心跳检测</span>\n              <button\n                @click=\"sendPing\"\n                :disabled=\"!isConnected\"\n                class=\"px-3 py-1 text-sm bg-muted hover:bg-muted/80 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                发送 Ping\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- 连接信息 -->\n        <div v-if=\"connectionInfo\" class=\"bg-card border border-border rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4 flex items-center\">\n            <Info class=\"h-5 w-5 mr-2 text-primary\" />\n            连接信息\n          </h2>\n\n          <div class=\"space-y-3 text-sm\">\n            <div class=\"flex justify-between\">\n              <span class=\"text-muted-foreground\">连接时间:</span>\n              <span class=\"font-medium text-foreground\">{{ connectionInfo.connectedAt }}</span>\n            </div>\n            <div class=\"flex justify-between\">\n              <span class=\"text-muted-foreground\">持续时间:</span>\n              <span class=\"font-medium text-foreground\">{{ connectionInfo.duration }}</span>\n            </div>\n            <div class=\"flex justify-between\">\n              <span class=\"text-muted-foreground\">发送消息:</span>\n              <span class=\"font-medium text-foreground\">{{ connectionInfo.messagesSent }}</span>\n            </div>\n            <div class=\"flex justify-between\">\n              <span class=\"text-muted-foreground\">接收消息:</span>\n              <span class=\"font-medium text-foreground\">{{ connectionInfo.messagesReceived }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 右侧消息记录 -->\n      <div class=\"lg:col-span-2 space-y-6\">\n        <!-- 操作按钮 -->\n        <div class=\"bg-card border border-border rounded-lg p-4\">\n          <div class=\"flex items-center justify-between\">\n            <h2 class=\"text-lg font-semibold flex items-center\">\n              <MessageSquare class=\"h-5 w-5 mr-2 text-primary\" />\n              消息记录\n            </h2>\n            <div class=\"flex space-x-2\">\n              <button\n                @click=\"autoScroll = !autoScroll\"\n                :class=\"[\n                  'px-3 py-1 text-sm rounded-md transition-colors',\n                  autoScroll ? 'bg-primary/10 text-primary' : 'bg-muted hover:bg-muted/80 text-muted-foreground'\n                ]\"\n              >\n                <ArrowDown class=\"h-4 w-4 mr-1\" />\n                自动滚动\n              </button>\n              <button\n                @click=\"clearMessages\"\n                class=\"px-3 py-1 text-sm bg-destructive/10 text-destructive hover:bg-destructive/20 rounded-md transition-colors\"\n              >\n                <Trash2 class=\"h-4 w-4 mr-1\" />\n                清空\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- 消息列表 -->\n        <div ref=\"messageContainer\" class=\"bg-card border border-border rounded-lg p-6 h-[600px] overflow-y-auto\">\n          <div v-if=\"messages.length === 0\" class=\"flex flex-col items-center justify-center h-full text-muted-foreground\">\n            <Inbox class=\"h-16 w-16 mb-4\" />\n            <p class=\"text-lg\">暂无消息</p>\n            <p class=\"text-sm mt-2\">连接 WebSocket 后开始发送和接收消息</p>\n          </div>\n\n          <div v-else class=\"space-y-4\">\n            <div\n              v-for=\"(msg, index) in messages\"\n              :key=\"index\"\n              class=\"flex items-start space-x-3\"\n              :class=\"{ 'flex-row-reverse space-x-reverse': msg.type === 'sent' }\"\n            >\n              <div class=\"flex-shrink-0\">\n                <div class=\"w-8 h-8 rounded-full flex items-center justify-center\"\n                  :class=\"msg.type === 'sent' ? 'bg-primary/10' : 'bg-green-100 dark:bg-green-900/20'\">\n                  <component :is=\"msg.type === 'sent' ? Send : Download\"\n                    class=\"h-4 w-4\"\n                    :class=\"msg.type === 'sent' ? 'text-primary' : 'text-green-600 dark:text-green-400'\" />\n                </div>\n              </div>\n              <div class=\"flex-1 min-w-0\">\n                <div class=\"flex items-center space-x-2 mb-1\">\n                  <span class=\"text-sm font-medium\"\n                    :class=\"msg.type === 'sent' ? 'text-primary' : 'text-green-600 dark:text-green-400'\">\n                    {{ msg.type === 'sent' ? '发送' : '接收' }}\n                  </span>\n                  <span class=\"text-xs text-muted-foreground\">{{ formatTime(msg.timestamp) }}</span>\n                  <span v-if=\"msg.messageType\" class=\"text-xs px-2 py-0.5 bg-muted rounded text-muted-foreground\">\n                    {{ msg.messageType.toUpperCase() }}\n                  </span>\n                </div>\n                <div class=\"p-3 rounded-lg text-sm\"\n                  :class=\"msg.type === 'sent' ? 'bg-primary/5 dark:bg-primary/10' : 'bg-green-50 dark:bg-green-900/10'\">\n                  <pre v-if=\"msg.messageType === 'json'\" class=\"whitespace-pre-wrap\">{{ formatJsonMessage(msg.data) }}</pre>\n                  <p v-else class=\"whitespace-pre-wrap break-all\">{{ msg.data }}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- SEO 内容长尾区 -->\n    <div class=\"p-6 mb-12 relative\">\n      <!-- 折叠按钮 -->\n      <button\n        @click=\"toggleSeoContent\"\n        class=\"absolute top-4 right-4 text-muted-foreground hover:text-foreground transition-colors\"\n        :title=\"isSeoContentVisible ? '折叠内容' : '展开内容'\"\n      >\n        <HelpCircle v-if=\"!isSeoContentVisible\" class=\"w-5 h-5\" />\n        <ChevronUp v-else class=\"w-5 h-5\" />\n      </button>\n\n      <!-- 内容区域 -->\n      <div v-show=\"isSeoContentVisible\">\n        <h2 class=\"text-2xl font-bold text-foreground mb-4 flex items-center\">\n          <span class=\"text-primary mr-2\">#</span>\n          什么是 WebSocket？\n        </h2>\n        <p class=\"text-muted-foreground mb-4\">\n          WebSocket 是一种在单个TCP连接上进行全双工通信的协议。WebSocket使得客户端和服务器之间的数据交换变得更加简单，\n          允许服务端主动向客户端推送数据。在WebSocket API中，浏览器和服务器只需要完成一次握手，\n          两者之间就直接可以创建持久性的连接，并进行双向数据传输。\n        </p>\n        <p class=\"text-muted-foreground mb-6\">\n          相较于传统的HTTP轮询方式，WebSocket具有更低的延迟和更高的效率，特别适合需要实时通信的应用场景，\n          如在线聊天、实时数据推送、股票行情、在线游戏等。使用WebSocket测试工具可以帮助开发者快速验证WebSocket服务器的功能，\n          调试通信问题，确保应用的稳定性和可靠性。\n        </p>\n\n        <h2 class=\"text-2xl font-bold text-foreground mt-8 mb-4 flex items-center\">\n          <span class=\"text-primary mr-2\">#</span>\n          如何使用本工具\n        </h2>\n        <ol class=\"list-decimal list-inside space-y-2 text-muted-foreground mb-6\">\n          <li>输入WebSocket服务器的URL地址（支持ws://和wss://协议）</li>\n          <li>可选填子协议，如chat、soap等</li>\n          <li>点击\"连接\"按钮建立WebSocket连接</li>\n          <li>连接成功后，可以选择消息类型（文本、JSON、二进制）并发送消息</li>\n          <li>实时查看服务器返回的消息和连接状态</li>\n          <li>使用心跳检测功能保持连接活跃</li>\n        </ol>\n\n        <h2 class=\"text-2xl font-bold text-foreground mt-8 mb-4 flex items-center\">\n          <span class=\"text-primary mr-2\">#</span>\n          核心功能特性\n        </h2>\n        <ul class=\"list-disc list-inside space-y-2 text-muted-foreground mb-6\">\n          <li><strong>实时通信</strong>: 支持WebSocket的实时双向通信，立即查看消息收发情况</li>\n          <li><strong>多种消息格式</strong>: 支持文本、JSON和二进制消息的发送和接收</li>\n          <li><strong>连接状态监控</strong>: 实时显示连接状态、连接时长和消息统计</li>\n          <li><strong>心跳检测</strong>: 支持发送Ping帧保持连接活跃，防止连接超时</li>\n          <li><strong>消息历史记录</strong>: 保存完整的消息收发记录，支持自动滚动和清空功能</li>\n          <li><strong>安全可靠</strong>: 纯前端实现，所有数据在本地处理，确保隐私安全</li>\n          <li><strong>快速示例</strong>: 内置常用WebSocket服务器示例，方便快速测试</li>\n        </ul>\n\n        <h2 class=\"text-2xl font-bold text-foreground mt-8 mb-4 flex items-center\">\n          <span class=\"text-primary mr-2\">#</span>\n          常见问题 (FAQ)\n        </h2>\n        <div class=\"space-y-4\">\n          <div>\n            <h3 class=\"text-lg font-semibold text-foreground\">WebSocket 和 HTTP 轮询有什么区别？</h3>\n            <p class=\"text-muted-foreground mt-1\">\n              WebSocket是全双工通信协议，客户端和服务器可以同时发送数据，而HTTP轮询需要客户端不断发起请求。\n              WebSocket连接建立后可以持久保持，减少了握手开销，延迟更低，效率更高。\n              对于需要频繁通信的应用，WebSocket是更好的选择。\n            </p>\n          </div>\n          <div>\n            <h3 class=\"text-lg font-semibold text-foreground\">为什么 WebSocket 连接失败？</h3>\n            <p class=\"text-muted-foreground mt-1\">\n              可能的原因包括：URL格式错误、服务器不支持WebSocket、防火墙阻止连接、SSL证书问题（对于wss://）等。\n              请检查URL是否正确，确保服务器正常运行，如果是wss连接，检查证书是否有效。\n            </p>\n          </div>\n          <div>\n            <h3 class=\"text-lg font-semibold text-foreground\">如何保持 WebSocket 连接活跃？</h3>\n            <p class=\"text-muted-foreground mt-1\">\n              可以使用心跳检测机制，定期发送Ping帧，服务器会响应Pong帧。\n              本工具提供了\"发送Ping\"按钮，可以手动发送心跳。在实际应用中，建议实现自动心跳机制，\n              例如每30秒发送一次心跳，防止连接因超时而断开。\n            </p>\n          </div>\n          <div>\n            <h3 class=\"text-lg font-semibold text-foreground\">WebSocket 支持哪些消息类型？</h3>\n            <p class=\"text-muted-foreground mt-1\">\n              WebSocket协议支持两种消息类型：文本消息和二进制消息。\n              文本消息可以包含任何UTF-8编码的文本，如普通字符串、JSON数据等。\n              二进制消息可以传输任何二进制数据，如图片、音频、视频、Protocol Buffers等。\n              本工具提供了便捷的选项来发送不同类型的消息。\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 相关推荐区 -->\n    <section class=\"mb-12\">\n      <h2 class=\"text-2xl font-bold text-foreground mb-4\">您可能还需要...</h2>\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <NuxtLink\n          v-for=\"relatedTool in relatedTools\"\n          :key=\"relatedTool.id\"\n          :to=\"`/tools/${relatedTool.id}`\"\n          class=\"block p-4 bg-card border border-border rounded-lg hover:bg-accent transition-colors\"\n        >\n          <div class=\"flex items-center gap-2 mb-2\">\n            <component\n              :is=\"iconMap[relatedTool.icon]\"\n              class=\"w-5 h-5 text-primary\"\n            />\n            <span class=\"font-medium text-foreground\">{{ relatedTool.name }}</span>\n          </div>\n          <p class=\"text-sm text-muted-foreground line-clamp-2\">{{ relatedTool.description }}</p>\n        </NuxtLink>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { ref, nextTick, onMounted, onUnmounted, watch, computed } from 'vue'\nimport { useSeoMeta } from 'nuxt/app'\nimport {\n  Settings, Send, Wifi, X, Loader2, Info, MessageSquare,\n  ArrowDown, Trash2, Inbox, Download, HelpCircle, ChevronUp,\n  Globe, Code, Lock, Shield, Clock, Hash, Terminal,\n  FileText, Zap, Radio, Server\n} from 'lucide-vue-next'\nimport { tools } from '~/data/tools'\nimport { categories } from '~/data/categories'\nimport { addRecentTool } from '~/composables/useTools'\nimport Breadcrumb from '~/components/Breadcrumb.vue'\n\ndefinePageMeta({\n  layout: 'default'\n})\n\n// SEO配置\nuseSeoMeta({\n  title: 'WebSocket测试工具 - 在线WebSocket连接调试工具',\n  meta: [\n    { name: 'description', content: '专业的在线WebSocket测试工具，支持实时连接测试、消息收发、心跳检测等功能，帮助开发者快速调试WebSocket应用，纯前端实现，数据安全可靠。' },\n    { name: 'keywords', content: 'WebSocket测试,WebSocket客户端,实时通信,WebSocket调试,WSS,WS,在线工具' }\n  ]\n})\n\n// 定义当前工具和分类\nconst tool = tools.find(t => t.id === 'websocket-test')\nconst category = categories.find(c => c.id === 'network')\n\n// 响应式数据\nconst wsUrl = ref('wss://echo.websocket.org')\nconst protocol = ref('')\nconst messageType = ref('text')\nconst messageContent = ref('')\nconst isConnected = ref(false)\nconst connecting = ref(false)\nconst autoScroll = ref(true)\nconst messages = ref([])\nconst connectionInfo = ref(null)\nconst ws = ref(null)\nconst messageContainer = ref(null)\n\n// SEO内容折叠状态\nconst isSeoContentVisible = ref(true)\n\n// 定时器\nlet durationTimer = null\n\n// 图标映射\nconst iconMap = {\n  Globe, Code, Lock, Shield, Clock, Hash, Terminal,\n  FileText, Zap, Radio, Server, Wifi\n}\n\n// 相关工具\nconst relatedTools = computed(() => {\n  // 获取相关工具：同一分类下的其他工具 + 推荐工具\n  const sameCategory = tools.filter(t =>\n    t.category === 'network' && t.id !== 'websocket-test'\n  ).slice(0, 2)\n\n  // 添加一些推荐工具\n  const recommended = [\n    tools.find(t => t.id === 'http-client'),\n    tools.find(t => t.id === 'api-doc'),\n    tools.find(t => t.id === 'json-formatter'),\n    tools.find(t => t.id === 'base64-encoder')\n  ].filter(Boolean)\n\n  return [...sameCategory, ...recommended].slice(0, 4)\n})\n\n// 监听消息变化，自动滚动\nwatch(messages, () => {\n  if (autoScroll.value) {\n    nextTick(() => {\n      scrollToBottom()\n    })\n  }\n}, { deep: true })\n\n// 方法\nconst toggleConnection = () => {\n  if (isConnected.value) {\n    disconnect()\n  } else {\n    connect()\n  }\n}\n\nconst connect = () => {\n  if (!wsUrl.value || connecting.value) return\n\n  connecting.value = true\n\n  try {\n    // 创建WebSocket连接\n    ws.value = protocol.value\n      ? new WebSocket(wsUrl.value, protocol.value)\n      : new WebSocket(wsUrl.value)\n\n    // 设置事件监听器\n    ws.value.onopen = (event) => {\n      isConnected.value = true\n      connecting.value = false\n      connectionInfo.value = {\n        connectedAt: new Date().toLocaleTimeString(),\n        duration: '0秒',\n        messagesSent: 0,\n        messagesReceived: 0\n      }\n\n      addMessage({\n        type: 'system',\n        data: '已连接到 WebSocket 服务器',\n        timestamp: new Date()\n      })\n\n      // 开始计算连接时长\n      startDurationTimer()\n    }\n\n    ws.value.onclose = (event) => {\n      isConnected.value = false\n      connecting.value = false\n      stopDurationTimer()\n\n      addMessage({\n        type: 'system',\n        data: `连接已关闭 (${event.code}: ${event.reason || '未知原因'})`,\n        timestamp: new Date()\n      })\n\n      connectionInfo.value = null\n    }\n\n    ws.value.onerror = (event) => {\n      connecting.value = false\n      addMessage({\n        type: 'error',\n        data: '连接错误：' + (event.message || '未知错误'),\n        timestamp: new Date()\n      })\n    }\n\n    ws.value.onmessage = (event) => {\n      // 更新接收消息计数\n      if (connectionInfo.value) {\n        connectionInfo.value.messagesReceived++\n      }\n\n      // 判断消息类型\n      let msgType = 'text'\n      let data = event.data\n\n      if (data instanceof Blob) {\n        msgType = 'binary'\n        // 这里可以处理二进制数据\n        data = '[二进制数据]'\n      } else {\n        try {\n          const parsed = JSON.parse(data)\n          msgType = 'json'\n          data = parsed\n        } catch {\n          // 保持原始文本\n        }\n      }\n\n      addMessage({\n        type: 'received',\n        data: data,\n        messageType: msgType,\n        timestamp: new Date()\n      })\n    }\n\n  } catch (error) {\n    connecting.value = false\n    addMessage({\n      type: 'error',\n      data: '创建连接失败：' + error.message,\n      timestamp: new Date()\n    })\n  }\n}\n\nconst disconnect = () => {\n  if (ws.value) {\n    ws.value.close()\n    ws.value = null\n  }\n  stopDurationTimer()\n}\n\nconst sendMessage = () => {\n  if (!isConnected.value || !messageContent.value || !ws.value) return\n\n  try {\n    let data = messageContent.value\n    let msgType = messageType.value\n\n    // 根据类型处理消息\n    if (msgType === 'json') {\n      try {\n        JSON.parse(data) // 验证JSON格式\n      } catch {\n        addMessage({\n          type: 'error',\n          data: 'JSON 格式错误',\n          timestamp: new Date()\n        })\n        return\n      }\n    } else if (msgType === 'binary') {\n      // 模拟二进制数据\n      data = new TextEncoder().encode(data)\n    }\n\n    // 发送消息\n    ws.value.send(data)\n\n    // 更新发送计数\n    if (connectionInfo.value) {\n      connectionInfo.value.messagesSent++\n    }\n\n    // 添加到消息记录\n    addMessage({\n      type: 'sent',\n      data: messageType.value === 'binary' ? '[二进制数据]' : messageContent.value,\n      messageType: messageType.value,\n      timestamp: new Date()\n    })\n\n    // 清空输入框\n    messageContent.value = ''\n\n  } catch (error) {\n    addMessage({\n      type: 'error',\n      data: '发送失败：' + error.message,\n      timestamp: new Date()\n    })\n  }\n}\n\nconst sendPing = () => {\n  if (!isConnected.value || !ws.value) return\n\n  try {\n    // 发送心跳\n    ws.value.send('ping')\n\n    addMessage({\n      type: 'system',\n      data: '发送 Ping',\n      timestamp: new Date()\n    })\n  } catch (error) {\n    addMessage({\n      type: 'error',\n      data: '发送 Ping 失败：' + error.message,\n      timestamp: new Date()\n    })\n  }\n}\n\nconst loadExample = (event) => {\n  const examples = {\n    echo: {\n      url: 'wss://echo.websocket.org',\n      protocol: ''\n    },\n    test: {\n      url: 'wss://websocket-echo.com',\n      protocol: ''\n    }\n  }\n\n  const example = examples[event.target.value]\n  if (example) {\n    wsUrl.value = example.url\n    protocol.value = example.protocol\n  }\n  event.target.value = ''\n}\n\nconst addMessage = (msg) => {\n  messages.value.push(msg)\n\n  // 限制消息数量\n  if (messages.value.length > 100) {\n    messages.value = messages.value.slice(-100)\n  }\n}\n\nconst clearMessages = () => {\n  messages.value = []\n}\n\nconst scrollToBottom = () => {\n  if (messageContainer.value) {\n    messageContainer.value.scrollTop = messageContainer.value.scrollHeight\n  }\n}\n\nconst getStatusClass = () => {\n  if (connecting.value) return 'bg-yellow-100 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400'\n  if (isConnected.value) return 'bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400'\n  return 'bg-muted text-muted-foreground'\n}\n\nconst getStatusText = () => {\n  if (connecting.value) return '连接中'\n  if (isConnected.value) return '已连接'\n  return '未连接'\n}\n\nconst getStatusIcon = () => {\n  if (connecting.value) return Loader2\n  if (isConnected.value) return Wifi\n  return X\n}\n\nconst getMessagePlaceholder = () => {\n  switch (messageType.value) {\n    case 'json':\n      return '{\"type\": \"message\", \"content\": \"Hello WebSocket!\"}'\n    case 'binary':\n      return '二进制数据内容'\n    default:\n      return '输入要发送的消息...'\n  }\n}\n\nconst formatJsonMessage = (data) => {\n  try {\n    return JSON.stringify(data, null, 2)\n  } catch {\n    return data\n  }\n}\n\nconst formatTime = (time) => {\n  return time.toLocaleTimeString()\n}\n\nconst startDurationTimer = () => {\n  let seconds = 0\n  durationTimer = setInterval(() => {\n    seconds++\n    if (connectionInfo.value) {\n      if (seconds < 60) {\n        connectionInfo.value.duration = `${seconds}秒`\n      } else if (seconds < 3600) {\n        connectionInfo.value.duration = `${Math.floor(seconds / 60)}分${seconds % 60}秒`\n      } else {\n        const hours = Math.floor(seconds / 3600)\n        const minutes = Math.floor((seconds % 3600) / 60)\n        connectionInfo.value.duration = `${hours}小时${minutes}分`\n      }\n    }\n  }, 1000)\n}\n\nconst stopDurationTimer = () => {\n  if (durationTimer) {\n    clearInterval(durationTimer)\n    durationTimer = null\n  }\n}\n\n// 切换SEO内容显示状态\nconst toggleSeoContent = () => {\n  isSeoContentVisible.value = !isSeoContentVisible.value\n}\n\n// 添加到最近使用\nif (tool) {\n  addRecentTool(tool.id)\n}\n\n// 生命周期\nonUnmounted(() => {\n  disconnect()\n})\n</script>"],"version":3}