import{_ as Q}from"./D4g1_bQ7.js";import{q as W,u as z,r as c,e as Y,p as X,f as Z,c as a,a as t,y as J,h as C,P as ee,R as te,v as oe,z as A,V as E,t as x,F as w,k as V,n as k,j,l as se,x as re,m as ne,o as l,w as le,C as ie}from"./DEsTSaKd.js";import{t as b}from"./B-fbZyPE.js";import{c as ae}from"./3IwUeceH.js";import{C as ue,a as de}from"./BaG5JeHk.js";import{G as ce}from"./sCtjrDU-.js";import{F as me}from"./OWHW6ZUB.js";import{G as pe}from"./B8QRyNMs.js";import{F as fe}from"./BIbbmz6B.js";import{R as xe}from"./b4Up8kzW.js";import{T as ge}from"./C1JgnPlw.js";import{H as ve}from"./ZC22Qqbx.js";import{L as be}from"./BP6Cft7q.js";import{D as ye}from"./DESX2TF9.js";import{F as Se}from"./C-LEKrTT.js";import{C as he}from"./vEvaw0F6.js";import{I as Ce}from"./4T928kbW.js";import{W as we}from"./BUYFD_dQ.js";import{T as Ve}from"./Z_ZHHb8E.js";import{C as ke}from"./BuCd20m7.js";import{S as Oe}from"./w5JABn4e.js";import{L as Je}from"./DbWJs76d.js";import{F as Ne}from"./CRvidJJ3.js";import"./wERbHxDK.js";const _e={class:"max-w-8xl mx-auto"},Fe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Ae={class:"flex flex-col h-full"},Ee={class:"flex items-center justify-between mb-2"},je={class:"flex items-center gap-2"},qe={class:"flex items-center gap-2"},Le=["onKeydown"],Re={key:0,class:"mt-2 p-2 bg-destructive/20 text-destructive text-sm rounded"},Ue={class:"flex flex-col h-full"},De={key:0,class:"mb-12"},Me={class:"overflow-auto border border-border rounded-lg"},Be={class:"min-w-full divide-y divide-border"},Te={class:"bg-muted"},Pe={class:"bg-card divide-y divide-border"},Ke={key:0,class:"text-sm text-muted-foreground mt-2"},$e={class:"p-6 mb-12 relative"},Ge=["title"],He={class:"mb-12"},Ie={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Qe={class:"flex items-center gap-2 mb-2"},We={class:"font-medium text-foreground"},ze={class:"text-sm text-muted-foreground line-clamp-2"},Ct={__name:"json-to-csv",setup(Ye){W({title:"JSON转CSV - 在线JSON转CSV格式转换工具",description:"免费在线 JSON to CSV 转换工具，支持将 JSON 数组或对象转换为 CSV 格式，自定义分隔符，支持嵌套数据处理。纯本地计算，数据安全。",keywords:"JSON转CSV, JSON to CSV, JSON CSV转换, 数据格式转换, 表格数据, 在线工具",author:"Util工具箱",ogTitle:"JSON转CSV - 在线JSON转CSV格式转换工具",ogDescription:"免费在线 JSON to CSV 转换工具，支持将 JSON 数组或对象转换为 CSV 格式。",ogType:"website",twitterCard:"summary_large_image"}),z({script:[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"WebApplication",name:"JSON转CSV工具",description:"免费在线 JSON to CSV 转换工具，支持将 JSON 数组或对象转换为 CSV 格式",url:"https://util.example.com/tools/json-to-csv",applicationCategory:"DeveloperApplication",operatingSystem:"Any",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"},featureList:["JSON转CSV","自定义分隔符","嵌套数据处理","包含表头选项","本地处理"]})}]}),ne();const N=b.find(o=>o.id==="json-to-csv");ae.find(o=>o.id==="format");const p=c(""),u=c(""),y=c(""),g=c(","),S=c(!0),d=c([]),h=c(!0),m=c(null),v=c(!1),q={FileText:Ne,Lock:Je,Shield:Oe,Clock:ke,Type:Ve,Wifi:we,Image:Ce,Code:he,FileJson:Se,Database:ye,Link:be,Hash:ve,Timer:ge,Regex:xe,FileDiff:fe,Globe:pe,FolderOpen:me,GitBranch:ce},L=Y(()=>{const o=b.filter(r=>r.category==="format"&&r.id!=="json-to-csv").slice(0,3),e=[b.find(r=>r.id==="csv-formatter"),b.find(r=>r.id==="json-formatter"),b.find(r=>r.id==="json-to-xml"),b.find(r=>r.id==="json-to-yaml")].filter(Boolean);return[...o,...e].slice(0,4)}),O=()=>{if(p.value)try{y.value="";const o=JSON.parse(p.value);if(Array.isArray(o))_(o);else{const e=R(o);if(e)_(o[e]);else throw new Error("输入必须是数组格式")}}catch(o){y.value=`转换失败: ${o.message}`,u.value="",d.value=[]}},R=o=>{for(const e in o)if(Array.isArray(o[e]))return e;return null},_=o=>{if(!o.length){u.value="",d.value=[];return}const e=o.map(n=>F(n)),r=[...new Set(e.flatMap(n=>Object.keys(n)))],s=[];S.value&&s.push(r.join(g.value));for(const n of e){const i=r.map(f=>{const I=n[f]||"";return U(String(I))});s.push(i.join(g.value))}u.value=s.join(`
`),D(r,s)},F=(o,e="",r={})=>{for(const s in o)if(o.hasOwnProperty(s)){const n=e?`${e}.${s}`:s;typeof o[s]=="object"&&o[s]!==null&&!Array.isArray(o[s])?F(o[s],n,r):Array.isArray(o[s])?r[n]=o[s].join("; "):r[n]=o[s]}return r},U=o=>o.includes(g.value)||o.includes(`
`)||o.includes('"')?`"${o.replace(/"/g,'""')}"`:o,D=(o,e)=>{const r=[];S.value&&r.push(o);const s=new M(g.value);for(let n=S.value?1:0;n<Math.min(e.length,6);n++){const i=s.parseLine(e[n]);r.push(i)}d.value=r};class M{constructor(e){this.delimiter=e}parseLine(e){const r=[];let s="",n=!1,i=0;for(;i<e.length;){const f=e[i];f==='"'?n&&e[i+1]==='"'?(s+='"',i+=2):(n=!n,i++):f===this.delimiter&&!n?(r.push(s),s="",i++):(s+=f,i++)}return r.push(s),r}}const B=()=>{p.value="",u.value="",y.value="",d.value=[]},T=async()=>{try{const o=await navigator.clipboard.readText();p.value=o}catch(o){console.error("粘贴失败:",o)}},P=()=>{p.value=`[
  {
    "id": 1,
    "name": "John Doe",
    "email": "john@example.com",
    "age": 30,
    "address": {
      "street": "123 Main St",
      "city": "New York",
      "country": "USA"
    },
    "hobbies": ["reading", "swimming", "coding"],
    "active": true
  },
  {
    "id": 2,
    "name": "Jane Smith",
    "email": "jane@example.com",
    "age": 25,
    "address": {
      "street": "456 Oak Ave",
      "city": "Los Angeles",
      "country": "USA"
    },
    "hobbies": ["painting", "yoga"],
    "active": true
  },
  {
    "id": 3,
    "name": "Bob Johnson",
    "email": "bob@example.com",
    "age": 35,
    "address": {
      "street": "789 Pine Rd",
      "city": "Chicago",
      "country": "USA"
    },
    "hobbies": ["gaming", "cooking", "traveling"],
    "active": false
  }
]`},K=async()=>{if(u.value)try{await navigator.clipboard.writeText(u.value)}catch(o){console.error("复制失败:",o)}},$=()=>{if(!u.value)return;const o=new Blob([u.value],{type:"text/csv"}),e=URL.createObjectURL(o),r=document.createElement("a");r.href=e,r.download="converted.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)},G=()=>{m.value&&(v.value?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():m.value.requestFullscreen?m.value.requestFullscreen():m.value.webkitRequestFullscreen?m.value.webkitRequestFullscreen():m.value.msRequestFullscreen&&m.value.msRequestFullscreen(),v.value=!v.value)},H=()=>{h.value=!h.value};return N&&X(N.id),Z(()=>{document.addEventListener("fullscreenchange",()=>{v.value=!!document.fullscreenElement}),document.addEventListener("webkitfullscreenchange",()=>{v.value=!!document.webkitFullscreenElement}),document.addEventListener("msfullscreenchange",()=>{v.value=!!document.msFullscreenElement})}),(o,e)=>{const r=Q;return l(),a("div",_e,[e[11]||(e[11]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-foreground mb-3"},"JSON转CSV - 在线JSON转CSV格式转换工具"),t("p",{class:"text-muted-foreground"},"一款免费的在线 JSON to CSV Converter。支持将 JSON 数组或对象转换为 CSV 格式，自定义分隔符，支持嵌套数据处理。纯本地计算，数据隐私绝对安全。")],-1)),t("div",Fe,[t("div",Ae,[t("div",{class:"flex items-center justify-between mb-3"},[e[3]||(e[3]=t("label",{class:"text-sm font-medium text-foreground"},"输入JSON",-1)),t("div",{class:"flex gap-2"},[t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:B}," 清空 "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:T}," 粘贴 "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:P}," 示例数据 ")])]),t("div",Ee,[t("div",je,[e[5]||(e[5]=t("label",{class:"text-xs text-muted-foreground"},"分隔符:",-1)),C(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),class:"text-xs bg-muted border border-border rounded px-2 py-1"},[...e[4]||(e[4]=[t("option",{value:","},"逗号 (,)",-1),t("option",{value:";"},"分号 (;)",-1),t("option",{value:"\\t"},"制表符 (\\t)",-1),t("option",{value:"|"},"竖线 (|)",-1)])],512),[[ee,g.value]])]),t("div",qe,[e[6]||(e[6]=t("label",{class:"text-xs text-muted-foreground"},"包含表头:",-1)),C(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=s=>S.value=s),class:"rounded"},null,512),[[te,S.value]])])]),C(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),class:"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-none font-mono text-sm",placeholder:"在此输入JSON数据（数组格式或包含数组的对象）...",onKeydown:[A(E(O,["ctrl"]),["enter"]),A(E(O,["meta"]),["enter"])]},null,40,Le),[[oe,p.value]]),y.value?(l(),a("div",Re,x(y.value),1)):J("",!0)]),t("div",Ue,[t("div",{class:"flex items-center justify-between mb-3"},[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-foreground"},"CSV输出",-1)),t("div",{class:"flex gap-2"},[t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:K}," 复制 "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:$}," 下载CSV "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:G}," 全屏模式 ")])]),t("pre",{ref_key:"outputPre",ref:m,class:"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg overflow-auto font-mono text-sm whitespace-pre-wrap"},x(u.value),513)])]),t("div",{class:"flex justify-center mb-12"},[t("button",{onClick:O,class:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium"}," 转换为 CSV ")]),d.value.length?(l(),a("div",De,[e[8]||(e[8]=t("h2",{class:"text-xl font-bold text-foreground mb-4"},"CSV 预览",-1)),t("div",Me,[t("table",Be,[t("thead",Te,[t("tr",null,[(l(!0),a(w,null,V(d.value[0],s=>(l(),a("th",{key:s,class:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider"},x(s),1))),128))])]),t("tbody",Pe,[(l(!0),a(w,null,V(d.value.slice(1,6),(s,n)=>(l(),a("tr",{key:n},[(l(!0),a(w,null,V(s,(i,f)=>(l(),a("td",{key:f,class:"px-6 py-4 whitespace-nowrap text-sm text-foreground"},x(i),1))),128))]))),128))])])]),d.value.length>6?(l(),a("p",Ke," 显示前 5 行数据，共 "+x(d.value.length-1)+" 行 ",1)):J("",!0)])):J("",!0),t("div",$e,[t("button",{onClick:H,class:"absolute top-4 right-4 text-muted-foreground hover:text-foreground transition-colors",title:h.value?"折叠内容":"展开内容"},[h.value?(l(),k(j(de),{key:1,class:"w-5 h-5"})):(l(),k(j(ue),{key:0,class:"w-5 h-5"}))],8,Ge),C(t("div",null,[...e[9]||(e[9]=[re('<h2 class="text-2xl font-bold text-foreground mb-4 flex items-center"><span class="text-primary mr-2">#</span> 什么是 JSON 转 CSV？ </h2><p class="text-muted-foreground mb-4"> JSON（JavaScript Object Notation）和 CSV（Comma-Separated Values）是两种常用的数据格式。 JSON 转 CSV 是将 JSON 数据转换为表格形式的 CSV 格式的过程。CSV 是一种简单的文本格式， 使用逗号或其他分隔符分隔值，每行代表一条记录，非常适合在 Excel 等表格软件中处理。 </p><p class="text-muted-foreground"> 转换过程中，JSON 的对象结构会被扁平化，嵌套的对象会被展开为单独的列。 数组会被转换为多行数据，使得数据可以在表格软件中轻松查看和分析。 </p><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 如何使用本工具 </h2><ol class="list-decimal list-inside space-y-2 text-muted-foreground mb-6"><li>将您的 JSON 数据粘贴到左侧输入框（必须是数组格式）</li><li>选择 CSV 分隔符（逗号、分号、制表符等）</li><li>选择是否包含表头行</li><li>点击&quot;转换为 CSV&quot;按钮或使用快捷键 Ctrl+Enter</li><li>查看右侧转换结果和下方预览表格</li></ol><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 转换规则 </h2><ul class="list-disc list-inside space-y-2 text-muted-foreground mb-6"><li><strong>数组转换</strong>: JSON 数组的每个元素转换为 CSV 的一行</li><li><strong>扁平化处理</strong>: 嵌套对象会被扁平化，使用点号连接键名</li><li><strong>键名提取</strong>: 所有对象的键会被提取作为 CSV 的列名</li><li><strong>缺失值处理</strong>: 如果某行缺少某列的值，会留空</li><li><strong>特殊字符转义</strong>: 包含分隔符或换行符的值会被引号包围</li></ul><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 常见问题 (FAQ) </h2><div class="space-y-4"><div><h3 class="text-lg font-semibold text-foreground">可以转换嵌套的 JSON 对象吗？</h3><p class="text-muted-foreground mt-1"> 可以。本工具会自动扁平化嵌套对象，使用点号连接键名。例如， {&quot;user&quot;: {&quot;name&quot;: &quot;John&quot;}} 会被转换为列名 &quot;user.name&quot;。 </p></div><div><h3 class="text-lg font-semibold text-foreground">JSON 数组中的元素结构不同怎么办？</h3><p class="text-muted-foreground mt-1"> 工具会收集所有对象的键作为列名。如果某行缺少某个键，对应的列会留空。 这确保了所有数据都能正确转换，即使结构不完全一致。 </p></div><div><h3 class="text-lg font-semibold text-foreground">为什么需要 JSON 转 CSV？</h3><p class="text-muted-foreground mt-1"> CSV 格式广泛应用于数据分析、报表生成、Excel 处理等场景。 转换为 CSV 后可以：在 Excel 中打开和分析数据、导入到数据库、 用于数据可视化工具、与他人共享数据等。 </p></div></div>',9)])],512),[[se,h.value]])]),t("section",He,[e[10]||(e[10]=t("h2",{class:"text-2xl font-bold text-foreground mb-4"},"您可能还需要...",-1)),t("div",Ie,[(l(!0),a(w,null,V(L.value,s=>(l(),k(r,{key:s.id,to:`/tools/${s.id}/`,class:"block p-4 bg-card border border-border rounded-lg hover:bg-accent transition-colors"},{default:le(()=>[t("div",Qe,[(l(),k(ie(q[s.icon]),{class:"w-5 h-5 text-primary"})),t("span",We,x(s.name),1)]),t("p",ze,x(s.description),1)]),_:2},1032,["to"]))),128))])])])}}};export{Ct as default};
