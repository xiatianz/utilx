import{_ as H}from"./D4g1_bQ7.js";import{r as d,e as I,p as K,f as $,c as i,a as e,h as V,y as L,P as z,R as J,v as P,z as R,V as q,t as g,F as k,k as _,n as w,j,l as Q,x as A,m as X,o as n,w as Y,C as Z}from"./DEsTSaKd.js";import{t as b}from"./B-fbZyPE.js";import{c as ee}from"./3IwUeceH.js";import{C as te,a as oe}from"./BaG5JeHk.js";import{G as se}from"./sCtjrDU-.js";import{F as re}from"./OWHW6ZUB.js";import{G as le}from"./B8QRyNMs.js";import{F as ne}from"./BIbbmz6B.js";import{R as ae}from"./b4Up8kzW.js";import{T as ie}from"./C1JgnPlw.js";import{H as ue}from"./ZC22Qqbx.js";import{L as de}from"./BP6Cft7q.js";import{D as ce}from"./DESX2TF9.js";import{F as me}from"./C-LEKrTT.js";import{C as fe}from"./vEvaw0F6.js";import{I as pe}from"./4T928kbW.js";import{W as xe}from"./BUYFD_dQ.js";import{T as ve}from"./Z_ZHHb8E.js";import{C as ge}from"./BuCd20m7.js";import{S as be}from"./w5JABn4e.js";import{L as he}from"./DbWJs76d.js";import{F as Ce}from"./CRvidJJ3.js";import"./wERbHxDK.js";const ye={class:"max-w-8xl mx-auto"},Se={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Ve={class:"flex flex-col h-full"},ke={class:"flex items-center justify-between mb-2"},_e={class:"flex items-center gap-2"},we={class:"flex items-center gap-2"},Fe=["onKeydown"],Ee={key:0,class:"mt-2 p-2 bg-destructive/20 text-destructive text-sm rounded"},Le={class:"flex flex-col h-full"},Re={class:"flex-1 w-full min-h-[300px] bg-muted border border-border rounded-lg overflow-auto"},qe={key:0,class:"w-full"},je={key:0},Te={class:"bg-accent"},Be={key:1,class:"p-4 font-mono text-sm whitespace-pre-wrap"},De={class:"p-6 mb-12 relative"},Me=["title"],Ue={class:"mb-12"},Oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},We={class:"flex items-center gap-2 mb-2"},Ge={class:"font-medium text-foreground"},Ne={class:"text-sm text-muted-foreground line-clamp-2"},ft={__name:"csv-formatter",setup(He){X();const E=b.find(r=>r.id==="csv-formatter");ee.find(r=>r.id==="format");const f=d(""),a=d([]),c=d(""),h=d(""),y=d(","),S=d(!0),C=d(!0),p=d(null),x=d(!1),T={FileText:Ce,Lock:he,Shield:be,Clock:ge,Type:ve,Wifi:xe,Image:pe,Code:fe,FileJson:me,Database:ce,Link:de,Hash:ue,Timer:ie,Regex:ae,FileDiff:ne,Globe:le,FolderOpen:re,GitBranch:se},B=I(()=>{const r=b.filter(o=>o.category==="format"&&o.id!=="csv-formatter").slice(0,3),t=[b.find(o=>o.id==="json-to-csv"),b.find(o=>o.id==="json-formatter"),b.find(o=>o.id==="xml-formatter"),b.find(o=>o.id==="base64-encoder")].filter(Boolean);return[...r,...t].slice(0,4)}),F=()=>{if(f.value)try{h.value="",a.value=[];const r=f.value.trim().split(`
`),t=y.value==="\\t"?"	":y.value,o=new RegExp('(\\"([^"]*(\\"")[^"]*)+\\"|[^\\'+t+'\\"]+)(\\'+t+"|$)","g");for(const u of r){if(!u.trim())continue;const m=[];let v;for(;(v=o.exec(u))!==null;){let l=v[1];l.endsWith(t)&&(l=l.slice(0,-1)),l.startsWith('"')&&l.endsWith('"')&&(l=l.slice(1,-1),l=l.replace(/""/g,'"')),m.push(l.trim())}a.value.push(m)}const s=[];for(let u=0;u<a.value[0]?.length;u++)s[u]=Math.max(...a.value.map(m=>(m[u]||"").length));c.value=a.value.map(u=>u.map((m,v)=>{const l=m||"";return l.includes(t)||l.includes(`
`)||l.includes('"')?'"'+l.replace(/"/g,'""')+'"':l.padEnd(s[v])}).join(t)).join(`
`)}catch(r){h.value=`CSV格式化错误: ${r.message}`,a.value=[],c.value=""}},D=()=>{f.value="",a.value=[],c.value="",h.value=""},M=async()=>{try{const r=await navigator.clipboard.readText();f.value=r}catch(r){console.error("粘贴失败:",r)}},U=()=>{f.value=`姓名,年龄,城市,职业
张三,28,北京,工程师
李四,32,上海,设计师
王五,25,广州,产品经理
赵六,30,深圳,数据分析师`},O=async()=>{if(c.value)try{await navigator.clipboard.writeText(c.value)}catch(r){console.error("复制失败:",r)}},W=()=>{if(!c.value)return;const r=new Blob([c.value],{type:"text/csv"}),t=URL.createObjectURL(r),o=document.createElement("a");o.href=t,o.download="formatted.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)},G=()=>{p.value&&(x.value?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():p.value.requestFullscreen?p.value.requestFullscreen():p.value.webkitRequestFullscreen?p.value.webkitRequestFullscreen():p.value.msRequestFullscreen&&p.value.msRequestFullscreen(),x.value=!x.value)},N=()=>{C.value=!C.value};return E&&K(E.id),$(()=>{document.addEventListener("fullscreenchange",()=>{x.value=!!document.fullscreenElement}),document.addEventListener("webkitfullscreenchange",()=>{x.value=!!document.webkitFullscreenElement}),document.addEventListener("msfullscreenchange",()=>{x.value=!!document.msFullscreenElement})}),(r,t)=>{const o=H;return n(),i("div",ye,[t[10]||(t[10]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-foreground mb-3"},"CSV格式化 - 在线CSV美化与表格预览工具"),e("p",{class:"text-muted-foreground"},"一款免费的在线 CSV Formatter。支持美化CSV数据，自动识别分隔符，表格预览，导出格式化后的CSV。纯本地计算，数据隐私绝对安全。")],-1)),e("div",Se,[e("div",Ve,[e("div",{class:"flex items-center justify-between mb-3"},[t[3]||(t[3]=e("label",{class:"text-sm font-medium text-foreground"},"输入CSV",-1)),e("div",{class:"flex gap-2"},[e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:D}," 清空 "),e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:M}," 粘贴 "),e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:U}," 示例数据 ")])]),e("div",ke,[e("div",_e,[t[5]||(t[5]=e("label",{class:"text-xs text-muted-foreground"},"分隔符:",-1)),V(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),class:"text-xs bg-muted border border-border rounded px-2 py-1"},[...t[4]||(t[4]=[e("option",{value:","},"逗号 (,)",-1),e("option",{value:";"},"分号 (;)",-1),e("option",{value:"\\t"},"Tab",-1),e("option",{value:"|"},"竖线 (|)",-1)])],512),[[z,y.value]])]),e("div",we,[t[6]||(t[6]=e("label",{class:"text-xs text-muted-foreground"},"包含标题行:",-1)),V(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>S.value=s),class:"rounded"},null,512),[[J,S.value]])])]),V(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),class:"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-none font-mono text-sm",placeholder:"在此输入CSV数据...",onKeydown:[R(q(F,["ctrl"]),["enter"]),R(q(F,["meta"]),["enter"])]},null,40,Fe),[[P,f.value]]),h.value?(n(),i("div",Ee,g(h.value),1)):L("",!0)]),e("div",Le,[e("div",{class:"flex items-center justify-between mb-3"},[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-foreground"},"预览结果",-1)),e("div",{class:"flex gap-2"},[e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:O}," 复制CSV "),e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:W}," 下载CSV "),e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:G}," 全屏模式 ")])]),e("div",Re,[a.value.length?(n(),i("table",qe,[S.value&&a.value[0]?(n(),i("thead",je,[e("tr",Te,[(n(!0),i(k,null,_(a.value[0],s=>(n(),i("th",{key:s,class:"px-4 py-2 text-left text-sm font-medium border-b border-border sticky top-0 bg-accent"},g(s),1))),128))])])):L("",!0),e("tbody",null,[(n(!0),i(k,null,_(S.value?a.value.slice(1):a.value,(s,u)=>(n(),i("tr",{key:u,class:"hover:bg-accent/50"},[(n(!0),i(k,null,_(s,(m,v)=>(n(),i("td",{key:v,class:"px-4 py-2 text-sm border-b border-border"},g(m),1))),128))]))),128))])])):(n(),i("pre",Be,g(c.value||"等待输入CSV数据..."),1))])])]),e("div",{class:"flex justify-center mb-12"},[e("button",{onClick:F,class:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium"}," 格式化并预览 ")]),e("div",De,[e("button",{onClick:N,class:"absolute top-4 right-4 text-muted-foreground hover:text-foreground transition-colors",title:C.value?"折叠内容":"展开内容"},[C.value?(n(),w(j(oe),{key:1,class:"w-5 h-5"})):(n(),w(j(te),{key:0,class:"w-5 h-5"}))],8,Me),V(e("div",null,[...t[8]||(t[8]=[A('<h2 class="text-2xl font-bold text-foreground mb-4 flex items-center"><span class="text-primary mr-2">#</span> 什么是 CSV 格式化？ </h2><p class="text-muted-foreground mb-4"> CSV (Comma-Separated Values) 是一种通用的、相对简单的文件格式，被广泛用于存储和交换表格数据。 CSV 文件以纯文本形式存储数据，通常每条记录占一行，记录中的字段由分隔符（通常是逗号）分隔。 它是一种简单但功能强大的数据交换格式，可以被几乎所有的电子表格程序（如 Excel）和数据库系统导入导出。 </p><p class="text-muted-foreground"> 为什么需要格式化 CSV？在实际应用中，CSV 数据可能格式混乱，字段不对齐，包含不必要的空格等。 CSV 格式化工具可以美化 CSV 数据，使其更易读，并提供表格预览功能，方便查看和编辑数据。 </p><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 如何使用本工具 </h2><ol class="list-decimal list-inside space-y-2 text-muted-foreground mb-6"><li>将您的 CSV 数据粘贴到左侧输入框</li><li>选择合适的分隔符（逗号、分号、Tab或竖线）</li><li>勾选是否包含标题行（第一行作为列名）</li><li>点击&quot;格式化并预览&quot;按钮或使用快捷键 Ctrl+Enter</li><li>查看右侧表格预览，或点击&quot;复制CSV&quot;导出格式化后的数据</li></ol><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 核心功能特性 </h2><ul class="list-disc list-inside space-y-2 text-muted-foreground mb-6"><li><strong>智能识别分隔符</strong>: 支持多种常用分隔符，自动适应不同格式的CSV文件</li><li><strong>表格预览</strong>: 将CSV数据以表格形式展示，更直观地查看数据结构</li><li><strong>标题行支持</strong>: 可选择是否将第一行作为列标题，使表格更清晰</li><li><strong>数据美化</strong>: 自动整理格式，去除多余空格，对齐数据列</li><li><strong>本地安全</strong>: 所有处理都在浏览器本地完成，数据不会上传到服务器</li><li><strong>导出功能</strong>: 支持复制和下载格式化后的CSV文件</li></ul><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 常见问题 (FAQ) </h2><div class="space-y-4"><div><h3 class="text-lg font-semibold text-foreground">在线 CSV 格式化安全吗？</h3><p class="text-muted-foreground mt-1"> 绝对安全。我们的 CSV 格式化工具采用纯前端技术实现，所有处理都在您的浏览器本地完成， 数据不会上传到任何服务器。您可以使用它处理包含敏感信息的 CSV 数据。 </p></div><div><h3 class="text-lg font-semibold text-foreground">支持哪些 CSV 分隔符？</h3><p class="text-muted-foreground mt-1"> 本工具支持最常用的几种分隔符：逗号（,）、分号（;）、Tab制表符和竖线（|）。 如果您的CSV使用了其他分隔符，可以在格式化后手动替换。 </p></div><div><h3 class="text-lg font-semibold text-foreground">如何处理包含逗号的字段？</h3><p class="text-muted-foreground mt-1"> 标准的CSV格式使用双引号包围包含分隔符的字段。例如：&quot;John, Doe&quot;。 本工具会正确处理这种情况，确保逗号被识别为字段内容而非分隔符。 </p></div></div>',9)])],512),[[Q,C.value]])]),e("section",Ue,[t[9]||(t[9]=e("h2",{class:"text-2xl font-bold text-foreground mb-4"},"您可能还需要...",-1)),e("div",Oe,[(n(!0),i(k,null,_(B.value,s=>(n(),w(o,{key:s.id,to:`/tools/${s.id}`,class:"block p-4 bg-card border border-border rounded-lg hover:bg-accent transition-colors"},{default:Y(()=>[e("div",We,[(n(),w(Z(T[s.icon]),{class:"w-5 h-5 text-primary"})),e("span",Ge,g(s.name),1)]),e("p",Ne,g(s.description),1)]),_:2},1032,["to"]))),128))])])])}}};export{ft as default};
