import{_ as B}from"./D4g1_bQ7.js";import{r as c,e as I,q as z,c as p,a as t,h as v,P as Y,x as A,v as J,R as _,y as j,t as f,b as d,j as y,E as V,F as Z,k as G,d as H,w as k,S as K,o as x}from"./DEsTSaKd.js";import{F as Q}from"./C-LEKrTT.js";import{I as W}from"./MvNwXCJb.js";import{C as X}from"./vEvaw0F6.js";import{A as q}from"./Bluep4Ee.js";import{S as ee}from"./CgLtbCVP.js";import"./wERbHxDK.js";const te={class:"max-w-8xl mx-auto"},se={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},oe={class:"space-y-4"},re={class:"bg-card rounded-lg p-6"},le={class:"space-y-4"},ie={class:"flex items-center gap-3"},ae={class:"flex items-center gap-3"},de={class:"flex items-center gap-3"},ne={class:"bg-card rounded-lg p-6"},ue={class:"flex justify-between items-center mb-4"},me={class:"flex gap-2"},ce=["disabled"],pe={class:"space-y-4"},fe={class:"bg-card rounded-lg p-6"},xe={class:"flex justify-between items-center mb-4"},ve={class:"flex gap-2"},ye=["disabled"],ge=["disabled"],be=["disabled"],he={class:"border rounded-lg p-4 bg-muted/30 min-h-[400px] max-h-[500px] overflow-auto"},Se={key:0,class:"text-sm whitespace-pre-wrap font-mono"},Ne={key:1,class:"text-center text-muted-foreground py-12"},Oe={key:0,class:"bg-card rounded-lg p-6"},we={class:"flex items-center gap-2 mb-2"},Je={key:0,class:"space-y-1"},_e={key:1,class:"bg-card rounded-lg p-6"},je={class:"grid grid-cols-2 gap-4 text-sm"},ke={class:"font-medium"},qe={class:"font-medium"},Te={class:"font-medium"},Ae={class:"font-medium"},Ve={class:"mt-12 space-y-6"},Ee={class:"bg-card rounded-lg p-6"},Ce={class:"text-lg font-semibold mb-4 flex items-center gap-2"},Re={class:"bg-card rounded-lg p-6"},Ue={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ye={__name:"json-schema",setup(De){const S=c("2020-12"),b=c(""),h=c(""),a=c(""),N=c(!1),n=c(null),i=c({strictType:!0,addExamples:!0,addRequired:!0}),E={id:1,name:"John Doe",email:"john@example.com",age:30,isActive:!0,balance:1250.5,address:{street:"123 Main St",city:"New York",country:"USA",zipCode:"10001"},phoneNumbers:[{type:"home",number:"212-555-1234"},{type:"work",number:"646-555-4567"}],registeredAt:"2024-01-15T10:30:00Z",tags:["premium","verified","active"]},g=c(null),m=I(()=>{if(!a.value)return"";try{const o=JSON.parse(a.value),e=C(o);return g.value=U(e),JSON.stringify(e,null,2)}catch{return""}}),C=(o,e="")=>{const s={$schema:`https://json-schema.org/draft/${R()}/schema#`};b.value&&(s.title=b.value),h.value&&(s.description=h.value);const r=O(o);return Object.assign(s,r.schema),s},R=()=>({"2020-12":"2020-12","2019-09":"2019-09","draft-07":"07","draft-06":"06","draft-04":"04"})[S.value]||"07",O=(o,e="")=>{const s={},r=[];if(o===null)return s.type=["null","object","string","number","boolean"],{schema:s,required:r};if(Array.isArray(o)){if(s.type="array",o.length>0){const l=O(o[0],`${e}[]`);s.items=l.schema,i.value.addExamples&&o[0]!==null&&(s.examples=[o[0]])}else s.items={};return{schema:s,required:r}}return typeof o=="object"?(s.type="object",s.properties={},Object.entries(o).forEach(([l,u])=>{const T=O(u,`${e}.${l}`);s.properties[l]=T.schema,i.value.addRequired&&T.required.includes(l)&&r.push(l),i.value.addRequired&&r.push(l)}),r.length>0&&(s.required=r),{schema:s,required:r}):(typeof o=="string"?(s.type="string",o.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?s.format="date-time":o.match(/^\d{4}-\d{2}-\d{2}$/)?s.format="date":o.match(/^https?:\/\//)?s.format="uri":o.match(/^[^@]+@[^@]+\.[^@]+$/)&&(s.format="email"),i.value.strictType&&(s.minLength=o.length,s.maxLength=o.length),i.value.addExamples&&(s.examples=[o])):typeof o=="number"?(Number.isInteger(o)?s.type="integer":s.type="number",i.value.strictType&&(s.minimum=o,s.maximum=o),i.value.addExamples&&(s.examples=[o])):typeof o=="boolean"&&(s.type="boolean",i.value.addExamples&&(s.examples=[o])),{schema:s,required:r})},U=o=>{const e={properties:0,required:0,objects:0,arrays:0},s=r=>{r.type==="object"&&r.properties&&(e.objects++,Object.values(r.properties).forEach(l=>{e.properties++,r.required&&r.required.includes(Object.keys(r.properties).find(u=>r.properties[u]===l))&&e.required++,s(l)})),r.type==="array"&&r.items&&(e.arrays++,s(r.items))};return s(o),e},D=()=>{a.value=JSON.stringify(E,null,2)},L=()=>{a.value="",n.value=null},$=()=>{try{const o=JSON.parse(a.value);a.value=JSON.stringify(o,null,2)}catch(o){console.error("JSON 格式错误",o)}},M=async()=>{try{await navigator.clipboard.writeText(m.value),N.value=!0,setTimeout(()=>{N.value=!1},2e3)}catch(o){console.error("复制失败",o)}},F=()=>{const o=m.value,e=`${b.value||"schema"}.json`,s="application/json",r=new Blob([o],{type:s}),l=URL.createObjectURL(r),u=document.createElement("a");u.href=l,u.download=e,u.click(),URL.revokeObjectURL(l)},P=()=>{try{const o=JSON.parse(a.value),e=JSON.parse(m.value),s=w(o,e);n.value={valid:s,errors:s?[]:["数据不符合 Schema 定义"]}}catch(o){n.value={valid:!1,errors:[o.message]}}},w=(o,e)=>{if(e.type){const s=Array.isArray(e.type)?e.type:[e.type],r=Array.isArray(o)?"array":typeof o;if(o===null&&!s.includes("null")||!s.includes(r)&&!(r==="object"&&s.includes("array")&&!Array.isArray(o)))return!1}if(e.type==="object"&&e.properties&&typeof o=="object"&&o!==null){if(e.required){for(const s of e.required)if(!(s in o))return!1}for(const[s,r]of Object.entries(o))if(e.properties[s]&&!w(r,e.properties[s]))return!1}if(e.type==="array"&&e.items&&Array.isArray(o)){for(const s of o)if(!w(s,e.items))return!1}return!0};return z({title:"JSON Schema 生成器 - 在线 JSON Schema 生成工具",description:"免费的在线 JSON Schema 生成器，根据 JSON 数据自动生成 JSON Schema，支持数据验证和类型定义。",keywords:["json schema","schema","json","数据验证","类型定义","api文档","数据结构"]}),(o,e)=>{const s=B,r=K("FileText");return x(),p("div",te,[e[30]||(e[30]=t("div",{class:"mt-4 mb-8"},[t("h1",{class:"text-3xl font-bold mb-3"},"JSON Schema 生成器"),t("p",{class:"text-muted-foreground"},"根据 JSON 数据自动生成 JSON Schema，支持数据验证和类型定义")],-1)),t("div",se,[t("div",oe,[t("div",re,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold mb-4"},"输入选项",-1)),t("div",le,[t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm font-medium"},"Schema 版本",-1)),v(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>S.value=l),class:"mt-2 w-full px-3 py-2 border rounded-md text-sm"},[...e[7]||(e[7]=[A('<option value="draft-07">Draft 07</option><option value="draft-06">Draft 06</option><option value="draft-04">Draft 04</option><option value="2019-09">2019-09</option><option value="2020-12">2020-12</option>',5)])],512),[[Y,S.value]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"text-sm font-medium"},"Schema 标题（可选）",-1)),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),type:"text",placeholder:"User Schema",class:"mt-2 w-full px-3 py-2 border rounded-md text-sm"},null,512),[[J,b.value]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"text-sm font-medium"},"Schema 描述（可选）",-1)),v(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>h.value=l),type:"text",placeholder:"用户数据结构定义",class:"mt-2 w-full px-3 py-2 border rounded-md text-sm"},null,512),[[J,h.value]])]),t("div",ie,[v(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>i.value.strictType=l),type:"checkbox",id:"strictType",class:"rounded text-primary focus:ring-primary"},null,512),[[_,i.value.strictType]]),e[11]||(e[11]=t("label",{for:"strictType",class:"text-sm"},"严格类型推断",-1))]),t("div",ae,[v(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>i.value.addExamples=l),type:"checkbox",id:"addExamples",class:"rounded text-primary focus:ring-primary"},null,512),[[_,i.value.addExamples]]),e[12]||(e[12]=t("label",{for:"addExamples",class:"text-sm"},"添加示例值",-1))]),t("div",de,[v(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>i.value.addRequired=l),type:"checkbox",id:"addRequired",class:"rounded text-primary focus:ring-primary"},null,512),[[_,i.value.addRequired]]),e[13]||(e[13]=t("label",{for:"addRequired",class:"text-sm"},"自动标记必填字段",-1))])])]),t("div",ne,[t("div",ue,[e[15]||(e[15]=t("h2",{class:"text-lg font-semibold"},"JSON 数据",-1)),t("div",me,[t("button",{onClick:D,class:"text-sm text-primary hover:text-primary/80 transition-colors"}," 加载示例 "),t("button",{onClick:L,class:"text-sm text-muted-foreground hover:text-foreground transition-colors"}," 清空 "),t("button",{onClick:$,disabled:!a.value,class:"text-sm text-muted-foreground hover:text-foreground transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," 格式化 ",8,ce)])]),v(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=l=>a.value=l),placeholder:"输入 JSON 数据...",class:"w-full h-80 px-4 py-3 border rounded-md font-mono text-sm resize-none focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[J,a.value]])])]),t("div",pe,[t("div",fe,[t("div",xe,[e[16]||(e[16]=t("h2",{class:"text-lg font-semibold"},"生成的 Schema",-1)),t("div",ve,[t("button",{onClick:M,disabled:!m.value,class:"px-3 py-1 text-sm border border-primary text-primary rounded-md hover:bg-primary/5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},f(N.value?"已复制":"复制"),9,ye),t("button",{onClick:F,disabled:!m.value,class:"px-3 py-1 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," 下载 ",8,ge),t("button",{onClick:P,disabled:!m.value||!a.value,class:"px-3 py-1 text-sm border border-primary text-primary rounded-md hover:bg-primary/5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," 验证 ",8,be)])]),t("div",he,[m.value?(x(),p("pre",Se,[t("code",null,f(m.value),1)])):(x(),p("div",Ne,[d(y(Q),{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),e[17]||(e[17]=t("p",null,"输入 JSON 数据后生成 Schema",-1))]))])]),n.value?(x(),p("div",Oe,[e[18]||(e[18]=t("h2",{class:"text-lg font-semibold mb-4"},"验证结果",-1)),t("div",{class:V(["p-4 rounded-lg",n.value.valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"])},[t("div",we,[t("span",{class:V(n.value.valid?"text-green-600":"text-red-600")},f(n.value.valid?"✓ 验证通过":"✗ 验证失败"),3)]),!n.value.valid&&n.value.errors?(x(),p("div",Je,[(x(!0),p(Z,null,G(n.value.errors,(l,u)=>(x(),p("div",{key:u,class:"text-sm text-red-600"}," • "+f(l),1))),128))])):j("",!0)],2)])):j("",!0),g.value?(x(),p("div",_e,[e[23]||(e[23]=t("h2",{class:"text-lg font-semibold mb-4"},"Schema 统计",-1)),t("div",je,[t("div",null,[e[19]||(e[19]=t("span",{class:"text-muted-foreground"},"属性总数：",-1)),t("span",ke,f(g.value.properties),1)]),t("div",null,[e[20]||(e[20]=t("span",{class:"text-muted-foreground"},"必填字段：",-1)),t("span",qe,f(g.value.required),1)]),t("div",null,[e[21]||(e[21]=t("span",{class:"text-muted-foreground"},"嵌套对象：",-1)),t("span",Te,f(g.value.objects),1)]),t("div",null,[e[22]||(e[22]=t("span",{class:"text-muted-foreground"},"数组字段：",-1)),t("span",Ae,f(g.value.arrays),1)])])])):j("",!0)])]),t("div",Ve,[t("div",Ee,[t("h3",Ce,[d(y(W),{class:"w-5 h-5 text-primary"}),e[24]||(e[24]=H(" JSON Schema 使用指南 ",-1))]),e[25]||(e[25]=A('<div class="space-y-4 text-sm text-muted-foreground"><div><h4 class="font-medium text-foreground mb-2">什么是 JSON Schema？</h4><p>JSON Schema 是一种用于描述 JSON 数据结构的规范，它可以定义数据的类型、格式、约束条件等，用于数据验证、文档生成和代码生成。</p></div><div><h4 class="font-medium text-foreground mb-2">常用关键字说明</h4><ul class="list-disc list-inside space-y-1"><li><code>$schema</code> - 指定使用的 Draft 版本</li><li><code>type</code> - 数据类型（string, number, object, array, boolean, null）</li><li><code>properties</code> - 对象属性定义</li><li><code>required</code> - 必需属性列表</li><li><code>format</code> - 字符串格式（email, date-time, uri 等）</li><li><code>pattern</code> - 正则表达式约束</li><li><code>minimum/maximum</code> - 数值范围</li><li><code>minLength/maxLength</code> - 字符串长度</li><li><code>items</code> - 数组元素定义</li><li><code>additionalProperties</code> - 额外属性控制</li></ul></div><div><h4 class="font-medium text-foreground mb-2">应用场景</h4><ul class="list-disc list-inside space-y-1"><li>API 接口数据验证</li><li>配置文件格式定义</li><li>数据库文档生成</li><li>表单自动生成</li><li>代码生成和类型定义</li></ul></div></div>',1))]),t("div",Re,[e[29]||(e[29]=t("h3",{class:"text-lg font-semibold mb-4"},"相关工具",-1)),t("div",Ue,[d(s,{to:"/tools/json-formatter",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:k(()=>[d(y(X),{class:"w-5 h-5 text-primary"}),e[26]||(e[26]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"JSON 格式化"),t("p",{class:"text-xs text-muted-foreground"},"格式化和美化 JSON")],-1)),d(y(q),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1}),d(s,{to:"/tools/json-to-model",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:k(()=>[d(r,{class:"w-5 h-5 text-primary"}),e[27]||(e[27]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"JSON 转 Model"),t("p",{class:"text-xs text-muted-foreground"},"生成数据模型类")],-1)),d(y(q),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1}),d(s,{to:"/tools/json-path",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:k(()=>[d(y(ee),{class:"w-5 h-5 text-primary"}),e[28]||(e[28]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"JSONPath"),t("p",{class:"text-xs text-muted-foreground"},"JSON 数据查询")],-1)),d(y(q),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1})])])])])}}};export{Ye as default};
