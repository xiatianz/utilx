import{_ as G}from"./D4g1_bQ7.js";import{r as u,e as J,p as I,f as P,c as E,a as t,h as y,y as z,P as K,R as W,v as H,z as _,V as N,t as L,n as M,j as T,l as Q,x as A,F as Y,k as Z,m as ee,o as f,w as te,C as oe}from"./DEsTSaKd.js";import{t as x}from"./B-fbZyPE.js";import{c as re}from"./3IwUeceH.js";import{C as se,a as le}from"./BaG5JeHk.js";import{G as ne}from"./sCtjrDU-.js";import{F as ae}from"./OWHW6ZUB.js";import{G as ie}from"./B8QRyNMs.js";import{F as de}from"./BIbbmz6B.js";import{R as ue}from"./b4Up8kzW.js";import{T as ce}from"./C1JgnPlw.js";import{H as me}from"./ZC22Qqbx.js";import{L as fe}from"./BP6Cft7q.js";import{D as pe}from"./DESX2TF9.js";import{F as xe}from"./C-LEKrTT.js";import{C as ge}from"./vEvaw0F6.js";import{I as be}from"./4T928kbW.js";import{W as ve}from"./BUYFD_dQ.js";import{T as he}from"./Z_ZHHb8E.js";import{C as ye}from"./BuCd20m7.js";import{S as Le}from"./w5JABn4e.js";import{L as Me}from"./DbWJs76d.js";import{F as Xe}from"./CRvidJJ3.js";import"./wERbHxDK.js";const ke={class:"max-w-8xl mx-auto"},we={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Fe={class:"flex flex-col h-full"},Ee={class:"flex items-center justify-between mb-2"},Ce={class:"flex items-center gap-2"},_e={class:"flex items-center gap-2"},Ne=["onKeydown"],Te={key:0,class:"mt-2 p-2 bg-destructive/20 text-destructive text-sm rounded"},Oe={class:"flex flex-col h-full"},Se={class:"p-6 mb-12 relative"},Re=["title"],De={class:"mb-12"},$e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ue={class:"flex items-center gap-2 mb-2"},je={class:"font-medium text-foreground"},Be={class:"text-sm text-muted-foreground line-clamp-2"},ct={__name:"xml-formatter",setup(qe){ee();const C=x.find(e=>e.id==="xml-formatter");re.find(e=>e.id==="format");const c=u(""),a=u(""),g=u(""),v=u("2"),X=u(!1),b=u(!0),i=u(null),p=u(!1),O={FileText:Xe,Lock:Me,Shield:Le,Clock:ye,Type:he,Wifi:ve,Image:be,Code:ge,FileJson:xe,Database:pe,Link:fe,Hash:me,Timer:ce,Regex:ue,FileDiff:de,Globe:ie,FolderOpen:ae,GitBranch:ne},S=J(()=>{const e=x.filter(r=>r.category==="format"&&r.id!=="xml-formatter").slice(0,3),o=[x.find(r=>r.id==="json-formatter"),x.find(r=>r.id==="yaml-converter"),x.find(r=>r.id==="sql-formatter"),x.find(r=>r.id==="base64-encoder")].filter(Boolean);return[...e,...o].slice(0,4)}),k=()=>{if(c.value)try{g.value="";let e=c.value.trim();X.value&&(e=R(e));const r=new DOMParser().parseFromString(e,"text/xml");if(r.getElementsByTagName("parsererror").length>0)throw new Error("XML格式错误，请检查语法");const l=w(r.documentElement,0);a.value=l}catch(e){g.value=e.message||`XML格式错误: ${e.message}`,a.value=""}},R=e=>(e=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,""),e.startsWith("<?xml")||(e=`<?xml version="1.0" encoding="UTF-8"?>
`+e),e=e.replace(/<(\w+)([^>]*)\/>/g,(o,r,s)=>e.substring(e.indexOf(o)+o.length,e.length).includes(`</${r}>`)?`<${r}${s}></${r}>`:o),e),w=(e,o)=>{if(!e)return"";const s=(v.value==="tab"?"	":" ".repeat(parseInt(v.value)||2)).repeat(o);let l="";if(e.nodeType===Node.ELEMENT_NODE){const n=e.tagName,F=[];for(let m=0;m<e.attributes.length;m++){const d=e.attributes[m];F.push(`${d.name}="${d.value}"`)}F.length>0?l+=`${s}<${n} ${F.join(" ")}>`:l+=`${s}<${n}>`;const h=[];for(let m=0;m<e.childNodes.length;m++){const d=e.childNodes[m];d.nodeType===Node.ELEMENT_NODE?h.push(w(d,o+1)):d.nodeType===Node.TEXT_NODE&&d.textContent.trim()&&h.push(d.textContent.trim())}h.length>0&&(l+=`
`,l+=h.join(`
`),l+=`
`+s),l+=`</${n}>`}else if(e.nodeType===Node.DOCUMENT_NODE)for(let n=0;n<e.childNodes.length;n++)l+=w(e.childNodes[n],o);else if(e.nodeType===Node.TEXT_NODE){const n=e.textContent.trim();n&&(l+=s+n)}return l},D=()=>{c.value="",a.value="",g.value=""},$=async()=>{try{const e=await navigator.clipboard.readText();c.value=e}catch(e){console.error("粘贴失败:",e)}},U=()=>{c.value=`<?xml version="1.0" encoding="UTF-8"?>
<bookstore>
  <book category="fiction">
    <title lang="en">Great Gatsby</title>
    <author>F. Scott Fitzgerald</author>
    <year>1925</year>
    <price>10.99</price>
  </book>
  <book category="children">
    <title lang="en">Harry Potter</title>
    <author>J.K. Rowling</author>
    <year>2005</year>
    <price>29.99</price>
  </book>
  <book category="web">
    <title lang="en">Learning XML</title>
    <author>Erik T. Ray</author>
    <year>2003</year>
    <price>39.95</price>
  </book>
</bookstore>`},j=async()=>{if(a.value)try{await navigator.clipboard.writeText(a.value)}catch(e){console.error("复制失败:",e)}},B=()=>{if(!a.value)return;const e=new Blob([a.value],{type:"application/xml"}),o=URL.createObjectURL(e),r=document.createElement("a");r.href=o,r.download="formatted.xml",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)},q=()=>{i.value&&(p.value?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():i.value.requestFullscreen?i.value.requestFullscreen():i.value.webkitRequestFullscreen?i.value.webkitRequestFullscreen():i.value.msRequestFullscreen&&i.value.msRequestFullscreen(),p.value=!p.value)},V=()=>{b.value=!b.value};return C&&I(C.id),P(()=>{document.addEventListener("fullscreenchange",()=>{p.value=!!document.fullscreenElement}),document.addEventListener("webkitfullscreenchange",()=>{p.value=!!document.webkitFullscreenElement}),document.addEventListener("msfullscreenchange",()=>{p.value=!!document.msFullscreenElement})}),(e,o)=>{const r=G;return f(),E("div",ke,[o[10]||(o[10]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-foreground mb-3"},"XML格式化 - 在线XML美化与格式化工具"),t("p",{class:"text-muted-foreground"},"一款免费的在线 XML Formatter。支持一键美化、压缩、语法错误检测及格式转换。纯本地计算，数据隐私绝对安全。")],-1)),t("div",we,[t("div",Fe,[t("div",{class:"flex items-center justify-between mb-3"},[o[3]||(o[3]=t("label",{class:"text-sm font-medium text-foreground"},"输入XML",-1)),t("div",{class:"flex gap-2"},[t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:D}," 清空 "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:$}," 粘贴 "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:U}," 示例数据 ")])]),t("div",Ee,[t("div",Ce,[o[5]||(o[5]=t("label",{class:"text-xs text-muted-foreground"},"缩进:",-1)),y(t("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>v.value=s),class:"text-xs bg-muted border border-border rounded px-2 py-1"},[...o[4]||(o[4]=[t("option",{value:"2"},"2空格",-1),t("option",{value:"4"},"4空格",-1),t("option",{value:"tab"},"Tab",-1)])],512),[[K,v.value]])]),t("div",_e,[o[6]||(o[6]=t("label",{class:"text-xs text-muted-foreground"},"自动修复:",-1)),y(t("input",{type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=s=>X.value=s),class:"rounded"},null,512),[[W,X.value]])])]),y(t("textarea",{"onUpdate:modelValue":o[2]||(o[2]=s=>c.value=s),class:"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-none font-mono text-sm",placeholder:"在此输入XML数据...",onKeydown:[_(N(k,["ctrl"]),["enter"]),_(N(k,["meta"]),["enter"])]},null,40,Ne),[[H,c.value]]),g.value?(f(),E("div",Te,L(g.value),1)):z("",!0)]),t("div",Oe,[t("div",{class:"flex items-center justify-between mb-3"},[o[7]||(o[7]=t("label",{class:"text-sm font-medium text-foreground"},"格式化结果",-1)),t("div",{class:"flex gap-2"},[t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:j}," 复制 "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:B}," 下载XML "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:q}," 全屏模式 ")])]),t("pre",{ref_key:"outputPre",ref:i,class:"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg overflow-auto font-mono text-sm whitespace-pre-wrap"},L(a.value),513)])]),t("div",{class:"flex justify-center mb-12"},[t("button",{onClick:k,class:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium"}," 格式化 XML ")]),t("div",Se,[t("button",{onClick:V,class:"absolute top-4 right-4 text-muted-foreground hover:text-foreground transition-colors",title:b.value?"折叠内容":"展开内容"},[b.value?(f(),M(T(le),{key:1,class:"w-5 h-5"})):(f(),M(T(se),{key:0,class:"w-5 h-5"}))],8,Re),y(t("div",null,[...o[8]||(o[8]=[A('<h2 class="text-2xl font-bold text-foreground mb-4 flex items-center"><span class="text-primary mr-2">#</span> 什么是 XML 格式化？ </h2><p class="text-muted-foreground mb-4"> XML（eXtensible Markup Language）是一种标记语言，被设计用来传输和存储数据。 XML 格式化是将压缩或混乱的 XML 文档转换为具有良好的层次结构、缩进和换行的可读格式的过程。 格式化后的 XML 不仅更易读，也便于开发者进行调试和维护。 </p><p class="text-muted-foreground"> XML 广泛应用于 Web 服务、配置文件、数据交换等场景。由于传输效率的考虑， XML 数据经常被压缩成一行或格式混乱，使用 XML 格式化工具可以快速还原其可读的结构。 </p><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 如何使用本工具 </h2><ol class="list-decimal list-inside space-y-2 text-muted-foreground mb-6"><li>将您的 XML 数据粘贴到左侧输入框</li><li>选择缩进方式（2空格、4空格或Tab）</li><li>可选择启用自动修复功能来修复常见错误</li><li>点击&quot;格式化 XML&quot;按钮或使用快捷键 Ctrl+Enter</li><li>查看右侧格式化后的结果，可复制或下载</li></ol><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 核心功能特性 </h2><ul class="list-disc list-inside space-y-2 text-muted-foreground mb-6"><li><strong>智能格式化</strong>: 自动识别 XML 标签、属性、文本内容并进行合理缩进</li><li><strong>错误检测</strong>: 检测 XML 语法错误，如未闭合标签、属性格式错误等</li><li><strong>自动修复</strong>: 智能修复常见的 XML 语法错误</li><li><strong>多种缩进</strong>: 支持 2 空格、4 空格、Tab 缩进</li><li><strong>本地处理</strong>: 所有处理都在浏览器本地完成，确保数据安全</li><li><strong>导出功能</strong>: 支持复制和下载格式化后的 XML</li></ul><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 常见问题 (FAQ) </h2><div class="space-y-4"><div><h3 class="text-lg font-semibold text-foreground">XML 和 JSON 有什么区别？</h3><p class="text-muted-foreground mt-1"> XML 和 JSON 都是数据交换格式，但主要区别在于：XML 使用标签标记数据，支持命名空间、 属性、注释等丰富功能；JSON 使用键值对，语法更简洁，解析速度更快。 XML 更适合文档和配置，JSON 更适合数据交换。选择取决于具体应用场景。 </p></div><div><h3 class="text-lg font-semibold text-foreground">格式化后的 XML 可以直接使用吗？</h3><p class="text-muted-foreground mt-1"> 可以。XML 格式化只改变文档的视觉呈现（添加缩进和换行），不会改变 XML 的结构和内容。 格式化后的 XML 在功能上与原始 XML 完全等价，可以直接用于应用程序或数据交换。 </p></div><div><h3 class="text-lg font-semibold text-foreground">为什么需要 XML 格式化？</h3><p class="text-muted-foreground mt-1"> XML 格式化的主要原因是提高可读性。压缩的 XML 难以阅读和理解，格式化后可以清晰地看到文档结构。 这有助于：快速理解数据结构、方便调试、便于代码审查、提高团队协作效率。 </p></div></div>',9)])],512),[[Q,b.value]])]),t("section",De,[o[9]||(o[9]=t("h2",{class:"text-2xl font-bold text-foreground mb-4"},"您可能还需要...",-1)),t("div",$e,[(f(!0),E(Y,null,Z(S.value,s=>(f(),M(r,{key:s.id,to:`/tools/${s.id}/`,class:"block p-4 bg-card border border-border rounded-lg hover:bg-accent transition-colors"},{default:te(()=>[t("div",Ue,[(f(),M(oe(O[s.icon]),{class:"w-5 h-5 text-primary"})),t("span",je,L(s.name),1)]),t("p",Be,L(s.description),1)]),_:2},1032,["to"]))),128))])])])}}};export{ct as default};
