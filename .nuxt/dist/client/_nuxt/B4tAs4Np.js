import{r as _,e as C,q as S,c as n,a as s,F as b,k as h,y as p,h as d,P as x,x as M,v as y,R as F,t as r,b as $,j as H,d as E,o as a,E as k}from"./DEsTSaKd.js";import{C as z}from"./BuCd20m7.js";import{C as B}from"./Bt5p-un4.js";import{I as W}from"./MvNwXCJb.js";import"./wERbHxDK.js";const A={class:"max-w-8xl mx-auto"},G={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},J={class:"space-y-4"},K={class:"bg-card rounded-lg p-6"},Q={class:"grid grid-cols-2 gap-3"},X=["onClick"],Y={class:"font-medium"},Z={class:"text-xs opacity-80"},ee={class:"bg-card rounded-lg p-6"},te={class:"mb-4"},se={class:"mt-2 space-y-2"},oe={class:"flex gap-2"},ie={key:0,class:"flex flex-wrap gap-2"},le=["onClick"],ne={key:1,class:"flex gap-2 items-center"},ae={key:2,class:"flex gap-2 items-center"},ue={key:3,class:"flex gap-2"},re={class:"mb-4"},de={class:"mt-2 space-y-2"},ce={class:"flex gap-2"},pe={key:0,class:"flex flex-wrap gap-2"},me=["onClick"],ve={class:"mb-4"},ye={class:"mt-2"},fe={class:"mb-4"},ge={class:"mt-2"},be={class:"mb-4"},he={class:"mt-2 flex flex-wrap gap-2"},xe=["onClick"],ke={class:"bg-card rounded-lg p-6"},we={class:"space-y-3"},Te={class:"flex items-center gap-3"},_e={key:0},Ce={class:"space-y-4"},Me={class:"bg-card rounded-lg p-6"},$e={class:"flex justify-between items-center mb-4"},He=["disabled"],Ve={class:"bg-muted/30 rounded-lg p-4"},je={key:0,class:"text-sm whitespace-pre-wrap break-all"},Ie={key:1,class:"text-center text-muted-foreground py-8"},De={key:0,class:"bg-card rounded-lg p-6"},Re={class:"space-y-3 text-sm"},Oe={class:"p-3 bg-primary/5 border border-primary/20 rounded-lg"},Le={class:"text-muted-foreground"},Ue={class:"p-3 bg-muted rounded-lg"},qe={class:"text-muted-foreground"},Pe={class:"bg-card rounded-lg p-6"},Ne={class:"space-y-3"},Se=["onClick"],Fe={class:"flex justify-between items-start mb-2"},Ee={class:"font-medium group-hover:text-primary"},ze={class:"text-xs text-muted-foreground"},Be={class:"text-xs text-muted-foreground mt-1"},We={class:"mt-12 space-y-6"},Ae={class:"bg-card rounded-lg p-6"},Ge={class:"text-lg font-semibold mb-4 flex items-center gap-2"},et={__name:"crontab-generator",setup(Je){const V=_(null),w=_(!1),e=_({minuteType:"*",specificMinutes:[],minuteRange:{start:0,end:59},minuteInterval:5,minuteList:"",hourType:"*",specificHours:[],hourRange:{start:0,end:23},hourInterval:1,hourList:"",dayType:"*",specificDays:[],monthType:"*",specificMonths:[],weekdays:[],command:"",logOutput:!1,logPath:"/var/log/cron.log"}),D=[0,5,10,15,20,25,30,35,40,45,50,55],R=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],j=["日","一","二","三","四","五","六"],m=[{value:"every-minute",name:"每分钟",description:"每分钟执行一次"},{value:"every-hour",name:"每小时",description:"每小时执行一次"},{value:"daily",name:"每天",description:"每天指定时间执行"},{value:"weekly",name:"每周",description:"每周指定时间执行"},{value:"monthly",name:"每月",description:"每月指定日期执行"},{value:"yearly",name:"每年",description:"每年指定日期执行"},{value:"workday",name:"工作日",description:"工作日指定时间执行"},{value:"custom",name:"自定义",description:"完全自定义配置"}],f=C(()=>{const i=g("minute"),t=g("hour"),o=g("day"),u=g("month"),c=g("weekday");let l=e.value.command||"command";return e.value.logOutput&&e.value.logPath&&(l+=` >> ${e.value.logPath} 2>&1`),`${i} ${t} ${o} ${u} ${c} ${l}`}),g=i=>{switch(i){case"minute":switch(e.value.minuteType){case"*":return"*";case"specific":return e.value.specificMinutes.length>0?e.value.specificMinutes.sort((t,o)=>t-o).join(","):"0";case"range":return`${e.value.minuteRange.start}-${e.value.minuteRange.end}`;case"interval":return`*/${e.value.minuteInterval}`;case"list":return e.value.minuteList||"0";default:return"*"}case"hour":switch(e.value.hourType){case"*":return"*";case"specific":return e.value.specificHours.length>0?e.value.specificHours.sort((t,o)=>t-o).join(","):"0";case"range":return`${e.value.hourRange.start}-${e.value.hourRange.end}`;case"interval":return`*/${e.value.hourInterval}`;case"list":return e.value.hourList||"0";default:return"*"}case"day":switch(e.value.dayType){case"*":return"*";case"specific":return e.value.specificDays.length>0?e.value.specificDays.sort((t,o)=>t-o).join(","):"1";case"last":return"L";default:return"*"}case"month":switch(e.value.monthType){case"*":return"*";case"specific":return e.value.specificMonths.length>0?e.value.specificMonths.sort((t,o)=>t-o).join(","):"1";default:return"*"}case"weekday":return e.value.weekdays.length>0?e.value.weekdays.sort((t,o)=>t-o).join(","):"*";default:return"*"}},O=C(()=>{const i=e.value.minuteType,t=e.value.hourType,o=e.value.dayType,u=e.value.monthType,c=e.value.weekdays;if(i==="*"&&t==="*"&&o==="*"&&u==="*"&&c.length===0)return"每分钟执行一次";let l=[];return u!=="*"?e.value.specificMonths.length===12?l.push("每月"):l.push(`在 ${e.value.specificMonths.map(T=>`${T}月`).join("、")} `):l.push("每月"),c.length>0?c.length===7?l.push("每天"):l.push(`每周${c.map(T=>j[T]).join("、")}`):o!=="*"?e.value.specificDays.length>0&&(e.value.specificDays.length===31?l.push("每天"):l.push(`每月${e.value.specificDays.join("、")}号`)):l.push("每天"),t!=="*"?e.value.specificHours.length>0?e.value.specificHours.length===24?l.push("每小时"):l.push(`在${e.value.specificHours.join("、")}点`):l.push(`每${e.value.hourInterval}小时`):i!=="*"&&l.push("每小时"),i!=="*"?e.value.specificMinutes.length>0?l.push(`${e.value.specificMinutes.join("、")}分`):l.push(`每${e.value.minuteInterval}分钟`):l.push("每分钟"),l.join("")+"执行"}),L=C(()=>{const i=new Date;return new Date(i.getTime()+6e4).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}),U=[{name:"每分钟执行",crontab:"* * * * * command",description:"每分钟执行一次命令"},{name:"每天凌晨2点执行",crontab:"0 2 * * * command",description:"每天凌晨2点执行"},{name:"工作日上午9点执行",crontab:"0 9 * * 1-5 command",description:"周一到周五上午9点执行"},{name:"每月1号凌晨执行",crontab:"0 0 1 * * command",description:"每月1号凌晨0点执行"},{name:"每15分钟执行",crontab:"*/15 * * * * command",description:"每隔15分钟执行一次"},{name:"每周日晚上11点",crontab:"0 23 * * 0 command",description:"每周日晚上11点执行"}],v=i=>{switch(V.value=i,e.value={minuteType:"*",specificMinutes:[],minuteRange:{start:0,end:59},minuteInterval:5,minuteList:"",hourType:"*",specificHours:[],hourRange:{start:0,end:23},hourInterval:1,hourList:"",dayType:"*",specificDays:[],monthType:"*",specificMonths:[],weekdays:[],command:e.value.command||"",logOutput:e.value.logOutput||!1,logPath:e.value.logPath||"/var/log/cron.log"},i.value){case"every-hour":e.value.minuteType="specific",e.value.specificMinutes=[0];break;case"daily":e.value.minuteType="specific",e.value.specificMinutes=[0],e.value.hourType="specific",e.value.specificHours=[0];break;case"weekly":e.value.minuteType="specific",e.value.specificMinutes=[0],e.value.hourType="specific",e.value.specificHours=[0],e.value.weekdays=[0];break;case"workday":e.value.minuteType="specific",e.value.specificMinutes=[0],e.value.hourType="specific",e.value.specificHours=[9],e.value.weekdays=[1,2,3,4,5];break;case"monthly":e.value.minuteType="specific",e.value.specificMinutes=[0],e.value.hourType="specific",e.value.specificHours=[0],e.value.dayType="specific",e.value.specificDays=[1];break}},I=(i,t)=>{if(i==="minutes"){const o=e.value.specificMinutes.indexOf(t);o>-1?e.value.specificMinutes.splice(o,1):e.value.specificMinutes.push(t)}else if(i==="hours"){const o=e.value.specificHours.indexOf(t);o>-1?e.value.specificHours.splice(o,1):e.value.specificHours.push(t)}},q=i=>{const t=e.value.weekdays.indexOf(i);t>-1?e.value.weekdays.splice(t,1):e.value.weekdays.push(i)},P=i=>{const t=i.crontab.split(" ");if(t.length>=5){if(e.value.command="command",t[0]==="*"&&t[1]==="*")v(m[0]);else if(t[0]==="0"&&t[1]==="2")v(m[2]),e.value.specificHours=[2];else if(t[4]==="1-5")v(m[6]);else if(t[2]==="1")v(m[4]);else if(t[0].includes("*/")){v(m[7]);const o=parseInt(t[0].substring(2));e.value.minuteType="interval",e.value.minuteInterval=o}}},N=async()=>{try{await navigator.clipboard.writeText(f.value),w.value=!0,setTimeout(()=>{w.value=!1},2e3)}catch(i){console.error("复制失败",i)}};return S({title:"Crontab 生成器 - 在线定时任务生成工具",description:"免费的在线 Crontab 定时任务生成器，可视化配置生成定时任务表达式，支持多种执行频率和高级配置。",keywords:["crontab","定时任务","cron","linux","表达式生成","任务调度","自动化"]}),(i,t)=>(a(),n("div",A,[t[36]||(t[36]=s("div",{class:"mt-4 mb-8"},[s("h1",{class:"text-3xl font-bold mb-3"},"Crontab 生成器"),s("p",{class:"text-muted-foreground"},"可视化配置生成 Crontab 定时任务表达式，支持多种定时任务场景")],-1)),s("div",G,[s("div",J,[s("div",K,[t[11]||(t[11]=s("h2",{class:"text-lg font-semibold mb-4"},"执行频率",-1)),s("div",Q,[(a(),n(b,null,h(m,o=>s("button",{key:o.value,onClick:u=>v(o),class:k(["px-4 py-3 rounded-md transition-colors text-left",V.value?.value===o.value?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"])},[s("div",Y,r(o.name),1),s("div",Z,r(o.description),1)],10,X)),64))])]),s("div",ee,[t[24]||(t[24]=s("h2",{class:"text-lg font-semibold mb-4"},"高级配置",-1)),s("div",te,[t[16]||(t[16]=s("label",{class:"text-sm font-medium"},"分钟 (0-59)",-1)),s("div",se,[s("div",oe,[d(s("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.minuteType=o),class:"flex-1 px-3 py-2 border rounded-md text-sm"},[...t[12]||(t[12]=[M('<option value="*">每分钟</option><option value="specific">指定分钟</option><option value="range">范围</option><option value="interval">间隔</option><option value="list">列表</option>',5)])],512),[[x,e.value.minuteType]])]),e.value.minuteType==="specific"?(a(),n("div",ie,[(a(),n(b,null,h(D,o=>s("button",{key:o,onClick:u=>I("minutes",o),class:k(["px-3 py-1 rounded text-sm transition-colors",e.value.specificMinutes.includes(o)?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"])},r(o),11,le)),64))])):p("",!0),e.value.minuteType==="range"?(a(),n("div",ne,[d(s("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.minuteRange.start=o),type:"number",min:"0",max:"59",placeholder:"0",class:"w-20 px-2 py-1 border rounded text-sm"},null,512),[[y,e.value.minuteRange.start]]),t[13]||(t[13]=s("span",null,"到",-1)),d(s("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.minuteRange.end=o),type:"number",min:"0",max:"59",placeholder:"59",class:"w-20 px-2 py-1 border rounded text-sm"},null,512),[[y,e.value.minuteRange.end]])])):p("",!0),e.value.minuteType==="interval"?(a(),n("div",ae,[t[14]||(t[14]=s("span",null,"每",-1)),d(s("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.minuteInterval=o),type:"number",min:"1",max:"60",class:"w-20 px-2 py-1 border rounded text-sm"},null,512),[[y,e.value.minuteInterval]]),t[15]||(t[15]=s("span",null,"分钟",-1))])):p("",!0),e.value.minuteType==="list"?(a(),n("div",ue,[d(s("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>e.value.minuteList=o),type:"text",placeholder:"0,15,30,45",class:"flex-1 px-2 py-1 border rounded text-sm"},null,512),[[y,e.value.minuteList]])])):p("",!0)])]),s("div",re,[t[18]||(t[18]=s("label",{class:"text-sm font-medium"},"小时 (0-23)",-1)),s("div",de,[s("div",ce,[d(s("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>e.value.hourType=o),class:"flex-1 px-3 py-2 border rounded-md text-sm"},[...t[17]||(t[17]=[M('<option value="*">每小时</option><option value="specific">指定小时</option><option value="range">范围</option><option value="interval">间隔</option><option value="list">列表</option>',5)])],512),[[x,e.value.hourType]])]),e.value.hourType==="specific"?(a(),n("div",pe,[(a(),n(b,null,h(R,o=>s("button",{key:o,onClick:u=>I("hours",o),class:k(["px-3 py-1 rounded text-sm transition-colors",e.value.specificHours.includes(o)?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"])},r(o)+"h ",11,me)),64))])):p("",!0)])]),s("div",ve,[t[20]||(t[20]=s("label",{class:"text-sm font-medium"},"日期 (1-31)",-1)),s("div",ye,[d(s("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>e.value.dayType=o),class:"w-full px-3 py-2 border rounded-md text-sm"},[...t[19]||(t[19]=[s("option",{value:"*"},"每天",-1),s("option",{value:"specific"},"指定日期",-1),s("option",{value:"last"},"最后一天",-1)])],512),[[x,e.value.dayType]])])]),s("div",fe,[t[22]||(t[22]=s("label",{class:"text-sm font-medium"},"月份 (1-12)",-1)),s("div",ge,[d(s("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>e.value.monthType=o),class:"w-full px-3 py-2 border rounded-md text-sm"},[...t[21]||(t[21]=[s("option",{value:"*"},"每月",-1),s("option",{value:"specific"},"指定月份",-1)])],512),[[x,e.value.monthType]])])]),s("div",be,[t[23]||(t[23]=s("label",{class:"text-sm font-medium"},"星期 (0-7, 0和7都表示周日)",-1)),s("div",he,[(a(),n(b,null,h(j,(o,u)=>s("button",{key:u,onClick:c=>q(u),class:k(["px-3 py-1 rounded text-sm transition-colors",e.value.weekdays.includes(u)?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"])},r(o),11,xe)),64))])])]),s("div",ke,[t[27]||(t[27]=s("h2",{class:"text-lg font-semibold mb-4"},"执行命令",-1)),s("div",we,[s("div",null,[t[25]||(t[25]=s("label",{class:"text-sm font-medium"},"要执行的命令",-1)),d(s("textarea",{"onUpdate:modelValue":t[8]||(t[8]=o=>e.value.command=o),placeholder:"/usr/bin/php /var/www/html/cron.php",class:"mt-2 w-full px-3 py-2 border rounded-md text-sm h-24 resize-none"},null,512),[[y,e.value.command]])]),s("div",Te,[d(s("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>e.value.logOutput=o),type:"checkbox",id:"logOutput",class:"rounded text-primary focus:ring-primary"},null,512),[[F,e.value.logOutput]]),t[26]||(t[26]=s("label",{for:"logOutput",class:"text-sm"},"记录输出到日志",-1))]),e.value.logOutput?(a(),n("div",_e,[d(s("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>e.value.logPath=o),type:"text",placeholder:"/var/log/cron.log",class:"w-full px-3 py-2 border rounded-md text-sm"},null,512),[[y,e.value.logPath]])])):p("",!0)])])]),s("div",Ce,[s("div",Me,[s("div",$e,[t[28]||(t[28]=s("h2",{class:"text-lg font-semibold"},"生成的 Crontab",-1)),s("button",{onClick:N,disabled:!f.value,class:"px-3 py-1 text-sm border border-primary text-primary rounded-md hover:bg-primary/5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},r(w.value?"已复制":"复制"),9,He)]),s("div",Ve,[f.value?(a(),n("code",je,r(f.value),1)):(a(),n("div",Ie,[$(H(z),{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),t[29]||(t[29]=s("p",null,"请配置定时任务",-1))]))])]),f.value?(a(),n("div",De,[t[32]||(t[32]=s("h2",{class:"text-lg font-semibold mb-4"},"执行说明",-1)),s("div",Re,[s("div",Oe,[t[30]||(t[30]=s("div",{class:"font-medium mb-1"},"下次执行时间预览",-1)),s("div",Le,r(L.value),1)]),s("div",Ue,[t[31]||(t[31]=s("div",{class:"font-medium mb-1"},"执行频率说明",-1)),s("div",qe,r(O.value),1)])])])):p("",!0),s("div",Pe,[t[33]||(t[33]=s("h2",{class:"text-lg font-semibold mb-4"},"常用示例",-1)),s("div",Ne,[(a(),n(b,null,h(U,o=>s("div",{key:o.name,onClick:u=>P(o),class:"p-3 bg-muted rounded-lg cursor-pointer hover:bg-muted/80 transition-colors group"},[s("div",Fe,[s("div",Ee,r(o.name),1),$(H(B),{class:"w-4 h-4 text-muted-foreground group-hover:text-primary"})]),s("code",ze,r(o.crontab),1),s("p",Be,r(o.description),1)],8,Se)),64))])])])]),s("div",We,[s("div",Ae,[s("h3",Ge,[$(H(W),{class:"w-5 h-5 text-primary"}),t[34]||(t[34]=E(" Crontab 使用教程 ",-1))]),t[35]||(t[35]=M('<div class="space-y-4 text-sm text-muted-foreground"><div><h4 class="font-medium text-foreground mb-2">基本格式</h4><code class="block bg-muted p-3 rounded-md font-mono text-sm"> * * * * * command<br> │ │ │ │ │<br> │ │ │ │ └─── 星期几 (0 - 7)<br> │ │ │ └───── 月份 (1 - 12)<br> │ │ └─────── 日期 (1 - 31)<br> │ └───────── 小时 (0 - 23)<br> └─────────── 分钟 (0 - 59) </code></div><div><h4 class="font-medium text-foreground mb-2">特殊字符说明</h4><ul class="list-disc list-inside space-y-1"><li><code>*</code> - 任意值</li><li><code>,</code> - 列表分隔符，如 &quot;1,3,5&quot;</li><li><code>-</code> - 范围，如 &quot;1-5&quot;</li><li><code>/</code> - 步长，如 &quot;*/5&quot; 表示每5个单位</li><li><code>@yearly</code> - 每年1月1日午夜</li><li><code>@monthly</code> - 每月1日午夜</li><li><code>@weekly</code> - 每周日午夜</li><li><code>@daily</code> - 每天午夜</li><li><code>@hourly</code> - 每小时</li></ul></div></div>',1))])])]))}};export{et as default};
