{"file":"base64-image-DPc5_4iO.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_unref","_ssrInterpolate","_ssrRenderList","_ssrRenderAttr","_push","_parent","_createVNode"],"sources":["../../../../src/pages/tools/base64-image.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-8xl mx-auto\">\n    <!-- 面包屑导航 -->\n    <!-- <Breadcrumb :category=\"category\" /> -->\n\n    <!-- 工具标题 -->\n    <div class=\"mt-4 mb-8\">\n      <h1 class=\"text-3xl font-bold mb-3\">Base64 图片</h1>\n      <p class=\"text-muted-foreground\">图片与 Base64 互转，支持在线预览和下载</p>\n    </div>\n\n    <!-- 主要功能区域 -->\n    <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n      <!-- 左侧：图片转Base64 -->\n      <div class=\"space-y-4\">\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">图片转 Base64</h2>\n\n          <!-- 上传区域 -->\n          <div\n            class=\"border-2 border-dashed rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer mb-4\"\n            @drop=\"handleImageDrop\"\n            @dragover.prevent\n            @dragleave=\"handleDragLeave\"\n            @click=\"triggerImageInput\"\n          >\n            <input\n              ref=\"imageInput\"\n              type=\"file\"\n              class=\"hidden\"\n              accept=\"image/*\"\n              @change=\"handleImageSelect\"\n            />\n            <ImageIcon class=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\n            <p class=\"text-lg font-medium mb-2\">拖拽图片到这里</p>\n            <p class=\"text-sm text-muted-foreground\">或者点击选择文件</p>\n          </div>\n\n          <!-- 图片预览 -->\n          <div v-if=\"selectedImage\" class=\"space-y-4\">\n            <div class=\"p-4 bg-muted rounded-lg\">\n              <h3 class=\"text-sm font-medium mb-2\">图片预览</h3>\n              <img\n                :src=\"selectedImage.url\"\n                :alt=\"selectedImage.name\"\n                class=\"w-full max-h-64 object-contain rounded\"\n              />\n              <div class=\"mt-2 text-xs text-muted-foreground\">\n                {{ selectedImage.name }} • {{ formatFileSize(selectedImage.size) }}\n              </div>\n            </div>\n\n            <!-- Base64 输出 -->\n            <div>\n              <div class=\"flex items-center justify-between mb-2\">\n                <h3 class=\"text-sm font-medium\">Base64 编码</h3>\n                <div class=\"flex gap-2\">\n                  <button\n                    @click=\"copyBase64\"\n                    class=\"px-3 py-1 text-sm text-primary hover:text-primary/80 transition-colors\"\n                  >\n                    {{ base64Copied ? '已复制' : '复制' }}\n                  </button>\n                  <button\n                    @click=\"clearImage\"\n                    class=\"px-3 py-1 text-sm text-destructive hover:text-destructive/80 transition-colors\"\n                  >\n                    清空\n                  </button>\n                </div>\n              </div>\n              <div class=\"relative\">\n                <textarea\n                  v-model=\"base64Output\"\n                  readonly\n                  rows=\"6\"\n                  class=\"w-full px-3 py-2 border rounded-md bg-muted font-mono text-xs resize-none\"\n                  placeholder=\"Base64 编码将显示在这里\"\n                ></textarea>\n                <div class=\"absolute bottom-2 right-2 text-xs text-muted-foreground\">\n                  {{ base64Output.length }} 字符\n                </div>\n              </div>\n            </div>\n\n            <!-- 选项 -->\n            <div class=\"space-y-3\">\n              <label class=\"flex items-center gap-2\">\n                <input\n                  v-model=\"includePrefix\"\n                  type=\"checkbox\"\n                  class=\"rounded\"\n                  @change=\"updateBase64\"\n                />\n                <span class=\"text-sm\">包含 Data URL 前缀</span>\n              </label>\n              <label class=\"flex items-center gap-2\">\n                <input\n                  v-model=\"optimizeBase64\"\n                  type=\"checkbox\"\n                  class=\"rounded\"\n                  @change=\"updateBase64\"\n                />\n                <span class=\"text-sm\">移除换行符和空格</span>\n              </label>\n            </div>\n          </div>\n        </div>\n\n        <!-- 示例图片 -->\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">示例图片</h2>\n          <div class=\"grid grid-cols-3 gap-2\">\n            <button\n              v-for=\"sample in sampleImages\"\n              :key=\"sample.id\"\n              @click=\"loadSampleImage(sample)\"\n              class=\"aspect-square rounded-lg overflow-hidden hover:ring-2 hover:ring-primary transition-all\"\n            >\n              <img :src=\"sample.url\" :alt=\"sample.name\" class=\"w-full h-full object-cover\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- 右侧：Base64转图片 -->\n      <div class=\"space-y-4\">\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">Base64 转图片</h2>\n\n          <!-- Base64 输入 -->\n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"text-sm font-medium\">粘贴 Base64 字符串</label>\n              <textarea\n                v-model=\"base64Input\"\n                rows=\"6\"\n                class=\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm resize-none\"\n                placeholder=\"粘贴 Base64 字符串或 Data URL\"\n                @input=\"processBase64\"\n              ></textarea>\n            </div>\n\n            <!-- 操作按钮 -->\n            <div class=\"flex gap-2\">\n              <button\n                @click=\"processBase64\"\n                class=\"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors\"\n              >\n                转换为图片\n              </button>\n              <button\n                @click=\"clearBase64\"\n                class=\"px-4 py-2 border border-muted text-muted-foreground rounded-md hover:bg-muted transition-colors\"\n              >\n                清空\n              </button>\n            </div>\n\n            <!-- 图片预览 -->\n            <div v-if=\"decodedImage\" class=\"space-y-4\">\n              <div class=\"p-4 bg-muted rounded-lg\">\n                <h3 class=\"text-sm font-medium mb-2\">预览</h3>\n                <img\n                  :src=\"decodedImage.url\"\n                  alt=\"Decoded image\"\n                  class=\"w-full max-h-64 object-contain rounded\"\n                />\n                <div class=\"mt-2 text-xs text-muted-foreground\">\n                  {{ decodedImage.format }} • {{ formatFileSize(decodedImage.size) }}\n                </div>\n              </div>\n\n              <!-- 下载选项 -->\n              <div class=\"space-y-3\">\n                <div>\n                  <label class=\"text-sm font-medium\">文件名</label>\n                  <input\n                    v-model=\"downloadFilename\"\n                    type=\"text\"\n                    placeholder=\"image\"\n                    class=\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary mt-1\"\n                  />\n                </div>\n                <div>\n                  <label class=\"text-sm font-medium\">保存格式</label>\n                  <select\n                    v-model=\"downloadFormat\"\n                    class=\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary mt-1\"\n                  >\n                    <option value=\"png\">PNG</option>\n                    <option value=\"jpeg\">JPEG</option>\n                    <option value=\"webp\">WebP</option>\n                  </select>\n                </div>\n                <button\n                  @click=\"downloadImage\"\n                  class=\"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center justify-center gap-2\"\n                >\n                  <Download class=\"w-4 h-4\" />\n                  下载图片\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 批量转换 -->\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">批量转换</h2>\n          <p class=\"text-sm text-muted-foreground mb-4\">\n            同时处理多个 Base64 字符串，批量转换为图片\n          </p>\n\n          <div class=\"space-y-3\">\n            <div v-for=\"(item, index) in batchItems\" :key=\"index\" class=\"space-y-2\">\n              <textarea\n                v-model=\"item.base64\"\n                rows=\"3\"\n                class=\"w-full px-3 py-2 border rounded-md font-mono text-xs resize-none\"\n                :placeholder=\"`Base64 ${index + 1}`\"\n                @input=\"updateBatchItem(index)\"\n              ></textarea>\n              <div v-if=\"item.image\" class=\"flex items-center gap-2 p-2 bg-muted rounded\">\n                <img :src=\"item.image\" alt=\"Preview\" class=\"w-12 h-12 object-cover rounded\" />\n                <span class=\"text-sm flex-1\">已解析</span>\n                <button\n                  @click=\"removeBatchItem(index)\"\n                  class=\"text-destructive hover:text-destructive/80\"\n                >\n                  <X class=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n\n            <div class=\"flex gap-2\">\n              <button\n                @click=\"addBatchItem\"\n                class=\"flex-1 px-4 py-2 bg-muted hover:bg-muted/80 rounded-md transition-colors flex items-center justify-center gap-2\"\n              >\n                <Plus class=\"w-4 h-4\" />\n                添加项\n              </button>\n              <button\n                v-if=\"batchItems.some(item => item.image)\"\n                @click=\"downloadAllBatch\"\n                class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center gap-2\"\n              >\n                <Download class=\"w-4 h-4\" />\n                下载所有\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 使用说明 -->\n    <div class=\"mt-12 space-y-6\">\n      <div class=\"bg-card   rounded-lg p-6\">\n        <h3 class=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n          <Info class=\"w-5 h-5 text-primary\" />\n          关于 Base64\n        </h3>\n        <div class=\"space-y-4 text-sm text-muted-foreground\">\n          <div>\n            <h4 class=\"font-medium text-foreground mb-2\">什么是 Base64？</h4>\n            <p>Base64 是一种基于64个可打印字符来表示二进制数据的编码方法。常用于在文本协议中传输二进制数据。</p>\n          </div>\n          <div>\n            <h4 class=\"font-medium text-foreground mb-2\">Data URL 格式</h4>\n            <code class=\"block bg-muted p-3 rounded-md text-xs\">\n              data:[MIME-type];base64,[base64-data]\n            </code>\n          </div>\n          <div>\n            <h4 class=\"font-medium text-foreground mb-2\">使用场景</h4>\n            <ul class=\"list-disc list-inside space-y-1 ml-4\">\n              <li>在 HTML/CSS 中直接嵌入小图片</li>\n              <li>电子邮件中的图片附件</li>\n              <li>API 接口传输图片数据</li>\n              <li>减少 HTTP 请求数量</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <!-- 相关工具 -->\n      <div class=\"bg-card   rounded-lg p-6\">\n        <h3 class=\"text-lg font-semibold mb-4\">相关工具</h3>\n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <NuxtLink\n            to=\"/tools/base64-encode\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Hash class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">Base64 编码</p>\n              <p class=\"text-xs text-muted-foreground\">文本Base64编码</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n          <NuxtLink\n            to=\"/tools/image-compress\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Zap class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">图片压缩</p>\n              <p class=\"text-xs text-muted-foreground\">在线压缩图片</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n          <NuxtLink\n            to=\"/tools/html-encode\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Code class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">HTML 编码</p>\n              <p class=\"text-xs text-muted-foreground\">HTML实体编码</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { Info, ImageIcon, X, Download, Plus, Hash, Zap, Code, ArrowRight } from 'lucide-vue-next'\nimport Breadcrumb from '~/components/Breadcrumb.vue'\nimport JSZip from 'jszip'\n\n// 分类信息\nconst category = { id: 'image', name: '图片处理', description: '图片处理工具集合' }\n\n// 状态管理\nconst selectedImage = ref(null)\nconst base64Output = ref('')\nconst base64Input = ref('')\nconst decodedImage = ref(null)\nconst downloadFilename = ref('image')\nconst downloadFormat = ref('png')\nconst includePrefix = ref(true)\nconst optimizeBase64 = ref(true)\nconst base64Copied = ref(false)\nconst imageInput = ref(null)\nconst batchItems = ref([{ base64: '', image: null }])\n\n// 示例图片\nconst sampleImages = [\n  { id: 1, name: '示例1', url: 'https://picsum.photos/200/200?random=1' },\n  { id: 2, name: '示例2', url: 'https://picsum.photos/200/200?random=2' },\n  { id: 3, name: '示例3', url: 'https://picsum.photos/200/200?random=3' }\n]\n\n// 处理图片选择\nconst handleImageSelect = (e) => {\n  const file = e.target.files[0]\n  if (file && file.type.startsWith('image/')) {\n    processImageFile(file)\n  }\n}\n\n// 处理拖拽\nconst handleImageDrop = (e) => {\n  e.preventDefault()\n  const file = e.dataTransfer.files[0]\n  if (file && file.type.startsWith('image/')) {\n    processImageFile(file)\n  }\n}\n\n// 处理拖拽离开\nconst handleDragLeave = () => {\n  // 可以添加视觉反馈，例如恢复边框颜色\n}\n\n// 处理图片文件\nconst processImageFile = (file) => {\n  const reader = new FileReader()\n  reader.onload = (e) => {\n    selectedImage.value = {\n      name: file.name,\n      size: file.size,\n      url: e.target.result\n    }\n    updateBase64()\n  }\n  reader.readAsDataURL(file)\n}\n\n// 更新 Base64 输出\nconst updateBase64 = () => {\n  if (!selectedImage.value) return\n\n  let base64 = selectedImage.value.url\n\n  if (!includePrefix.value) {\n    base64 = base64.split(',')[1]\n  }\n\n  if (optimizeBase64.value) {\n    base64 = base64.replace(/\\s+/g, '')\n  }\n\n  base64Output.value = base64\n}\n\n// 加载示例图片\nconst loadSampleImage = async (sample) => {\n  try {\n    const response = await fetch(sample.url)\n    const blob = await response.blob()\n    const file = new File([blob], `${sample.name}.jpg`, { type: 'image/jpeg' })\n    processImageFile(file)\n  } catch (error) {\n    console.error('加载示例图片失败:', error)\n  }\n}\n\n// 复制 Base64\nconst copyBase64 = async () => {\n  if (!base64Output.value) return\n\n  try {\n    await navigator.clipboard.writeText(base64Output.value)\n    base64Copied.value = true\n    setTimeout(() => {\n      base64Copied.value = false\n    }, 2000)\n  } catch (error) {\n    // 降级方案\n    const textarea = document.createElement('textarea')\n    textarea.value = base64Output.value\n    document.body.appendChild(textarea)\n    textarea.select()\n    document.execCommand('copy')\n    document.body.removeChild(textarea)\n    base64Copied.value = true\n    setTimeout(() => {\n      base64Copied.value = false\n    }, 2000)\n  }\n}\n\n// 清空图片\nconst clearImage = () => {\n  selectedImage.value = null\n  base64Output.value = ''\n}\n\n// 处理 Base64 输入\nconst processBase64 = () => {\n  if (!base64Input.value) {\n    decodedImage.value = null\n    return\n  }\n\n  try {\n    let dataUrl = base64Input.value.trim()\n\n    // 如果不包含 data: 前缀，添加它\n    if (!dataUrl.startsWith('data:')) {\n      // 尝试检测图片类型\n      let mimeType = 'image/png'\n      if (dataUrl.startsWith('/9j/')) {\n        mimeType = 'image/jpeg'\n      } else if (dataUrl.startsWith('R0lGOD')) {\n        mimeType = 'image/gif'\n      } else if (dataUrl.startsWith('iVBORw0K')) {\n        mimeType = 'image/png'\n      }\n      dataUrl = `data:${mimeType};base64,${dataUrl}`\n    }\n\n    // 验证 Data URL\n    if (!dataUrl.match(/^data:image\\/[a-z]+;base64,/)) {\n      throw new Error('无效的 Base64 格式')\n    }\n\n    decodedImage.value = {\n      url: dataUrl,\n      format: dataUrl.split(':')[1].split(';')[0].split('/')[1].toUpperCase(),\n      size: Math.round(dataUrl.length * 0.75)\n    }\n  } catch (error) {\n    decodedImage.value = null\n    console.error('Base64 解析失败:', error)\n  }\n}\n\n// 清空 Base64\nconst clearBase64 = () => {\n  base64Input.value = ''\n  decodedImage.value = null\n}\n\n// 下载图片\nconst downloadImage = () => {\n  if (!decodedImage.value) return\n\n  const link = document.createElement('a')\n  link.href = decodedImage.value.url\n\n  // 转换格式\n  if (downloadFormat.value !== 'png') {\n    const img = new Image()\n    img.onload = () => {\n      const canvas = document.createElement('canvas')\n      const ctx = canvas.getContext('2d')\n      canvas.width = img.width\n      canvas.height = img.height\n\n      ctx.drawImage(img, 0, 0)\n\n      const mimeType = downloadFormat.value === 'jpeg' ? 'image/jpeg' : 'image/webp'\n      const quality = downloadFormat.value === 'jpeg' ? 0.9 : undefined\n\n      canvas.toBlob((blob) => {\n        const url = URL.createObjectURL(blob)\n        link.href = url\n        link.download = `${downloadFilename.value}.${downloadFormat.value}`\n        link.click()\n        URL.revokeObjectURL(url)\n      }, mimeType, quality)\n    }\n    img.src = decodedImage.value.url\n  } else {\n    link.download = `${downloadFilename.value}.png`\n    link.click()\n  }\n}\n\n// 批量处理相关\nconst addBatchItem = () => {\n  batchItems.value.push({ base64: '', image: null })\n}\n\nconst removeBatchItem = (index) => {\n  batchItems.value.splice(index, 1)\n  if (batchItems.value.length === 0) {\n    addBatchItem()\n  }\n}\n\nconst updateBatchItem = (index) => {\n  const item = batchItems.value[index]\n  if (!item.base64) {\n    item.image = null\n    return\n  }\n\n  try {\n    let dataUrl = item.base64.trim()\n    if (!dataUrl.startsWith('data:')) {\n      dataUrl = `data:image/png;base64,${dataUrl}`\n    }\n    item.image = dataUrl\n  } catch (error) {\n    item.image = null\n  }\n}\n\nconst downloadAllBatch = async () => {\n  const zip = new JSZip()\n\n  batchItems.value.forEach((item, index) => {\n    if (item.image) {\n      // 从 Data URL 转换为 Blob\n      const response = fetch(item.image)\n      response.then(res => res.blob()).then(blob => {\n        zip.file(`image_${index + 1}.png`, blob)\n      })\n    }\n  })\n\n  // 等待所有图片处理完成\n  setTimeout(async () => {\n    const zipBlob = await zip.generateAsync({ type: 'blob' })\n    const url = URL.createObjectURL(zipBlob)\n    const link = document.createElement('a')\n    link.href = url\n    link.download = `base64_images_${Date.now()}.zip`\n    link.click()\n    URL.revokeObjectURL(url)\n  }, 1000)\n}\n\n// 格式化文件大小\nconst formatFileSize = (bytes) => {\n  if (bytes === 0) return '0 B'\n  const k = 1024\n  const sizes = ['B', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\n// 触发文件输入\nconst triggerImageInput = () => {\n  imageInput.value.click()\n}\n\n// SEO配置\nuseSeoMeta({\n  title: 'Base64图片 - 在线图片与Base64互转工具',\n  description: '免费在线图片转Base64和Base64转图片工具，支持批量处理，直接预览和下载。',\n  keywords: ['base64图片', '图片base64', 'data url', '图片编码', '在线工具']\n})\n\ndefinePageMeta({\n  layout: 'default'\n})\n</script>"],"version":3}