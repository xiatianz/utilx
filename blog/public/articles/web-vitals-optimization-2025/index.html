<!doctype html><html lang=zh-cn dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>2025å¹´Web Vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å— | æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</title><meta name=keywords content="Web Vitals,æ€§èƒ½ä¼˜åŒ–,LCP,FID,CLS,ç”¨æˆ·ä½“éªŒ"><meta name=description content="å…¨é¢è§£æ2025å¹´Web Vitalsä¼˜åŒ–ç­–ç•¥ï¼ŒåŒ…æ‹¬Core Web VitalsæŒ‡æ ‡ã€æœ€æ–°ä¼˜åŒ–æŠ€æœ¯å’Œæ€§èƒ½ç›‘æ§æœ€ä½³å®è·µã€‚"><meta name=author content="æŠ€æœ¯å›¢é˜Ÿ"><link rel=canonical href=/blog/articles/web-vitals-optimization-2025/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.7e8505b7cdf8bb22ab2305e53c2700bb06c7e64faeb72cd3468823a9a3bd3d6e.css integrity="sha256-foUFt834uyKrIwXlPCcAuwbH5k+utyzTRogjqaO9PW4=" rel="preload stylesheet" as=style><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/blog/favicon-32x32.png><link rel=apple-touch-icon href=/blog/apple-touch-icon.png><link rel=mask-icon href=/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=/blog/articles/web-vitals-optimization-2025/feed.xml title=rss><link rel=alternate hreflang=zh-cn href=/blog/articles/web-vitals-optimization-2025/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script src=/js/external-link-config.js></script><script src=/js/external-link-interceptor.js></script><link rel=stylesheet href=/blog/css/custom.css media=screen><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«","url":"https://www.util.cn/blog/","description":"æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚","publisher":{"@type":"Organization","name":"æœ‰æ¡å·¥å…·","url":"https://www.util.cn","logo":{"@type":"ImageObject","url":"https://www.util.cn/blog/logo/logo-256.png","width":256,"height":256}},"potentialAction":[{"@type":"SearchAction","target":"https://www.util.cn/blog/search?q={search_term_string}","query-input":"required name=search_term_string"}]}</script><meta property="og:type" content="website"><meta property="og:title" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta property="og:description" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚"><meta property="og:url" content="https://www.util.cn/blog/"><meta property="og:site_name" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢"><meta property="og:image" content="https://www.util.cn/blog/logo/logo-256.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta name=twitter:description content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚"><meta name=twitter:image content="https://www.util.cn/blog/logo/logo-256.png"><meta name=baidu-site-verification content><meta name=category content="æŠ€æœ¯åšå®¢,å¼€å‘è€…å·¥å…·,ç¼–ç¨‹æ•™ç¨‹"><meta name=coverage content="Worldwide"><meta name=distribution content="Global"><meta name=rating content="General"><script id=51la_code async crossorigin=anonymous src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=pro"></script><script>window.addEventListener("load",function(){setTimeout(function(){typeof la!="undefined"?console.log("51laç»Ÿè®¡å·²åŠ è½½"):(console.warn("51laç»Ÿè®¡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ"),function(){var e=document.createElement("script");e.src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=backup",e.async=!0,document.head.appendChild(e)}())},3e3)})</script><meta property="og:url" content="/blog/articles/web-vitals-optimization-2025/"><meta property="og:site_name" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·"><meta property="og:title" content="2025å¹´Web Vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—"><meta property="og:description" content="å…¨é¢è§£æ2025å¹´Web Vitalsä¼˜åŒ–ç­–ç•¥ï¼ŒåŒ…æ‹¬Core Web VitalsæŒ‡æ ‡ã€æœ€æ–°ä¼˜åŒ–æŠ€æœ¯å’Œæ€§èƒ½ç›‘æ§æœ€ä½³å®è·µã€‚"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-19T20:00:00+08:00"><meta property="article:modified_time" content="2025-12-19T20:00:00+08:00"><meta property="article:tag" content="æ€§èƒ½ä¼˜åŒ–"><meta property="article:tag" content="Web Vitals"><meta property="article:tag" content="ç”¨æˆ·ä½“éªŒ"><meta property="article:tag" content="SEO"><meta property="article:tag" content="å‰ç«¯"><meta name=twitter:card content="summary"><meta name=twitter:title content="2025å¹´Web Vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—"><meta name=twitter:description content="å…¨é¢è§£æ2025å¹´Web Vitalsä¼˜åŒ–ç­–ç•¥ï¼ŒåŒ…æ‹¬Core Web VitalsæŒ‡æ ‡ã€æœ€æ–°ä¼˜åŒ–æŠ€æœ¯å’Œæ€§èƒ½ç›‘æ§æœ€ä½³å®è·µã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ‰€æœ‰æ–‡ç« ","item":"/blog/posts/"},{"@type":"ListItem","position":2,"name":"2025å¹´Web Vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—","item":"/blog/articles/web-vitals-optimization-2025/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"2025å¹´Web Vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—","name":"2025å¹´Web Vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—","description":"å…¨é¢è§£æ2025å¹´Web Vitalsä¼˜åŒ–ç­–ç•¥ï¼ŒåŒ…æ‹¬Core Web VitalsæŒ‡æ ‡ã€æœ€æ–°ä¼˜åŒ–æŠ€æœ¯å’Œæ€§èƒ½ç›‘æ§æœ€ä½³å®è·µã€‚","keywords":["Web Vitals","æ€§èƒ½ä¼˜åŒ–","LCP","FID","CLS","ç”¨æˆ·ä½“éªŒ"],"articleBody":"2025å¹´Web Vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å— Web Vitalså·²æˆä¸ºè¡¡é‡ç½‘ç«™ç”¨æˆ·ä½“éªŒçš„æ ¸å¿ƒæŒ‡æ ‡ï¼Œç›´æ¥å½±å“SEOæ’åå’Œç”¨æˆ·æ»¡æ„åº¦ã€‚æœ¬æŒ‡å—å°†æ·±å…¥æ¢è®¨2025å¹´æœ€æ–°çš„ä¼˜åŒ–ç­–ç•¥å’ŒæŠ€æœ¯ã€‚\nCore Web Vitals 2025æ›´æ–° 1. LCP (Largest Contentful Paint) ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 // LCPç›‘æµ‹å’Œä¼˜åŒ– import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals'; // ç›‘æµ‹LCP getLCP(console.log); // LCPä¼˜åŒ–ç­–ç•¥ class LCPOptimizer { constructor() { this.optimizationStrategies = [ this.preloadCriticalResources.bind(this), this.optimizeImages.bind(this), this.minifyCriticalCSS.bind(this), this.useResourceHints.bind(this) ]; } // é¢„åŠ è½½å…³é”®èµ„æº preloadCriticalResources() { const criticalResources = [ { href: '/fonts/main.woff2', as: 'font', type: 'font/woff2', crossOrigin: 'anonymous' }, { href: '/css/critical.css', as: 'style' }, { href: '/js/critical.js', as: 'script' } ]; criticalResources.forEach(resource =\u003e { const link = document.createElement('link'); link.rel = 'preload'; Object.keys(resource).forEach(key =\u003e { link.setAttribute(key, resource[key]); }); document.head.appendChild(link); }); } // å›¾ç‰‡ä¼˜åŒ– async optimizeImages() { const images = document.querySelectorAll('img[data-src]'); const imageObserver = new IntersectionObserver((entries, observer) =\u003e { entries.forEach(entry =\u003e { if (entry.isIntersecting) { const img = entry.target; this.loadImageOptimized(img); observer.unobserve(img); } }); }, { rootMargin: '50px' }); images.forEach(img =\u003e imageObserver.observe(img)); } // ä¼˜åŒ–å›¾ç‰‡åŠ è½½ async loadImageOptimized(img) { // ä½¿ç”¨WebPæ ¼å¼ const webpUrl = img.dataset.src.replace(/\\.(jpg|png)$/, '.webp'); // å“åº”å¼å›¾ç‰‡ const srcset = this.generateSrcset(img.dataset.src); img.srcset = srcset; img.sizes = '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw'; // æ¸è¿›å¼åŠ è½½ img.style.filter = 'blur(5px)'; img.onload = () =\u003e { img.style.filter = 'none'; img.style.transition = 'filter 0.3s'; }; img.src = webpUrl; } // ç”Ÿæˆå“åº”å¼å›¾ç‰‡srcset generateSrcset(baseUrl) { const widths = [320, 640, 960, 1280, 1920]; return widths .map(width =\u003e `${baseUrl}?w=${width} ${width}w`) .join(', '); } } // å…³é”®CSSå†…è” class CriticalCSS { constructor() { this.injectCriticalCSS(); this.loadNonCriticalCSS(); } injectCriticalCSS() { const criticalCSS = ` /* å…³é”®CSSå†…å®¹ */ body { margin: 0; font-family: system-ui; } .header { height: 60px; background: #fff; } .hero { min-height: 400px; background: linear-gradient(45deg, #667eea 0%, #764ba2 100%); } `; const style = document.createElement('style'); style.textContent = criticalCSS; document.head.appendChild(style); } loadNonCriticalCSS() { const nonCriticalCSS = [ '/css/animations.css', '/css/components.css', '/css/utilities.css' ]; nonCriticalCSS.forEach(href =\u003e { const link = document.createElement('link'); link.rel = 'preload'; link.as = 'style'; link.onload = function() { this.rel = 'stylesheet'; }; link.href = href; document.head.appendChild(link); }); } } 2. FID (First Input Delay) ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 // FIDä¼˜åŒ–ç­–ç•¥ class FIDOptimizer { constructor() { this.optimizeJavaScript(); this.setupEventListeners(); this.minimizeMainThreadWork(); } // JavaScriptä¼˜åŒ– optimizeJavaScript() { // ä»£ç åˆ†å‰² this.lazyLoadModules(); // ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬ this.optimizeThirdPartyScripts(); // ä½¿ç”¨Web Workers this.setupWebWorkers(); } // æ‡’åŠ è½½æ¨¡å— lazyLoadModules() { const modules = { // äº¤äº’å¼åœ°å›¾ map: () =\u003e import('./modules/map.js'), // å›¾è¡¨ç»„ä»¶ charts: () =\u003e import('./modules/charts.js'), // è§†é¢‘æ’­æ”¾å™¨ video: () =\u003e import('./modules/video.js') }; // æŒ‰éœ€åŠ è½½ document.addEventListener('click', (e) =\u003e { if (e.target.matches('.map-trigger')) { modules.map().then(module =\u003e module.init()); } }, { passive: true }); // äº¤é›†è§‚å¯Ÿå™¨åŠ è½½ const observer = new IntersectionObserver((entries) =\u003e { entries.forEach(entry =\u003e { if (entry.isIntersecting) { const moduleName = entry.target.dataset.module; if (modules[moduleName]) { modules[moduleName](); observer.unobserve(entry.target); } } }); }, { rootMargin: '100px' }); document.querySelectorAll('[data-module]').forEach(el =\u003e { observer.observe(el); }); } // ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬ optimizeThirdPartyScripts() { // å»¶è¿ŸåŠ è½½åˆ†æè„šæœ¬ window.addEventListener('load', () =\u003e { setTimeout(() =\u003e { this.loadScript('https://www.google-analytics.com/analytics.js', { async: true, defer: true }); }, 2000); }); // é¢„è¿æ¥åˆ°ç¬¬ä¸‰æ–¹åŸŸå const preconnectDomains = [ 'https://www.google-analytics.com', 'https://stats.g.doubleclick.net', 'https://fonts.googleapis.com' ]; preconnectDomains.forEach(domain =\u003e { const link = document.createElement('link'); link.rel = 'preconnect'; link.href = domain; document.head.appendChild(link); }); } // Web Workersè®¾ç½® setupWebWorkers() { // è®¡ç®—å¯†é›†å‹ä»»åŠ¡ç§»è‡³Web Worker const workerCode = ` self.onmessage = function(e) { const result = heavyComputation(e.data); self.postMessage(result); }; function heavyComputation(data) { // å¤æ‚è®¡ç®—é€»è¾‘ return data.reduce((acc, val) =\u003e acc + val, 0); } `; const blob = new Blob([workerCode], { type: 'application/javascript' }); const worker = new Worker(URL.createObjectURL(blob)); // ä½¿ç”¨ç¤ºä¾‹ worker.postMessage([1, 2, 3, 4, 5]); worker.onmessage = (e) =\u003e { console.log('è®¡ç®—ç»“æœ:', e.data); }; } // ä¼˜åŒ–äº‹ä»¶ç›‘å¬å™¨ setupEventListeners() { // ä½¿ç”¨äº‹ä»¶å§”æ‰˜ document.body.addEventListener('click', (e) =\u003e { if (e.target.matches('.btn')) { this.handleButtonClick(e); } }, { passive: true }); // é˜²æŠ–æ»šåŠ¨äº‹ä»¶ let ticking = false; const updatePosition = () =\u003e { // æ›´æ–°ä½ç½®é€»è¾‘ ticking = false; }; window.addEventListener('scroll', () =\u003e { if (!ticking) { requestAnimationFrame(updatePosition); ticking = true; } }, { passive: true }); } } 3. CLS (Cumulative Layout Shift) ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 // CLSä¼˜åŒ–ç­–ç•¥ class CLSOptimizer { constructor() { this.reserveSpace(); this.optimizeFontLoading(); this.handleAdsAndWidgets(); } // ä¸ºåŠ¨æ€å†…å®¹é¢„ç•™ç©ºé—´ reserveSpace() { // å›¾ç‰‡å®¹å™¨é¢„ç•™ç©ºé—´ const imageContainers = document.querySelectorAll('.image-container'); imageContainers.forEach(container =\u003e { const aspectRatio = container.dataset.aspectRatio || '16/9'; const [width, height] = aspectRatio.split('/').map(Number); const paddingBottom = (height / width) * 100; container.style.paddingBottom = `${paddingBottom}%`; container.style.position = 'relative'; }); // å­—ä½“åŠ è½½å‰è®¾ç½®è¡Œé«˜ const headings = document.querySelectorAll('h1, h2, h3'); headings.forEach(heading =\u003e { heading.style.lineHeight = '1.2'; heading.style.minHeight = '1.2em'; }); // å¹¿å‘Šä½é¢„ç•™ const adSlots = document.querySelectorAll('.ad-slot'); adSlots.forEach(slot =\u003e { const width = slot.dataset.width || '300'; const height = slot.dataset.height || '250'; slot.style.width = `${width}px`; slot.style.height = `${height}px`; slot.style.backgroundColor = '#f0f0f0'; }); } // ä¼˜åŒ–å­—ä½“åŠ è½½ optimizeFontLoading() { // å­—ä½“æ˜¾ç¤ºç­–ç•¥ const fontDisplay = ` @font-face { font-family: 'Custom Font'; src: url('/fonts/custom-font.woff2') format('woff2'); font-display: swap; ascent-override: 90%; descent-override: 35%; } `; const style = document.createElement('style'); style.textContent = fontDisplay; document.head.appendChild(style); // é¢„åŠ è½½å…³é”®å­—ä½“ const fontLink = document.createElement('link'); fontLink.rel = 'preload'; fontLink.href = '/fonts/critical-font.woff2'; fontLink.as = 'font'; fontLink.type = 'font/woff2'; fontLink.crossOrigin = 'anonymous'; document.head.appendChild(fontLink); // å­—ä½“åŠ è½½ä¼˜åŒ– if ('fonts' in document) { Promise.all([ document.fonts.load('16px Custom Font'), document.fonts.load('24px Custom Font') ]).then(() =\u003e { document.documentElement.classList.add('fonts-loaded'); }); } } // å¤„ç†å¹¿å‘Šå’ŒåµŒå…¥å†…å®¹ handleAdsAndWidgets() { // å¹¿å‘Šå®¹å™¨ä¼˜åŒ– const adContainers = document.querySelectorAll('.ad-container'); adContainers.forEach(container =\u003e { container.style.minHeight = container.dataset.minHeight || '250px'; container.style.display = 'flex'; container.style.alignItems = 'center'; container.style.justifyContent = 'center'; container.style.backgroundColor = '#f5f5f5'; }); // å»¶è¿ŸåŠ è½½åµŒå…¥å†…å®¹ const embedElements = document.querySelectorAll('[data-embed]'); const embedObserver = new IntersectionObserver((entries) =\u003e { entries.forEach(entry =\u003e { if (entry.isIntersecting) { const element = entry.target; this.loadEmbed(element); embedObserver.unobserve(element); } }); }, { rootMargin: '200px' }); embedElements.forEach(el =\u003e embedObserver.observe(el)); } // åŠ è½½åµŒå…¥å†…å®¹ loadEmbed(element) { const embedType = element.dataset.embed; const embedSrc = element.dataset.src; switch (embedType) { case 'youtube': element.innerHTML = ` ","wordCount":"3321","inLanguage":"zh-cn","datePublished":"2025-12-19T20:00:00+08:00","dateModified":"2025-12-19T20:00:00+08:00","author":{"@type":"Person","name":"æŠ€æœ¯å›¢é˜Ÿ"},"mainEntityOfPage":{"@type":"WebPage","@id":"/blog/articles/web-vitals-optimization-2025/"},"publisher":{"@type":"Organization","name":"æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·","logo":{"@type":"ImageObject","url":"/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=/blog/ accesskey=h title="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· (Alt + H)">æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=/blog/posts/ title="æ‰€æœ‰æ–‡ç« åˆ—è¡¨ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŸ¥çœ‹æ‰€æœ‰æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ–‡ç« </span></a></li><li><a href=https://www.util.cn title="æœ‰æ¡å·¥å…· - å¼€å‘è€…çš„å¸¸ç”¨å·¥å…·é›†åˆï¼šæ— å¹¿å‘Š Â· æœ¬åœ°è®¡ç®— Â· å³å¼€å³ç”¨çš„åœ¨çº¿å·¥å…·å¹³å°ï¼Œæä¾›JSONæ ¼å¼åŒ–ã€SQLæ ¼å¼åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰å®ç”¨å·¥å…·"><span>æœ‰æ¡å·¥å…·</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=/blog/categories/ title="æ–‡ç« åˆ†ç±» - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æŠ€æœ¯é¢†åŸŸåˆ†ç±»çš„ä¼˜è´¨æ–‡ç« ï¼ŒåŒ…æ‹¬å‰ç«¯å¼€å‘ã€å·¥å…·ä½¿ç”¨ã€ç¼–ç¨‹æŠ€å·§ç­‰"><span>åˆ†ç±»</span></a></li><li><a href=/blog/tags/ title="æ ‡ç­¾äº‘ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡æ ‡ç­¾å¿«é€Ÿæ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ ‡ç­¾</span></a></li><li><a href=/blog/archives/ title="æ–‡ç« å½’æ¡£ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æ—¶é—´æŸ¥çœ‹å†å²æ–‡ç« "><span>å½’æ¡£</span></a></li><li><a href=/blog/search/ title="æœç´¢æ–‡ç«  - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡å…³é”®è¯æœç´¢æ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹ï¼Œæ”¯æŒæ ‡é¢˜ã€å†…å®¹ã€åˆ†ç±»å’Œæ ‡ç­¾æœç´¢"><span>æœç´¢</span></a></li></ul></nav></header><main class=main><article class=post-single><div class=post-content-wrapper><main class=post-content-main><header class=post-header-main><h1 class="post-title entry-hint-parent">2025å¹´Web Vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—</h1><div class=post-description>å…¨é¢è§£æ2025å¹´Web Vitalsä¼˜åŒ–ç­–ç•¥ï¼ŒåŒ…æ‹¬Core Web VitalsæŒ‡æ ‡ã€æœ€æ–°ä¼˜åŒ–æŠ€æœ¯å’Œæ€§èƒ½ç›‘æ§æœ€ä½³å®è·µã€‚</div><div class=post-meta><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ class=category-link>å‰ç«¯å¼€å‘</a></div><span class=post-date>2025-12-19</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></div></header><div class=post-content><h2 id=2025å¹´web-vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—>2025å¹´Web Vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—<a hidden class=anchor aria-hidden=true href=#2025å¹´web-vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—>#</a></h2><p>Web Vitalså·²æˆä¸ºè¡¡é‡ç½‘ç«™ç”¨æˆ·ä½“éªŒçš„æ ¸å¿ƒæŒ‡æ ‡ï¼Œç›´æ¥å½±å“SEOæ’åå’Œç”¨æˆ·æ»¡æ„åº¦ã€‚æœ¬æŒ‡å—å°†æ·±å…¥æ¢è®¨2025å¹´æœ€æ–°çš„ä¼˜åŒ–ç­–ç•¥å’ŒæŠ€æœ¯ã€‚</p><h3 id=core-web-vitals-2025æ›´æ–°>Core Web Vitals 2025æ›´æ–°<a hidden class=anchor aria-hidden=true href=#core-web-vitals-2025æ›´æ–°>#</a></h3><h4 id=1-lcp-largest-contentful-paint-ä¼˜åŒ–>1. LCP (Largest Contentful Paint) ä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#1-lcp-largest-contentful-paint-ä¼˜åŒ–>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// LCPç›‘æµ‹å’Œä¼˜åŒ–
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>import</span> { getCLS, getFID, getFCP, getLCP, getTTFB } from <span style=color:#a5d6ff>&#39;web-vitals&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ç›‘æµ‹LCP
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>getLCP(console.log);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// LCPä¼˜åŒ–ç­–ç•¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> LCPOptimizer {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.optimizationStrategies <span style=color:#ff7b72;font-weight:700>=</span> [
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.preloadCriticalResources.bind(<span style=color:#ff7b72>this</span>),
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.optimizeImages.bind(<span style=color:#ff7b72>this</span>),
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.minifyCriticalCSS.bind(<span style=color:#ff7b72>this</span>),
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.useResourceHints.bind(<span style=color:#ff7b72>this</span>)
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// é¢„åŠ è½½å…³é”®èµ„æº
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  preloadCriticalResources() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> criticalResources <span style=color:#ff7b72;font-weight:700>=</span> [
</span></span><span style=display:flex><span>      { href<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;/fonts/main.woff2&#39;</span>, as<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;font&#39;</span>, type<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;font/woff2&#39;</span>, crossOrigin<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;anonymous&#39;</span> },
</span></span><span style=display:flex><span>      { href<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;/css/critical.css&#39;</span>, as<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;style&#39;</span> },
</span></span><span style=display:flex><span>      { href<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;/js/critical.js&#39;</span>, as<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;script&#39;</span> }
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    criticalResources.forEach(resource =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> link <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;link&#39;</span>);
</span></span><span style=display:flex><span>      link.rel <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;preload&#39;</span>;
</span></span><span style=display:flex><span>      Object.keys(resource).forEach(key =&gt; {
</span></span><span style=display:flex><span>        link.setAttribute(key, resource[key]);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>      document.head.appendChild(link);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// å›¾ç‰‡ä¼˜åŒ–
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> optimizeImages() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> images <span style=color:#ff7b72;font-weight:700>=</span> document.querySelectorAll(<span style=color:#a5d6ff>&#39;img[data-src]&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> imageObserver <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> IntersectionObserver((entries, observer) =&gt; {
</span></span><span style=display:flex><span>      entries.forEach(entry =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (entry.isIntersecting) {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>const</span> img <span style=color:#ff7b72;font-weight:700>=</span> entry.target;
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.loadImageOptimized(img);
</span></span><span style=display:flex><span>          observer.unobserve(img);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }, {
</span></span><span style=display:flex><span>      rootMargin<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;50px&#39;</span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    images.forEach(img =&gt; imageObserver.observe(img));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ä¼˜åŒ–å›¾ç‰‡åŠ è½½
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> loadImageOptimized(img) {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä½¿ç”¨WebPæ ¼å¼
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> webpUrl <span style=color:#ff7b72;font-weight:700>=</span> img.dataset.src.replace(<span style=color:#79c0ff>/\.(jpg|png)$/</span>, <span style=color:#a5d6ff>&#39;.webp&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å“åº”å¼å›¾ç‰‡
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> srcset <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.generateSrcset(img.dataset.src);
</span></span><span style=display:flex><span>    img.srcset <span style=color:#ff7b72;font-weight:700>=</span> srcset;
</span></span><span style=display:flex><span>    img.sizes <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// æ¸è¿›å¼åŠ è½½
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    img.style.filter <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;blur(5px)&#39;</span>;
</span></span><span style=display:flex><span>    img.onload <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>      img.style.filter <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;none&#39;</span>;
</span></span><span style=display:flex><span>      img.style.transition <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;filter 0.3s&#39;</span>;
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    img.src <span style=color:#ff7b72;font-weight:700>=</span> webpUrl;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ç”Ÿæˆå“åº”å¼å›¾ç‰‡srcset
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  generateSrcset(baseUrl) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> widths <span style=color:#ff7b72;font-weight:700>=</span> [<span style=color:#a5d6ff>320</span>, <span style=color:#a5d6ff>640</span>, <span style=color:#a5d6ff>960</span>, <span style=color:#a5d6ff>1280</span>, <span style=color:#a5d6ff>1920</span>];
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> widths
</span></span><span style=display:flex><span>      .map(width =&gt; <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>baseUrl<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>?w=</span><span style=color:#a5d6ff>${</span>width<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff> </span><span style=color:#a5d6ff>${</span>width<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>w`</span>)
</span></span><span style=display:flex><span>      .join(<span style=color:#a5d6ff>&#39;, &#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// å…³é”®CSSå†…è”
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> CriticalCSS {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.injectCriticalCSS();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.loadNonCriticalCSS();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  injectCriticalCSS() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> criticalCSS <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      /* å…³é”®CSSå†…å®¹ */
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      body { margin: 0; font-family: system-ui; }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      .header { height: 60px; background: #fff; }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      .hero { min-height: 400px; background: linear-gradient(45deg, #667eea 0%, #764ba2 100%); }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>    `</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> style <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;style&#39;</span>);
</span></span><span style=display:flex><span>    style.textContent <span style=color:#ff7b72;font-weight:700>=</span> criticalCSS;
</span></span><span style=display:flex><span>    document.head.appendChild(style);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  loadNonCriticalCSS() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> nonCriticalCSS <span style=color:#ff7b72;font-weight:700>=</span> [
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;/css/animations.css&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;/css/components.css&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;/css/utilities.css&#39;</span>
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    nonCriticalCSS.forEach(href =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> link <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;link&#39;</span>);
</span></span><span style=display:flex><span>      link.rel <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;preload&#39;</span>;
</span></span><span style=display:flex><span>      link.as <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;style&#39;</span>;
</span></span><span style=display:flex><span>      link.onload <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>function</span>() {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.rel <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;stylesheet&#39;</span>;
</span></span><span style=display:flex><span>      };
</span></span><span style=display:flex><span>      link.href <span style=color:#ff7b72;font-weight:700>=</span> href;
</span></span><span style=display:flex><span>      document.head.appendChild(link);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=2-fid-first-input-delay-ä¼˜åŒ–>2. FID (First Input Delay) ä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#2-fid-first-input-delay-ä¼˜åŒ–>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// FIDä¼˜åŒ–ç­–ç•¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> FIDOptimizer {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.optimizeJavaScript();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.setupEventListeners();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.minimizeMainThreadWork();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// JavaScriptä¼˜åŒ–
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  optimizeJavaScript() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä»£ç åˆ†å‰²
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>this</span>.lazyLoadModules();
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>this</span>.optimizeThirdPartyScripts();
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä½¿ç”¨Web Workers
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>this</span>.setupWebWorkers();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// æ‡’åŠ è½½æ¨¡å—
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  lazyLoadModules() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> modules <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// äº¤äº’å¼åœ°å›¾
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      map<span style=color:#ff7b72;font-weight:700>:</span> () =&gt; <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./modules/map.js&#39;</span>),
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// å›¾è¡¨ç»„ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      charts<span style=color:#ff7b72;font-weight:700>:</span> () =&gt; <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./modules/charts.js&#39;</span>),
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// è§†é¢‘æ’­æ”¾å™¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      video<span style=color:#ff7b72;font-weight:700>:</span> () =&gt; <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./modules/video.js&#39;</span>)
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// æŒ‰éœ€åŠ è½½
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    document.addEventListener(<span style=color:#a5d6ff>&#39;click&#39;</span>, (e) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (e.target.matches(<span style=color:#a5d6ff>&#39;.map-trigger&#39;</span>)) {
</span></span><span style=display:flex><span>        modules.map().then(module =&gt; module.init());
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }, { passive<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span> });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// äº¤é›†è§‚å¯Ÿå™¨åŠ è½½
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> observer <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> IntersectionObserver((entries) =&gt; {
</span></span><span style=display:flex><span>      entries.forEach(entry =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (entry.isIntersecting) {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>const</span> moduleName <span style=color:#ff7b72;font-weight:700>=</span> entry.target.dataset.module;
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>if</span> (modules[moduleName]) {
</span></span><span style=display:flex><span>            modules[moduleName]();
</span></span><span style=display:flex><span>            observer.unobserve(entry.target);
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }, { rootMargin<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;100px&#39;</span> });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    document.querySelectorAll(<span style=color:#a5d6ff>&#39;[data-module]&#39;</span>).forEach(el =&gt; {
</span></span><span style=display:flex><span>      observer.observe(el);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  optimizeThirdPartyScripts() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å»¶è¿ŸåŠ è½½åˆ†æè„šæœ¬
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    window.addEventListener(<span style=color:#a5d6ff>&#39;load&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>      setTimeout(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.loadScript(<span style=color:#a5d6ff>&#39;https://www.google-analytics.com/analytics.js&#39;</span>, {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>async</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>          defer<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      }, <span style=color:#a5d6ff>2000</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// é¢„è¿æ¥åˆ°ç¬¬ä¸‰æ–¹åŸŸå
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> preconnectDomains <span style=color:#ff7b72;font-weight:700>=</span> [
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;https://www.google-analytics.com&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;https://stats.g.doubleclick.net&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;https://fonts.googleapis.com&#39;</span>
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    preconnectDomains.forEach(domain =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> link <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;link&#39;</span>);
</span></span><span style=display:flex><span>      link.rel <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;preconnect&#39;</span>;
</span></span><span style=display:flex><span>      link.href <span style=color:#ff7b72;font-weight:700>=</span> domain;
</span></span><span style=display:flex><span>      document.head.appendChild(link);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// Web Workersè®¾ç½®
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  setupWebWorkers() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// è®¡ç®—å¯†é›†å‹ä»»åŠ¡ç§»è‡³Web Worker
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> workerCode <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      self.onmessage = function(e) {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        const result = heavyComputation(e.data);
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        self.postMessage(result);
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      };
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      function heavyComputation(data) {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        // å¤æ‚è®¡ç®—é€»è¾‘
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        return data.reduce((acc, val) =&gt; acc + val, 0);
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>    `</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> blob <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> Blob([workerCode], { type<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;application/javascript&#39;</span> });
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> worker <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> Worker(URL.createObjectURL(blob));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä½¿ç”¨ç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    worker.postMessage([<span style=color:#a5d6ff>1</span>, <span style=color:#a5d6ff>2</span>, <span style=color:#a5d6ff>3</span>, <span style=color:#a5d6ff>4</span>, <span style=color:#a5d6ff>5</span>]);
</span></span><span style=display:flex><span>    worker.onmessage <span style=color:#ff7b72;font-weight:700>=</span> (e) =&gt; {
</span></span><span style=display:flex><span>      console.log(<span style=color:#a5d6ff>&#39;è®¡ç®—ç»“æœ:&#39;</span>, e.data);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ä¼˜åŒ–äº‹ä»¶ç›‘å¬å™¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  setupEventListeners() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä½¿ç”¨äº‹ä»¶å§”æ‰˜
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    document.body.addEventListener(<span style=color:#a5d6ff>&#39;click&#39;</span>, (e) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (e.target.matches(<span style=color:#a5d6ff>&#39;.btn&#39;</span>)) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.handleButtonClick(e);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }, { passive<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span> });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// é˜²æŠ–æ»šåŠ¨äº‹ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>let</span> ticking <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>false</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> updatePosition <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// æ›´æ–°ä½ç½®é€»è¾‘
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      ticking <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>false</span>;
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    window.addEventListener(<span style=color:#a5d6ff>&#39;scroll&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>ticking) {
</span></span><span style=display:flex><span>        requestAnimationFrame(updatePosition);
</span></span><span style=display:flex><span>        ticking <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>true</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }, { passive<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span> });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=3-cls-cumulative-layout-shift-ä¼˜åŒ–>3. CLS (Cumulative Layout Shift) ä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#3-cls-cumulative-layout-shift-ä¼˜åŒ–>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// CLSä¼˜åŒ–ç­–ç•¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> CLSOptimizer {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.reserveSpace();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.optimizeFontLoading();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.handleAdsAndWidgets();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ä¸ºåŠ¨æ€å†…å®¹é¢„ç•™ç©ºé—´
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  reserveSpace() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å›¾ç‰‡å®¹å™¨é¢„ç•™ç©ºé—´
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> imageContainers <span style=color:#ff7b72;font-weight:700>=</span> document.querySelectorAll(<span style=color:#a5d6ff>&#39;.image-container&#39;</span>);
</span></span><span style=display:flex><span>    imageContainers.forEach(container =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> aspectRatio <span style=color:#ff7b72;font-weight:700>=</span> container.dataset.aspectRatio <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>&#39;16/9&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> [width, height] <span style=color:#ff7b72;font-weight:700>=</span> aspectRatio.split(<span style=color:#a5d6ff>&#39;/&#39;</span>).map(Number);
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> paddingBottom <span style=color:#ff7b72;font-weight:700>=</span> (height <span style=color:#ff7b72;font-weight:700>/</span> width) <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>100</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      container.style.paddingBottom <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>paddingBottom<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>%`</span>;
</span></span><span style=display:flex><span>      container.style.position <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;relative&#39;</span>;
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å­—ä½“åŠ è½½å‰è®¾ç½®è¡Œé«˜
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> headings <span style=color:#ff7b72;font-weight:700>=</span> document.querySelectorAll(<span style=color:#a5d6ff>&#39;h1, h2, h3&#39;</span>);
</span></span><span style=display:flex><span>    headings.forEach(heading =&gt; {
</span></span><span style=display:flex><span>      heading.style.lineHeight <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;1.2&#39;</span>;
</span></span><span style=display:flex><span>      heading.style.minHeight <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;1.2em&#39;</span>;
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å¹¿å‘Šä½é¢„ç•™
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> adSlots <span style=color:#ff7b72;font-weight:700>=</span> document.querySelectorAll(<span style=color:#a5d6ff>&#39;.ad-slot&#39;</span>);
</span></span><span style=display:flex><span>    adSlots.forEach(slot =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> width <span style=color:#ff7b72;font-weight:700>=</span> slot.dataset.width <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>&#39;300&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> height <span style=color:#ff7b72;font-weight:700>=</span> slot.dataset.height <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>&#39;250&#39;</span>;
</span></span><span style=display:flex><span>      slot.style.width <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>width<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>px`</span>;
</span></span><span style=display:flex><span>      slot.style.height <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>height<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>px`</span>;
</span></span><span style=display:flex><span>      slot.style.backgroundColor <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;#f0f0f0&#39;</span>;
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ä¼˜åŒ–å­—ä½“åŠ è½½
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  optimizeFontLoading() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å­—ä½“æ˜¾ç¤ºç­–ç•¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> fontDisplay <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      @font-face {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        font-family: &#39;Custom Font&#39;;
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        src: url(&#39;/fonts/custom-font.woff2&#39;) format(&#39;woff2&#39;);
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        font-display: swap;
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        ascent-override: 90%;
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        descent-override: 35%;
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>    `</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> style <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;style&#39;</span>);
</span></span><span style=display:flex><span>    style.textContent <span style=color:#ff7b72;font-weight:700>=</span> fontDisplay;
</span></span><span style=display:flex><span>    document.head.appendChild(style);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// é¢„åŠ è½½å…³é”®å­—ä½“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> fontLink <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;link&#39;</span>);
</span></span><span style=display:flex><span>    fontLink.rel <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;preload&#39;</span>;
</span></span><span style=display:flex><span>    fontLink.href <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;/fonts/critical-font.woff2&#39;</span>;
</span></span><span style=display:flex><span>    fontLink.as <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;font&#39;</span>;
</span></span><span style=display:flex><span>    fontLink.type <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;font/woff2&#39;</span>;
</span></span><span style=display:flex><span>    fontLink.crossOrigin <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;anonymous&#39;</span>;
</span></span><span style=display:flex><span>    document.head.appendChild(fontLink);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å­—ä½“åŠ è½½ä¼˜åŒ–
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>if</span> (<span style=color:#a5d6ff>&#39;fonts&#39;</span> <span style=color:#ff7b72>in</span> document) {
</span></span><span style=display:flex><span>      Promise.all([
</span></span><span style=display:flex><span>        document.fonts.load(<span style=color:#a5d6ff>&#39;16px Custom Font&#39;</span>),
</span></span><span style=display:flex><span>        document.fonts.load(<span style=color:#a5d6ff>&#39;24px Custom Font&#39;</span>)
</span></span><span style=display:flex><span>      ]).then(() =&gt; {
</span></span><span style=display:flex><span>        document.documentElement.classList.add(<span style=color:#a5d6ff>&#39;fonts-loaded&#39;</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// å¤„ç†å¹¿å‘Šå’ŒåµŒå…¥å†…å®¹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  handleAdsAndWidgets() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å¹¿å‘Šå®¹å™¨ä¼˜åŒ–
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> adContainers <span style=color:#ff7b72;font-weight:700>=</span> document.querySelectorAll(<span style=color:#a5d6ff>&#39;.ad-container&#39;</span>);
</span></span><span style=display:flex><span>    adContainers.forEach(container =&gt; {
</span></span><span style=display:flex><span>      container.style.minHeight <span style=color:#ff7b72;font-weight:700>=</span> container.dataset.minHeight <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>&#39;250px&#39;</span>;
</span></span><span style=display:flex><span>      container.style.display <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;flex&#39;</span>;
</span></span><span style=display:flex><span>      container.style.alignItems <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;center&#39;</span>;
</span></span><span style=display:flex><span>      container.style.justifyContent <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;center&#39;</span>;
</span></span><span style=display:flex><span>      container.style.backgroundColor <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;#f5f5f5&#39;</span>;
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å»¶è¿ŸåŠ è½½åµŒå…¥å†…å®¹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> embedElements <span style=color:#ff7b72;font-weight:700>=</span> document.querySelectorAll(<span style=color:#a5d6ff>&#39;[data-embed]&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> embedObserver <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> IntersectionObserver((entries) =&gt; {
</span></span><span style=display:flex><span>      entries.forEach(entry =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (entry.isIntersecting) {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>const</span> element <span style=color:#ff7b72;font-weight:700>=</span> entry.target;
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.loadEmbed(element);
</span></span><span style=display:flex><span>          embedObserver.unobserve(element);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }, { rootMargin<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;200px&#39;</span> });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    embedElements.forEach(el =&gt; embedObserver.observe(el));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// åŠ è½½åµŒå…¥å†…å®¹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  loadEmbed(element) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> embedType <span style=color:#ff7b72;font-weight:700>=</span> element.dataset.embed;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> embedSrc <span style=color:#ff7b72;font-weight:700>=</span> element.dataset.src;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>switch</span> (embedType) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;youtube&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>        element.innerHTML <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>          &lt;iframe
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            src=&#34;</span><span style=color:#a5d6ff>${</span>embedSrc<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>&#34;
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            frameborder=&#34;0&#34;
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34;
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            allowfullscreen&gt;
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>          &lt;/iframe&gt;
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        `</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;twitter&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.loadTwitterEmbed(embedSrc, element);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>break</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=æ€§èƒ½ç›‘æ§å’Œæµ‹é‡>æ€§èƒ½ç›‘æ§å’Œæµ‹é‡<a hidden class=anchor aria-hidden=true href=#æ€§èƒ½ç›‘æ§å’Œæµ‹é‡>#</a></h3><h4 id=1-å®æ—¶æ€§èƒ½ç›‘æ§>1. å®æ—¶æ€§èƒ½ç›‘æ§<a hidden class=anchor aria-hidden=true href=#1-å®æ—¶æ€§èƒ½ç›‘æ§>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">190
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">191
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">192
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">193
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">194
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">195
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">196
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">197
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">198
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">199
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">200
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">201
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">202
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">203
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">204
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">205
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">206
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">207
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">208
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">209
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æ€§èƒ½ç›‘æ§ç³»ç»Ÿ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> PerformanceMonitor {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.metrics <span style=color:#ff7b72;font-weight:700>=</span> {};
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.observers <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.setupObservers();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.trackWebVitals();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  setupObservers() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// Performance Observer
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>if</span> (<span style=color:#a5d6ff>&#39;PerformanceObserver&#39;</span> <span style=color:#ff7b72>in</span> window) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.observeNavigation();
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.observeResources();
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.observePaint();
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.observeLayoutShift();
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.observeLongTasks();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// å¯¼èˆªæ€§èƒ½ç›‘æ§
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  observeNavigation() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> observer <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> PerformanceObserver((list) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> entries <span style=color:#ff7b72;font-weight:700>=</span> list.getEntries();
</span></span><span style=display:flex><span>      entries.forEach(entry =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (entry.entryType <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;navigation&#39;</span>) {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.metrics.navigation <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>            dns<span style=color:#ff7b72;font-weight:700>:</span> entry.domainLookupEnd <span style=color:#ff7b72;font-weight:700>-</span> entry.domainLookupStart,
</span></span><span style=display:flex><span>            tcp<span style=color:#ff7b72;font-weight:700>:</span> entry.connectEnd <span style=color:#ff7b72;font-weight:700>-</span> entry.connectStart,
</span></span><span style=display:flex><span>            ssl<span style=color:#ff7b72;font-weight:700>:</span> entry.secureConnectionStart <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72;font-weight:700>?</span>
</span></span><span style=display:flex><span>                 entry.connectEnd <span style=color:#ff7b72;font-weight:700>-</span> entry.secureConnectionStart <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>            ttfb<span style=color:#ff7b72;font-weight:700>:</span> entry.responseStart <span style=color:#ff7b72;font-weight:700>-</span> entry.requestStart,
</span></span><span style=display:flex><span>            download<span style=color:#ff7b72;font-weight:700>:</span> entry.responseEnd <span style=color:#ff7b72;font-weight:700>-</span> entry.responseStart,
</span></span><span style=display:flex><span>            domParse<span style=color:#ff7b72;font-weight:700>:</span> entry.domContentLoadedEventStart <span style=color:#ff7b72;font-weight:700>-</span> entry.responseEnd,
</span></span><span style=display:flex><span>            domReady<span style=color:#ff7b72;font-weight:700>:</span> entry.domContentLoadedEventEnd <span style=color:#ff7b72;font-weight:700>-</span> entry.domContentLoadedEventStart,
</span></span><span style=display:flex><span>            loadComplete<span style=color:#ff7b72;font-weight:700>:</span> entry.loadEventEnd <span style=color:#ff7b72;font-weight:700>-</span> entry.loadEventStart
</span></span><span style=display:flex><span>          };
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    observer.observe({ entryTypes<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>&#39;navigation&#39;</span>] });
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.observers.push(observer);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// èµ„æºåŠ è½½ç›‘æ§
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  observeResources() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> observer <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> PerformanceObserver((list) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> entries <span style=color:#ff7b72;font-weight:700>=</span> list.getEntries();
</span></span><span style=display:flex><span>      entries.forEach(entry =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> resource <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>          name<span style=color:#ff7b72;font-weight:700>:</span> entry.name,
</span></span><span style=display:flex><span>          type<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getResourceType(entry),
</span></span><span style=display:flex><span>          duration<span style=color:#ff7b72;font-weight:700>:</span> entry.duration,
</span></span><span style=display:flex><span>          size<span style=color:#ff7b72;font-weight:700>:</span> entry.transferSize <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>          cached<span style=color:#ff7b72;font-weight:700>:</span> entry.transferSize <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> entry.decodedBodySize <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span>
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span><span style=color:#ff7b72>this</span>.metrics.resources) {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.metrics.resources <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.metrics.resources.push(resource);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    observer.observe({ entryTypes<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>&#39;resource&#39;</span>] });
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.observers.push(observer);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// LCPç›‘æ§
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  observePaint() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> observer <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> PerformanceObserver((list) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> entries <span style=color:#ff7b72;font-weight:700>=</span> list.getEntries();
</span></span><span style=display:flex><span>      entries.forEach(entry =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (entry.name <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;largest-contentful-paint&#39;</span>) {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.metrics.lcp <span style=color:#ff7b72;font-weight:700>=</span> entry.startTime;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    observer.observe({ entryTypes<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>&#39;largest-contentful-paint&#39;</span>] });
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.observers.push(observer);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// CLSç›‘æ§
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  observeLayoutShift() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>let</span> clsValue <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> observer <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> PerformanceObserver((list) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> entries <span style=color:#ff7b72;font-weight:700>=</span> list.getEntries();
</span></span><span style=display:flex><span>      entries.forEach(entry =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>entry.hadRecentInput) {
</span></span><span style=display:flex><span>          clsValue <span style=color:#ff7b72;font-weight:700>+=</span> entry.value;
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.metrics.cls <span style=color:#ff7b72;font-weight:700>=</span> clsValue;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    observer.observe({ entryTypes<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>&#39;layout-shift&#39;</span>] });
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.observers.push(observer);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// é•¿ä»»åŠ¡ç›‘æ§
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  observeLongTasks() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> observer <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> PerformanceObserver((list) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> entries <span style=color:#ff7b72;font-weight:700>=</span> list.getEntries();
</span></span><span style=display:flex><span>      entries.forEach(entry =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span><span style=color:#ff7b72>this</span>.metrics.longTasks) {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.metrics.longTasks <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.metrics.longTasks.push({
</span></span><span style=display:flex><span>          duration<span style=color:#ff7b72;font-weight:700>:</span> entry.duration,
</span></span><span style=display:flex><span>          startTime<span style=color:#ff7b72;font-weight:700>:</span> entry.startTime
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    observer.observe({ entryTypes<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>&#39;longtask&#39;</span>] });
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.observers.push(observer);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// Web Vitalsè¿½è¸ª
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  trackWebVitals() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä½¿ç”¨web-vitalsåº“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    getCLS((metric) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.sendMetric(<span style=color:#a5d6ff>&#39;CLS&#39;</span>, metric);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    getFID((metric) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.sendMetric(<span style=color:#a5d6ff>&#39;FID&#39;</span>, metric);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    getLCP((metric) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.sendMetric(<span style=color:#a5d6ff>&#39;LCP&#39;</span>, metric);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    getFCP((metric) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.sendMetric(<span style=color:#a5d6ff>&#39;FCP&#39;</span>, metric);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    getTTFB((metric) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.sendMetric(<span style=color:#a5d6ff>&#39;TTFB&#39;</span>, metric);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// å‘é€æŒ‡æ ‡åˆ°åˆ†ææœåŠ¡
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  sendMetric(name, metric) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> data <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>      name,
</span></span><span style=display:flex><span>      value<span style=color:#ff7b72;font-weight:700>:</span> metric.value,
</span></span><span style=display:flex><span>      id<span style=color:#ff7b72;font-weight:700>:</span> metric.id,
</span></span><span style=display:flex><span>      delta<span style=color:#ff7b72;font-weight:700>:</span> metric.delta,
</span></span><span style=display:flex><span>      url<span style=color:#ff7b72;font-weight:700>:</span> window.location.href,
</span></span><span style=display:flex><span>      userAgent<span style=color:#ff7b72;font-weight:700>:</span> navigator.userAgent,
</span></span><span style=display:flex><span>      timestamp<span style=color:#ff7b72;font-weight:700>:</span> Date.now()
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å‘é€åˆ°åˆ†ææœåŠ¡å™¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    fetch(<span style=color:#a5d6ff>&#39;/api/vitals&#39;</span>, {
</span></span><span style=display:flex><span>      method<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>      headers<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a5d6ff>&#39;Content-Type&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;application/json&#39;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      body<span style=color:#ff7b72;font-weight:700>:</span> JSON.stringify(data)
</span></span><span style=display:flex><span>    }).<span style=color:#ff7b72>catch</span>(err =&gt; {
</span></span><span style=display:flex><span>      console.warn(<span style=color:#a5d6ff>&#39;Failed to send vitals:&#39;</span>, err);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  generateReport() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> report <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>      timestamp<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>new</span> Date().toISOString(),
</span></span><span style=display:flex><span>      url<span style=color:#ff7b72;font-weight:700>:</span> window.location.href,
</span></span><span style=display:flex><span>      userAgent<span style=color:#ff7b72;font-weight:700>:</span> navigator.userAgent,
</span></span><span style=display:flex><span>      metrics<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.metrics,
</span></span><span style=display:flex><span>      recommendations<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.generateRecommendations()
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> report;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ç”Ÿæˆä¼˜åŒ–å»ºè®®
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  generateRecommendations() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> recommendations <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.metrics.lcp <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>2500</span>) {
</span></span><span style=display:flex><span>      recommendations.push({
</span></span><span style=display:flex><span>        metric<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;LCP&#39;</span>,
</span></span><span style=display:flex><span>        suggestion<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;ä¼˜åŒ–LCPï¼šé¢„åŠ è½½å…³é”®èµ„æºï¼Œä¼˜åŒ–å›¾ç‰‡ï¼Œä½¿ç”¨CDN&#39;</span>
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.metrics.fid <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>100</span>) {
</span></span><span style=display:flex><span>      recommendations.push({
</span></span><span style=display:flex><span>        metric<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;FID&#39;</span>,
</span></span><span style=display:flex><span>        suggestion<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;ä¼˜åŒ–FIDï¼šå‡å°‘JavaScriptæ‰§è¡Œæ—¶é—´ï¼Œä½¿ç”¨Web Workers&#39;</span>
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.metrics.cls <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0.1</span>) {
</span></span><span style=display:flex><span>      recommendations.push({
</span></span><span style=display:flex><span>        metric<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;CLS&#39;</span>,
</span></span><span style=display:flex><span>        suggestion<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;ä¼˜åŒ–CLSï¼šä¸ºåŠ¨æ€å†…å®¹é¢„ç•™ç©ºé—´ï¼Œä¼˜åŒ–å­—ä½“åŠ è½½&#39;</span>
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> recommendations;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=é«˜çº§ä¼˜åŒ–æŠ€æœ¯>é«˜çº§ä¼˜åŒ–æŠ€æœ¯<a hidden class=anchor aria-hidden=true href=#é«˜çº§ä¼˜åŒ–æŠ€æœ¯>#</a></h3><h4 id=1-http3-å’Œ-quic-ä¼˜åŒ–>1. HTTP/3 å’Œ QUIC ä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#1-http3-å’Œ-quic-ä¼˜åŒ–>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// HTTP/3ä¼˜åŒ–é…ç½®
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> HTTP3Optimizer {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.optimizeConnections();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.enableEarlyHints();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  optimizeConnections() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// Alt-Svcå¤´éƒ¨æç¤º
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> altSvc <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;meta&#39;</span>);
</span></span><span style=display:flex><span>    altSvc.httpEquiv <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;Alt-Svc&#39;</span>;
</span></span><span style=display:flex><span>    altSvc.content <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;h3=&#34;:443&#34;; ma=2592000,h3-29=&#34;:443&#34;; ma=2592000&#39;</span>;
</span></span><span style=display:flex><span>    document.head.appendChild(altSvc);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// é¢„è¿æ¥åˆ°HTTP/3ç«¯ç‚¹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> h3Endpoints <span style=color:#ff7b72;font-weight:700>=</span> [
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;https://api.example.com&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;https://cdn.example.com&#39;</span>
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    h3Endpoints.forEach(endpoint =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> link <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;link&#39;</span>);
</span></span><span style=display:flex><span>      link.rel <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;preconnect&#39;</span>;
</span></span><span style=display:flex><span>      link.href <span style=color:#ff7b72;font-weight:700>=</span> endpoint;
</span></span><span style=display:flex><span>      link.setAttribute(<span style=color:#a5d6ff>&#39;crossorigin&#39;</span>, <span style=color:#a5d6ff>&#39;anonymous&#39;</span>);
</span></span><span style=display:flex><span>      document.head.appendChild(link);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  enableEarlyHints() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 103 Early Hintsæ”¯æŒ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>if</span> (<span style=color:#a5d6ff>&#39;serviceWorker&#39;</span> <span style=color:#ff7b72>in</span> navigator) {
</span></span><span style=display:flex><span>      navigator.serviceWorker.register(<span style=color:#a5d6ff>&#39;/sw-hints.js&#39;</span>).then(registration =&gt; {
</span></span><span style=display:flex><span>        registration.addEventListener(<span style=color:#a5d6ff>&#39;message&#39;</span>, event =&gt; {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>if</span> (event.data.type <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;EARLY_HINTS&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>this</span>.processEarlyHints(event.data.hints);
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  processEarlyHints(hints) {
</span></span><span style=display:flex><span>    hints.link.forEach(link =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> linkEl <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;link&#39;</span>);
</span></span><span style=display:flex><span>      Object.keys(link).forEach(key =&gt; {
</span></span><span style=display:flex><span>        linkEl.setAttribute(key, link[key]);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>      document.head.appendChild(linkEl);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h4 id=2-è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–>2. è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#2-è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è¾¹ç¼˜è®¡ç®—ä¼˜åŒ–
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> EdgeOptimizer {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.setupEdgeHeaders();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.configureCdnFeatures();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// è¾¹ç¼˜ä¼˜åŒ–å¤´éƒ¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  setupEdgeHeaders() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> edgeHeaders <span style=color:#ff7b72;font-weight:700>=</span> [
</span></span><span style=display:flex><span>      { name<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Edge-Cache-Tag&#39;</span>, content<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;product-page,v2&#39;</span> },
</span></span><span style=display:flex><span>      { name<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Edge-Cache-TTL&#39;</span>, content<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;3600&#39;</span> },
</span></span><span style=display:flex><span>      { name<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Edge-Compute&#39;</span>, content<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;true&#39;</span> }
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    edgeHeaders.forEach(header =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> meta <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;meta&#39;</span>);
</span></span><span style=display:flex><span>      meta.name <span style=color:#ff7b72;font-weight:700>=</span> header.name;
</span></span><span style=display:flex><span>      meta.content <span style=color:#ff7b72;font-weight:700>=</span> header.content;
</span></span><span style=display:flex><span>      document.head.appendChild(meta);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// CDNåŠŸèƒ½é…ç½®
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  configureCdnFeatures() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// è‡ªåŠ¨å›¾ç‰‡ä¼˜åŒ–
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> imgUrls <span style=color:#ff7b72;font-weight:700>=</span> document.querySelectorAll(<span style=color:#a5d6ff>&#39;img[src*=&#34;cdn.example.com&#34;]&#39;</span>);
</span></span><span style=display:flex><span>    imgUrls.forEach(img =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> url <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> URL(img.src);
</span></span><span style=display:flex><span>      url.searchParams.set(<span style=color:#a5d6ff>&#39;auto&#39;</span>, <span style=color:#a5d6ff>&#39;format,compress&#39;</span>);
</span></span><span style=display:flex><span>      url.searchParams.set(<span style=color:#a5d6ff>&#39;width&#39;</span>, img.getAttribute(<span style=color:#a5d6ff>&#39;width&#39;</span>) <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>&#39;auto&#39;</span>);
</span></span><span style=display:flex><span>      url.searchParams.set(<span style=color:#a5d6ff>&#39;quality&#39;</span>, <span style=color:#a5d6ff>&#39;80&#39;</span>);
</span></span><span style=display:flex><span>      img.src <span style=color:#ff7b72;font-weight:700>=</span> url.toString();
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å­—ä½“ä¼˜åŒ–
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> fontUrls <span style=color:#ff7b72;font-weight:700>=</span> document.querySelectorAll(<span style=color:#a5d6ff>&#39;link[href*=&#34;fonts.googleapis.com&#34;]&#39;</span>);
</span></span><span style=display:flex><span>    fontUrls.forEach(link =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> url <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> URL(link.href);
</span></span><span style=display:flex><span>      url.searchParams.set(<span style=color:#a5d6ff>&#39;display&#39;</span>, <span style=color:#a5d6ff>&#39;swap&#39;</span>);
</span></span><span style=display:flex><span>      url.searchParams.set(<span style=color:#a5d6ff>&#39;subset&#39;</span>, <span style=color:#a5d6ff>&#39;latin,latin-ext&#39;</span>);
</span></span><span style=display:flex><span>      link.href <span style=color:#ff7b72;font-weight:700>=</span> url.toString();
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=å®æ–½å’Œæµ‹è¯•>å®æ–½å’Œæµ‹è¯•<a hidden class=anchor aria-hidden=true href=#å®æ–½å’Œæµ‹è¯•>#</a></h3><h4 id=1-abæµ‹è¯•æ¡†æ¶>1. A/Bæµ‹è¯•æ¡†æ¶<a hidden class=anchor aria-hidden=true href=#1-abæµ‹è¯•æ¡†æ¶>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">89
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æ€§èƒ½A/Bæµ‹è¯•
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> PerformanceABTest {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.variant <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.getVariant();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.trackVariant();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  getVariant() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä»URLå‚æ•°è·å–å˜ä½“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> urlParams <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> URLSearchParams(window.location.search);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> variant <span style=color:#ff7b72;font-weight:700>=</span> urlParams.get(<span style=color:#a5d6ff>&#39;variant&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (variant) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> variant;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// éšæœºåˆ†é…å˜ä½“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> variants <span style=color:#ff7b72;font-weight:700>=</span> [<span style=color:#a5d6ff>&#39;control&#39;</span>, <span style=color:#a5d6ff>&#39;optimized&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> randomIndex <span style=color:#ff7b72;font-weight:700>=</span> Math.floor(Math.random() <span style=color:#ff7b72;font-weight:700>*</span> variants.length);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> assignedVariant <span style=color:#ff7b72;font-weight:700>=</span> variants[randomIndex];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å­˜å‚¨å˜ä½“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    localStorage.setItem(<span style=color:#a5d6ff>&#39;ab_test_variant&#39;</span>, assignedVariant);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> assignedVariant;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  trackVariant() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å‘é€å˜ä½“ä¿¡æ¯åˆ°åˆ†ææœåŠ¡
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    fetch(<span style=color:#a5d6ff>&#39;/api/ab-test&#39;</span>, {
</span></span><span style=display:flex><span>      method<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>      headers<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a5d6ff>&#39;Content-Type&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;application/json&#39;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      body<span style=color:#ff7b72;font-weight:700>:</span> JSON.stringify({
</span></span><span style=display:flex><span>        test<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;performance_optimization&#39;</span>,
</span></span><span style=display:flex><span>        variant<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.variant,
</span></span><span style=display:flex><span>        url<span style=color:#ff7b72;font-weight:700>:</span> window.location.href,
</span></span><span style=display:flex><span>        userAgent<span style=color:#ff7b72;font-weight:700>:</span> navigator.userAgent
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  applyOptimizations() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.variant <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;optimized&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// åº”ç”¨æ€§èƒ½ä¼˜åŒ–
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>new</span> LCPOptimizer();
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>new</span> FIDOptimizer();
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>new</span> CLSOptimizer();
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>new</span> HTTP3Optimizer();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  trackPerformance() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// è¿½è¸ªæ€§èƒ½æŒ‡æ ‡
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    getCLS((metric) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.sendPerformanceMetric(<span style=color:#a5d6ff>&#39;CLS&#39;</span>, metric);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    getFID((metric) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.sendPerformanceMetric(<span style=color:#a5d6ff>&#39;FID&#39;</span>, metric);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    getLCP((metric) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.sendPerformanceMetric(<span style=color:#a5d6ff>&#39;LCP&#39;</span>, metric);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  sendPerformanceMetric(metricName, metric) {
</span></span><span style=display:flex><span>    fetch(<span style=color:#a5d6ff>&#39;/api/ab-test-metrics&#39;</span>, {
</span></span><span style=display:flex><span>      method<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>      headers<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a5d6ff>&#39;Content-Type&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;application/json&#39;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      body<span style=color:#ff7b72;font-weight:700>:</span> JSON.stringify({
</span></span><span style=display:flex><span>        test<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;performance_optimization&#39;</span>,
</span></span><span style=display:flex><span>        variant<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.variant,
</span></span><span style=display:flex><span>        metric<span style=color:#ff7b72;font-weight:700>:</span> metricName,
</span></span><span style=display:flex><span>        value<span style=color:#ff7b72;font-weight:700>:</span> metric.value,
</span></span><span style=display:flex><span>        timestamp<span style=color:#ff7b72;font-weight:700>:</span> Date.now()
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// åˆå§‹åŒ–A/Bæµ‹è¯•
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> abTest <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> PerformanceABTest();
</span></span><span style=display:flex><span>abTest.applyOptimizations();
</span></span><span style=display:flex><span>abTest.trackPerformance();
</span></span></code></pre></td></tr></table></div></div><h3 id=2025å¹´æœ€æ–°è¶‹åŠ¿>2025å¹´æœ€æ–°è¶‹åŠ¿<a hidden class=anchor aria-hidden=true href=#2025å¹´æœ€æ–°è¶‹åŠ¿>#</a></h3><h4 id=1-aié©±åŠ¨çš„æ€§èƒ½ä¼˜åŒ–>1. AIé©±åŠ¨çš„æ€§èƒ½ä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#1-aié©±åŠ¨çš„æ€§èƒ½ä¼˜åŒ–>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// AIæ€§èƒ½ä¼˜åŒ–å™¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> AIPerformanceOptimizer {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.aiModel <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>null</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.loadAIModel();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>async</span> loadAIModel() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// åŠ è½½TensorFlow.jsæ¨¡å‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> model <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> tf.loadLayersModel(<span style=color:#a5d6ff>&#39;/models/performance-optimizer/model.json&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.aiModel <span style=color:#ff7b72;font-weight:700>=</span> model;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>async</span> predictOptimalStrategy() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// æ”¶é›†ä¸Šä¸‹æ–‡æ•°æ®
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> context <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.collectContext();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// é¢„æµ‹æœ€ä¼˜ç­–ç•¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> prediction <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>this</span>.aiModel.predict(context);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>this</span>.applyPredictedOptimizations(prediction);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  collectContext() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>      deviceType<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getDeviceType(),
</span></span><span style=display:flex><span>      connectionType<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getConnectionType(),
</span></span><span style=display:flex><span>      viewportSize<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        width<span style=color:#ff7b72;font-weight:700>:</span> window.innerWidth,
</span></span><span style=display:flex><span>        height<span style=color:#ff7b72;font-weight:700>:</span> window.innerHeight
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      browserCapabilities<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getBrowserCapabilities(),
</span></span><span style=display:flex><span>      currentMetrics<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getCurrentMetrics()
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  getDeviceType() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> userAgent <span style=color:#ff7b72;font-weight:700>=</span> navigator.userAgent;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#79c0ff>/Mobile|Android|iPhone|iPad/</span>.test(userAgent)) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>&#39;mobile&#39;</span>;
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>else</span> <span style=color:#ff7b72>if</span> (<span style=color:#79c0ff>/Tablet/</span>.test(userAgent)) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>&#39;tablet&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>&#39;desktop&#39;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  getConnectionType() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#a5d6ff>&#39;connection&#39;</span> <span style=color:#ff7b72>in</span> navigator) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> navigator.connection.effectiveType;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>&#39;unknown&#39;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  getBrowserCapabilities() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>      webp<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.supportsWebP(),
</span></span><span style=display:flex><span>      webp2<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.supportsWebP2(),
</span></span><span style=display:flex><span>      avif<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.supportsAVIF(),
</span></span><span style=display:flex><span>      http2<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.supportsHTTP2(),
</span></span><span style=display:flex><span>      serviceWorker<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;serviceWorker&#39;</span> <span style=color:#ff7b72>in</span> navigator
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  supportsWebP() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> canvas <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;canvas&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> canvas.toDataURL(<span style=color:#a5d6ff>&#39;image/webp&#39;</span>).indexOf(<span style=color:#a5d6ff>&#39;data:image/webp&#39;</span>) <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  supportsAVIF() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> canvas <span style=color:#ff7b72;font-weight:700>=</span> document.createElement(<span style=color:#a5d6ff>&#39;canvas&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> canvas.toDataURL(<span style=color:#a5d6ff>&#39;image/avif&#39;</span>).indexOf(<span style=color:#a5d6ff>&#39;data:image/avif&#39;</span>) <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  supportsHTTP2() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// é€šè¿‡æ£€æŸ¥èµ„æºæ—¶é—´æˆ³åˆ¤æ–­
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> timing <span style=color:#ff7b72;font-weight:700>=</span> performance.getEntriesByType(<span style=color:#a5d6ff>&#39;navigation&#39;</span>)[<span style=color:#a5d6ff>0</span>];
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> timing <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> timing.nextHopProtocol <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;h2&#39;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>async</span> applyPredictedOptimizations(prediction) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> strategies <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>      images<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        format<span style=color:#ff7b72;font-weight:700>:</span> prediction.imageFormat,
</span></span><span style=display:flex><span>        quality<span style=color:#ff7b72;font-weight:700>:</span> prediction.imageQuality,
</span></span><span style=display:flex><span>        lazyLoad<span style=color:#ff7b72;font-weight:700>:</span> prediction.lazyLoadImages
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      scripts<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        defer<span style=color:#ff7b72;font-weight:700>:</span> prediction.deferScripts,
</span></span><span style=display:flex><span>        preload<span style=color:#ff7b72;font-weight:700>:</span> prediction.preloadCriticalScripts
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      styles<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        inline<span style=color:#ff7b72;font-weight:700>:</span> prediction.inlineCriticalCSS,
</span></span><span style=display:flex><span>        preload<span style=color:#ff7b72;font-weight:700>:</span> prediction.preloadFonts
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// åº”ç”¨AIæ¨èçš„ä¼˜åŒ–ç­–ç•¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>this</span>.applyImageOptimizations(strategies.images);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.applyScriptOptimizations(strategies.scripts);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.applyStyleOptimizations(strategies.styles);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=æœ€ä½³å®è·µæ¸…å•>æœ€ä½³å®è·µæ¸…å•<a hidden class=anchor aria-hidden=true href=#æœ€ä½³å®è·µæ¸…å•>#</a></h3><h4 id=1-éƒ¨ç½²å‰æ£€æŸ¥>1. éƒ¨ç½²å‰æ£€æŸ¥<a hidden class=anchor aria-hidden=true href=#1-éƒ¨ç½²å‰æ£€æŸ¥>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">159
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æ€§èƒ½æ£€æŸ¥æ¸…å•
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> PerformanceChecklist {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.checks <span style=color:#ff7b72;font-weight:700>=</span> [
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.checkImageOptimization,
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.checkCriticalResources,
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.checkThirdPartyScripts,
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.checkCachingHeaders,
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.checkCompression,
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.checkMinification,
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.checkCoreWebVitals
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>async</span> runAllChecks() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> results <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> Promise.all(
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.checks.map(check =&gt; check.call(<span style=color:#ff7b72>this</span>))
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>      score<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.calculateScore(results),
</span></span><span style=display:flex><span>      results<span style=color:#ff7b72;font-weight:700>:</span> results,
</span></span><span style=display:flex><span>      recommendations<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.generateRecommendations(results)
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>async</span> checkImageOptimization() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> images <span style=color:#ff7b72;font-weight:700>=</span> document.querySelectorAll(<span style=color:#a5d6ff>&#39;img&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> issues <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    images.forEach(img =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// æ£€æŸ¥æ ¼å¼
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>img.src.match(<span style=color:#79c0ff>/\.(webp|avif|svg)$/</span>)) {
</span></span><span style=display:flex><span>        issues.push({
</span></span><span style=display:flex><span>          element<span style=color:#ff7b72;font-weight:700>:</span> img,
</span></span><span style=display:flex><span>          issue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Suboptimal image format&#39;</span>,
</span></span><span style=display:flex><span>          suggestion<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Use WebP or AVIF format&#39;</span>
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// æ£€æŸ¥å°ºå¯¸
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>img.srcset <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> <span style=color:#ff7b72;font-weight:700>!</span>img.sizes) {
</span></span><span style=display:flex><span>        issues.push({
</span></span><span style=display:flex><span>          element<span style=color:#ff7b72;font-weight:700>:</span> img,
</span></span><span style=display:flex><span>          issue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Missing responsive images&#39;</span>,
</span></span><span style=display:flex><span>          suggestion<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Add srcset and sizes attributes&#39;</span>
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// æ£€æŸ¥æ‡’åŠ è½½
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>img.loading <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> <span style=color:#ff7b72;font-weight:700>!</span>img.dataset.src) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> rect <span style=color:#ff7b72;font-weight:700>=</span> img.getBoundingClientRect();
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (rect.top <span style=color:#ff7b72;font-weight:700>&gt;</span> window.innerHeight) {
</span></span><span style=display:flex><span>          issues.push({
</span></span><span style=display:flex><span>            element<span style=color:#ff7b72;font-weight:700>:</span> img,
</span></span><span style=display:flex><span>            issue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Lazy loading not implemented&#39;</span>,
</span></span><span style=display:flex><span>            suggestion<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Add loading=&#34;lazy&#34; or implement custom lazy loading&#39;</span>
</span></span><span style=display:flex><span>          });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>      name<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Image Optimization&#39;</span>,
</span></span><span style=display:flex><span>      passed<span style=color:#ff7b72;font-weight:700>:</span> issues.length <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>      issues<span style=color:#ff7b72;font-weight:700>:</span> issues
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>async</span> checkCoreWebVitals() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>new</span> Promise((resolve) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>let</span> metrics <span style=color:#ff7b72;font-weight:700>=</span> {};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      getCLS((metric) =&gt; {
</span></span><span style=display:flex><span>        metrics.cls <span style=color:#ff7b72;font-weight:700>=</span> metric;
</span></span><span style=display:flex><span>        checkComplete();
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      getFID((metric) =&gt; {
</span></span><span style=display:flex><span>        metrics.fid <span style=color:#ff7b72;font-weight:700>=</span> metric;
</span></span><span style=display:flex><span>        checkComplete();
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      getLCP((metric) =&gt; {
</span></span><span style=display:flex><span>        metrics.lcp <span style=color:#ff7b72;font-weight:700>=</span> metric;
</span></span><span style=display:flex><span>        checkComplete();
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>function</span> checkComplete() {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (metrics.cls <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> metrics.fid <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> metrics.lcp) {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>const</span> issues <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>if</span> (metrics.lcp.value <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>2500</span>) {
</span></span><span style=display:flex><span>            issues.push({
</span></span><span style=display:flex><span>              metric<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;LCP&#39;</span>,
</span></span><span style=display:flex><span>              value<span style=color:#ff7b72;font-weight:700>:</span> metrics.lcp.value,
</span></span><span style=display:flex><span>              threshold<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>2500</span>,
</span></span><span style=display:flex><span>              status<span style=color:#ff7b72;font-weight:700>:</span> metrics.lcp.value <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>4000</span> <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>&#39;poor&#39;</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;needs-improvement&#39;</span>
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>if</span> (metrics.fid.value <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>100</span>) {
</span></span><span style=display:flex><span>            issues.push({
</span></span><span style=display:flex><span>              metric<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;FID&#39;</span>,
</span></span><span style=display:flex><span>              value<span style=color:#ff7b72;font-weight:700>:</span> metrics.fid.value,
</span></span><span style=display:flex><span>              threshold<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>100</span>,
</span></span><span style=display:flex><span>              status<span style=color:#ff7b72;font-weight:700>:</span> metrics.fid.value <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>300</span> <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>&#39;poor&#39;</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;needs-improvement&#39;</span>
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>if</span> (metrics.cls.value <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0.1</span>) {
</span></span><span style=display:flex><span>            issues.push({
</span></span><span style=display:flex><span>              metric<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;CLS&#39;</span>,
</span></span><span style=display:flex><span>              value<span style=color:#ff7b72;font-weight:700>:</span> metrics.cls.value,
</span></span><span style=display:flex><span>              threshold<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0.1</span>,
</span></span><span style=display:flex><span>              status<span style=color:#ff7b72;font-weight:700>:</span> metrics.cls.value <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0.25</span> <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>&#39;poor&#39;</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;needs-improvement&#39;</span>
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          resolve({
</span></span><span style=display:flex><span>            name<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Core Web Vitals&#39;</span>,
</span></span><span style=display:flex><span>            passed<span style=color:#ff7b72;font-weight:700>:</span> issues.length <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>            metrics<span style=color:#ff7b72;font-weight:700>:</span> metrics,
</span></span><span style=display:flex><span>            issues<span style=color:#ff7b72;font-weight:700>:</span> issues
</span></span><span style=display:flex><span>          });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  calculateScore(results) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> totalChecks <span style=color:#ff7b72;font-weight:700>=</span> results.length;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> passedChecks <span style=color:#ff7b72;font-weight:700>=</span> results.filter(r =&gt; r.passed).length;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> Math.round((passedChecks <span style=color:#ff7b72;font-weight:700>/</span> totalChecks) <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>100</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  generateRecommendations(results) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> allIssues <span style=color:#ff7b72;font-weight:700>=</span> results.flatMap(r =&gt; r.issues <span style=color:#ff7b72;font-weight:700>||</span> []);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> allIssues.map(issue =&gt; ({
</span></span><span style=display:flex><span>      priority<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.calculatePriority(issue),
</span></span><span style=display:flex><span>      description<span style=color:#ff7b72;font-weight:700>:</span> issue.suggestion <span style=color:#ff7b72;font-weight:700>||</span> issue.issue,
</span></span><span style=display:flex><span>      element<span style=color:#ff7b72;font-weight:700>:</span> issue.element<span style=color:#ff7b72;font-weight:700>?</span>.outerHTML<span style=color:#ff7b72;font-weight:700>?</span>.substring(<span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>100</span>) <span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#a5d6ff>&#39;...&#39;</span>
</span></span><span style=display:flex><span>    })).sort((a, b) =&gt; b.priority <span style=color:#ff7b72;font-weight:700>-</span> a.priority);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  calculatePriority(issue) {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// æ ¹æ®å½±å“ç¨‹åº¦è®¡ç®—ä¼˜å…ˆçº§
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> highImpactMetrics <span style=color:#ff7b72;font-weight:700>=</span> [<span style=color:#a5d6ff>&#39;LCP&#39;</span>, <span style=color:#a5d6ff>&#39;CLS&#39;</span>, <span style=color:#a5d6ff>&#39;FID&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (issue.metric <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> highImpactMetrics.includes(issue.metric)) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> issue.status <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;poor&#39;</span> <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>10</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>7</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>5</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è¿è¡Œæ€§èƒ½æ£€æŸ¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> checklist <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> PerformanceChecklist();
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> performanceReport <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> checklist.runAllChecks();
</span></span><span style=display:flex><span>console.log(<span style=color:#a5d6ff>&#39;Performance Score:&#39;</span>, performanceReport.score);
</span></span></code></pre></td></tr></table></div></div><h3 id=æ€»ç»“>æ€»ç»“<a hidden class=anchor aria-hidden=true href=#æ€»ç»“>#</a></h3><p>2025å¹´Web Vitalsä¼˜åŒ–çš„å…³é”®ç­–ç•¥ï¼š</p><ol><li><strong>LCPä¼˜åŒ–</strong>ï¼šå…³é”®èµ„æºé¢„åŠ è½½ã€å›¾ç‰‡ä¼˜åŒ–ã€CDNä½¿ç”¨</li><li><strong>FIDä¼˜åŒ–</strong>ï¼šJavaScriptä¼˜åŒ–ã€Web Workersã€ä»£ç åˆ†å‰²</li><li><strong>CLSä¼˜åŒ–</strong>ï¼šç©ºé—´é¢„ç•™ã€å­—ä½“ä¼˜åŒ–ã€å¼‚æ­¥å†…å®¹åŠ è½½</li><li><strong>ç›‘æ§æµ‹é‡</strong>ï¼šå®æ—¶ç›‘æ§ã€A/Bæµ‹è¯•ã€AIä¼˜åŒ–</li><li><strong>æ–°æŠ€æœ¯åº”ç”¨</strong>ï¼šHTTP/3ã€è¾¹ç¼˜è®¡ç®—ã€AIé©±åŠ¨ä¼˜åŒ–</li></ol><p>é€šè¿‡å®æ–½è¿™äº›ç­–ç•¥ï¼Œå¯ä»¥æ˜¾è‘—æå‡ç½‘ç«™æ€§èƒ½ï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒã€‚</p><h3 id=ç›¸å…³èµ„æº>ç›¸å…³èµ„æº<a hidden class=anchor aria-hidden=true href=#ç›¸å…³èµ„æº>#</a></h3><ul><li><a href=https://web.dev/vitals/>Web Vitalså®˜æ–¹æ–‡æ¡£</a></li><li><a href=https://pagespeed.web.dev/>PageSpeed Insights</a></li><li><a href=https://developer.chrome.com/docs/devtools/performance/>Chrome DevTools Performance</a></li></ul></div><footer class=post-footer-modern><div class=post-tags-modern><span class=tags-label>ğŸ·ï¸ æ ‡ç­¾</span><div class=tags-list><a href=/blog/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ class=tag-pill>æ€§èƒ½ä¼˜åŒ–
</a><a href=/blog/tags/web-vitals/ class=tag-pill>Web Vitals
</a><a href=/blog/tags/%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C/ class=tag-pill>ç”¨æˆ·ä½“éªŒ
</a><a href=/blog/tags/seo/ class=tag-pill>SEO
</a><a href=/blog/tags/%E5%89%8D%E7%AB%AF/ class=tag-pill>å‰ç«¯</a></div></div><style>.post-footer-modern{margin-top:3rem;padding-top:2rem;border-top:1px solid var(--border,#333333)}.post-tags-modern{display:flex;align-items:center;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.tags-label{font-size:.875rem;font-weight:600;color:var(--secondary,#999999) !important;white-space:nowrap}.tags-list{display:flex;flex-wrap:wrap;gap:.5rem;flex:1}.tag-pill{display:inline-block;padding:.25rem .75rem;background:rgba(255,255,255,5%);border:1px solid var(--border,#333333);border-radius:0;color:var(--secondary,#cccccc) !important;text-decoration:none;font-size:.8rem;font-weight:500;transition:all .2s ease}.tag-pill:hover{background:var(--primary,#ffffff);color:var(--background,#000000) !important;border-color:var(--primary,#ffffff);transform:translateY(-1px)}.post-nav-modern{margin-top:2rem}.nav-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.nav-card{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:rgba(255,255,255,2%);border:1px solid var(--border,#333333);border-radius:12px;text-decoration:none;transition:all .2s ease;min-height:80px}.nav-card:hover{background:rgba(255,255,255,5%);border-color:var(--primary,#ffffff);transform:translateY(-2px)}.nav-card.nav-prev{justify-content:flex-start}.nav-card.nav-next{justify-content:flex-end;text-align:right}.nav-card.nav-next .nav-content{text-align:right}.nav-empty{display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,1%);border:1px dashed var(--border,#333333);color:var(--secondary,#666666)}.nav-arrow{font-size:1.5rem;color:var(--primary,#ffffff);font-weight:300}.nav-content{flex:1}.nav-title{font-size:.95rem;font-weight:600;color:var(--primary,#ffffff) !important;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}[data-theme=light] .post-footer-modern{border-color:var(--border-light,#dee2e6)}[data-theme=light] .tags-label{color:var(--secondary-light,#6c757d) !important}[data-theme=light] .tag-pill{background:rgba(0,0,0,5%);border-color:var(--border-light,#dee2e6);color:var(--secondary-light,#495057) !important}[data-theme=light] .tag-pill:hover{background:var(--primary-light,#0066cc);color:var(--background-light,#ffffff) !important;border-color:var(--primary-light,#0066cc)}[data-theme=light] .nav-card{background:rgba(0,0,0,2%);border-color:var(--border-light,#dee2e6)}[data-theme=light] .nav-card:hover{background:rgba(0,102,204,5%);border-color:var(--primary-light,#0066cc)}[data-theme=light] .nav-empty{background:rgba(0,0,0,1%);border-color:var(--border-light,#dee2e6);color:var(--secondary-light,#6c757d)}[data-theme=light] .nav-arrow{color:var(--primary-light,#0066cc)}[data-theme=light] .nav-title{color:var(--primary-light,#212529) !important}@media(max-width:768px){.nav-grid{grid-template-columns:1fr;gap:.75rem}.nav-card{padding:1rem;min-height:70px}.nav-card.nav-next{text-align:left}.nav-card.nav-next .nav-content{text-align:left}.nav-title{font-size:.875rem}.post-tags-modern{flex-direction:column;gap:.75rem}}@media(max-width:480px){.nav-arrow{font-size:1.25rem}.nav-card{padding:.875rem}.nav-title{font-size:.8rem;-webkit-line-clamp:1}}</style><nav class=post-nav-modern><div class=nav-grid><a href=/blog/articles/microservices-communication-patterns/ class="nav-card nav-prev"><div class=nav-arrow>â†</div><div class=nav-content><div class=nav-title>å¾®æœåŠ¡é€šä¿¡æ¨¡å¼æ·±åº¦è§£æ</div></div></a><a href=/blog/articles/%E5%85%A8%E7%90%83%E6%B8%B8%E6%88%8F%E5%8F%91%E8%A1%8C%E7%AD%96%E7%95%A5%E4%BB%8E%E7%AB%8B%E9%A1%B9%E5%88%B0%E8%BF%90%E8%90%A5%E7%9A%84%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/ class="nav-card nav-next"><div class=nav-content><div class=nav-title>å…¨çƒæ¸¸æˆå‘è¡Œç­–ç•¥ï¼šä»ç«‹é¡¹åˆ°è¿è¥çš„å®Œæ•´æŒ‡å—</div></div><div class=nav-arrow>â†’</div></a></div></nav></footer></main><aside class=post-sidebar><div class=sidebar-toc id=sidebar-toc><div class=toc-header><div class=toc-title>ç›®å½•</div><button class=toc-toggle id=toc-toggle aria-label="Toggle TOC">
<svg class="toc-toggle-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg></button></div><div class=toc-content id=toc-content><ul class=toc-list><li class="toc-item toc-h2"><a href=#h2-0 class=toc-item-link><span class=toc-item-text>2025å¹´Web Vitalsæ€§èƒ½ä¼˜åŒ–ç»ˆææŒ‡å—</span></a></li></ul></div></div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("sidebar-toc"),t=document.getElementById("toc-toggle"),o=document.getElementById("toc-content"),i=t?.querySelector(".toc-toggle-icon");if(!e)return;let n=!1;t&&t.addEventListener("click",function(){n=!n,n?(o.style.display="none",e.style.width="auto",i.innerHTML='<path d="M9 18l6-6-6-6"/>'):(o.style.display="block",e.style.width="200px",i.innerHTML='<path d="M18 6L6 18M6 6l12 12"/>')});const s=document.querySelector(".post-content");if(s){const e=s.querySelectorAll("h1");e.forEach((e,t)=>{e.id=`h1-${t}`});const t=s.querySelectorAll("h2");t.forEach((e,t)=>{e.id=`h2-${t}`})}const a=document.querySelectorAll(".toc-item-link");a.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const n=this.getAttribute("href").substring(1),t=document.getElementById(n);if(t){const e=document.querySelector(".post-header-main")?.offsetHeight||0,n=t.offsetTop-e-20;window.scrollTo({top:n,behavior:"smooth"})}})})})</script><style>.sidebar-toc{position:sticky;top:2rem;width:200px;background:#fff;border:1px solid #e5e7eb;border-radius:4px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.1);z-index:100}.sidebar-toc.hidden{display:none}.toc-header{padding:12px 16px;border-bottom:1px solid #e5e7eb;background:#fafbfc;display:flex;align-items:center;justify-content:space-between}.toc-title{margin:0;font-size:13px;font-weight:500;color:#374151 !important;font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,sans-serif;text-transform:uppercase;letter-spacing:1px}.toc-toggle{background:0 0;border:none;cursor:pointer;padding:4px;border-radius:4px;display:flex;align-items:center;justify-content:center;transition:all .2s ease;color:#6b7280}.toc-toggle:hover{background:#e5e7eb;color:#374151}.toc-toggle-icon{transition:transform .2s ease}.toc-content{padding:12px 0}.toc-list{list-style:none;margin:0;padding:0}.toc-item{margin-bottom:4px;display:block !important;visibility:visible !important}.toc-h1,.toc-h2{display:block !important}.toc-h2{margin-left:0}.toc-item-link{display:flex;align-items:center;gap:8px;padding:8px 12px;color:#374151 !important;text-decoration:none;font-size:13px;line-height:1.4;border-radius:3px;transition:all .2s ease;font-weight:400}.toc-item-link:hover{background:#f8fafc;color:#1f2937 !important}.toc-item-link.active{background:#e0f2fe;color:#01579b !important;font-weight:500}.toc-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}.dot-red{background:#ef4444}.dot-blue{background:#2196f3}.toc-item-text{color:#1f2937 !important;font-weight:400;flex:1;display:inline !important;visibility:visible !important;opacity:1 !important;font-size:13px !important;line-height:1.4 !important}.toc-item-link .toc-item-text{color:#1f2937 !important;display:inline !important;visibility:visible !important;opacity:1 !important}.toc-item.active .dot-red{background:#d32f2f}.toc-item.active .dot-blue{background:#1976d2}[data-theme=dark] .sidebar-toc{background:#1f2937;border-color:#374151;box-shadow:0 1px 3px rgba(0,0,0,.3)}[data-theme=dark] .toc-header{background:#111827;border-color:#374151}[data-theme=dark] .toc-title{color:#f3f4f6 !important}[data-theme=dark] .toc-toggle{color:#9ca3af}[data-theme=dark] .toc-toggle:hover{background:#374151;color:#f3f4f6}[data-theme=dark] .toc-item-link{color:#e5e7eb !important}[data-theme=dark] .toc-item-link:hover{background:#374151;color:#f9fafb !important}[data-theme=dark] .toc-item-link.active{background:#0d47a1;color:#fff !important}[data-theme=dark] .toc-item-text{color:#f9fafb !important;display:inline !important;visibility:visible !important;opacity:1 !important}[data-theme=dark] .toc-item-link .toc-item-text{color:#f9fafb !important;display:inline !important;visibility:visible !important;opacity:1 !important}@media(max-width:1024px){.sidebar-toc{display:none}.post-content-wrapper{grid-template-columns:1fr !important;padding:0 1rem !important}}</style><style>.post-content-wrapper{display:grid;grid-template-columns:1fr 200px;gap:2rem;padding:0 2rem;max-width:100%}.post-content-main{min-width:0}.post-sidebar{position:sticky;top:2rem;height:fit-content;min-width:0}.post-header-main{margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border,#333333)}.post-header-main .post-title{color:var(--primary,#ffffff) !important;font-size:2.5rem;font-weight:700;line-height:1.2;margin-bottom:1rem}.post-header-main .post-description{color:var(--secondary,#cccccc) !important;font-size:1.1rem;line-height:1.6;margin-bottom:1rem}.post-header-main .post-meta{margin-bottom:0}@media(max-width:1024px){.post-content-wrapper{grid-template-columns:1fr !important;gap:1rem;padding:0 1rem !important}.post-sidebar{display:none}}@media(max-width:768px){.post-header-main .post-title{font-size:2rem}.post-header-main .post-description{font-size:1rem}}</style></aside></div></article></main><footer class=footer><span>Â© 2024-2025 æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢</span> Â·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>