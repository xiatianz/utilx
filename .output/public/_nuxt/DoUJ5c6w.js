import{_ as M}from"./D4g1_bQ7.js";import{r as b,q as W,c as f,a as t,x as D,y as N,h as $,v as C,E as I,t as p,z as L,b as i,j as v,F as q,k as z,w,o as x}from"./DEsTSaKd.js";import{X}from"./DJb2aM7w.js";import{F as H}from"./C-LEKrTT.js";import{A as J}from"./Bluep4Ee.js";import{F as K}from"./CRvidJJ3.js";import{F as Q}from"./DU2eUrP5.js";import"./wERbHxDK.js";const U={class:"max-w-8xl mx-auto"},G={class:"space-y-6"},Y={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Z={class:"space-y-4"},tt={class:"relative"},et={class:"absolute bottom-2 right-2 text-xs text-muted-foreground bg-background px-2 py-1 rounded"},st={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm"},ot={class:"space-y-4"},rt={class:"space-y-2"},lt={class:"relative"},at={class:"space-y-2"},dt={class:"grid grid-cols-1 gap-2"},it=["onClick"],nt={class:"font-mono text-primary"},ct={class:"text-xs text-muted-foreground"},ut=["disabled"],pt={key:0,class:"space-y-2"},mt={class:"flex items-center justify-between"},ft={class:"flex gap-2"},vt={class:"border rounded-lg overflow-hidden"},xt={class:"px-3 py-2 bg-muted border-b flex items-center gap-2"},gt={class:"text-sm font-medium"},yt={class:"max-h-64 overflow-auto p-4"},bt={key:0,class:"text-sm"},ht={key:1,class:"text-sm"},_t={class:"bg-card rounded-lg p-6"},kt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},At={__name:"json-path",setup(St){const u=b(""),n=b(""),c=b(null),g=b(""),r=b(null),h=b(!1),j={store:{book:[{category:"reference",author:"Nigel Rees",title:"Sayings of the Century",price:8.95},{category:"fiction",author:"Evelyn Waugh",title:"Sword of Honour",price:12.99},{category:"fiction",author:"Herman Melville",title:"Moby Dick",isbn:"0-553-21311-3",price:8.99},{category:"fiction",author:"J. R. R. Tolkien",title:"The Lord of the Rings",isbn:"0-395-19395-8",price:22.99}],bicycle:{color:"red",price:19.95}},expensive:10},P=[{path:"$.store.book[*].author",description:"获取所有书籍的作者"},{path:"$..author",description:"获取所有作者（递归查找）"},{path:"$.store.*",description:"获取 store 下的所有子节点"},{path:"$..book[0]",description:"获取第一本书"},{path:"$..book[-1]",description:"获取最后一本书"},{path:"$..book[?(@.price<10)]",description:"获取价格小于 10 的书"},{path:'$..book[?(@.category=="fiction")]',description:"获取小说类书籍"},{path:"$..book[?(@.isbn)]",description:"获取有 ISBN 的书"}],k=()=>{if(g.value="",c.value=null,!!u.value.trim())try{c.value=JSON.parse(u.value)}catch(o){g.value="JSON 解析错误: "+o.message}},A=()=>{c.value||k(),c.value&&(u.value=JSON.stringify(c.value,null,2))},R=()=>{u.value=JSON.stringify(j,null,2),k()},T=()=>{u.value="",c.value=null,g.value="",r.value=null},F=()=>{n.value="",r.value=null},E=o=>{n.value=o.path},S=(o,e)=>{if(e==="$")return o;if(e.startsWith("$.")||e==="$"?e=e.substring(2):e.startsWith("$")&&(e=e.substring(1)),e.includes(".."))return V(o,e);const l=e.split(".");let s=o;for(let a of l)if(a)if(a.includes("[")&&a.includes("]")){const[m,_]=a.split("["),d=parseInt(_.replace("]",""));m&&s[m]!==void 0?s=s[m][d]:s&&Array.isArray(s)&&(s=s[d])}else if(a==="*"){if(Array.isArray(s))return s;if(typeof s=="object"&&s!==null)return Object.values(s)}else if(s&&typeof s=="object"&&s[a]!==void 0)s=s[a];else return;return s},V=(o,e)=>{const[l,s]=e.split("..",2),a=[];function m(d){if(Array.isArray(d))for(let y of d)m(y);else if(d&&typeof d=="object"){if(s){const y=S(d,s);y!==void 0&&a.push(y)}for(let y in d)m(d[y])}}let _=o;return l&&(_=S(o,l)),_&&m(_),a.length===1?a[0]:a},O=()=>{if(!(!c.value||!n.value))try{r.value=S(c.value,n.value)}catch(o){r.value="查询错误: "+o.message}},B=async()=>{const o=typeof r.value=="object"?JSON.stringify(r.value,null,2):String(r.value);try{await navigator.clipboard.writeText(o),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch{const l=document.createElement("textarea");l.value=o,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}};return W({title:"JSONPath查询工具 - 在线JSON路径表达式查询",description:"免费在线JSONPath查询工具，支持使用JSONPath表达式查询和提取JSON数据，提供语法说明和示例。",keywords:["jsonpath","json","query","path","extract","在线工具"]}),(o,e)=>{const l=M;return x(),f("div",U,[e[13]||(e[13]=t("div",{class:"mt-4 mb-8"},[t("h1",{class:"text-3xl font-bold mb-3"},"JSONPath 查询工具"),t("p",{class:"text-muted-foreground"},"使用 JSONPath 表达式查询和提取 JSON 数据")],-1)),t("div",G,[t("div",Y,[t("div",Z,[t("div",{class:"flex items-center justify-between"},[e[3]||(e[3]=t("h2",{class:"text-lg font-semibold"},"JSON 数据",-1)),t("div",{class:"flex gap-2"},[t("button",{onClick:R,class:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"}," 加载示例 "),t("button",{onClick:A,class:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"}," 格式化 "),t("button",{onClick:T,class:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"}," 清空 ")])]),t("div",tt,[$(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),onInput:k,placeholder:"请输入 JSON 数据...",class:I(["w-full h-96 p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm",{"border-red-500":g.value}])},null,34),[[C,u.value]]),t("div",et,p(u.value.length)+" 字符 ",1)]),g.value?(x(),f("div",st,p(g.value),1)):N("",!0)]),t("div",ot,[t("div",{class:"flex items-center justify-between"},[e[4]||(e[4]=t("h2",{class:"text-lg font-semibold"},"JSONPath 查询",-1)),t("div",{class:"flex gap-2"},[t("button",{onClick:F,class:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"}," 清空 ")])]),t("div",rt,[e[5]||(e[5]=t("label",{class:"text-sm font-medium"},"JSONPath 表达式",-1)),t("div",lt,[$(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s),onKeyup:L(O,["enter"]),placeholder:"例如: $.store.book[*].author",class:"w-full p-3 pr-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary font-mono"},null,544),[[C,n.value]]),n.value?(x(),f("button",{key:0,onClick:e[2]||(e[2]=s=>n.value=""),class:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"},[i(v(X),{class:"w-4 h-4"})])):N("",!0)])]),t("div",at,[e[6]||(e[6]=t("label",{class:"text-sm font-medium"},"快捷示例",-1)),t("div",dt,[(x(),f(q,null,z(P,s=>t("button",{key:s.path,onClick:a=>E(s),class:"p-2 text-sm bg-muted hover:bg-muted/80 rounded text-left transition-colors"},[t("div",nt,p(s.path),1),t("div",ct,p(s.description),1)],8,it)),64))])]),t("button",{onClick:O,disabled:!c.value||!n.value,class:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," 执行查询 ",8,ut),r.value!==null?(x(),f("div",pt,[t("div",mt,[e[7]||(e[7]=t("label",{class:"text-sm font-medium"},"查询结果",-1)),t("div",ft,[t("button",{onClick:B,class:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"},p(h.value?"已复制":"复制"),1)])]),t("div",vt,[t("div",xt,[t("span",gt,p(Array.isArray(r.value)?`数组 (${r.value.length} 项)`:typeof r.value),1)]),t("div",yt,[typeof r.value=="object"?(x(),f("pre",bt,p(JSON.stringify(r.value,null,2)),1)):(x(),f("div",ht,p(r.value),1))])])])):N("",!0)])]),e[12]||(e[12]=D('<div class="bg-card rounded-lg p-6"><h2 class="text-lg font-semibold mb-4">JSONPath 语法说明</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><h3 class="font-medium mb-3">基础语法</h3><table class="w-full text-sm"><thead><tr class="border-b"><th class="text-left py-2">表达式</th><th class="text-left py-2">说明</th></tr></thead><tbody><tr class="border-b"><td class="py-2 font-mono text-primary">$</td><td class="py-2">根节点</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">@</td><td class="py-2">当前节点</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">. 或 []</td><td class="py-2">子节点操作符</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">..</td><td class="py-2">递归下降（所有层级的子节点）</td></tr><tr><td class="py-2 font-mono text-primary">*</td><td class="py-2">通配符，匹配所有元素</td></tr></tbody></table></div><div><h3 class="font-medium mb-3">高级语法</h3><table class="w-full text-sm"><thead><tr class="border-b"><th class="text-left py-2">表达式</th><th class="text-left py-2">说明</th></tr></thead><tbody><tr class="border-b"><td class="py-2 font-mono text-primary">[]</td><td class="py-2">迭代器（如 [0,1] 或 [1:10]）</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">[start:end:step]</td><td class="py-2">数组切片（支持 Python 风格）</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">?(expression)</td><td class="py-2">脚本表达式（过滤）</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">(...)</td><td class="py-2">脚本表达式</td></tr><tr><td class="py-2 font-mono text-primary">&#39;&#39;</td><td class="py-2">脚本表达式中的字符串</td></tr></tbody></table></div></div><div class="mt-6"><h3 class="font-medium mb-3">常用示例</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><h4 class="text-sm font-medium mb-2">基础查询</h4><ul class="space-y-1 text-sm"><li><code class="bg-muted px-1 rounded">$.store.book[*].author</code> - 所有书籍的作者</li><li><code class="bg-muted px-1 rounded">$..author</code> - 所有作者</li><li><code class="bg-muted px-1 rounded">$.store.*</code> - store 下的所有子节点</li><li><code class="bg-muted px-1 rounded">$..book[?(@.price&lt;10)]</code> - 价格小于 10 的书</li></ul></div><div><h4 class="text-sm font-medium mb-2">高级查询</h4><ul class="space-y-1 text-sm"><li><code class="bg-muted px-1 rounded">$..book[0,1]</code> - 前两本书</li><li><code class="bg-muted px-1 rounded">$..book[-1]</code> - 最后一本书</li><li><code class="bg-muted px-1 rounded">$..book[?(@.category==&#39;fiction&#39;)]</code> - 小说类书籍</li><li><code class="bg-muted px-1 rounded">$..[?(@.length&gt;2)]</code> - 长度大于 2 的数组</li></ul></div></div></div></div>',1)),t("div",_t,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold mb-4"},"相关工具",-1)),t("div",kt,[i(l,{to:"/tools/format/json-formatter",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:w(()=>[i(v(H),{class:"w-5 h-5 text-primary"}),e[8]||(e[8]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"JSON格式化"),t("p",{class:"text-xs text-muted-foreground"},"美化压缩JSON")],-1)),i(v(J),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1}),i(l,{to:"/tools/text/xpath-tester",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:w(()=>[i(v(K),{class:"w-5 h-5 text-primary"}),e[9]||(e[9]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"XPath测试器"),t("p",{class:"text-xs text-muted-foreground"},"XML路径查询")],-1)),i(v(J),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1}),i(l,{to:"/tools/crypto/jwt-decode",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:w(()=>[i(v(Q),{class:"w-5 h-5 text-primary"}),e[10]||(e[10]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"JWT解析器"),t("p",{class:"text-xs text-muted-foreground"},"解析JWT令牌")],-1)),i(v(J),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1})])])])])}}};export{At as default};
