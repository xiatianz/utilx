<!doctype html><html lang=zh-cn dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Reactæ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„æ€§èƒ½æå‡æŠ€å·§ | æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</title><meta name=keywords content="React,æ€§èƒ½ä¼˜åŒ–,JavaScript,å‰ç«¯æ¡†æ¶,æœ€ä½³å®è·µ"><meta name=description content="æ·±å…¥æ¢è®¨Reactåº”ç”¨æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒç­–ç•¥ï¼ŒåŒ…æ‹¬ç»„ä»¶ä¼˜åŒ–ã€çŠ¶æ€ç®¡ç†ã€æ¸²æŸ“ä¼˜åŒ–ã€Bundleä¼˜åŒ–ç­‰ï¼Œå¸®åŠ©æ„å»ºé«˜æ€§èƒ½çš„Reactåº”ç”¨ã€‚"><meta name=author content="æœ‰æ¡å·¥å…·å›¢é˜Ÿ"><link rel=canonical href=/blog/articles/react-performance-optimization/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.7e8505b7cdf8bb22ab2305e53c2700bb06c7e64faeb72cd3468823a9a3bd3d6e.css integrity="sha256-foUFt834uyKrIwXlPCcAuwbH5k+utyzTRogjqaO9PW4=" rel="preload stylesheet" as=style><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/blog/favicon-32x32.png><link rel=apple-touch-icon href=/blog/apple-touch-icon.png><link rel=mask-icon href=/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=/blog/articles/react-performance-optimization/feed.xml title=rss><link rel=alternate hreflang=zh-cn href=/blog/articles/react-performance-optimization/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script src=/js/external-link-config.js></script><script src=/js/external-link-interceptor.js></script><link rel=stylesheet href=/blog/css/custom.css media=screen><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«","url":"https://www.util.cn/blog/","description":"æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚","publisher":{"@type":"Organization","name":"æœ‰æ¡å·¥å…·","url":"https://www.util.cn","logo":{"@type":"ImageObject","url":"https://www.util.cn/blog/logo/logo-256.png","width":256,"height":256}},"potentialAction":[{"@type":"SearchAction","target":"https://www.util.cn/blog/search?q={search_term_string}","query-input":"required name=search_term_string"}]}</script><meta property="og:type" content="website"><meta property="og:title" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta property="og:description" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚"><meta property="og:url" content="https://www.util.cn/blog/"><meta property="og:site_name" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢"><meta property="og:image" content="https://www.util.cn/blog/logo/logo-256.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta name=twitter:description content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚"><meta name=twitter:image content="https://www.util.cn/blog/logo/logo-256.png"><meta name=baidu-site-verification content><meta name=category content="æŠ€æœ¯åšå®¢,å¼€å‘è€…å·¥å…·,ç¼–ç¨‹æ•™ç¨‹"><meta name=coverage content="Worldwide"><meta name=distribution content="Global"><meta name=rating content="General"><script id=51la_code async crossorigin=anonymous src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=pro"></script><script>window.addEventListener("load",function(){setTimeout(function(){typeof la!="undefined"?console.log("51laç»Ÿè®¡å·²åŠ è½½"):(console.warn("51laç»Ÿè®¡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ"),function(){var e=document.createElement("script");e.src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=backup",e.async=!0,document.head.appendChild(e)}())},3e3)})</script><meta property="og:url" content="/blog/articles/react-performance-optimization/"><meta property="og:site_name" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·"><meta property="og:title" content="Reactæ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„æ€§èƒ½æå‡æŠ€å·§"><meta property="og:description" content="æ·±å…¥æ¢è®¨Reactåº”ç”¨æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒç­–ç•¥ï¼ŒåŒ…æ‹¬ç»„ä»¶ä¼˜åŒ–ã€çŠ¶æ€ç®¡ç†ã€æ¸²æŸ“ä¼˜åŒ–ã€Bundleä¼˜åŒ–ç­‰ï¼Œå¸®åŠ©æ„å»ºé«˜æ€§èƒ½çš„Reactåº”ç”¨ã€‚"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-16T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-16T00:00:00+00:00"><meta property="article:tag" content="React"><meta property="article:tag" content="æ€§èƒ½ä¼˜åŒ–"><meta property="article:tag" content="JavaScript"><meta property="article:tag" content="å‰ç«¯æ¡†æ¶"><meta property="article:tag" content="æœ€ä½³å®è·µ"><meta name=twitter:card content="summary"><meta name=twitter:title content="Reactæ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„æ€§èƒ½æå‡æŠ€å·§"><meta name=twitter:description content="æ·±å…¥æ¢è®¨Reactåº”ç”¨æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒç­–ç•¥ï¼ŒåŒ…æ‹¬ç»„ä»¶ä¼˜åŒ–ã€çŠ¶æ€ç®¡ç†ã€æ¸²æŸ“ä¼˜åŒ–ã€Bundleä¼˜åŒ–ç­‰ï¼Œå¸®åŠ©æ„å»ºé«˜æ€§èƒ½çš„Reactåº”ç”¨ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ‰€æœ‰æ–‡ç« ","item":"/blog/posts/"},{"@type":"ListItem","position":2,"name":"Reactæ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„æ€§èƒ½æå‡æŠ€å·§","item":"/blog/articles/react-performance-optimization/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Reactæ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„æ€§èƒ½æå‡æŠ€å·§","name":"Reactæ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„æ€§èƒ½æå‡æŠ€å·§","description":"æ·±å…¥æ¢è®¨Reactåº”ç”¨æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒç­–ç•¥ï¼ŒåŒ…æ‹¬ç»„ä»¶ä¼˜åŒ–ã€çŠ¶æ€ç®¡ç†ã€æ¸²æŸ“ä¼˜åŒ–ã€Bundleä¼˜åŒ–ç­‰ï¼Œå¸®åŠ©æ„å»ºé«˜æ€§èƒ½çš„Reactåº”ç”¨ã€‚","keywords":["React","æ€§èƒ½ä¼˜åŒ–","JavaScript","å‰ç«¯æ¡†æ¶","æœ€ä½³å®è·µ"],"articleBody":"Reactæ€§èƒ½ä¼˜åŒ–æ˜¯æ„å»ºé«˜è´¨é‡Webåº”ç”¨çš„å…³é”®ã€‚éšç€åº”ç”¨è§„æ¨¡çš„å¢é•¿ï¼Œæ€§èƒ½é—®é¢˜ä¼šé€æ¸æ˜¾ç°ã€‚æœ¬æ–‡å°†å…¨é¢ä»‹ç»Reactæ€§èƒ½ä¼˜åŒ–çš„å„ç§æŠ€å·§å’Œæœ€ä½³å®è·µã€‚\n1. ç»„ä»¶ä¼˜åŒ–åŸºç¡€ React.memoä¼˜åŒ–å‡½æ•°ç»„ä»¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 // æ™®é€šç»„ä»¶ - æ¯æ¬¡çˆ¶ç»„ä»¶æ›´æ–°éƒ½ä¼šé‡æ–°æ¸²æŸ“ const UserProfile = ({ name, age, avatar }) =\u003e { console.log('UserProfile re-rendered'); return ( \u003cdiv className=\"user-profile\"\u003e \u003cimg src={avatar} alt={name} /\u003e \u003cdiv\u003e \u003ch2\u003e{name}\u003c/h2\u003e \u003cp\u003eAge: {age}\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e ); }; // ä¼˜åŒ–å - åªæœ‰propså˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“ const OptimizedUserProfile = React.memo(({ name, age, avatar }) =\u003e { console.log('OptimizedUserProfile re-rendered'); return ( \u003cdiv className=\"user-profile\"\u003e \u003cimg src={avatar} alt={name} /\u003e \u003cdiv\u003e \u003ch2\u003e{name}\u003c/h2\u003e \u003cp\u003eAge: {age}\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e ); }); // è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•° const CustomUserProfile = React.memo(({ user }) =\u003e { return ( \u003cdiv className=\"user-profile\"\u003e \u003ch2\u003e{user.name}\u003c/h2\u003e \u003cp\u003e{user.email}\u003c/p\u003e \u003c/div\u003e ); }, (prevProps, nextProps) =\u003e { // åªæœ‰IDæˆ–åŸºæœ¬ä¿¡æ¯å˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“ return prevProps.user.id === nextProps.user.id \u0026\u0026 prevProps.user.name === nextProps.user.name \u0026\u0026 prevProps.user.email === nextProps.user.email; }); useMemoç¼“å­˜è®¡ç®—ç»“æœ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 const ExpensiveComponent = ({ items, filter }) =\u003e { // âŒ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¡ç®— const filteredItems = items.filter(item =\u003e item.name.toLowerCase().includes(filter.toLowerCase()) ); // âœ… ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ const expensiveValue = useMemo(() =\u003e { console.log('Expensive calculation running...'); return items .filter(item =\u003e item.price \u003e 100) .reduce((sum, item) =\u003e sum + item.price, 0); }, [items]); // æ›´å¤æ‚çš„è®¡ç®—ç¤ºä¾‹ const chartData = useMemo(() =\u003e { const data = items.map(item =\u003e ({ name: item.name, value: calculateComplexMetrics(item), category: categorizeItem(item) })); return processDataForChart(data); }, [items]); return ( \u003cdiv\u003e \u003ch3\u003eTotal Value: ${expensiveValue}\u003c/h3\u003e \u003cChart data={chartData} /\u003e \u003c/div\u003e ); }; useCallbackç¼“å­˜å‡½æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 const ParentComponent = ({ items }) =\u003e { const [selectedItem, setSelectedItem] = useState(null); // âŒ æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•° const handleSelect = (item) =\u003e { setSelectedItem(item); }; // âœ… ä½¿ç”¨useMemoç¼“å­˜è®¡ç®— const expensiveValue = useMemo(() =\u003e { return items.reduce((sum, item) =\u003e sum + item.value, 0); }, [items]); // âœ… ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•° const handleSelect = useCallback((item) =\u003e { setSelectedItem(item); // ä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„ï¼Œå‡½æ•°å†…éƒ¨ä¸ä¾èµ–å¤–éƒ¨å˜é‡ }, []); // âœ… å‡½æ•°ä¾èµ–å¤–éƒ¨å˜é‡ const handleAction = useCallback((itemId) =\u003e { const item = items.find(i =\u003e i.id === itemId); if (item) { setSelectedItem(item); } }, [items]); return ( \u003cdiv\u003e \u003cp\u003eTotal: {expensiveValue}\u003c/p\u003e \u003cItemList items={items} onSelect={handleSelect} onAction={handleAction} selectedItem={selectedItem} /\u003e \u003c/div\u003e ); }; 2. çŠ¶æ€ç®¡ç†ä¼˜åŒ– é¿å…ä¸å¿…è¦çš„çŠ¶æ€æå‡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 // âŒ é”™è¯¯çš„çŠ¶æ€ç®¡ç† const BadExample = () =\u003e { const [formData, setFormData] = useState({ name: '', email: '', password: '', confirmPassword: '' }); const handleInputChange = (field) =\u003e (e) =\u003e { setFormData(prev =\u003e ({ ...prev, [field]: e.target.value })); }; return ( \u003cform\u003e \u003cinput value={formData.name} onChange={handleInputChange('name')} placeholder=\"Name\" /\u003e \u003cinput value={formData.email} onChange={handleInputChange('email')} placeholder=\"Email\" /\u003e \u003cinput value={formData.password} onChange={handleInputChange('password')} type=\"password\" placeholder=\"Password\" /\u003e \u003c/form\u003e ); }; // âœ… ä¼˜åŒ–åçš„çŠ¶æ€ç®¡ç† const GoodExample = () =\u003e { // å°†ç›¸å…³çš„çŠ¶æ€åˆ†ç»„ const [user, setUser] = useState({ name: '', email: '' }); const [password, setPassword] = useState(''); const [confirmPassword, setConfirmPassword] = useState(''); // ä½¿ç”¨reducerç®¡ç†å¤æ‚çŠ¶æ€ const [formData, dispatch] = useReducer(formReducer, initialFormState); // ä½¿ç”¨useReducerç®¡ç†è¡¨å•çŠ¶æ€ const formReducer = (state, action) =\u003e { switch (action.type) { case 'SET_FIELD': return { ...state, [action.field]: action.value }; case 'RESET_FORM': return initialFormState; default: return state; } }; const handleInputChange = (field) =\u003e (e) =\u003e { dispatch({ type: 'SET_FIELD', field, value: e.target.value }); }; return ( \u003cform\u003e \u003cinput value={formData.name} onChange={handleInputChange('name')} placeholder=\"Name\" /\u003e \u003cinput value={formData.email} onChange={handleInputChange('email')} placeholder=\"Email\" /\u003e \u003c/form\u003e ); }; çŠ¶æ€åˆ†ç¦»å’Œç»„åˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 // âœ… çŠ¶æ€åˆ†ç¦» const UserDashboard = ({ userId }) =\u003e { // ç”¨æˆ·ä¿¡æ¯çŠ¶æ€ const [user, setUser] = useState(null); const [userLoading, setUserLoading] = useState(false); // æ–‡ç« åˆ—è¡¨çŠ¶æ€ const [articles, setArticles] = useState([]); const [articleLoading, setArticleLoading] = useState(false); // è®¾ç½®çŠ¶æ€çŠ¶æ€ const [settings, setSettings] = useState({}); const [settingsLoading, setSettingsLoading] = useState(false); // è‡ªå®šä¹‰Hookç®¡ç†ç›¸å…³çŠ¶æ€ const { user, loading: userLoading } = useUser(userId); const { articles, loading: articleLoading } = useUserArticles(userId); const { settings, loading: settingsLoading } = useSettings(); return ( \u003cdiv\u003e {userLoading ? \u003cUserSkeleton /\u003e : \u003cUserProfile user={user} /\u003e} {articleLoading ? \u003cArticleSkeleton /\u003e : \u003cArticleList articles={articles} /\u003e} {settingsLoading ? \u003cSettingsSkeleton /\u003e : \u003cSettingsPanel settings={settings} /\u003e} \u003c/div\u003e ); }; // è‡ªå®šä¹‰Hookç¤ºä¾‹ const useUserArticles = (userId) =\u003e { const [articles, setArticles] = useState([]); const [loading, setLoading] = useState(false); const [error, setError] = useState(null); useEffect(() =\u003e { if (!userId) return; setLoading(true); fetchUserArticles(userId) .then(setArticles) .catch(setError) .finally(() =\u003e setLoading(false)); }, [userId]); return { articles, loading, error }; }; Contextä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 // âŒ æœªä¼˜åŒ–çš„Context - ä¼šå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…é‡æ–°æ¸²æŸ“ const BadContext = React.createContext(); const BadProvider = ({ children }) =\u003e { const [user, setUser] = useState(null); const [theme, setTheme] = useState('light'); const [notifications, setNotifications] = useState([]); // ä»»ä½•çŠ¶æ€å˜åŒ–éƒ½ä¼šå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…é‡æ–°æ¸²æŸ“ const value = { user, setUser, theme, setTheme, notifications, setNotifications }; return ( \u003cBadContext.Provider value={value}\u003e {children} \u003c/BadContext.Provider\u003e ); }; // âœ… ä¼˜åŒ–åçš„Context - åˆ†ç¦»ä¸åŒå…³æ³¨ç‚¹ const UserContext = React.createContext(); const ThemeContext = React.createContext(); const NotificationContext = React.createContext(); const UserProvider = ({ children }) =\u003e { const [user, setUser] = useState(null); // ä½¿ç”¨memoé˜²æ­¢ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ const value = useMemo(() =\u003e ({ user, setUser }), [user]); return ( \u003cUserContext.Provider value={value}\u003e {children} \u003c/UserContext.Provider\u003e ); }; // ä½¿ç”¨Contexté€‰æ‹©å™¨æ¨¡å¼ const useUser = () =\u003e { const context = useContext(UserContext); if (!context) { throw new Error('useUser must be used within UserProvider'); } return context; }; const useUserName = () =\u003e { const { user } = useUser(); return user?.name; }; 3. æ¸²æŸ“ä¼˜åŒ– è™šæ‹Ÿåˆ—è¡¨å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 import { FixedSizeList as List } from 'react-window'; // è™šæ‹ŸåŒ–é•¿åˆ—è¡¨ const VirtualizedList = ({ items }) =\u003e { const Row = ({ index, style }) =\u003e ( \u003cdiv style={style}\u003e \u003cListItem item={items[index]} /\u003e \u003c/div\u003e ); return ( \u003cList height={600} itemCount={items.length} itemSize={80} width=\"100%\" \u003e {Row} \u003c/List\u003e ); }; // è‡ªå®šä¹‰è™šæ‹ŸåŒ–ç»„ä»¶ const CustomVirtualList = ({ items, itemHeight = 50, containerHeight = 400 }) =\u003e { const [scrollTop, setScrollTop] = useState(0); const containerRef = useRef(null); const visibleStart = Math.floor(scrollTop / itemHeight); const visibleEnd = Math.min( visibleStart + Math.ceil(containerHeight / itemHeight) + 1, items.length ); const visibleItems = items.slice(visibleStart, visibleEnd); const handleScroll = useCallback((e) =\u003e { setScrollTop(e.target.scrollTop); }, []); return ( \u003cdiv ref={containerRef} style={{ height: containerHeight, overflow: 'auto' }} onScroll={handleScroll} \u003e \u003cdiv style={{ height: items.length * itemHeight, position: 'relative' }}\u003e {visibleItems.map((item, index) =\u003e ( \u003cdiv key={visibleStart + index} style={{ position: 'absolute', top: (visibleStart + index) * itemHeight, height: itemHeight, width: '100%' }} \u003e \u003cListItem item={item} /\u003e \u003c/div\u003e ))} \u003c/div\u003e \u003c/div\u003e ); }; æ‡’åŠ è½½å’Œä»£ç åˆ†å‰² 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 import { lazy, Suspense } from 'react'; // è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰² const HomePage = lazy(() =\u003e import('./pages/HomePage')); const AboutPage = lazy(() =\u003e import('./pages/AboutPage')); const ContactPage = lazy(() =\u003e import('./pages/ContactPage')); const App = () =\u003e ( \u003cRouter\u003e \u003cSuspense fallback={\u003cdiv\u003eLoading...\u003c/div\u003e}\u003e \u003cRoutes\u003e \u003cRoute path=\"/\" element={\u003cHomePage /\u003e} /\u003e \u003cRoute path=\"/about\" element={\u003cAboutPage /\u003e} /\u003e \u003cRoute path=\"/contact\" element={\u003cContactPage /\u003e} /\u003e \u003c/Routes\u003e \u003c/Suspense\u003e \u003c/Router\u003e ); // ç»„ä»¶çº§åˆ«çš„æ‡’åŠ è½½ const LazyChart = lazy(() =\u003e import('./components/Chart').then(module =\u003e ({ default: module.Chart })) ); const Dashboard = ({ data }) =\u003e ( \u003cdiv\u003e \u003ch2\u003eDashboard\u003c/h2\u003e \u003cSuspense fallback={\u003cdiv\u003eLoading chart...\u003c/div\u003e}\u003e \u003cLazyChart data={data} /\u003e \u003c/Suspense\u003e \u003c/div\u003e ); // åŠ¨æ€å¯¼å…¥å·¥å…·å‡½æ•° const loadComponent = (importFunc, fallback = null) =\u003e { const LazyComponent = lazy(importFunc); return (props) =\u003e ( \u003cSuspense fallback={fallback || \u003cdiv\u003eLoading...\u003c/div\u003e}\u003e \u003cLazyComponent {...props} /\u003e ); }; // ä½¿ç”¨ç¤ºä¾‹ const AsyncAdminPanel = loadComponent( () =\u003e import('./AdminPanel'), \u003cdiv\u003eLoading admin panel...\u003c/div\u003e ); å›¾ç‰‡ä¼˜åŒ–å’Œæ‡’åŠ è½½ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 import { useState, useRef, useEffect } from 'react'; const LazyImage = ({ src, alt, placeholder, className }) =\u003e { const [isLoaded, setIsLoaded] = useState(false); const [isInView, setIsInView] = useState(false); const imgRef = useRef(); useEffect(() =\u003e { const observer = new IntersectionObserver( ([entry]) =\u003e { if (entry.isIntersecting) { setIsInView(true); observer.disconnect(); } }, { threshold: 0.1 } ); if (imgRef.current) { observer.observe(imgRef.current); } return () =\u003e observer.disconnect(); }, []); const handleLoad = () =\u003e { setIsLoaded(true); }; return ( \u003cdiv ref={imgRef} className={className}\u003e {isInView \u0026\u0026 ( \u003cimg src={src} alt={alt} onLoad={handleLoad} style={{ opacity: isLoaded ? 1 : 0, transition: 'opacity 0.3s ease' }} /\u003e )} {!isLoaded \u0026\u0026 ( \u003cdiv className=\"image-placeholder\" style={{ backgroundColor: '#f0f0f0', backgroundImage: placeholder ? `url(${placeholder})` : 'none', backgroundSize: 'cover', backgroundPosition: 'center' }} /\u003e )} \u003c/div\u003e ); }; // å“åº”å¼å›¾ç‰‡ç»„ä»¶ const ResponsiveImage = ({ sources, alt, className }) =\u003e { const [loadedSources, setLoadedSources] = useState(new Set()); const handleSourceLoad = (src) =\u003e { setLoadedSources(prev =\u003e new Set(prev).add(src)); }; return ( \u003cpicture className={className}\u003e {sources.map(({ srcSet, media, type }) =\u003e ( \u003csource key={srcSet} srcSet={srcSet} media={media} type={type} onLoad={() =\u003e handleSourceLoad(srcSet)} /\u003e ))} \u003cimg src={sources[sources.length - 1].fallback} alt={alt} loading=\"lazy\" /\u003e \u003c/picture\u003e ); }; 4. Bundleä¼˜åŒ– åŠ¨æ€å¯¼å…¥å’ŒTree Shaking 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 // utils.js export const heavyFunction = () =\u003e { // å¤æ‚çš„è®¡ç®—é€»è¾‘ console.log('This is a heavy function'); }; export const lightFunction = () =\u003e { // ç®€å•çš„é€»è¾‘ console.log('This is a light function'); }; export default { heavyFunction, lightFunction }; // ä½¿ç”¨åŠ¨æ€å¯¼å…¥ const loadHeavyModule = async () =\u003e { const { heavyFunction } = await import('./utils'); heavyFunction(); }; // æ¡ä»¶å¯¼å…¥ const useFeature = (featureEnabled) =\u003e { const [module, setModule] = useState(null); useEffect(() =\u003e { if (featureEnabled) { import('./heavyFeature').then(setModule); } }, [featureEnabled]); return module; }; // Webpacké­”æ³•æ³¨é‡Š const loadModuleByLanguage = (language) =\u003e { switch (language) { case 'en': return import(/* webpackChunkName: \"lang-en\" */ './locales/en.json'); case 'zh': return import(/* webpackChunkName: \"lang-zh\" */ './locales/zh.json'); default: return import(/* webpackChunkName: \"lang-en\" */ './locales/en.json'); } }; Bundleåˆ†æå’Œä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 // webpack.config.js module.exports = { optimization: { splitChunks: { chunks: 'all', cacheGroups: { vendor: { test: /[\\\\/]node_modules[\\\\/]/, name: 'vendors', chunks: 'all', }, common: { name: 'common', minChunks: 2, chunks: 'all', enforce: true }, components: { test: /[\\\\/]src[\\\\/]components[\\\\/]/, name: 'components', chunks: 'all', minSize: 0 } } } } }; // ä½¿ç”¨webpack-bundle-analyzeråˆ†æBundle const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin; module.exports = { plugins: [ new BundleAnalyzerPlugin({ analyzerMode: 'static', openAnalyzer: false }) ] }; 5. æ€§èƒ½ç›‘æ§ æ€§èƒ½æµ‹é‡å·¥å…· 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 import { useProfiler, unstable_trace as trace } from 'react'; // React Profiler API const ProfiledComponent = ({ id, onRender, ...props }) =\u003e { return ( \u003cProfiler id={id} onRender={onRender}\u003e \u003cExpensiveComponent {...props} /\u003e \u003c/Profiler\u003e ); }; const App = () =\u003e { const handleRender = (id, phase, actualDuration) =\u003e { console.log(`${id} ${phase} took ${actualDuration}ms`); }; return ( \u003cdiv\u003e \u003cProfiledComponent id=\"UserProfile\" onRender={handleRender}\u003e \u003cUserProfile user={user} /\u003e \u003c/ProfiledComponent\u003e \u003c/div\u003e ); }; // è‡ªå®šä¹‰æ€§èƒ½Hook const usePerformanceMeasure = (name) =\u003e { useEffect(() =\u003e { const startTime = performance.now(); return () =\u003e { const endTime = performance.now(); console.log(`${name} took ${endTime - startTime}ms`); }; }, [name]); }; // ä½¿ç”¨ç¤ºä¾‹ const ExpensiveComponent = ({ data }) =\u003e { usePerformanceMeasure('ExpensiveComponent'); const processedData = useMemo(() =\u003e { return expensiveDataProcessing(data); }, [data]); return \u003cdiv\u003e{/* ç»„ä»¶å†…å®¹ */}\u003c/div\u003e; }; Web Vitalsç›‘æ§ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 // ä½¿ç”¨web-vitalsåº“ import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals'; const reportWebVitals = (onPerfEntry) =\u003e { if (onPerfEntry \u0026\u0026 onPerfEntry instanceof Function) { import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) =\u003e { getCLS(onPerfEntry); getFID(onPerfEntry); getFCP(onPerfEntry); getLCP(onPerfEntry); getTTFB(onPerfEntry); }); } }; // åœ¨åº”ç”¨ä¸­ä½¿ç”¨ const App = () =\u003e { useEffect(() =\u003e { reportWebVitals(console.log); // æˆ–è€…å‘é€åˆ°åˆ†ææœåŠ¡ reportWebVitals((metric) =\u003e { analytics.track('Web Vitals', { name: metric.name, value: metric.value, id: metric.id, delta: metric.delta, }); }); }, []); return \u003cdiv\u003e {/* åº”ç”¨å†…å®¹ */} \u003c/div\u003e; }; 6. é«˜çº§ä¼˜åŒ–æŠ€å·§ æ¸²æŸ“æ‰¹æ¬¡è°ƒåº¦ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 import { unstable_batchedUpdates } from 'react-dom'; // æ‰¹é‡æ›´æ–°çŠ¶æ€ const batchUpdateExample = () =\u003e { // è¿™äº›æ›´æ–°ä¼šè¢«æ‰¹é‡å¤„ç†ï¼Œåªè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ unstable_batchedUpdates(() =\u003e { setCount(prev =\u003e prev + 1); setName('New Name'); setAge(25); }); }; // åœ¨äº‹ä»¶å¤„ç†å™¨ä¸­è‡ªåŠ¨æ‰¹é‡æ›´æ–°ï¼ˆReact 18+ï¼‰ const handleClick = () =\u003e { // React 18ä¸­è¿™äº›æ›´æ–°ä¼šè‡ªåŠ¨æ‰¹é‡å¤„ç† setCount(prev =\u003e prev + 1); setName('New Name'); setAge(25); }; // å¼‚æ­¥æ“ä½œä¸­çš„æ‰¹é‡æ›´æ–° const fetchData = async () =\u003e { const response = await fetch('/api/data'); const data = await response.json(); // æ‰¹é‡æ›´æ–°çŠ¶æ€ unstable_batchedUpdates(() =\u003e { setData(data); setLoading(false); setError(null); }); }; Concurrent Modeå’ŒSuspense 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 import { Suspense, startTransition } from 'react'; const SearchResults = ({ query }) =\u003e { const [results, setResults] = useState([]); const [isPending, startTransition] = useTransition(); const handleSearch = (searchQuery) =\u003e { // æ ‡è®°æ›´æ–°ä¸ºè¿‡æ¸¡ startTransition(() =\u003e { // éç´§æ€¥æ›´æ–° setResults(searchData(searchQuery)); }); // ç´§æ€¥æ›´æ–° setSearchQuery(searchQuery); }; return ( \u003cdiv\u003e \u003cinput type=\"text\" onChange={(e) =\u003e handleSearch(e.target.value)} placeholder=\"Search...\" /\u003e {isPending \u0026\u0026 \u003cdiv\u003eSearching...\u003c/div\u003e} \u003cSuspense fallback={\u003cdiv\u003eLoading results...\u003c/div\u003e}\u003e \u003cResultsList results={results} /\u003e \u003c/Suspense\u003e \u003c/div\u003e ); }; // æ•°æ®è·å–ç»„ä»¶ const DataFetcher = ({ url }) =\u003e { const [data, setData] = useState(null); useEffect(() =\u003e { let isMounted = true; fetchData(url).then(response =\u003e { if (isMounted) { setData(response); } }); return () =\u003e { isMounted = false; }; }, [url]); if (!data) { throw new Promise(resolve =\u003e { setTimeout(() =\u003e resolve(fetchData(url)), 1000); }); } return \u003cdiv\u003e{/* æ¸²æŸ“æ•°æ® */}\u003c/div\u003e; }; 7. å®æˆ˜æ¡ˆä¾‹ ç”µå•†äº§å“åˆ—è¡¨ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 const ProductList = ({ products, filters, sortBy }) =\u003e { // ä½¿ç”¨useMemoç¼“å­˜è¿‡æ»¤å’Œæ’åºç»“æœ const filteredAndSortedProducts = useMemo(() =\u003e { let result = [...products]; // åº”ç”¨è¿‡æ»¤å™¨ if (filters.category) { result = result.filter(p =\u003e p.category === filters.category); } if (filters.minPrice) { result = result.filter(p =\u003e p.price \u003e= filters.minPrice); } if (filters.maxPrice) { result = result.filter(p =\u003e p.price \u003c= filters.maxPrice); } // åº”ç”¨æ’åº result.sort((a, b) =\u003e { switch (sortBy) { case 'price-low': return a.price - b.price; case 'price-high': return b.price - a.price; case 'name': return a.name.localeCompare(b.name); default: return 0; } }); return result; }, [products, filters, sortBy]); // è™šæ‹ŸåŒ–é•¿åˆ—è¡¨ const Row = React.memo(({ index, style }) =\u003e ( \u003cdiv style={style}\u003e \u003cProductCard product={filteredAndSortedProducts[index]} /\u003e \u003c/div\u003e )); return ( \u003cdiv\u003e \u003cdiv className=\"filters\"\u003e \u003cProductFilters filters={filters} onChange={setFilters} /\u003e \u003c/div\u003e \u003cdiv className=\"results-count\"\u003e Showing {filteredAndSortedProducts.length} products \u003c/div\u003e \u003cList height={600} itemCount={filteredAndSortedProducts.length} itemSize={200} width=\"100%\" \u003e {Row} \u003c/List\u003e \u003c/div\u003e ); }; // ä¼˜åŒ–çš„äº§å“å¡ç‰‡ç»„ä»¶ const ProductCard = React.memo(({ product }) =\u003e { const [isImageLoaded, setIsImageLoaded] = useState(false); const [isInView, setIsInView] = useState(false); const imgRef = useRef(); useEffect(() =\u003e { const observer = new IntersectionObserver( ([entry]) =\u003e setIsInView(entry.isIntersecting), { threshold: 0.1 } ); if (imgRef.current) { observer.observe(imgRef.current); } return () =\u003e observer.disconnect(); }, []); return ( \u003cdiv className=\"product-card\"\u003e \u003cdiv ref={imgRef} className=\"product-image\"\u003e {isInView \u0026\u0026 ( \u003cimg src={product.imageUrl} alt={product.name} onLoad={() =\u003e setIsImageLoaded(true)} style={{ opacity: isImageLoaded ? 1 : 0 }} /\u003e )} \u003c/div\u003e \u003ch3\u003e{product.name}\u003c/h3\u003e \u003cp className=\"price\"\u003e${product.price}\u003c/p\u003e \u003cbutton onClick={() =\u003e addToCart(product)} className=\"add-to-cart\" \u003e Add to Cart \u003c/button\u003e \u003c/div\u003e ); }); æ€»ç»“ Reactæ€§èƒ½ä¼˜åŒ–éœ€è¦ä»å¤šä¸ªå±‚é¢è€ƒè™‘ï¼š\nç»„ä»¶çº§ä¼˜åŒ–ï¼š\nä½¿ç”¨React.memoã€useMemoã€useCallback é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ åˆç†æ‹†åˆ†ç»„ä»¶ çŠ¶æ€ç®¡ç†ä¼˜åŒ–ï¼š\né¿å…çŠ¶æ€è¿‡åº¦æå‡ ä½¿ç”¨Contextåˆ†ç¦»å…³æ³¨ç‚¹ åˆç†ä½¿ç”¨æœ¬åœ°çŠ¶æ€å’Œå…¨å±€çŠ¶æ€ æ¸²æŸ“ä¼˜åŒ–ï¼š\nè™šæ‹ŸåŒ–é•¿åˆ—è¡¨ æ‡’åŠ è½½å’Œä»£ç åˆ†å‰² å›¾ç‰‡ä¼˜åŒ– æ„å»ºä¼˜åŒ–ï¼š\nä»£ç åˆ†å‰²å’ŒTree Shaking Bundleåˆ†æå’Œä¼˜åŒ– èµ„æºå‹ç¼©å’Œç¼“å­˜ è®°ä½ï¼Œæ€§èƒ½ä¼˜åŒ–åº”è¯¥åŸºäºå®é™…æµ‹é‡ï¼Œè¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºã€‚ä½¿ç”¨React DevTools Profilerã€Web Vitalsç­‰å·¥å…·è¯†åˆ«æ€§èƒ½ç“¶é¢ˆï¼Œç„¶åæœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–ã€‚\n","wordCount":"2960","inLanguage":"zh-cn","datePublished":"2025-12-16T00:00:00Z","dateModified":"2025-12-16T00:00:00Z","author":{"@type":"Person","name":"æœ‰æ¡å·¥å…·å›¢é˜Ÿ"},"mainEntityOfPage":{"@type":"WebPage","@id":"/blog/articles/react-performance-optimization/"},"publisher":{"@type":"Organization","name":"æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·","logo":{"@type":"ImageObject","url":"/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=/blog/ accesskey=h title="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· (Alt + H)">æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=/blog/posts/ title="æ‰€æœ‰æ–‡ç« åˆ—è¡¨ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŸ¥çœ‹æ‰€æœ‰æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ–‡ç« </span></a></li><li><a href=https://www.util.cn title="æœ‰æ¡å·¥å…· - å¼€å‘è€…çš„å¸¸ç”¨å·¥å…·é›†åˆï¼šæ— å¹¿å‘Š Â· æœ¬åœ°è®¡ç®— Â· å³å¼€å³ç”¨çš„åœ¨çº¿å·¥å…·å¹³å°ï¼Œæä¾›JSONæ ¼å¼åŒ–ã€SQLæ ¼å¼åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰å®ç”¨å·¥å…·"><span>æœ‰æ¡å·¥å…·</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=/blog/categories/ title="æ–‡ç« åˆ†ç±» - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æŠ€æœ¯é¢†åŸŸåˆ†ç±»çš„ä¼˜è´¨æ–‡ç« ï¼ŒåŒ…æ‹¬å‰ç«¯å¼€å‘ã€å·¥å…·ä½¿ç”¨ã€ç¼–ç¨‹æŠ€å·§ç­‰"><span>åˆ†ç±»</span></a></li><li><a href=/blog/tags/ title="æ ‡ç­¾äº‘ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡æ ‡ç­¾å¿«é€Ÿæ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ ‡ç­¾</span></a></li><li><a href=/blog/archives/ title="æ–‡ç« å½’æ¡£ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æ—¶é—´æŸ¥çœ‹å†å²æ–‡ç« "><span>å½’æ¡£</span></a></li><li><a href=/blog/search/ title="æœç´¢æ–‡ç«  - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡å…³é”®è¯æœç´¢æ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹ï¼Œæ”¯æŒæ ‡é¢˜ã€å†…å®¹ã€åˆ†ç±»å’Œæ ‡ç­¾æœç´¢"><span>æœç´¢</span></a></li></ul></nav></header><main class=main><article class=post-single><div class=post-content-wrapper><main class=post-content-main><header class=post-header-main><h1 class="post-title entry-hint-parent">Reactæ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„æ€§èƒ½æå‡æŠ€å·§</h1><div class=post-meta><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ class=category-link>å‰ç«¯å¼€å‘</a></div><span class=post-date>2025-12-16</span><span class=post-author>æœ‰æ¡å·¥å…·å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></div></header><div class=post-content><p>Reactæ€§èƒ½ä¼˜åŒ–æ˜¯æ„å»ºé«˜è´¨é‡Webåº”ç”¨çš„å…³é”®ã€‚éšç€åº”ç”¨è§„æ¨¡çš„å¢é•¿ï¼Œæ€§èƒ½é—®é¢˜ä¼šé€æ¸æ˜¾ç°ã€‚æœ¬æ–‡å°†å…¨é¢ä»‹ç»Reactæ€§èƒ½ä¼˜åŒ–çš„å„ç§æŠ€å·§å’Œæœ€ä½³å®è·µã€‚</p><h2 id=1-ç»„ä»¶ä¼˜åŒ–åŸºç¡€>1. ç»„ä»¶ä¼˜åŒ–åŸºç¡€<a hidden class=anchor aria-hidden=true href=#1-ç»„ä»¶ä¼˜åŒ–åŸºç¡€>#</a></h2><h3 id=reactmemoä¼˜åŒ–å‡½æ•°ç»„ä»¶>React.memoä¼˜åŒ–å‡½æ•°ç»„ä»¶<a hidden class=anchor aria-hidden=true href=#reactmemoä¼˜åŒ–å‡½æ•°ç»„ä»¶>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æ™®é€šç»„ä»¶ - æ¯æ¬¡çˆ¶ç»„ä»¶æ›´æ–°éƒ½ä¼šé‡æ–°æ¸²æŸ“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> UserProfile <span style=color:#ff7b72;font-weight:700>=</span> ({ name, age, avatar }) =&gt; {
</span></span><span style=display:flex><span>    console.log(<span style=color:#a5d6ff>&#39;UserProfile re-rendered&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span> className<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;user-profile&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>img</span> src<span style=color:#ff7b72;font-weight:700>=</span>{avatar} alt<span style=color:#ff7b72;font-weight:700>=</span>{name} /&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>h2</span>&gt;{name}&lt;/<span style=color:#7ee787>h2</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>p</span>&gt;Age<span style=color:#ff7b72;font-weight:700>:</span> {age}&lt;/<span style=color:#7ee787>p</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä¼˜åŒ–å - åªæœ‰propså˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> OptimizedUserProfile <span style=color:#ff7b72;font-weight:700>=</span> React.memo(({ name, age, avatar }) =&gt; {
</span></span><span style=display:flex><span>    console.log(<span style=color:#a5d6ff>&#39;OptimizedUserProfile re-rendered&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span> className<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;user-profile&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>img</span> src<span style=color:#ff7b72;font-weight:700>=</span>{avatar} alt<span style=color:#ff7b72;font-weight:700>=</span>{name} /&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>h2</span>&gt;{name}&lt;/<span style=color:#7ee787>h2</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>p</span>&gt;Age<span style=color:#ff7b72;font-weight:700>:</span> {age}&lt;/<span style=color:#7ee787>p</span>&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> CustomUserProfile <span style=color:#ff7b72;font-weight:700>=</span> React.memo(({ user }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span> className<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;user-profile&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>h2</span>&gt;{user.name}&lt;/<span style=color:#7ee787>h2</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>p</span>&gt;{user.email}&lt;/<span style=color:#7ee787>p</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>}, (prevProps, nextProps) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// åªæœ‰IDæˆ–åŸºæœ¬ä¿¡æ¯å˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>return</span> prevProps.user.id <span style=color:#ff7b72;font-weight:700>===</span> nextProps.user.id <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span>
</span></span><span style=display:flex><span>           prevProps.user.name <span style=color:#ff7b72;font-weight:700>===</span> nextProps.user.name <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span>
</span></span><span style=display:flex><span>           prevProps.user.email <span style=color:#ff7b72;font-weight:700>===</span> nextProps.user.email;
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h3 id=usememoç¼“å­˜è®¡ç®—ç»“æœ>useMemoç¼“å­˜è®¡ç®—ç»“æœ<a hidden class=anchor aria-hidden=true href=#usememoç¼“å­˜è®¡ç®—ç»“æœ>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#ff7b72>const</span> ExpensiveComponent <span style=color:#ff7b72;font-weight:700>=</span> ({ items, filter }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¡ç®—
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> filteredItems <span style=color:#ff7b72;font-weight:700>=</span> items.filter(item =&gt;
</span></span><span style=display:flex><span>        item.name.toLowerCase().includes(filter.toLowerCase())
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// âœ… ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> expensiveValue <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; {
</span></span><span style=display:flex><span>        console.log(<span style=color:#a5d6ff>&#39;Expensive calculation running...&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> items
</span></span><span style=display:flex><span>            .filter(item =&gt; item.price <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>100</span>)
</span></span><span style=display:flex><span>            .reduce((sum, item) =&gt; sum <span style=color:#ff7b72;font-weight:700>+</span> item.price, <span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>    }, [items]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// æ›´å¤æ‚çš„è®¡ç®—ç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> chartData <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> data <span style=color:#ff7b72;font-weight:700>=</span> items.map(item =&gt; ({
</span></span><span style=display:flex><span>            name<span style=color:#ff7b72;font-weight:700>:</span> item.name,
</span></span><span style=display:flex><span>            value<span style=color:#ff7b72;font-weight:700>:</span> calculateComplexMetrics(item),
</span></span><span style=display:flex><span>            category<span style=color:#ff7b72;font-weight:700>:</span> categorizeItem(item)
</span></span><span style=display:flex><span>        }));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> processDataForChart(data);
</span></span><span style=display:flex><span>    }, [items]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>h3</span>&gt;Total Value<span style=color:#ff7b72;font-weight:700>:</span> ${expensiveValue}&lt;/<span style=color:#7ee787>h3</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>Chart</span> data<span style=color:#ff7b72;font-weight:700>=</span>{chartData} /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h3 id=usecallbackç¼“å­˜å‡½æ•°>useCallbackç¼“å­˜å‡½æ•°<a hidden class=anchor aria-hidden=true href=#usecallbackç¼“å­˜å‡½æ•°>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#ff7b72>const</span> ParentComponent <span style=color:#ff7b72;font-weight:700>=</span> ({ items }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [selectedItem, setSelectedItem] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// âŒ æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> handleSelect <span style=color:#ff7b72;font-weight:700>=</span> (item) =&gt; {
</span></span><span style=display:flex><span>        setSelectedItem(item);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// âœ… ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> expensiveValue <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> items.reduce((sum, item) =&gt; sum <span style=color:#ff7b72;font-weight:700>+</span> item.value, <span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>    }, [items]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// âœ… ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> handleSelect <span style=color:#ff7b72;font-weight:700>=</span> useCallback((item) =&gt; {
</span></span><span style=display:flex><span>        setSelectedItem(item);
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// ä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„ï¼Œå‡½æ•°å†…éƒ¨ä¸ä¾èµ–å¤–éƒ¨å˜é‡
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// âœ… å‡½æ•°ä¾èµ–å¤–éƒ¨å˜é‡
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> handleAction <span style=color:#ff7b72;font-weight:700>=</span> useCallback((itemId) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> item <span style=color:#ff7b72;font-weight:700>=</span> items.find(i =&gt; i.id <span style=color:#ff7b72;font-weight:700>===</span> itemId);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (item) {
</span></span><span style=display:flex><span>            setSelectedItem(item);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }, [items]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>p</span>&gt;Total<span style=color:#ff7b72;font-weight:700>:</span> {expensiveValue}&lt;/<span style=color:#7ee787>p</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>ItemList</span>
</span></span><span style=display:flex><span>                items<span style=color:#ff7b72;font-weight:700>=</span>{items}
</span></span><span style=display:flex><span>                onSelect<span style=color:#ff7b72;font-weight:700>=</span>{handleSelect}
</span></span><span style=display:flex><span>                onAction<span style=color:#ff7b72;font-weight:700>=</span>{handleAction}
</span></span><span style=display:flex><span>                selectedItem<span style=color:#ff7b72;font-weight:700>=</span>{selectedItem}
</span></span><span style=display:flex><span>            /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h2 id=2-çŠ¶æ€ç®¡ç†ä¼˜åŒ–>2. çŠ¶æ€ç®¡ç†ä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#2-çŠ¶æ€ç®¡ç†ä¼˜åŒ–>#</a></h2><h3 id=é¿å…ä¸å¿…è¦çš„çŠ¶æ€æå‡>é¿å…ä¸å¿…è¦çš„çŠ¶æ€æå‡<a hidden class=anchor aria-hidden=true href=#é¿å…ä¸å¿…è¦çš„çŠ¶æ€æå‡>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">86
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âŒ é”™è¯¯çš„çŠ¶æ€ç®¡ç†
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> BadExample <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [formData, setFormData] <span style=color:#ff7b72;font-weight:700>=</span> useState({
</span></span><span style=display:flex><span>        name<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;&#39;</span>,
</span></span><span style=display:flex><span>        email<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;&#39;</span>,
</span></span><span style=display:flex><span>        password<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;&#39;</span>,
</span></span><span style=display:flex><span>        confirmPassword<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;&#39;</span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> handleInputChange <span style=color:#ff7b72;font-weight:700>=</span> (field) =&gt; (e) =&gt; {
</span></span><span style=display:flex><span>        setFormData(prev =&gt; ({
</span></span><span style=display:flex><span>            ...prev,
</span></span><span style=display:flex><span>            [field]<span style=color:#ff7b72;font-weight:700>:</span> e.target.value
</span></span><span style=display:flex><span>        }));
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>form</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>input</span>
</span></span><span style=display:flex><span>                value<span style=color:#ff7b72;font-weight:700>=</span>{formData.name}
</span></span><span style=display:flex><span>                onChange<span style=color:#ff7b72;font-weight:700>=</span>{handleInputChange(<span style=color:#a5d6ff>&#39;name&#39;</span>)}
</span></span><span style=display:flex><span>                placeholder<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Name&#34;</span>
</span></span><span style=display:flex><span>            /&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>input</span>
</span></span><span style=display:flex><span>                value<span style=color:#ff7b72;font-weight:700>=</span>{formData.email}
</span></span><span style=display:flex><span>                onChange<span style=color:#ff7b72;font-weight:700>=</span>{handleInputChange(<span style=color:#a5d6ff>&#39;email&#39;</span>)}
</span></span><span style=display:flex><span>                placeholder<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Email&#34;</span>
</span></span><span style=display:flex><span>            /&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>input</span>
</span></span><span style=display:flex><span>                value<span style=color:#ff7b72;font-weight:700>=</span>{formData.password}
</span></span><span style=display:flex><span>                onChange<span style=color:#ff7b72;font-weight:700>=</span>{handleInputChange(<span style=color:#a5d6ff>&#39;password&#39;</span>)}
</span></span><span style=display:flex><span>                type<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;password&#34;</span>
</span></span><span style=display:flex><span>                placeholder<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Password&#34;</span>
</span></span><span style=display:flex><span>            /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>form</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âœ… ä¼˜åŒ–åçš„çŠ¶æ€ç®¡ç†
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> GoodExample <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å°†ç›¸å…³çš„çŠ¶æ€åˆ†ç»„
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> [user, setUser] <span style=color:#ff7b72;font-weight:700>=</span> useState({ name<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;&#39;</span>, email<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;&#39;</span> });
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [password, setPassword] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#a5d6ff>&#39;&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [confirmPassword, setConfirmPassword] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#a5d6ff>&#39;&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä½¿ç”¨reducerç®¡ç†å¤æ‚çŠ¶æ€
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> [formData, dispatch] <span style=color:#ff7b72;font-weight:700>=</span> useReducer(formReducer, initialFormState);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä½¿ç”¨useReducerç®¡ç†è¡¨å•çŠ¶æ€
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> formReducer <span style=color:#ff7b72;font-weight:700>=</span> (state, action) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>switch</span> (action.type) {
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;SET_FIELD&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>                    ...state,
</span></span><span style=display:flex><span>                    [action.field]<span style=color:#ff7b72;font-weight:700>:</span> action.value
</span></span><span style=display:flex><span>                };
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;RESET_FORM&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>return</span> initialFormState;
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>default</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>return</span> state;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> handleInputChange <span style=color:#ff7b72;font-weight:700>=</span> (field) =&gt; (e) =&gt; {
</span></span><span style=display:flex><span>        dispatch({
</span></span><span style=display:flex><span>            type<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;SET_FIELD&#39;</span>,
</span></span><span style=display:flex><span>            field,
</span></span><span style=display:flex><span>            value<span style=color:#ff7b72;font-weight:700>:</span> e.target.value
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>form</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>input</span>
</span></span><span style=display:flex><span>                value<span style=color:#ff7b72;font-weight:700>=</span>{formData.name}
</span></span><span style=display:flex><span>                onChange<span style=color:#ff7b72;font-weight:700>=</span>{handleInputChange(<span style=color:#a5d6ff>&#39;name&#39;</span>)}
</span></span><span style=display:flex><span>                placeholder<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Name&#34;</span>
</span></span><span style=display:flex><span>            /&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>input</span>
</span></span><span style=display:flex><span>                value<span style=color:#ff7b72;font-weight:700>=</span>{formData.email}
</span></span><span style=display:flex><span>                onChange<span style=color:#ff7b72;font-weight:700>=</span>{handleInputChange(<span style=color:#a5d6ff>&#39;email&#39;</span>)}
</span></span><span style=display:flex><span>                placeholder<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Email&#34;</span>
</span></span><span style=display:flex><span>            /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>form</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h3 id=çŠ¶æ€åˆ†ç¦»å’Œç»„åˆ>çŠ¶æ€åˆ†ç¦»å’Œç»„åˆ<a hidden class=anchor aria-hidden=true href=#çŠ¶æ€åˆ†ç¦»å’Œç»„åˆ>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âœ… çŠ¶æ€åˆ†ç¦»
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> UserDashboard <span style=color:#ff7b72;font-weight:700>=</span> ({ userId }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ç”¨æˆ·ä¿¡æ¯çŠ¶æ€
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> [user, setUser] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [userLoading, setUserLoading] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// æ–‡ç« åˆ—è¡¨çŠ¶æ€
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> [articles, setArticles] <span style=color:#ff7b72;font-weight:700>=</span> useState([]);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [articleLoading, setArticleLoading] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// è®¾ç½®çŠ¶æ€çŠ¶æ€
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> [settings, setSettings] <span style=color:#ff7b72;font-weight:700>=</span> useState({});
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [settingsLoading, setSettingsLoading] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// è‡ªå®šä¹‰Hookç®¡ç†ç›¸å…³çŠ¶æ€
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> { user, loading<span style=color:#ff7b72;font-weight:700>:</span> userLoading } <span style=color:#ff7b72;font-weight:700>=</span> useUser(userId);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> { articles, loading<span style=color:#ff7b72;font-weight:700>:</span> articleLoading } <span style=color:#ff7b72;font-weight:700>=</span> useUserArticles(userId);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> { settings, loading<span style=color:#ff7b72;font-weight:700>:</span> settingsLoading } <span style=color:#ff7b72;font-weight:700>=</span> useSettings();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>            {userLoading <span style=color:#ff7b72;font-weight:700>?</span> &lt;<span style=color:#7ee787>UserSkeleton</span> /&gt; <span style=color:#ff7b72;font-weight:700>:</span> &lt;<span style=color:#7ee787>UserProfile</span> user<span style=color:#ff7b72;font-weight:700>=</span>{user} /&gt;}
</span></span><span style=display:flex><span>            {articleLoading <span style=color:#ff7b72;font-weight:700>?</span> &lt;<span style=color:#7ee787>ArticleSkeleton</span> /&gt; <span style=color:#ff7b72;font-weight:700>:</span> &lt;<span style=color:#7ee787>ArticleList</span> articles<span style=color:#ff7b72;font-weight:700>=</span>{articles} /&gt;}
</span></span><span style=display:flex><span>            {settingsLoading <span style=color:#ff7b72;font-weight:700>?</span> &lt;<span style=color:#7ee787>SettingsSkeleton</span> /&gt; <span style=color:#ff7b72;font-weight:700>:</span> &lt;<span style=color:#7ee787>SettingsPanel</span> settings<span style=color:#ff7b72;font-weight:700>=</span>{settings} /&gt;}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è‡ªå®šä¹‰Hookç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> useUserArticles <span style=color:#ff7b72;font-weight:700>=</span> (userId) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [articles, setArticles] <span style=color:#ff7b72;font-weight:700>=</span> useState([]);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [loading, setLoading] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [error, setError] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    useEffect(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>userId) <span style=color:#ff7b72>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        setLoading(<span style=color:#79c0ff>true</span>);
</span></span><span style=display:flex><span>        fetchUserArticles(userId)
</span></span><span style=display:flex><span>            .then(setArticles)
</span></span><span style=display:flex><span>            .<span style=color:#ff7b72>catch</span>(setError)
</span></span><span style=display:flex><span>            .<span style=color:#ff7b72>finally</span>(() =&gt; setLoading(<span style=color:#79c0ff>false</span>));
</span></span><span style=display:flex><span>    }, [userId]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> { articles, loading, error };
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h3 id=contextä¼˜åŒ–>Contextä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#contextä¼˜åŒ–>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âŒ æœªä¼˜åŒ–çš„Context - ä¼šå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…é‡æ–°æ¸²æŸ“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> BadContext <span style=color:#ff7b72;font-weight:700>=</span> React.createContext();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> BadProvider <span style=color:#ff7b72;font-weight:700>=</span> ({ children }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [user, setUser] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [theme, setTheme] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#a5d6ff>&#39;light&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [notifications, setNotifications] <span style=color:#ff7b72;font-weight:700>=</span> useState([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä»»ä½•çŠ¶æ€å˜åŒ–éƒ½ä¼šå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…é‡æ–°æ¸²æŸ“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> value <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>        user,
</span></span><span style=display:flex><span>        setUser,
</span></span><span style=display:flex><span>        theme,
</span></span><span style=display:flex><span>        setTheme,
</span></span><span style=display:flex><span>        notifications,
</span></span><span style=display:flex><span>        setNotifications
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>BadContext.Provider</span> value<span style=color:#ff7b72;font-weight:700>=</span>{value}&gt;
</span></span><span style=display:flex><span>            {children}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>BadContext.Provider</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âœ… ä¼˜åŒ–åçš„Context - åˆ†ç¦»ä¸åŒå…³æ³¨ç‚¹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> UserContext <span style=color:#ff7b72;font-weight:700>=</span> React.createContext();
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> ThemeContext <span style=color:#ff7b72;font-weight:700>=</span> React.createContext();
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> NotificationContext <span style=color:#ff7b72;font-weight:700>=</span> React.createContext();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> UserProvider <span style=color:#ff7b72;font-weight:700>=</span> ({ children }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [user, setUser] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä½¿ç”¨memoé˜²æ­¢ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> value <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; ({
</span></span><span style=display:flex><span>        user,
</span></span><span style=display:flex><span>        setUser
</span></span><span style=display:flex><span>    }), [user]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>UserContext.Provider</span> value<span style=color:#ff7b72;font-weight:700>=</span>{value}&gt;
</span></span><span style=display:flex><span>            {children}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>UserContext.Provider</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨Contexté€‰æ‹©å™¨æ¨¡å¼
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> useUser <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> context <span style=color:#ff7b72;font-weight:700>=</span> useContext(UserContext);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>context) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>throw</span> <span style=color:#ff7b72>new</span> Error(<span style=color:#a5d6ff>&#39;useUser must be used within UserProvider&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> context;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> useUserName <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> { user } <span style=color:#ff7b72;font-weight:700>=</span> useUser();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> user<span style=color:#ff7b72;font-weight:700>?</span>.name;
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h2 id=3-æ¸²æŸ“ä¼˜åŒ–>3. æ¸²æŸ“ä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#3-æ¸²æŸ“ä¼˜åŒ–>#</a></h2><h3 id=è™šæ‹Ÿåˆ—è¡¨å®ç°>è™šæ‹Ÿåˆ—è¡¨å®ç°<a hidden class=anchor aria-hidden=true href=#è™šæ‹Ÿåˆ—è¡¨å®ç°>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">63
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#ff7b72>import</span> { FixedSizeList as List } from <span style=color:#a5d6ff>&#39;react-window&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è™šæ‹ŸåŒ–é•¿åˆ—è¡¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> VirtualizedList <span style=color:#ff7b72;font-weight:700>=</span> ({ items }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> Row <span style=color:#ff7b72;font-weight:700>=</span> ({ index, style }) =&gt; (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span> style<span style=color:#ff7b72;font-weight:700>=</span>{style}&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>ListItem</span> item<span style=color:#ff7b72;font-weight:700>=</span>{items[index]} /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>List</span>
</span></span><span style=display:flex><span>            height<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>600</span>}
</span></span><span style=display:flex><span>            itemCount<span style=color:#ff7b72;font-weight:700>=</span>{items.length}
</span></span><span style=display:flex><span>            itemSize<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>80</span>}
</span></span><span style=display:flex><span>            width<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;100%&#34;</span>
</span></span><span style=display:flex><span>        &gt;
</span></span><span style=display:flex><span>            {Row}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>List</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è‡ªå®šä¹‰è™šæ‹ŸåŒ–ç»„ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> CustomVirtualList <span style=color:#ff7b72;font-weight:700>=</span> ({ items, itemHeight <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>50</span>, containerHeight <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>400</span> }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [scrollTop, setScrollTop] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> containerRef <span style=color:#ff7b72;font-weight:700>=</span> useRef(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> visibleStart <span style=color:#ff7b72;font-weight:700>=</span> Math.floor(scrollTop <span style=color:#ff7b72;font-weight:700>/</span> itemHeight);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> visibleEnd <span style=color:#ff7b72;font-weight:700>=</span> Math.min(
</span></span><span style=display:flex><span>        visibleStart <span style=color:#ff7b72;font-weight:700>+</span> Math.ceil(containerHeight <span style=color:#ff7b72;font-weight:700>/</span> itemHeight) <span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>        items.length
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> visibleItems <span style=color:#ff7b72;font-weight:700>=</span> items.slice(visibleStart, visibleEnd);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> handleScroll <span style=color:#ff7b72;font-weight:700>=</span> useCallback((e) =&gt; {
</span></span><span style=display:flex><span>        setScrollTop(e.target.scrollTop);
</span></span><span style=display:flex><span>    }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span>
</span></span><span style=display:flex><span>            ref<span style=color:#ff7b72;font-weight:700>=</span>{containerRef}
</span></span><span style=display:flex><span>            style<span style=color:#ff7b72;font-weight:700>=</span>{{ height<span style=color:#ff7b72;font-weight:700>:</span> containerHeight, overflow<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;auto&#39;</span> }}
</span></span><span style=display:flex><span>            onScroll<span style=color:#ff7b72;font-weight:700>=</span>{handleScroll}
</span></span><span style=display:flex><span>        &gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>div</span> style<span style=color:#ff7b72;font-weight:700>=</span>{{ height<span style=color:#ff7b72;font-weight:700>:</span> items.length <span style=color:#ff7b72;font-weight:700>*</span> itemHeight, position<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;relative&#39;</span> }}&gt;
</span></span><span style=display:flex><span>                {visibleItems.map((item, index) =&gt; (
</span></span><span style=display:flex><span>                    &lt;<span style=color:#7ee787>div</span>
</span></span><span style=display:flex><span>                        key<span style=color:#ff7b72;font-weight:700>=</span>{visibleStart <span style=color:#ff7b72;font-weight:700>+</span> index}
</span></span><span style=display:flex><span>                        style<span style=color:#ff7b72;font-weight:700>=</span>{{
</span></span><span style=display:flex><span>                            position<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;absolute&#39;</span>,
</span></span><span style=display:flex><span>                            top<span style=color:#ff7b72;font-weight:700>:</span> (visibleStart <span style=color:#ff7b72;font-weight:700>+</span> index) <span style=color:#ff7b72;font-weight:700>*</span> itemHeight,
</span></span><span style=display:flex><span>                            height<span style=color:#ff7b72;font-weight:700>:</span> itemHeight,
</span></span><span style=display:flex><span>                            width<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;100%&#39;</span>
</span></span><span style=display:flex><span>                        }}
</span></span><span style=display:flex><span>                    &gt;
</span></span><span style=display:flex><span>                        &lt;<span style=color:#7ee787>ListItem</span> item<span style=color:#ff7b72;font-weight:700>=</span>{item} /&gt;
</span></span><span style=display:flex><span>                    &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>                ))}
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h3 id=æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²>æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²<a hidden class=anchor aria-hidden=true href=#æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#ff7b72>import</span> { lazy, Suspense } from <span style=color:#a5d6ff>&#39;react&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> HomePage <span style=color:#ff7b72;font-weight:700>=</span> lazy(() =&gt; <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./pages/HomePage&#39;</span>));
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> AboutPage <span style=color:#ff7b72;font-weight:700>=</span> lazy(() =&gt; <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./pages/AboutPage&#39;</span>));
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> ContactPage <span style=color:#ff7b72;font-weight:700>=</span> lazy(() =&gt; <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./pages/ContactPage&#39;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> App <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; (
</span></span><span style=display:flex><span>    &lt;<span style=color:#7ee787>Router</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>Suspense</span> fallback<span style=color:#ff7b72;font-weight:700>=</span>{&lt;<span style=color:#7ee787>div</span>&gt;Loading...&lt;/<span style=color:#7ee787>div</span>&gt;}&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>Routes</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>Route</span> path<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;/&#34;</span> element<span style=color:#ff7b72;font-weight:700>=</span>{&lt;<span style=color:#7ee787>HomePage</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>Route</span> path<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;/about&#34;</span> element<span style=color:#ff7b72;font-weight:700>=</span>{&lt;<span style=color:#7ee787>AboutPage</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>Route</span> path<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;/contact&#34;</span> element<span style=color:#ff7b72;font-weight:700>=</span>{&lt;<span style=color:#7ee787>ContactPage</span> /&gt;} /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>Routes</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>Suspense</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#7ee787>Router</span>&gt;
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ç»„ä»¶çº§åˆ«çš„æ‡’åŠ è½½
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> LazyChart <span style=color:#ff7b72;font-weight:700>=</span> lazy(() =&gt;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./components/Chart&#39;</span>).then(module =&gt; ({
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>default</span><span style=color:#ff7b72;font-weight:700>:</span> module.Chart
</span></span><span style=display:flex><span>    }))
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> Dashboard <span style=color:#ff7b72;font-weight:700>=</span> ({ data }) =&gt; (
</span></span><span style=display:flex><span>    &lt;<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>h2</span>&gt;Dashboard&lt;/<span style=color:#7ee787>h2</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>Suspense</span> fallback<span style=color:#ff7b72;font-weight:700>=</span>{&lt;<span style=color:#7ee787>div</span>&gt;Loading chart...&lt;/<span style=color:#7ee787>div</span>&gt;}&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>LazyChart</span> data<span style=color:#ff7b72;font-weight:700>=</span>{data} /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>Suspense</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// åŠ¨æ€å¯¼å…¥å·¥å…·å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> loadComponent <span style=color:#ff7b72;font-weight:700>=</span> (importFunc, fallback <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>null</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> LazyComponent <span style=color:#ff7b72;font-weight:700>=</span> lazy(importFunc);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (props) =&gt; (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>Suspense</span> fallback<span style=color:#ff7b72;font-weight:700>=</span>{fallback <span style=color:#ff7b72;font-weight:700>||</span> &lt;<span style=color:#7ee787>div</span>&gt;Loading...&lt;/<span style=color:#7ee787>div</span>&gt;}&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>LazyComponent</span> {...props} /&gt;
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨ç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> AsyncAdminPanel <span style=color:#ff7b72;font-weight:700>=</span> loadComponent(
</span></span><span style=display:flex><span>    () =&gt; <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./AdminPanel&#39;</span>),
</span></span><span style=display:flex><span>    &lt;<span style=color:#7ee787>div</span>&gt;Loading admin panel...&lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>);
</span></span></code></pre></td></tr></table></div></div><h3 id=å›¾ç‰‡ä¼˜åŒ–å’Œæ‡’åŠ è½½>å›¾ç‰‡ä¼˜åŒ–å’Œæ‡’åŠ è½½<a hidden class=anchor aria-hidden=true href=#å›¾ç‰‡ä¼˜åŒ–å’Œæ‡’åŠ è½½>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">84
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#ff7b72>import</span> { useState, useRef, useEffect } from <span style=color:#a5d6ff>&#39;react&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> LazyImage <span style=color:#ff7b72;font-weight:700>=</span> ({ src, alt, placeholder, className }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [isLoaded, setIsLoaded] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [isInView, setIsInView] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> imgRef <span style=color:#ff7b72;font-weight:700>=</span> useRef();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    useEffect(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> observer <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> IntersectionObserver(
</span></span><span style=display:flex><span>            ([entry]) =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>if</span> (entry.isIntersecting) {
</span></span><span style=display:flex><span>                    setIsInView(<span style=color:#79c0ff>true</span>);
</span></span><span style=display:flex><span>                    observer.disconnect();
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            { threshold<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0.1</span> }
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (imgRef.current) {
</span></span><span style=display:flex><span>            observer.observe(imgRef.current);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> () =&gt; observer.disconnect();
</span></span><span style=display:flex><span>    }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> handleLoad <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>        setIsLoaded(<span style=color:#79c0ff>true</span>);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span> ref<span style=color:#ff7b72;font-weight:700>=</span>{imgRef} className<span style=color:#ff7b72;font-weight:700>=</span>{className}&gt;
</span></span><span style=display:flex><span>            {isInView <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> (
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>img</span>
</span></span><span style=display:flex><span>                    src<span style=color:#ff7b72;font-weight:700>=</span>{src}
</span></span><span style=display:flex><span>                    alt<span style=color:#ff7b72;font-weight:700>=</span>{alt}
</span></span><span style=display:flex><span>                    onLoad<span style=color:#ff7b72;font-weight:700>=</span>{handleLoad}
</span></span><span style=display:flex><span>                    style<span style=color:#ff7b72;font-weight:700>=</span>{{
</span></span><span style=display:flex><span>                        opacity<span style=color:#ff7b72;font-weight:700>:</span> isLoaded <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>1</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>                        transition<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;opacity 0.3s ease&#39;</span>
</span></span><span style=display:flex><span>                    }}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>            )}
</span></span><span style=display:flex><span>            {<span style=color:#ff7b72;font-weight:700>!</span>isLoaded <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> (
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>div</span>
</span></span><span style=display:flex><span>                    className<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;image-placeholder&#34;</span>
</span></span><span style=display:flex><span>                    style<span style=color:#ff7b72;font-weight:700>=</span>{{
</span></span><span style=display:flex><span>                        backgroundColor<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;#f0f0f0&#39;</span>,
</span></span><span style=display:flex><span>                        backgroundImage<span style=color:#ff7b72;font-weight:700>:</span> placeholder <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>`url(</span><span style=color:#a5d6ff>${</span>placeholder<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>)`</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;none&#39;</span>,
</span></span><span style=display:flex><span>                        backgroundSize<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;cover&#39;</span>,
</span></span><span style=display:flex><span>                        backgroundPosition<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;center&#39;</span>
</span></span><span style=display:flex><span>                    }}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>            )}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// å“åº”å¼å›¾ç‰‡ç»„ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> ResponsiveImage <span style=color:#ff7b72;font-weight:700>=</span> ({ sources, alt, className }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [loadedSources, setLoadedSources] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#ff7b72>new</span> Set());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> handleSourceLoad <span style=color:#ff7b72;font-weight:700>=</span> (src) =&gt; {
</span></span><span style=display:flex><span>        setLoadedSources(prev =&gt; <span style=color:#ff7b72>new</span> Set(prev).add(src));
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>picture</span> className<span style=color:#ff7b72;font-weight:700>=</span>{className}&gt;
</span></span><span style=display:flex><span>            {sources.map(({ srcSet, media, type }) =&gt; (
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>source</span>
</span></span><span style=display:flex><span>                    key<span style=color:#ff7b72;font-weight:700>=</span>{srcSet}
</span></span><span style=display:flex><span>                    srcSet<span style=color:#ff7b72;font-weight:700>=</span>{srcSet}
</span></span><span style=display:flex><span>                    media<span style=color:#ff7b72;font-weight:700>=</span>{media}
</span></span><span style=display:flex><span>                    type<span style=color:#ff7b72;font-weight:700>=</span>{type}
</span></span><span style=display:flex><span>                    onLoad<span style=color:#ff7b72;font-weight:700>=</span>{() =&gt; handleSourceLoad(srcSet)}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>            ))}
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>img</span>
</span></span><span style=display:flex><span>                src<span style=color:#ff7b72;font-weight:700>=</span>{sources[sources.length <span style=color:#ff7b72;font-weight:700>-</span> <span style=color:#a5d6ff>1</span>].fallback}
</span></span><span style=display:flex><span>                alt<span style=color:#ff7b72;font-weight:700>=</span>{alt}
</span></span><span style=display:flex><span>                loading<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;lazy&#34;</span>
</span></span><span style=display:flex><span>            /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>picture</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h2 id=4-bundleä¼˜åŒ–>4. Bundleä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#4-bundleä¼˜åŒ–>#</a></h2><h3 id=åŠ¨æ€å¯¼å…¥å’Œtree-shaking>åŠ¨æ€å¯¼å…¥å’ŒTree Shaking<a hidden class=anchor aria-hidden=true href=#åŠ¨æ€å¯¼å…¥å’Œtree-shaking>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// utils.js
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>export</span> <span style=color:#ff7b72>const</span> heavyFunction <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å¤æ‚çš„è®¡ç®—é€»è¾‘
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    console.log(<span style=color:#a5d6ff>&#39;This is a heavy function&#39;</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>export</span> <span style=color:#ff7b72>const</span> lightFunction <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ç®€å•çš„é€»è¾‘
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    console.log(<span style=color:#a5d6ff>&#39;This is a light function&#39;</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>export</span> <span style=color:#ff7b72>default</span> {
</span></span><span style=display:flex><span>    heavyFunction,
</span></span><span style=display:flex><span>    lightFunction
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨åŠ¨æ€å¯¼å…¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> loadHeavyModule <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>async</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> { heavyFunction } <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./utils&#39;</span>);
</span></span><span style=display:flex><span>    heavyFunction();
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æ¡ä»¶å¯¼å…¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> useFeature <span style=color:#ff7b72;font-weight:700>=</span> (featureEnabled) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [module, setModule] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    useEffect(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (featureEnabled) {
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./heavyFeature&#39;</span>).then(setModule);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }, [featureEnabled]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> module;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// Webpacké­”æ³•æ³¨é‡Š
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> loadModuleByLanguage <span style=color:#ff7b72;font-weight:700>=</span> (language) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>switch</span> (language) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;en&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>import</span>(<span style=color:#8b949e;font-style:italic>/* webpackChunkName: &#34;lang-en&#34; */</span> <span style=color:#a5d6ff>&#39;./locales/en.json&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;zh&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>import</span>(<span style=color:#8b949e;font-style:italic>/* webpackChunkName: &#34;lang-zh&#34; */</span> <span style=color:#a5d6ff>&#39;./locales/zh.json&#39;</span>);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>default</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>import</span>(<span style=color:#8b949e;font-style:italic>/* webpackChunkName: &#34;lang-en&#34; */</span> <span style=color:#a5d6ff>&#39;./locales/en.json&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h3 id=bundleåˆ†æå’Œä¼˜åŒ–>Bundleåˆ†æå’Œä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#bundleåˆ†æå’Œä¼˜åŒ–>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// webpack.config.js
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>module.exports <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>    optimization<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        splitChunks<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>            chunks<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;all&#39;</span>,
</span></span><span style=display:flex><span>            cacheGroups<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>                vendor<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>                    test<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>/[\\/]node_modules[\\/]/</span>,
</span></span><span style=display:flex><span>                    name<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;vendors&#39;</span>,
</span></span><span style=display:flex><span>                    chunks<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;all&#39;</span>,
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                common<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>                    name<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;common&#39;</span>,
</span></span><span style=display:flex><span>                    minChunks<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>2</span>,
</span></span><span style=display:flex><span>                    chunks<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;all&#39;</span>,
</span></span><span style=display:flex><span>                    enforce<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                components<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>                    test<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>/[\\/]src[\\/]components[\\/]/</span>,
</span></span><span style=display:flex><span>                    name<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;components&#39;</span>,
</span></span><span style=display:flex><span>                    chunks<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;all&#39;</span>,
</span></span><span style=display:flex><span>                    minSize<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨webpack-bundle-analyzeråˆ†æBundle
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> BundleAnalyzerPlugin <span style=color:#ff7b72;font-weight:700>=</span> require(<span style=color:#a5d6ff>&#39;webpack-bundle-analyzer&#39;</span>).BundleAnalyzerPlugin;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>module.exports <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>    plugins<span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>new</span> BundleAnalyzerPlugin({
</span></span><span style=display:flex><span>            analyzerMode<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;static&#39;</span>,
</span></span><span style=display:flex><span>            openAnalyzer<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h2 id=5-æ€§èƒ½ç›‘æ§>5. æ€§èƒ½ç›‘æ§<a hidden class=anchor aria-hidden=true href=#5-æ€§èƒ½ç›‘æ§>#</a></h2><h3 id=æ€§èƒ½æµ‹é‡å·¥å…·>æ€§èƒ½æµ‹é‡å·¥å…·<a hidden class=anchor aria-hidden=true href=#æ€§èƒ½æµ‹é‡å·¥å…·>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#ff7b72>import</span> { useProfiler, unstable_trace as trace } from <span style=color:#a5d6ff>&#39;react&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// React Profiler API
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> ProfiledComponent <span style=color:#ff7b72;font-weight:700>=</span> ({ id, onRender, ...props }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>Profiler</span> id<span style=color:#ff7b72;font-weight:700>=</span>{id} onRender<span style=color:#ff7b72;font-weight:700>=</span>{onRender}&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>ExpensiveComponent</span> {...props} /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>Profiler</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> App <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> handleRender <span style=color:#ff7b72;font-weight:700>=</span> (id, phase, actualDuration) =&gt; {
</span></span><span style=display:flex><span>        console.log(<span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>id<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff> </span><span style=color:#a5d6ff>${</span>phase<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff> took </span><span style=color:#a5d6ff>${</span>actualDuration<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>ms`</span>);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>ProfiledComponent</span> id<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;UserProfile&#34;</span> onRender<span style=color:#ff7b72;font-weight:700>=</span>{handleRender}&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>UserProfile</span> user<span style=color:#ff7b72;font-weight:700>=</span>{user} /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>ProfiledComponent</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è‡ªå®šä¹‰æ€§èƒ½Hook
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> usePerformanceMeasure <span style=color:#ff7b72;font-weight:700>=</span> (name) =&gt; {
</span></span><span style=display:flex><span>    useEffect(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> startTime <span style=color:#ff7b72;font-weight:700>=</span> performance.now();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> () =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>const</span> endTime <span style=color:#ff7b72;font-weight:700>=</span> performance.now();
</span></span><span style=display:flex><span>            console.log(<span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>name<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff> took </span><span style=color:#a5d6ff>${</span>endTime <span style=color:#ff7b72;font-weight:700>-</span> startTime<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>ms`</span>);
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>    }, [name]);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨ç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> ExpensiveComponent <span style=color:#ff7b72;font-weight:700>=</span> ({ data }) =&gt; {
</span></span><span style=display:flex><span>    usePerformanceMeasure(<span style=color:#a5d6ff>&#39;ExpensiveComponent&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> processedData <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> expensiveDataProcessing(data);
</span></span><span style=display:flex><span>    }, [data]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> &lt;<span style=color:#7ee787>div</span>&gt;{<span style=color:#8b949e;font-style:italic>/* ç»„ä»¶å†…å®¹ */</span>}&lt;/<span style=color:#7ee787>div</span>&gt;;
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h3 id=web-vitalsç›‘æ§>Web Vitalsç›‘æ§<a hidden class=anchor aria-hidden=true href=#web-vitalsç›‘æ§>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨web-vitalsåº“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>import</span> { getCLS, getFID, getFCP, getLCP, getTTFB } from <span style=color:#a5d6ff>&#39;web-vitals&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> reportWebVitals <span style=color:#ff7b72;font-weight:700>=</span> (onPerfEntry) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (onPerfEntry <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> onPerfEntry <span style=color:#ff7b72>instanceof</span> Function) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;web-vitals&#39;</span>).then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) =&gt; {
</span></span><span style=display:flex><span>            getCLS(onPerfEntry);
</span></span><span style=display:flex><span>            getFID(onPerfEntry);
</span></span><span style=display:flex><span>            getFCP(onPerfEntry);
</span></span><span style=display:flex><span>            getLCP(onPerfEntry);
</span></span><span style=display:flex><span>            getTTFB(onPerfEntry);
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// åœ¨åº”ç”¨ä¸­ä½¿ç”¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> App <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    useEffect(() =&gt; {
</span></span><span style=display:flex><span>        reportWebVitals(console.log);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// æˆ–è€…å‘é€åˆ°åˆ†ææœåŠ¡
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        reportWebVitals((metric) =&gt; {
</span></span><span style=display:flex><span>            analytics.track(<span style=color:#a5d6ff>&#39;Web Vitals&#39;</span>, {
</span></span><span style=display:flex><span>                name<span style=color:#ff7b72;font-weight:700>:</span> metric.name,
</span></span><span style=display:flex><span>                value<span style=color:#ff7b72;font-weight:700>:</span> metric.value,
</span></span><span style=display:flex><span>                id<span style=color:#ff7b72;font-weight:700>:</span> metric.id,
</span></span><span style=display:flex><span>                delta<span style=color:#ff7b72;font-weight:700>:</span> metric.delta,
</span></span><span style=display:flex><span>            });
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>div<span style=color:#ff7b72;font-weight:700>&gt;</span> {<span style=color:#8b949e;font-style:italic>/* åº”ç”¨å†…å®¹ */</span>} <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/div&gt;;</span>
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h2 id=6-é«˜çº§ä¼˜åŒ–æŠ€å·§>6. é«˜çº§ä¼˜åŒ–æŠ€å·§<a hidden class=anchor aria-hidden=true href=#6-é«˜çº§ä¼˜åŒ–æŠ€å·§>#</a></h2><h3 id=æ¸²æŸ“æ‰¹æ¬¡è°ƒåº¦>æ¸²æŸ“æ‰¹æ¬¡è°ƒåº¦<a hidden class=anchor aria-hidden=true href=#æ¸²æŸ“æ‰¹æ¬¡è°ƒåº¦>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#ff7b72>import</span> { unstable_batchedUpdates } from <span style=color:#a5d6ff>&#39;react-dom&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æ‰¹é‡æ›´æ–°çŠ¶æ€
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> batchUpdateExample <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// è¿™äº›æ›´æ–°ä¼šè¢«æ‰¹é‡å¤„ç†ï¼Œåªè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    unstable_batchedUpdates(() =&gt; {
</span></span><span style=display:flex><span>        setCount(prev =&gt; prev <span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#a5d6ff>1</span>);
</span></span><span style=display:flex><span>        setName(<span style=color:#a5d6ff>&#39;New Name&#39;</span>);
</span></span><span style=display:flex><span>        setAge(<span style=color:#a5d6ff>25</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// åœ¨äº‹ä»¶å¤„ç†å™¨ä¸­è‡ªåŠ¨æ‰¹é‡æ›´æ–°ï¼ˆReact 18+ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> handleClick <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// React 18ä¸­è¿™äº›æ›´æ–°ä¼šè‡ªåŠ¨æ‰¹é‡å¤„ç†
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    setCount(prev =&gt; prev <span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#a5d6ff>1</span>);
</span></span><span style=display:flex><span>    setName(<span style=color:#a5d6ff>&#39;New Name&#39;</span>);
</span></span><span style=display:flex><span>    setAge(<span style=color:#a5d6ff>25</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// å¼‚æ­¥æ“ä½œä¸­çš„æ‰¹é‡æ›´æ–°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> fetchData <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>async</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> response <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> fetch(<span style=color:#a5d6ff>&#39;/api/data&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> data <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> response.json();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// æ‰¹é‡æ›´æ–°çŠ¶æ€
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    unstable_batchedUpdates(() =&gt; {
</span></span><span style=display:flex><span>        setData(data);
</span></span><span style=display:flex><span>        setLoading(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>        setError(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h3 id=concurrent-modeå’Œsuspense>Concurrent Modeå’ŒSuspense<a hidden class=anchor aria-hidden=true href=#concurrent-modeå’Œsuspense>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#ff7b72>import</span> { Suspense, startTransition } from <span style=color:#a5d6ff>&#39;react&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> SearchResults <span style=color:#ff7b72;font-weight:700>=</span> ({ query }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [results, setResults] <span style=color:#ff7b72;font-weight:700>=</span> useState([]);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [isPending, startTransition] <span style=color:#ff7b72;font-weight:700>=</span> useTransition();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> handleSearch <span style=color:#ff7b72;font-weight:700>=</span> (searchQuery) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// æ ‡è®°æ›´æ–°ä¸ºè¿‡æ¸¡
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        startTransition(() =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#8b949e;font-style:italic>// éç´§æ€¥æ›´æ–°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>            setResults(searchData(searchQuery));
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// ç´§æ€¥æ›´æ–°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        setSearchQuery(searchQuery);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>input</span>
</span></span><span style=display:flex><span>                type<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;text&#34;</span>
</span></span><span style=display:flex><span>                onChange<span style=color:#ff7b72;font-weight:700>=</span>{(e) =&gt; handleSearch(e.target.value)}
</span></span><span style=display:flex><span>                placeholder<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Search...&#34;</span>
</span></span><span style=display:flex><span>            /&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            {isPending <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> &lt;<span style=color:#7ee787>div</span>&gt;Searching...&lt;/<span style=color:#7ee787>div</span>&gt;}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>Suspense</span> fallback<span style=color:#ff7b72;font-weight:700>=</span>{&lt;<span style=color:#7ee787>div</span>&gt;Loading results...&lt;/<span style=color:#7ee787>div</span>&gt;}&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>ResultsList</span> results<span style=color:#ff7b72;font-weight:700>=</span>{results} /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>Suspense</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æ•°æ®è·å–ç»„ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> DataFetcher <span style=color:#ff7b72;font-weight:700>=</span> ({ url }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [data, setData] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    useEffect(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>let</span> isMounted <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>true</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        fetchData(url).then(response =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>if</span> (isMounted) {
</span></span><span style=display:flex><span>                setData(response);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> () =&gt; {
</span></span><span style=display:flex><span>            isMounted <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>false</span>;
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>    }, [url]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>data) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>throw</span> <span style=color:#ff7b72>new</span> Promise(resolve =&gt; {
</span></span><span style=display:flex><span>            setTimeout(() =&gt; resolve(fetchData(url)), <span style=color:#a5d6ff>1000</span>);
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> &lt;<span style=color:#7ee787>div</span>&gt;{<span style=color:#8b949e;font-style:italic>/* æ¸²æŸ“æ•°æ® */</span>}&lt;/<span style=color:#7ee787>div</span>&gt;;
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h2 id=7-å®æˆ˜æ¡ˆä¾‹>7. å®æˆ˜æ¡ˆä¾‹<a hidden class=anchor aria-hidden=true href=#7-å®æˆ˜æ¡ˆä¾‹>#</a></h2><h3 id=ç”µå•†äº§å“åˆ—è¡¨ä¼˜åŒ–>ç”µå•†äº§å“åˆ—è¡¨ä¼˜åŒ–<a hidden class=anchor aria-hidden=true href=#ç”µå•†äº§å“åˆ—è¡¨ä¼˜åŒ–>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#ff7b72>const</span> ProductList <span style=color:#ff7b72;font-weight:700>=</span> ({ products, filters, sortBy }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä½¿ç”¨useMemoç¼“å­˜è¿‡æ»¤å’Œæ’åºç»“æœ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> filteredAndSortedProducts <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>let</span> result <span style=color:#ff7b72;font-weight:700>=</span> [...products];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// åº”ç”¨è¿‡æ»¤å™¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#ff7b72>if</span> (filters.category) {
</span></span><span style=display:flex><span>            result <span style=color:#ff7b72;font-weight:700>=</span> result.filter(p =&gt; p.category <span style=color:#ff7b72;font-weight:700>===</span> filters.category);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (filters.minPrice) {
</span></span><span style=display:flex><span>            result <span style=color:#ff7b72;font-weight:700>=</span> result.filter(p =&gt; p.price <span style=color:#ff7b72;font-weight:700>&gt;=</span> filters.minPrice);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (filters.maxPrice) {
</span></span><span style=display:flex><span>            result <span style=color:#ff7b72;font-weight:700>=</span> result.filter(p =&gt; p.price <span style=color:#ff7b72;font-weight:700>&lt;=</span> filters.maxPrice);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// åº”ç”¨æ’åº
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        result.sort((a, b) =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>switch</span> (sortBy) {
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;price-low&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>                    <span style=color:#ff7b72>return</span> a.price <span style=color:#ff7b72;font-weight:700>-</span> b.price;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;price-high&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>                    <span style=color:#ff7b72>return</span> b.price <span style=color:#ff7b72;font-weight:700>-</span> a.price;
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;name&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>                    <span style=color:#ff7b72>return</span> a.name.localeCompare(b.name);
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>default</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>                    <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> result;
</span></span><span style=display:flex><span>    }, [products, filters, sortBy]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// è™šæ‹ŸåŒ–é•¿åˆ—è¡¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> Row <span style=color:#ff7b72;font-weight:700>=</span> React.memo(({ index, style }) =&gt; (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span> style<span style=color:#ff7b72;font-weight:700>=</span>{style}&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>ProductCard</span> product<span style=color:#ff7b72;font-weight:700>=</span>{filteredAndSortedProducts[index]} /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    ));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>div</span> className<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;filters&#34;</span>&gt;
</span></span><span style=display:flex><span>                &lt;<span style=color:#7ee787>ProductFilters</span>
</span></span><span style=display:flex><span>                    filters<span style=color:#ff7b72;font-weight:700>=</span>{filters}
</span></span><span style=display:flex><span>                    onChange<span style=color:#ff7b72;font-weight:700>=</span>{setFilters}
</span></span><span style=display:flex><span>                /&gt;
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>div</span> className<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;results-count&#34;</span>&gt;
</span></span><span style=display:flex><span>                Showing {filteredAndSortedProducts.length} products
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>List</span>
</span></span><span style=display:flex><span>                height<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>600</span>}
</span></span><span style=display:flex><span>                itemCount<span style=color:#ff7b72;font-weight:700>=</span>{filteredAndSortedProducts.length}
</span></span><span style=display:flex><span>                itemSize<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>200</span>}
</span></span><span style=display:flex><span>                width<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;100%&#34;</span>
</span></span><span style=display:flex><span>            &gt;
</span></span><span style=display:flex><span>                {Row}
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>List</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä¼˜åŒ–çš„äº§å“å¡ç‰‡ç»„ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> ProductCard <span style=color:#ff7b72;font-weight:700>=</span> React.memo(({ product }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [isImageLoaded, setIsImageLoaded] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> [isInView, setIsInView] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> imgRef <span style=color:#ff7b72;font-weight:700>=</span> useRef();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    useEffect(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> observer <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> IntersectionObserver(
</span></span><span style=display:flex><span>            ([entry]) =&gt; setIsInView(entry.isIntersecting),
</span></span><span style=display:flex><span>            { threshold<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0.1</span> }
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (imgRef.current) {
</span></span><span style=display:flex><span>            observer.observe(imgRef.current);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> () =&gt; observer.disconnect();
</span></span><span style=display:flex><span>    }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>        &lt;<span style=color:#7ee787>div</span> className<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;product-card&#34;</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>div</span> ref<span style=color:#ff7b72;font-weight:700>=</span>{imgRef} className<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;product-image&#34;</span>&gt;
</span></span><span style=display:flex><span>                {isInView <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> (
</span></span><span style=display:flex><span>                    &lt;<span style=color:#7ee787>img</span>
</span></span><span style=display:flex><span>                        src<span style=color:#ff7b72;font-weight:700>=</span>{product.imageUrl}
</span></span><span style=display:flex><span>                        alt<span style=color:#ff7b72;font-weight:700>=</span>{product.name}
</span></span><span style=display:flex><span>                        onLoad<span style=color:#ff7b72;font-weight:700>=</span>{() =&gt; setIsImageLoaded(<span style=color:#79c0ff>true</span>)}
</span></span><span style=display:flex><span>                        style<span style=color:#ff7b72;font-weight:700>=</span>{{ opacity<span style=color:#ff7b72;font-weight:700>:</span> isImageLoaded <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>1</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span> }}
</span></span><span style=display:flex><span>                    /&gt;
</span></span><span style=display:flex><span>                )}
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>h3</span>&gt;{product.name}&lt;/<span style=color:#7ee787>h3</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>p</span> className<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;price&#34;</span>&gt;${product.price}&lt;/<span style=color:#7ee787>p</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#7ee787>button</span>
</span></span><span style=display:flex><span>                onClick<span style=color:#ff7b72;font-weight:700>=</span>{() =&gt; addToCart(product)}
</span></span><span style=display:flex><span>                className<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;add-to-cart&#34;</span>
</span></span><span style=display:flex><span>            &gt;
</span></span><span style=display:flex><span>                Add to Cart
</span></span><span style=display:flex><span>            &lt;/<span style=color:#7ee787>button</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#7ee787>div</span>&gt;
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h2 id=æ€»ç»“>æ€»ç»“<a hidden class=anchor aria-hidden=true href=#æ€»ç»“>#</a></h2><p>Reactæ€§èƒ½ä¼˜åŒ–éœ€è¦ä»å¤šä¸ªå±‚é¢è€ƒè™‘ï¼š</p><p><strong>ç»„ä»¶çº§ä¼˜åŒ–ï¼š</strong></p><ul><li>ä½¿ç”¨React.memoã€useMemoã€useCallback</li><li>é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</li><li>åˆç†æ‹†åˆ†ç»„ä»¶</li></ul><p><strong>çŠ¶æ€ç®¡ç†ä¼˜åŒ–ï¼š</strong></p><ul><li>é¿å…çŠ¶æ€è¿‡åº¦æå‡</li><li>ä½¿ç”¨Contextåˆ†ç¦»å…³æ³¨ç‚¹</li><li>åˆç†ä½¿ç”¨æœ¬åœ°çŠ¶æ€å’Œå…¨å±€çŠ¶æ€</li></ul><p><strong>æ¸²æŸ“ä¼˜åŒ–ï¼š</strong></p><ul><li>è™šæ‹ŸåŒ–é•¿åˆ—è¡¨</li><li>æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²</li><li>å›¾ç‰‡ä¼˜åŒ–</li></ul><p><strong>æ„å»ºä¼˜åŒ–ï¼š</strong></p><ul><li>ä»£ç åˆ†å‰²å’ŒTree Shaking</li><li>Bundleåˆ†æå’Œä¼˜åŒ–</li><li>èµ„æºå‹ç¼©å’Œç¼“å­˜</li></ul><p>è®°ä½ï¼Œæ€§èƒ½ä¼˜åŒ–åº”è¯¥åŸºäºå®é™…æµ‹é‡ï¼Œè¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºã€‚ä½¿ç”¨React DevTools Profilerã€Web Vitalsç­‰å·¥å…·è¯†åˆ«æ€§èƒ½ç“¶é¢ˆï¼Œç„¶åæœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–ã€‚</p><hr></div><footer class=post-footer-modern><div class=post-tags-modern><span class=tags-label>ğŸ·ï¸ æ ‡ç­¾</span><div class=tags-list><a href=/blog/tags/react/ class=tag-pill>React
</a><a href=/blog/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ class=tag-pill>æ€§èƒ½ä¼˜åŒ–
</a><a href=/blog/tags/javascript/ class=tag-pill>JavaScript
</a><a href=/blog/tags/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/ class=tag-pill>å‰ç«¯æ¡†æ¶
</a><a href=/blog/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/ class=tag-pill>æœ€ä½³å®è·µ</a></div></div><style>.post-footer-modern{margin-top:3rem;padding-top:2rem;border-top:1px solid var(--border,#333333)}.post-tags-modern{display:flex;align-items:center;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.tags-label{font-size:.875rem;font-weight:600;color:var(--secondary,#999999) !important;white-space:nowrap}.tags-list{display:flex;flex-wrap:wrap;gap:.5rem;flex:1}.tag-pill{display:inline-block;padding:.25rem .75rem;background:rgba(255,255,255,5%);border:1px solid var(--border,#333333);border-radius:0;color:var(--secondary,#cccccc) !important;text-decoration:none;font-size:.8rem;font-weight:500;transition:all .2s ease}.tag-pill:hover{background:var(--primary,#ffffff);color:var(--background,#000000) !important;border-color:var(--primary,#ffffff);transform:translateY(-1px)}.post-nav-modern{margin-top:2rem}.nav-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.nav-card{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:rgba(255,255,255,2%);border:1px solid var(--border,#333333);border-radius:12px;text-decoration:none;transition:all .2s ease;min-height:80px}.nav-card:hover{background:rgba(255,255,255,5%);border-color:var(--primary,#ffffff);transform:translateY(-2px)}.nav-card.nav-prev{justify-content:flex-start}.nav-card.nav-next{justify-content:flex-end;text-align:right}.nav-card.nav-next .nav-content{text-align:right}.nav-empty{display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,1%);border:1px dashed var(--border,#333333);color:var(--secondary,#666666)}.nav-arrow{font-size:1.5rem;color:var(--primary,#ffffff);font-weight:300}.nav-content{flex:1}.nav-title{font-size:.95rem;font-weight:600;color:var(--primary,#ffffff) !important;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}[data-theme=light] .post-footer-modern{border-color:var(--border-light,#dee2e6)}[data-theme=light] .tags-label{color:var(--secondary-light,#6c757d) !important}[data-theme=light] .tag-pill{background:rgba(0,0,0,5%);border-color:var(--border-light,#dee2e6);color:var(--secondary-light,#495057) !important}[data-theme=light] .tag-pill:hover{background:var(--primary-light,#0066cc);color:var(--background-light,#ffffff) !important;border-color:var(--primary-light,#0066cc)}[data-theme=light] .nav-card{background:rgba(0,0,0,2%);border-color:var(--border-light,#dee2e6)}[data-theme=light] .nav-card:hover{background:rgba(0,102,204,5%);border-color:var(--primary-light,#0066cc)}[data-theme=light] .nav-empty{background:rgba(0,0,0,1%);border-color:var(--border-light,#dee2e6);color:var(--secondary-light,#6c757d)}[data-theme=light] .nav-arrow{color:var(--primary-light,#0066cc)}[data-theme=light] .nav-title{color:var(--primary-light,#212529) !important}@media(max-width:768px){.nav-grid{grid-template-columns:1fr;gap:.75rem}.nav-card{padding:1rem;min-height:70px}.nav-card.nav-next{text-align:left}.nav-card.nav-next .nav-content{text-align:left}.nav-title{font-size:.875rem}.post-tags-modern{flex-direction:column;gap:.75rem}}@media(max-width:480px){.nav-arrow{font-size:1.25rem}.nav-card{padding:.875rem}.nav-title{font-size:.8rem;-webkit-line-clamp:1}}</style><nav class=post-nav-modern><div class=nav-grid><a href=/blog/articles/redis-best-practices/ class="nav-card nav-prev"><div class=nav-arrow>â†</div><div class=nav-content><div class=nav-title>Redisæœ€ä½³å®è·µæŒ‡å—ï¼šé«˜æ€§èƒ½å†…å­˜æ•°æ®åº“å®æˆ˜æŠ€å·§</div></div></a><a href=/blog/articles/node-security-best-practices/ class="nav-card nav-next"><div class=nav-content><div class=nav-title>Node.jså®‰å…¨æœ€ä½³å®è·µï¼šæ„å»ºå®‰å…¨å¯é çš„æœåŠ¡ç«¯åº”ç”¨</div></div><div class=nav-arrow>â†’</div></a></div></nav></footer></main><aside class=post-sidebar><div class=sidebar-toc id=sidebar-toc><div class=toc-header><div class=toc-title>ç›®å½•</div><button class=toc-toggle id=toc-toggle aria-label="Toggle TOC">
<svg class="toc-toggle-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg></button></div><div class=toc-content id=toc-content><ul class=toc-list><li class="toc-item toc-h2"><a href=#h2-0 class=toc-item-link><span class=toc-item-text>1. ç»„ä»¶ä¼˜åŒ–åŸºç¡€</span></a></li><li class="toc-item toc-h2"><a href=#h2-1 class=toc-item-link><span class=toc-item-text>2. çŠ¶æ€ç®¡ç†ä¼˜åŒ–</span></a></li><li class="toc-item toc-h2"><a href=#h2-2 class=toc-item-link><span class=toc-item-text>3. æ¸²æŸ“ä¼˜åŒ–</span></a></li><li class="toc-item toc-h2"><a href=#h2-3 class=toc-item-link><span class=toc-item-text>4. Bundleä¼˜åŒ–</span></a></li><li class="toc-item toc-h2"><a href=#h2-4 class=toc-item-link><span class=toc-item-text>5. æ€§èƒ½ç›‘æ§</span></a></li><li class="toc-item toc-h2"><a href=#h2-5 class=toc-item-link><span class=toc-item-text>6. é«˜çº§ä¼˜åŒ–æŠ€å·§</span></a></li><li class="toc-item toc-h2"><a href=#h2-6 class=toc-item-link><span class=toc-item-text>7. å®æˆ˜æ¡ˆä¾‹</span></a></li><li class="toc-item toc-h2"><a href=#h2-7 class=toc-item-link><span class=toc-item-text>æ€»ç»“</span></a></li></ul></div></div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("sidebar-toc"),t=document.getElementById("toc-toggle"),o=document.getElementById("toc-content"),i=t?.querySelector(".toc-toggle-icon");if(!e)return;let n=!1;t&&t.addEventListener("click",function(){n=!n,n?(o.style.display="none",e.style.width="auto",i.innerHTML='<path d="M9 18l6-6-6-6"/>'):(o.style.display="block",e.style.width="200px",i.innerHTML='<path d="M18 6L6 18M6 6l12 12"/>')});const s=document.querySelector(".post-content");if(s){const e=s.querySelectorAll("h1");e.forEach((e,t)=>{e.id=`h1-${t}`});const t=s.querySelectorAll("h2");t.forEach((e,t)=>{e.id=`h2-${t}`})}const a=document.querySelectorAll(".toc-item-link");a.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const n=this.getAttribute("href").substring(1),t=document.getElementById(n);if(t){const e=document.querySelector(".post-header-main")?.offsetHeight||0,n=t.offsetTop-e-20;window.scrollTo({top:n,behavior:"smooth"})}})})})</script><style>.sidebar-toc{position:sticky;top:2rem;width:200px;background:#fff;border:1px solid #e5e7eb;border-radius:4px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.1);z-index:100}.sidebar-toc.hidden{display:none}.toc-header{padding:12px 16px;border-bottom:1px solid #e5e7eb;background:#fafbfc;display:flex;align-items:center;justify-content:space-between}.toc-title{margin:0;font-size:13px;font-weight:500;color:#374151 !important;font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,sans-serif;text-transform:uppercase;letter-spacing:1px}.toc-toggle{background:0 0;border:none;cursor:pointer;padding:4px;border-radius:4px;display:flex;align-items:center;justify-content:center;transition:all .2s ease;color:#6b7280}.toc-toggle:hover{background:#e5e7eb;color:#374151}.toc-toggle-icon{transition:transform .2s ease}.toc-content{padding:12px 0}.toc-list{list-style:none;margin:0;padding:0}.toc-item{margin-bottom:4px;display:block !important;visibility:visible !important}.toc-h1,.toc-h2{display:block !important}.toc-h2{margin-left:0}.toc-item-link{display:flex;align-items:center;gap:8px;padding:8px 12px;color:#374151 !important;text-decoration:none;font-size:13px;line-height:1.4;border-radius:3px;transition:all .2s ease;font-weight:400}.toc-item-link:hover{background:#f8fafc;color:#1f2937 !important}.toc-item-link.active{background:#e0f2fe;color:#01579b !important;font-weight:500}.toc-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}.dot-red{background:#ef4444}.dot-blue{background:#2196f3}.toc-item-text{color:#1f2937 !important;font-weight:400;flex:1;display:inline !important;visibility:visible !important;opacity:1 !important;font-size:13px !important;line-height:1.4 !important}.toc-item-link .toc-item-text{color:#1f2937 !important;display:inline !important;visibility:visible !important;opacity:1 !important}.toc-item.active .dot-red{background:#d32f2f}.toc-item.active .dot-blue{background:#1976d2}[data-theme=dark] .sidebar-toc{background:#1f2937;border-color:#374151;box-shadow:0 1px 3px rgba(0,0,0,.3)}[data-theme=dark] .toc-header{background:#111827;border-color:#374151}[data-theme=dark] .toc-title{color:#f3f4f6 !important}[data-theme=dark] .toc-toggle{color:#9ca3af}[data-theme=dark] .toc-toggle:hover{background:#374151;color:#f3f4f6}[data-theme=dark] .toc-item-link{color:#e5e7eb !important}[data-theme=dark] .toc-item-link:hover{background:#374151;color:#f9fafb !important}[data-theme=dark] .toc-item-link.active{background:#0d47a1;color:#fff !important}[data-theme=dark] .toc-item-text{color:#f9fafb !important;display:inline !important;visibility:visible !important;opacity:1 !important}[data-theme=dark] .toc-item-link .toc-item-text{color:#f9fafb !important;display:inline !important;visibility:visible !important;opacity:1 !important}@media(max-width:1024px){.sidebar-toc{display:none}.post-content-wrapper{grid-template-columns:1fr !important;padding:0 1rem !important}}</style><style>.post-content-wrapper{display:grid;grid-template-columns:1fr 200px;gap:2rem;padding:0 2rem;max-width:100%}.post-content-main{min-width:0}.post-sidebar{position:sticky;top:2rem;height:fit-content;min-width:0}.post-header-main{margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border,#333333)}.post-header-main .post-title{color:var(--primary,#ffffff) !important;font-size:2.5rem;font-weight:700;line-height:1.2;margin-bottom:1rem}.post-header-main .post-description{color:var(--secondary,#cccccc) !important;font-size:1.1rem;line-height:1.6;margin-bottom:1rem}.post-header-main .post-meta{margin-bottom:0}@media(max-width:1024px){.post-content-wrapper{grid-template-columns:1fr !important;gap:1rem;padding:0 1rem !important}.post-sidebar{display:none}}@media(max-width:768px){.post-header-main .post-title{font-size:2rem}.post-header-main .post-description{font-size:1rem}}</style></aside></div></article></main><footer class=footer><span>Â© 2024-2025 æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢</span> Â·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>