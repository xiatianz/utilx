<!doctype html><html lang=zh-cn dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>RESTful API è®¾è®¡æœ€ä½³å®è·µ | æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</title><meta name=keywords content="APIè®¾è®¡,RESTful,åç«¯å¼€å‘,æ¥å£è§„èŒƒ"><meta name=description content="å…¨é¢ä»‹ç» RESTful API çš„è®¾è®¡åŸåˆ™å’Œæœ€ä½³å®è·µï¼Œæ„å»ºä¼˜é›…ã€æ˜“ç”¨çš„ API"><meta name=author content="æœ‰æ¡å·¥å…·å›¢é˜Ÿ"><link rel=canonical href=/blog/articles/api-design-best-practices/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.7e8505b7cdf8bb22ab2305e53c2700bb06c7e64faeb72cd3468823a9a3bd3d6e.css integrity="sha256-foUFt834uyKrIwXlPCcAuwbH5k+utyzTRogjqaO9PW4=" rel="preload stylesheet" as=style><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/blog/favicon-32x32.png><link rel=apple-touch-icon href=/blog/apple-touch-icon.png><link rel=mask-icon href=/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=/blog/articles/api-design-best-practices/feed.xml title=rss><link rel=alternate hreflang=zh-cn href=/blog/articles/api-design-best-practices/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script src=/js/external-link-config.js></script><script src=/js/external-link-interceptor.js></script><link rel=stylesheet href=/blog/css/custom.css media=screen><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«","url":"https://www.util.cn/blog/","description":"æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚","publisher":{"@type":"Organization","name":"æœ‰æ¡å·¥å…·","url":"https://www.util.cn","logo":{"@type":"ImageObject","url":"https://www.util.cn/blog/logo/logo-256.png","width":256,"height":256}},"potentialAction":[{"@type":"SearchAction","target":"https://www.util.cn/blog/search?q={search_term_string}","query-input":"required name=search_term_string"}]}</script><meta property="og:type" content="website"><meta property="og:title" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta property="og:description" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚"><meta property="og:url" content="https://www.util.cn/blog/"><meta property="og:site_name" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢"><meta property="og:image" content="https://www.util.cn/blog/logo/logo-256.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta name=twitter:description content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚"><meta name=twitter:image content="https://www.util.cn/blog/logo/logo-256.png"><meta name=baidu-site-verification content><meta name=category content="æŠ€æœ¯åšå®¢,å¼€å‘è€…å·¥å…·,ç¼–ç¨‹æ•™ç¨‹"><meta name=coverage content="Worldwide"><meta name=distribution content="Global"><meta name=rating content="General"><script id=51la_code async crossorigin=anonymous src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=pro"></script><script>window.addEventListener("load",function(){setTimeout(function(){typeof la!="undefined"?console.log("51laç»Ÿè®¡å·²åŠ è½½"):(console.warn("51laç»Ÿè®¡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ"),function(){var e=document.createElement("script");e.src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=backup",e.async=!0,document.head.appendChild(e)}())},3e3)})</script><meta property="og:url" content="/blog/articles/api-design-best-practices/"><meta property="og:site_name" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·"><meta property="og:title" content="RESTful API è®¾è®¡æœ€ä½³å®è·µ"><meta property="og:description" content="å…¨é¢ä»‹ç» RESTful API çš„è®¾è®¡åŸåˆ™å’Œæœ€ä½³å®è·µï¼Œæ„å»ºä¼˜é›…ã€æ˜“ç”¨çš„ API"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-06T15:30:00+08:00"><meta property="article:modified_time" content="2025-12-06T15:30:00+08:00"><meta property="article:tag" content="APIè®¾è®¡"><meta property="article:tag" content="RESTful"><meta property="article:tag" content="åç«¯å¼€å‘"><meta property="article:tag" content="æ¥å£è§„èŒƒ"><meta name=twitter:card content="summary"><meta name=twitter:title content="RESTful API è®¾è®¡æœ€ä½³å®è·µ"><meta name=twitter:description content="å…¨é¢ä»‹ç» RESTful API çš„è®¾è®¡åŸåˆ™å’Œæœ€ä½³å®è·µï¼Œæ„å»ºä¼˜é›…ã€æ˜“ç”¨çš„ API"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ‰€æœ‰æ–‡ç« ","item":"/blog/posts/"},{"@type":"ListItem","position":2,"name":"RESTful API è®¾è®¡æœ€ä½³å®è·µ","item":"/blog/articles/api-design-best-practices/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"RESTful API è®¾è®¡æœ€ä½³å®è·µ","name":"RESTful API è®¾è®¡æœ€ä½³å®è·µ","description":"å…¨é¢ä»‹ç» RESTful API çš„è®¾è®¡åŸåˆ™å’Œæœ€ä½³å®è·µï¼Œæ„å»ºä¼˜é›…ã€æ˜“ç”¨çš„ API","keywords":["APIè®¾è®¡","RESTful","åç«¯å¼€å‘","æ¥å£è§„èŒƒ"],"articleBody":"å‰è¨€ è‰¯å¥½çš„ API è®¾è®¡æ˜¯æ„å»ºæˆåŠŸåº”ç”¨çš„å…³é”®ã€‚ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ API åº”è¯¥ç›´è§‚ã€ä¸€è‡´ã€å¯é¢„æµ‹ï¼Œå¹¶ä¸”æ˜“äºå¼€å‘è€…ä½¿ç”¨å’Œç»´æŠ¤ã€‚æœ¬æ–‡å°†åˆ†äº« RESTful API è®¾è®¡çš„æœ€ä½³å®è·µã€‚\nRESTful åŸºç¡€åŸåˆ™ 1. èµ„æºå¯¼å‘è®¾è®¡ 1 2 3 4 5 6 7 8 9 10 11 12 13 // âŒ ä¸å¥½çš„è®¾è®¡ - åŠ¨ä½œå¯¼å‘ POST /getUser POST /createUser POST /updateUser POST /deleteUser // âœ… å¥½çš„è®¾è®¡ - èµ„æºå¯¼å‘ GET /users // è·å–ç”¨æˆ·åˆ—è¡¨ POST /users // åˆ›å»ºæ–°ç”¨æˆ· GET /users/{id} // è·å–ç‰¹å®šç”¨æˆ· PUT /users/{id} // å®Œæ•´æ›´æ–°ç”¨æˆ· PATCH /users/{id} // éƒ¨åˆ†æ›´æ–°ç”¨æˆ· DELETE /users/{id} // åˆ é™¤ç”¨æˆ· 2. HTTP æ–¹æ³•æ­£ç¡®ä½¿ç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 // HTTP æ–¹æ³•è¯­ä¹‰ const httpMethods = { GET: 'è·å–èµ„æºï¼Œå¹‚ç­‰ï¼Œå®‰å…¨', POST: 'åˆ›å»ºèµ„æºï¼Œéå¹‚ç­‰ï¼Œä¸å®‰å…¨', PUT: 'å®Œæ•´æ›´æ–°èµ„æºï¼Œå¹‚ç­‰ï¼Œä¸å®‰å…¨', PATCH: 'éƒ¨åˆ†æ›´æ–°èµ„æºï¼Œå¹‚ç­‰ï¼Œä¸å®‰å…¨', DELETE: 'åˆ é™¤èµ„æºï¼Œå¹‚ç­‰ï¼Œä¸å®‰å…¨' }; // èµ„æºåµŒå¥— GET /users/{userId}/orders // è·å–ç”¨æˆ·çš„è®¢å•åˆ—è¡¨ POST /users/{userId}/orders // ä¸ºç”¨æˆ·åˆ›å»ºæ–°è®¢å• GET /users/{userId}/orders/{orderId} // è·å–ç‰¹å®šè®¢å• URL è®¾è®¡è§„èŒƒ 1. å‘½åè§„èŒƒ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 // âœ… ä½¿ç”¨å¤æ•°å½¢å¼è¡¨ç¤ºèµ„æºé›†åˆ GET /users GET /products GET /orders // âœ… ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦ GET /user-profiles/{id} GET /order-items/{id} // âœ… é¿å…æ·±å±‚åµŒå¥—ï¼ˆæœ€å¤š2-3å±‚ï¼‰ GET /users/{userId}/orders/{orderId}/items // æˆ–ä½¿ç”¨æŸ¥è¯¢å‚æ•° GET /items?userId={userId}\u0026orderId={orderId} // âŒ é¿å…çš„åšæ³• GET /User GET /getUsers GET /api/v1/getAllUsers GET /users/{userId}/order/{orderId}/item/{itemId}/details/{detailId} 2. ç‰ˆæœ¬æ§åˆ¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // URL ç‰ˆæœ¬æ§åˆ¶ GET /api/v1/users GET /api/v2/users // Header ç‰ˆæœ¬æ§åˆ¶ Accept: application/vnd.api+json;version=1 Accept: application/vnd.myapi.v2+json // è‡ªå®šä¹‰ Header ç‰ˆæœ¬æ§åˆ¶ API-Version: v1 // ç‰ˆæœ¬å‡çº§ç­–ç•¥ // v1 - ç¨³å®šç‰ˆæœ¬ï¼Œå‘åå…¼å®¹ // v2 - æ–°ç‰ˆæœ¬ï¼Œå¯èƒ½ä¸å…¼å®¹ // v1.1 - å°ç‰ˆæœ¬æ›´æ–°ï¼Œå‘åå…¼å®¹ è¯·æ±‚å’Œå“åº”è®¾è®¡ 1. è¯·æ±‚ä½“ç»“æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 // åˆ›å»ºèµ„æºè¯·æ±‚ POST /api/v1/users Content-Type: application/json { \"user\": { \"name\": \"John Doe\", \"email\": \"john@example.com\", \"age\": 30, \"preferences\": { \"language\": \"en\", \"timezone\": \"UTC\" } } } // æ‰¹é‡æ“ä½œè¯·æ±‚ POST /api/v1/users/batch Content-Type: application/json { \"users\": [ { \"name\": \"User 1\", \"email\": \"user1@example.com\" }, { \"name\": \"User 2\", \"email\": \"user2@example.com\" } ] } 2. å“åº”ä½“ç»“æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 // æˆåŠŸå“åº” { \"success\": true, \"data\": { \"id\": \"123\", \"name\": \"John Doe\", \"email\": \"john@example.com\", \"createdAt\": \"2025-12-06T15:30:00Z\", \"updatedAt\": \"2025-12-06T15:30:00Z\" }, \"meta\": { \"timestamp\": \"2025-12-06T15:30:00Z\", \"version\": \"v1\" } } // åˆ—è¡¨å“åº” { \"success\": true, \"data\": [ { \"id\": \"123\", \"name\": \"John Doe\" }, { \"id\": \"124\", \"name\": \"Jane Smith\" } ], \"pagination\": { \"page\": 1, \"limit\": 20, \"total\": 100, \"totalPages\": 5, \"hasNext\": true, \"hasPrev\": false } } // é”™è¯¯å“åº” { \"success\": false, \"error\": { \"code\": \"VALIDATION_ERROR\", \"message\": \"Invalid input data\", \"details\": [ { \"field\": \"email\", \"message\": \"Email is required\" }, { \"field\": \"age\", \"message\": \"Age must be between 0 and 120\" } ] }, \"meta\": { \"timestamp\": \"2025-12-06T15:30:00Z\", \"requestId\": \"req-123456\" } } çŠ¶æ€ç ä½¿ç”¨æŒ‡å— 1. æˆåŠŸçŠ¶æ€ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // 200 OK - æˆåŠŸè·å–æˆ–æ›´æ–°èµ„æº GET /api/v1/users/123 -\u003e 200 PUT /api/v1/users/123 -\u003e 200 // 201 Created - æˆåŠŸåˆ›å»ºèµ„æº POST /api/v1/users -\u003e 201 // 202 Accepted - è¯·æ±‚å·²æ¥å—ï¼Œæ­£åœ¨å¤„ç† POST /api/v1/users/export -\u003e 202 // 204 No Content - æˆåŠŸåˆ é™¤èµ„æº DELETE /api/v1/users/123 -\u003e 204 // 206 Partial Content - éƒ¨åˆ†å†…å®¹ï¼ˆåˆ†é¡µï¼‰ GET /api/v1/users?page=1\u0026limit=10 -\u003e 206 2. é”™è¯¯çŠ¶æ€ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 // 400 Bad Request - å®¢æˆ·ç«¯é”™è¯¯ POST /api/v1/users -\u003e 400 (éªŒè¯å¤±è´¥) // 401 Unauthorized - æœªè®¤è¯ GET /api/v1/users -\u003e 401 (éœ€è¦ç™»å½•) // 403 Forbidden - æ— æƒé™ GET /api/v1/admin/users -\u003e 403 (éœ€è¦ç®¡ç†å‘˜æƒé™) // 404 Not Found - èµ„æºä¸å­˜åœ¨ GET /api/v1/users/999 -\u003e 404 // 409 Conflict - èµ„æºå†²çª POST /api/v1/users -\u003e 409 (é‚®ç®±å·²å­˜åœ¨) // 422 Unprocessable Entity - è¯·æ±‚æ ¼å¼æ­£ç¡®ä½†è¯­ä¹‰é”™è¯¯ POST /api/v1/users -\u003e 422 (ä¸šåŠ¡é€»è¾‘é”™è¯¯) // 429 Too Many Requests - è¯·æ±‚é¢‘ç‡é™åˆ¶ GET /api/v1/users -\u003e 429 (è¶…å‡ºé™åˆ¶) æ•°æ®éªŒè¯å’Œè¿‡æ»¤ 1. è¾“å…¥éªŒè¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 // ä½¿ç”¨ Joi è¿›è¡ŒéªŒè¯ const Joi = require('joi'); const userSchema = Joi.object({ name: Joi.string().min(2).max(50).required(), email: Joi.string().email().required(), age: Joi.number().integer().min(0).max(120), preferences: Joi.object({ language: Joi.string().valid('en', 'zh', 'es'), timezone: Joi.string() }) }); // éªŒè¯ä¸­é—´ä»¶ const validateRequest = (schema) =\u003e { return (req, res, next) =\u003e { const { error } = schema.validate(req.body); if (error) { return res.status(400).json({ success: false, error: { code: 'VALIDATION_ERROR', message: 'Invalid input data', details: error.details.map(d =\u003e ({ field: d.path.join('.'), message: d.message })) } }); } next(); }; }; // ä½¿ç”¨ app.post('/api/v1/users', validateRequest(userSchema), (req, res) =\u003e { // å¤„ç†é€»è¾‘ }); 2. å“åº”è¿‡æ»¤ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 // å­—æ®µé€‰æ‹© GET /api/v1/users?fields=id,name,email // å®ç°ç¤ºä¾‹ app.get('/api/v1/users', (req, res) =\u003e { const { fields } = req.query; let users = await User.find(); if (fields) { const selectedFields = fields.split(','); users = users.map(user =\u003e _.pick(user, selectedFields)); } res.json({ success: true, data: users }); }); // æ•°æ®è½¬æ¢ const userSerializer = (user) =\u003e { return { id: user._id, name: user.name, email: user.email, avatar: user.profile.avatar, joinedAt: user.createdAt.toISOString(), // ä¸è¿”å›æ•æ„Ÿä¿¡æ¯ // password: user.password }; }; // åµŒå…¥å…³è”æ•°æ® GET /api/v1/users?include=profile,orders app.get('/api/v1/users', async (req, res) =\u003e { const { include } = req.query; const includes = include ? include.split(',') : []; let users = await User.find(); if (includes.includes('profile')) { users = await User.populate(users, 'profile'); } if (includes.includes('orders')) { users = await User.populate(users, 'orders'); } res.json({ success: true, data: users }); }); åˆ†é¡µã€æ’åºå’Œè¿‡æ»¤ 1. åˆ†é¡µå®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 // æŸ¥è¯¢å‚æ•° GET /api/v1/users?page=1\u0026limit=20 // å“åº”ç»“æ„ { \"success\": true, \"data\": [...], \"pagination\": { \"page\": 1, \"limit\": 20, \"total\": 100, \"totalPages\": 5, \"hasNext\": true, \"hasPrev\": false, \"next\": \"/api/v1/users?page=2\u0026limit=20\", \"prev\": null } } // å®ç°ç¤ºä¾‹ app.get('/api/v1/users', async (req, res) =\u003e { const page = parseInt(req.query.page) || 1; const limit = parseInt(req.query.limit) || 20; const skip = (page - 1) * limit; const [users, total] = await Promise.all([ User.find().skip(skip).limit(limit), User.countDocuments() ]); const totalPages = Math.ceil(total / limit); res.json({ success: true, data: users, pagination: { page, limit, total, totalPages, hasNext: page \u003c totalPages, hasPrev: page \u003e 1, next: page \u003c totalPages ? `/api/v1/users?page=${page + 1}\u0026limit=${limit}` : null, prev: page \u003e 1 ? `/api/v1/users?page=${page - 1}\u0026limit=${limit}` : null } }); }); 2. æ’åºå®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 // æŸ¥è¯¢å‚æ•° GET /api/v1/users?sort=createdAt\u0026order=desc GET /api/v1/users?sort=name,age\u0026order=asc,desc // å®ç°ç¤ºä¾‹ app.get('/api/v1/users', async (req, res) =\u003e { const { sort = 'createdAt', order = 'desc' } = req.query; const sortFields = sort.split(','); const sortOrders = order.split(','); const sortObj = {}; sortFields.forEach((field, index) =\u003e { sortObj[field] = sortOrders[index] === 'desc' ? -1 : 1; }); const users = await User.find().sort(sortObj); res.json({ success: true, data: users }); }); 3. è¿‡æ»¤å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 // æŸ¥è¯¢å‚æ•° GET /api/v1/users?age=30 GET /api/v1/users?age_min=18\u0026age_max=65 GET /api/v1/users?name=john\u0026email=@example.com GET /api/v1/users?tags=admin,active // å®ç°ç¤ºä¾‹ app.get('/api/v1/users', async (req, res) =\u003e { const filters = {}; // ç²¾ç¡®åŒ¹é… if (req.query.age) { filters.age = parseInt(req.query.age); } // èŒƒå›´æŸ¥è¯¢ if (req.query.age_min || req.query.age_max) { filters.age = {}; if (req.query.age_min) { filters.age.$gte = parseInt(req.query.age_min); } if (req.query.age_max) { filters.age.$lte = parseInt(req.query.age_max); } } // æ¨¡ç³ŠæŸ¥è¯¢ if (req.query.name) { filters.name = { $regex: req.query.name, $options: 'i' }; } // å¤šå€¼æŸ¥è¯¢ if (req.query.tags) { const tags = req.query.tags.split(','); filters.tags = { $in: tags }; } const users = await User.find(filters); res.json({ success: true, data: users }); }); è®¤è¯å’Œæˆæƒ 1. JWT è®¤è¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 // ç”Ÿæˆ token const generateToken = (user) =\u003e { return jwt.sign( { userId: user.id, email: user.email, role: user.role }, process.env.JWT_SECRET, { expiresIn: '24h' } ); }; // è®¤è¯ä¸­é—´ä»¶ const authenticateToken = (req, res, next) =\u003e { const authHeader = req.headers['authorization']; const token = authHeader \u0026\u0026 authHeader.split(' ')[1]; if (!token) { return res.status(401).json({ success: false, error: { code: 'TOKEN_MISSING', message: 'Access token is required' } }); } jwt.verify(token, process.env.JWT_SECRET, (err, user) =\u003e { if (err) { return res.status(401).json({ success: false, error: { code: 'TOKEN_INVALID', message: 'Invalid or expired token' } }); } req.user = user; next(); }); }; 2. æˆæƒä¸­é—´ä»¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 // è§’è‰²æˆæƒ const authorize = (...roles) =\u003e { return (req, res, next) =\u003e { if (!roles.includes(req.user.role)) { return res.status(403).json({ success: false, error: { code: 'INSUFFICIENT_PERMISSIONS', message: 'You do not have permission to perform this action' } }); } next(); }; }; // èµ„æºæ‰€æœ‰æƒæ£€æŸ¥ const checkOwnership = (resourceModel) =\u003e { return async (req, res, next) =\u003e { try { const resource = await resourceModel.findById(req.params.id); if (!resource) { return res.status(404).json({ success: false, error: { code: 'RESOURCE_NOT_FOUND', message: 'Resource not found' } }); } if (resource.userId.toString() !== req.user.userId \u0026\u0026 req.user.role !== 'admin') { return res.status(403).json({ success: false, error: { code: 'ACCESS_DENIED', message: 'You can only access your own resources' } }); } req.resource = resource; next(); } catch (error) { next(error); } }; }; // ä½¿ç”¨ç¤ºä¾‹ app.delete( '/api/v1/users/:id', authenticateToken, checkOwnership(User), (req, res) =\u003e { // åˆ é™¤é€»è¾‘ } ); ç¼“å­˜ç­–ç•¥ 1. HTTP ç¼“å­˜å¤´ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 // è®¾ç½®ç¼“å­˜å¤´ const setCacheHeaders = (req, res, next) =\u003e { // å…¬å…±ç¼“å­˜ï¼Œ1å°æ—¶ if (req.path.startsWith('/api/v1/public/')) { res.set('Cache-Control', 'public, max-age=3600'); } // ç§æœ‰ç¼“å­˜ï¼Œ5åˆ†é’Ÿ else if (req.path.startsWith('/api/v1/users/profile')) { res.set('Cache-Control', 'private, max-age=300'); } // ä¸ç¼“å­˜ else { res.set('Cache-Control', 'no-cache, no-store, must-revalidate'); } // ETag if (req.method === 'GET') { const data = JSON.stringify(res.locals.data); const etag = require('crypto').createHash('md5').update(data).digest('hex'); res.set('ETag', etag); if (req.headers['if-none-match'] === etag) { return res.status(304).end(); } } next(); }; 2. Redis ç¼“å­˜ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 const redis = require('redis'); const client = redis.createClient(); const cache = { get: async (key) =\u003e { try { const data = await client.get(key); return data ? JSON.parse(data) : null; } catch (error) { return null; } }, set: async (key, data, ttl = 3600) =\u003e { try { await client.setex(key, ttl, JSON.stringify(data)); } catch (error) { console.error('Cache set error:', error); } }, del: async (key) =\u003e { try { await client.del(key); } catch (error) { console.error('Cache delete error:', error); } } }; // ç¼“å­˜ä¸­é—´ä»¶ const cacheMiddleware = (ttl = 3600) =\u003e { return async (req, res, next) =\u003e { const key = `cache:${req.originalUrl}`; // å°è¯•ä»ç¼“å­˜è·å– const cachedData = await cache.get(key); if (cachedData) { return res.json({ ...cachedData, cached: true }); } // é‡å†™ res.json ä»¥ç¼“å­˜å“åº” const originalJson = res.json; res.json = function(data) { cache.set(key, data, ttl); return originalJson.call(this, data); }; next(); }; }; // ä½¿ç”¨ç¤ºä¾‹ app.get('/api/v1/users', cacheMiddleware(300), async (req, res) =\u003e { const users = await User.find(); res.json({ success: true, data: users }); }); API æ–‡æ¡£ 1. Swagger/OpenAPI é…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 # swagger.yaml openapi: 3.0.0 info: title: User API version: 1.0.0 description: ç”¨æˆ·ç®¡ç† API paths: /api/v1/users: get: summary: è·å–ç”¨æˆ·åˆ—è¡¨ tags: - Users parameters: - name: page in: query schema: type: integer minimum: 1 default: 1 - name: limit in: query schema: type: integer minimum: 1 maximum: 100 default: 20 responses: '200': description: æˆåŠŸè¿”å›ç”¨æˆ·åˆ—è¡¨ content: application/json: schema: type: object properties: success: type: boolean data: type: array items: $ref: '#/components/schemas/User' pagination: $ref: '#/components/schemas/Pagination' post: summary: åˆ›å»ºæ–°ç”¨æˆ· tags: - Users requestBody: required: true content: application/json: schema: $ref: '#/components/schemas/CreateUserRequest' responses: '201': description: ç”¨æˆ·åˆ›å»ºæˆåŠŸ '400': description: è¯·æ±‚å‚æ•°é”™è¯¯ '409': description: ç”¨æˆ·å·²å­˜åœ¨ components: schemas: User: type: object properties: id: type: string name: type: string email: type: string format: email createdAt: type: string format: date-time CreateUserRequest: type: object required: - name - email properties: name: type: string minLength: 2 maxLength: 50 email: type: string format: email age: type: integer minimum: 0 maximum: 120 æ€»ç»“ RESTful API è®¾è®¡çš„æœ€ä½³å®è·µï¼š\nèµ„æºå¯¼å‘ï¼šä½¿ç”¨åè¯è€ŒéåŠ¨è¯ï¼Œéµå¾ª REST åŸåˆ™ URL è®¾è®¡ï¼šæ¸…æ™°ã€ä¸€è‡´ã€å¯é¢„æµ‹çš„ URL ç»“æ„ HTTP æ–¹æ³•ï¼šæ­£ç¡®ä½¿ç”¨ HTTP åŠ¨è¯å’ŒçŠ¶æ€ç  æ•°æ®æ ¼å¼ï¼šç»Ÿä¸€çš„è¯·æ±‚å’Œå“åº”æ ¼å¼ éªŒè¯è¿‡æ»¤ï¼šä¸¥æ ¼çš„è¾“å…¥éªŒè¯å’Œçµæ´»çš„æ•°æ®è¿‡æ»¤ è®¤è¯æˆæƒï¼šå®‰å…¨çš„èº«ä»½éªŒè¯å’Œç»†ç²’åº¦çš„æƒé™æ§åˆ¶ æ€§èƒ½ä¼˜åŒ–ï¼šåˆç†çš„ç¼“å­˜ç­–ç•¥å’Œåˆ†é¡µæœºåˆ¶ æ–‡æ¡£å®Œå–„ï¼šæ¸…æ™°ã€è¯¦ç»†çš„ API æ–‡æ¡£ éµå¾ªè¿™äº›å®è·µï¼Œå¯ä»¥æ„å»ºå‡ºæ˜“äºç†è§£ã€ä½¿ç”¨å’Œç»´æŠ¤çš„ API æ¥å£ã€‚\nç›¸å…³å·¥å…·ï¼š\nPostman API æµ‹è¯• Swagger Editor API æ–‡æ¡£ç”Ÿæˆå™¨ ","wordCount":"2295","inLanguage":"zh-cn","datePublished":"2025-12-06T15:30:00+08:00","dateModified":"2025-12-06T15:30:00+08:00","author":{"@type":"Person","name":"æœ‰æ¡å·¥å…·å›¢é˜Ÿ"},"mainEntityOfPage":{"@type":"WebPage","@id":"/blog/articles/api-design-best-practices/"},"publisher":{"@type":"Organization","name":"æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·","logo":{"@type":"ImageObject","url":"/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=/blog/ accesskey=h title="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· (Alt + H)">æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=/blog/posts/ title="æ‰€æœ‰æ–‡ç« åˆ—è¡¨ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŸ¥çœ‹æ‰€æœ‰æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ–‡ç« </span></a></li><li><a href=https://www.util.cn title="æœ‰æ¡å·¥å…· - å¼€å‘è€…çš„å¸¸ç”¨å·¥å…·é›†åˆï¼šæ— å¹¿å‘Š Â· æœ¬åœ°è®¡ç®— Â· å³å¼€å³ç”¨çš„åœ¨çº¿å·¥å…·å¹³å°ï¼Œæä¾›JSONæ ¼å¼åŒ–ã€SQLæ ¼å¼åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰å®ç”¨å·¥å…·"><span>æœ‰æ¡å·¥å…·</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=/blog/categories/ title="æ–‡ç« åˆ†ç±» - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æŠ€æœ¯é¢†åŸŸåˆ†ç±»çš„ä¼˜è´¨æ–‡ç« ï¼ŒåŒ…æ‹¬å‰ç«¯å¼€å‘ã€å·¥å…·ä½¿ç”¨ã€ç¼–ç¨‹æŠ€å·§ç­‰"><span>åˆ†ç±»</span></a></li><li><a href=/blog/tags/ title="æ ‡ç­¾äº‘ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡æ ‡ç­¾å¿«é€Ÿæ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ ‡ç­¾</span></a></li><li><a href=/blog/archives/ title="æ–‡ç« å½’æ¡£ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æ—¶é—´æŸ¥çœ‹å†å²æ–‡ç« "><span>å½’æ¡£</span></a></li><li><a href=/blog/search/ title="æœç´¢æ–‡ç«  - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡å…³é”®è¯æœç´¢æ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹ï¼Œæ”¯æŒæ ‡é¢˜ã€å†…å®¹ã€åˆ†ç±»å’Œæ ‡ç­¾æœç´¢"><span>æœç´¢</span></a></li></ul></nav></header><main class=main><article class=post-single><div class=post-content-wrapper><main class=post-content-main><header class=post-header-main><h1 class="post-title entry-hint-parent">RESTful API è®¾è®¡æœ€ä½³å®è·µ</h1><div class=post-meta><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/ class=category-link>åç«¯å¼€å‘</a></div><span class=post-date>2025-12-06</span><span class=post-author>æœ‰æ¡å·¥å…·å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></div></header><div class=post-content><h2 id=å‰è¨€>å‰è¨€<a hidden class=anchor aria-hidden=true href=#å‰è¨€>#</a></h2><p>è‰¯å¥½çš„ API è®¾è®¡æ˜¯æ„å»ºæˆåŠŸåº”ç”¨çš„å…³é”®ã€‚ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ API åº”è¯¥ç›´è§‚ã€ä¸€è‡´ã€å¯é¢„æµ‹ï¼Œå¹¶ä¸”æ˜“äºå¼€å‘è€…ä½¿ç”¨å’Œç»´æŠ¤ã€‚æœ¬æ–‡å°†åˆ†äº« RESTful API è®¾è®¡çš„æœ€ä½³å®è·µã€‚</p><h2 id=restful-åŸºç¡€åŸåˆ™>RESTful åŸºç¡€åŸåˆ™<a hidden class=anchor aria-hidden=true href=#restful-åŸºç¡€åŸåˆ™>#</a></h2><h3 id=1-èµ„æºå¯¼å‘è®¾è®¡>1. èµ„æºå¯¼å‘è®¾è®¡<a hidden class=anchor aria-hidden=true href=#1-èµ„æºå¯¼å‘è®¾è®¡>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âŒ ä¸å¥½çš„è®¾è®¡ - åŠ¨ä½œå¯¼å‘
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>POST <span style=color:#ff7b72;font-weight:700>/</span>getUser
</span></span><span style=display:flex><span>POST <span style=color:#ff7b72;font-weight:700>/</span>createUser
</span></span><span style=display:flex><span>POST <span style=color:#ff7b72;font-weight:700>/</span>updateUser
</span></span><span style=display:flex><span>POST <span style=color:#ff7b72;font-weight:700>/</span>deleteUser
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âœ… å¥½çš„è®¾è®¡ - èµ„æºå¯¼å‘
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET    <span style=color:#ff7b72;font-weight:700>/</span>users           <span style=color:#8b949e;font-style:italic>// è·å–ç”¨æˆ·åˆ—è¡¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>POST   <span style=color:#ff7b72;font-weight:700>/</span>users           <span style=color:#8b949e;font-style:italic>// åˆ›å»ºæ–°ç”¨æˆ·
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET    <span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span>{id}      <span style=color:#8b949e;font-style:italic>// è·å–ç‰¹å®šç”¨æˆ·
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>PUT    <span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span>{id}      <span style=color:#8b949e;font-style:italic>// å®Œæ•´æ›´æ–°ç”¨æˆ·
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>PATCH  <span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span>{id}      <span style=color:#8b949e;font-style:italic>// éƒ¨åˆ†æ›´æ–°ç”¨æˆ·
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>DELETE <span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span>{id}      <span style=color:#8b949e;font-style:italic>// åˆ é™¤ç”¨æˆ·
</span></span></span></code></pre></td></tr></table></div></div><h3 id=2-http-æ–¹æ³•æ­£ç¡®ä½¿ç”¨>2. HTTP æ–¹æ³•æ­£ç¡®ä½¿ç”¨<a hidden class=anchor aria-hidden=true href=#2-http-æ–¹æ³•æ­£ç¡®ä½¿ç”¨>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// HTTP æ–¹æ³•è¯­ä¹‰
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> httpMethods <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>  GET<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;è·å–èµ„æºï¼Œå¹‚ç­‰ï¼Œå®‰å…¨&#39;</span>,
</span></span><span style=display:flex><span>  POST<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;åˆ›å»ºèµ„æºï¼Œéå¹‚ç­‰ï¼Œä¸å®‰å…¨&#39;</span>,
</span></span><span style=display:flex><span>  PUT<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;å®Œæ•´æ›´æ–°èµ„æºï¼Œå¹‚ç­‰ï¼Œä¸å®‰å…¨&#39;</span>,
</span></span><span style=display:flex><span>  PATCH<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;éƒ¨åˆ†æ›´æ–°èµ„æºï¼Œå¹‚ç­‰ï¼Œä¸å®‰å…¨&#39;</span>,
</span></span><span style=display:flex><span>  DELETE<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;åˆ é™¤èµ„æºï¼Œå¹‚ç­‰ï¼Œä¸å®‰å…¨&#39;</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// èµ„æºåµŒå¥—
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET    <span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span>{userId}<span style=color:#ff7b72;font-weight:700>/</span>orders           <span style=color:#8b949e;font-style:italic>// è·å–ç”¨æˆ·çš„è®¢å•åˆ—è¡¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>POST   <span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span>{userId}<span style=color:#ff7b72;font-weight:700>/</span>orders           <span style=color:#8b949e;font-style:italic>// ä¸ºç”¨æˆ·åˆ›å»ºæ–°è®¢å•
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET    <span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span>{userId}<span style=color:#ff7b72;font-weight:700>/</span>orders<span style=color:#ff7b72;font-weight:700>/</span>{orderId} <span style=color:#8b949e;font-style:italic>// è·å–ç‰¹å®šè®¢å•
</span></span></span></code></pre></td></tr></table></div></div><h2 id=url-è®¾è®¡è§„èŒƒ>URL è®¾è®¡è§„èŒƒ<a hidden class=anchor aria-hidden=true href=#url-è®¾è®¡è§„èŒƒ>#</a></h2><h3 id=1-å‘½åè§„èŒƒ>1. å‘½åè§„èŒƒ<a hidden class=anchor aria-hidden=true href=#1-å‘½åè§„èŒƒ>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âœ… ä½¿ç”¨å¤æ•°å½¢å¼è¡¨ç¤ºèµ„æºé›†åˆ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>users
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>products
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>orders
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âœ… ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>user<span style=color:#ff7b72;font-weight:700>-</span>profiles<span style=color:#ff7b72;font-weight:700>/</span>{id}
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>order<span style=color:#ff7b72;font-weight:700>-</span>items<span style=color:#ff7b72;font-weight:700>/</span>{id}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âœ… é¿å…æ·±å±‚åµŒå¥—ï¼ˆæœ€å¤š2-3å±‚ï¼‰
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span>{userId}<span style=color:#ff7b72;font-weight:700>/</span>orders<span style=color:#ff7b72;font-weight:700>/</span>{orderId}<span style=color:#ff7b72;font-weight:700>/</span>items
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æˆ–ä½¿ç”¨æŸ¥è¯¢å‚æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>items<span style=color:#ff7b72;font-weight:700>?</span>userId<span style=color:#ff7b72;font-weight:700>=</span>{userId}<span style=color:#ff7b72;font-weight:700>&amp;</span>orderId<span style=color:#ff7b72;font-weight:700>=</span>{orderId}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// âŒ é¿å…çš„åšæ³•
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>User
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>getUsers
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>getAllUsers
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span>{userId}<span style=color:#ff7b72;font-weight:700>/</span>order<span style=color:#ff7b72;font-weight:700>/</span>{orderId}<span style=color:#ff7b72;font-weight:700>/</span>item<span style=color:#ff7b72;font-weight:700>/</span>{itemId}<span style=color:#ff7b72;font-weight:700>/</span>details<span style=color:#ff7b72;font-weight:700>/</span>{detailId}
</span></span></code></pre></td></tr></table></div></div><h3 id=2-ç‰ˆæœ¬æ§åˆ¶>2. ç‰ˆæœ¬æ§åˆ¶<a hidden class=anchor aria-hidden=true href=#2-ç‰ˆæœ¬æ§åˆ¶>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// URL ç‰ˆæœ¬æ§åˆ¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v2<span style=color:#ff7b72;font-weight:700>/</span>users
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// Header ç‰ˆæœ¬æ§åˆ¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Accept<span style=color:#ff7b72;font-weight:700>:</span> application<span style=color:#ff7b72;font-weight:700>/</span>vnd.api<span style=color:#ff7b72;font-weight:700>+</span>json;version<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>1</span>
</span></span><span style=display:flex><span>Accept<span style=color:#ff7b72;font-weight:700>:</span> application<span style=color:#ff7b72;font-weight:700>/</span>vnd.myapi.v2<span style=color:#ff7b72;font-weight:700>+</span>json
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è‡ªå®šä¹‰ Header ç‰ˆæœ¬æ§åˆ¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>API<span style=color:#ff7b72;font-weight:700>-</span>Version<span style=color:#ff7b72;font-weight:700>:</span> v1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ç‰ˆæœ¬å‡çº§ç­–ç•¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// v1 - ç¨³å®šç‰ˆæœ¬ï¼Œå‘åå…¼å®¹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// v2 - æ–°ç‰ˆæœ¬ï¼Œå¯èƒ½ä¸å…¼å®¹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// v1.1 - å°ç‰ˆæœ¬æ›´æ–°ï¼Œå‘åå…¼å®¹
</span></span></span></code></pre></td></tr></table></div></div><h2 id=è¯·æ±‚å’Œå“åº”è®¾è®¡>è¯·æ±‚å’Œå“åº”è®¾è®¡<a hidden class=anchor aria-hidden=true href=#è¯·æ±‚å’Œå“åº”è®¾è®¡>#</a></h2><h3 id=1-è¯·æ±‚ä½“ç»“æ„>1. è¯·æ±‚ä½“ç»“æ„<a hidden class=anchor aria-hidden=true href=#1-è¯·æ±‚ä½“ç»“æ„>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// åˆ›å»ºèµ„æºè¯·æ±‚
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>POST <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users
</span></span><span style=display:flex><span>Content<span style=color:#ff7b72;font-weight:700>-</span>Type<span style=color:#ff7b72;font-weight:700>:</span> application<span style=color:#ff7b72;font-weight:700>/</span>json
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;user&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;name&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;John Doe&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;email&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;john@example.com&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;age&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>30</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;preferences&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#34;language&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;en&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#34;timezone&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;UTC&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æ‰¹é‡æ“ä½œè¯·æ±‚
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>POST <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span>batch
</span></span><span style=display:flex><span>Content<span style=color:#ff7b72;font-weight:700>-</span>Type<span style=color:#ff7b72;font-weight:700>:</span> application<span style=color:#ff7b72;font-weight:700>/</span>json
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;users&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#34;name&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;User 1&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#34;email&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;user1@example.com&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#34;name&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;User 2&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#34;email&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;user2@example.com&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h3 id=2-å“åº”ä½“ç»“æ„>2. å“åº”ä½“ç»“æ„<a hidden class=anchor aria-hidden=true href=#2-å“åº”ä½“ç»“æ„>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">61
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æˆåŠŸå“åº”
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>{
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;success&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;data&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;id&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;123&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;name&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;John Doe&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;email&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;john@example.com&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;createdAt&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;2025-12-06T15:30:00Z&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;updatedAt&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;2025-12-06T15:30:00Z&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;meta&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;timestamp&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;2025-12-06T15:30:00Z&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;version&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;v1&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// åˆ—è¡¨å“åº”
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>{
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;success&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;data&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#34;id&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;123&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#34;name&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;John Doe&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#34;id&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;124&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#34;name&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;Jane Smith&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;pagination&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;page&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;limit&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>20</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;total&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>100</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;totalPages&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;hasNext&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;hasPrev&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// é”™è¯¯å“åº”
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>{
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;success&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;error&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;code&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;VALIDATION_ERROR&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;message&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;Invalid input data&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;details&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#a5d6ff>&#34;field&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;email&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a5d6ff>&#34;message&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;Email is required&#34;</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#a5d6ff>&#34;field&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;age&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a5d6ff>&#34;message&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;Age must be between 0 and 120&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;meta&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;timestamp&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;2025-12-06T15:30:00Z&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;requestId&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;req-123456&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=çŠ¶æ€ç ä½¿ç”¨æŒ‡å—>çŠ¶æ€ç ä½¿ç”¨æŒ‡å—<a hidden class=anchor aria-hidden=true href=#çŠ¶æ€ç ä½¿ç”¨æŒ‡å—>#</a></h2><h3 id=1-æˆåŠŸçŠ¶æ€ç >1. æˆåŠŸçŠ¶æ€ç <a hidden class=anchor aria-hidden=true href=#1-æˆåŠŸçŠ¶æ€ç >#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 200 OK - æˆåŠŸè·å–æˆ–æ›´æ–°èµ„æº
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span><span style=color:#a5d6ff>123</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>200</span>
</span></span><span style=display:flex><span>PUT <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span><span style=color:#a5d6ff>123</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>200</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 201 Created - æˆåŠŸåˆ›å»ºèµ„æº
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>POST <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>201</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 202 Accepted - è¯·æ±‚å·²æ¥å—ï¼Œæ­£åœ¨å¤„ç†
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>POST <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span><span style=color:#ff7b72>export</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>202</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 204 No Content - æˆåŠŸåˆ é™¤èµ„æº
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>DELETE <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span><span style=color:#a5d6ff>123</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>204</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 206 Partial Content - éƒ¨åˆ†å†…å®¹ï¼ˆåˆ†é¡µï¼‰
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>?</span>page<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>1</span><span style=color:#ff7b72;font-weight:700>&amp;</span>limit<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>10</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>206</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=2-é”™è¯¯çŠ¶æ€ç >2. é”™è¯¯çŠ¶æ€ç <a hidden class=anchor aria-hidden=true href=#2-é”™è¯¯çŠ¶æ€ç >#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 400 Bad Request - å®¢æˆ·ç«¯é”™è¯¯
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>POST <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>400</span> (éªŒè¯å¤±è´¥)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 401 Unauthorized - æœªè®¤è¯
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>401</span> (éœ€è¦ç™»å½•)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 403 Forbidden - æ— æƒé™
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>admin<span style=color:#ff7b72;font-weight:700>/</span>users <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>403</span> (éœ€è¦ç®¡ç†å‘˜æƒé™)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 404 Not Found - èµ„æºä¸å­˜åœ¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>/</span><span style=color:#a5d6ff>999</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>404</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 409 Conflict - èµ„æºå†²çª
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>POST <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>409</span> (é‚®ç®±å·²å­˜åœ¨)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 422 Unprocessable Entity - è¯·æ±‚æ ¼å¼æ­£ç¡®ä½†è¯­ä¹‰é”™è¯¯
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>POST <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>422</span> (ä¸šåŠ¡é€»è¾‘é”™è¯¯)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 429 Too Many Requests - è¯·æ±‚é¢‘ç‡é™åˆ¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#a5d6ff>429</span> (è¶…å‡ºé™åˆ¶)
</span></span></code></pre></td></tr></table></div></div><h2 id=æ•°æ®éªŒè¯å’Œè¿‡æ»¤>æ•°æ®éªŒè¯å’Œè¿‡æ»¤<a hidden class=anchor aria-hidden=true href=#æ•°æ®éªŒè¯å’Œè¿‡æ»¤>#</a></h2><h3 id=1-è¾“å…¥éªŒè¯>1. è¾“å…¥éªŒè¯<a hidden class=anchor aria-hidden=true href=#1-è¾“å…¥éªŒè¯>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨ Joi è¿›è¡ŒéªŒè¯
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> Joi <span style=color:#ff7b72;font-weight:700>=</span> require(<span style=color:#a5d6ff>&#39;joi&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> userSchema <span style=color:#ff7b72;font-weight:700>=</span> Joi.object({
</span></span><span style=display:flex><span>  name<span style=color:#ff7b72;font-weight:700>:</span> Joi.string().min(<span style=color:#a5d6ff>2</span>).max(<span style=color:#a5d6ff>50</span>).required(),
</span></span><span style=display:flex><span>  email<span style=color:#ff7b72;font-weight:700>:</span> Joi.string().email().required(),
</span></span><span style=display:flex><span>  age<span style=color:#ff7b72;font-weight:700>:</span> Joi.number().integer().min(<span style=color:#a5d6ff>0</span>).max(<span style=color:#a5d6ff>120</span>),
</span></span><span style=display:flex><span>  preferences<span style=color:#ff7b72;font-weight:700>:</span> Joi.object({
</span></span><span style=display:flex><span>    language<span style=color:#ff7b72;font-weight:700>:</span> Joi.string().valid(<span style=color:#a5d6ff>&#39;en&#39;</span>, <span style=color:#a5d6ff>&#39;zh&#39;</span>, <span style=color:#a5d6ff>&#39;es&#39;</span>),
</span></span><span style=display:flex><span>    timezone<span style=color:#ff7b72;font-weight:700>:</span> Joi.string()
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// éªŒè¯ä¸­é—´ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> validateRequest <span style=color:#ff7b72;font-weight:700>=</span> (schema) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (req, res, next) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> { error } <span style=color:#ff7b72;font-weight:700>=</span> schema.validate(req.body);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (error) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> res.status(<span style=color:#a5d6ff>400</span>).json({
</span></span><span style=display:flex><span>        success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>,
</span></span><span style=display:flex><span>        error<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>          code<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;VALIDATION_ERROR&#39;</span>,
</span></span><span style=display:flex><span>          message<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Invalid input data&#39;</span>,
</span></span><span style=display:flex><span>          details<span style=color:#ff7b72;font-weight:700>:</span> error.details.map(d =&gt; ({
</span></span><span style=display:flex><span>            field<span style=color:#ff7b72;font-weight:700>:</span> d.path.join(<span style=color:#a5d6ff>&#39;.&#39;</span>),
</span></span><span style=display:flex><span>            message<span style=color:#ff7b72;font-weight:700>:</span> d.message
</span></span><span style=display:flex><span>          }))
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    next();
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>app.post(<span style=color:#a5d6ff>&#39;/api/v1/users&#39;</span>, validateRequest(userSchema), (req, res) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// å¤„ç†é€»è¾‘
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>});
</span></span></code></pre></td></tr></table></div></div><h3 id=2-å“åº”è¿‡æ»¤>2. å“åº”è¿‡æ»¤<a hidden class=anchor aria-hidden=true href=#2-å“åº”è¿‡æ»¤>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// å­—æ®µé€‰æ‹©
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>?</span>fields<span style=color:#ff7b72;font-weight:700>=</span>id,name,email
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// å®ç°ç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>app.get(<span style=color:#a5d6ff>&#39;/api/v1/users&#39;</span>, (req, res) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> { fields } <span style=color:#ff7b72;font-weight:700>=</span> req.query;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>let</span> users <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> User.find();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>if</span> (fields) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> selectedFields <span style=color:#ff7b72;font-weight:700>=</span> fields.split(<span style=color:#a5d6ff>&#39;,&#39;</span>);
</span></span><span style=display:flex><span>    users <span style=color:#ff7b72;font-weight:700>=</span> users.map(user =&gt; _.pick(user, selectedFields));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  res.json({ success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>, data<span style=color:#ff7b72;font-weight:700>:</span> users });
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æ•°æ®è½¬æ¢
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> userSerializer <span style=color:#ff7b72;font-weight:700>=</span> (user) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>    id<span style=color:#ff7b72;font-weight:700>:</span> user._id,
</span></span><span style=display:flex><span>    name<span style=color:#ff7b72;font-weight:700>:</span> user.name,
</span></span><span style=display:flex><span>    email<span style=color:#ff7b72;font-weight:700>:</span> user.email,
</span></span><span style=display:flex><span>    avatar<span style=color:#ff7b72;font-weight:700>:</span> user.profile.avatar,
</span></span><span style=display:flex><span>    joinedAt<span style=color:#ff7b72;font-weight:700>:</span> user.createdAt.toISOString(),
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ä¸è¿”å›æ•æ„Ÿä¿¡æ¯
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#8b949e;font-style:italic>// password: user.password
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  };
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// åµŒå…¥å…³è”æ•°æ®
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>?</span>include<span style=color:#ff7b72;font-weight:700>=</span>profile,orders
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app.get(<span style=color:#a5d6ff>&#39;/api/v1/users&#39;</span>, <span style=color:#ff7b72>async</span> (req, res) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> { include } <span style=color:#ff7b72;font-weight:700>=</span> req.query;
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> includes <span style=color:#ff7b72;font-weight:700>=</span> include <span style=color:#ff7b72;font-weight:700>?</span> include.split(<span style=color:#a5d6ff>&#39;,&#39;</span>) <span style=color:#ff7b72;font-weight:700>:</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>let</span> users <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> User.find();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>if</span> (includes.includes(<span style=color:#a5d6ff>&#39;profile&#39;</span>)) {
</span></span><span style=display:flex><span>    users <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> User.populate(users, <span style=color:#a5d6ff>&#39;profile&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>if</span> (includes.includes(<span style=color:#a5d6ff>&#39;orders&#39;</span>)) {
</span></span><span style=display:flex><span>    users <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> User.populate(users, <span style=color:#a5d6ff>&#39;orders&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  res.json({ success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>, data<span style=color:#ff7b72;font-weight:700>:</span> users });
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h2 id=åˆ†é¡µæ’åºå’Œè¿‡æ»¤>åˆ†é¡µã€æ’åºå’Œè¿‡æ»¤<a hidden class=anchor aria-hidden=true href=#åˆ†é¡µæ’åºå’Œè¿‡æ»¤>#</a></h2><h3 id=1-åˆ†é¡µå®ç°>1. åˆ†é¡µå®ç°<a hidden class=anchor aria-hidden=true href=#1-åˆ†é¡µå®ç°>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æŸ¥è¯¢å‚æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>?</span>page<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>1</span><span style=color:#ff7b72;font-weight:700>&amp;</span>limit<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>20</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// å“åº”ç»“æ„
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>{
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;success&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;data&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> [...],
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#34;pagination&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;page&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;limit&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>20</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;total&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>100</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;totalPages&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;hasNext&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;hasPrev&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;next&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#34;/api/v1/users?page=2&amp;limit=20&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#34;prev&#34;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>null</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// å®ç°ç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>app.get(<span style=color:#a5d6ff>&#39;/api/v1/users&#39;</span>, <span style=color:#ff7b72>async</span> (req, res) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> page <span style=color:#ff7b72;font-weight:700>=</span> parseInt(req.query.page) <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>1</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> limit <span style=color:#ff7b72;font-weight:700>=</span> parseInt(req.query.limit) <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>20</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> skip <span style=color:#ff7b72;font-weight:700>=</span> (page <span style=color:#ff7b72;font-weight:700>-</span> <span style=color:#a5d6ff>1</span>) <span style=color:#ff7b72;font-weight:700>*</span> limit;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> [users, total] <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> Promise.all([
</span></span><span style=display:flex><span>    User.find().skip(skip).limit(limit),
</span></span><span style=display:flex><span>    User.countDocuments()
</span></span><span style=display:flex><span>  ]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> totalPages <span style=color:#ff7b72;font-weight:700>=</span> Math.ceil(total <span style=color:#ff7b72;font-weight:700>/</span> limit);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  res.json({
</span></span><span style=display:flex><span>    success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>    data<span style=color:#ff7b72;font-weight:700>:</span> users,
</span></span><span style=display:flex><span>    pagination<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>      page,
</span></span><span style=display:flex><span>      limit,
</span></span><span style=display:flex><span>      total,
</span></span><span style=display:flex><span>      totalPages,
</span></span><span style=display:flex><span>      hasNext<span style=color:#ff7b72;font-weight:700>:</span> page <span style=color:#ff7b72;font-weight:700>&lt;</span> totalPages,
</span></span><span style=display:flex><span>      hasPrev<span style=color:#ff7b72;font-weight:700>:</span> page <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>      next<span style=color:#ff7b72;font-weight:700>:</span> page <span style=color:#ff7b72;font-weight:700>&lt;</span> totalPages <span style=color:#ff7b72;font-weight:700>?</span>
</span></span><span style=display:flex><span>        <span style=color:#a5d6ff>`/api/v1/users?page=</span><span style=color:#a5d6ff>${</span>page <span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#a5d6ff>1</span><span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>&amp;limit=</span><span style=color:#a5d6ff>${</span>limit<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>null</span>,
</span></span><span style=display:flex><span>      prev<span style=color:#ff7b72;font-weight:700>:</span> page <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>1</span> <span style=color:#ff7b72;font-weight:700>?</span>
</span></span><span style=display:flex><span>        <span style=color:#a5d6ff>`/api/v1/users?page=</span><span style=color:#a5d6ff>${</span>page <span style=color:#ff7b72;font-weight:700>-</span> <span style=color:#a5d6ff>1</span><span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>&amp;limit=</span><span style=color:#a5d6ff>${</span>limit<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>null</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h3 id=2-æ’åºå®ç°>2. æ’åºå®ç°<a hidden class=anchor aria-hidden=true href=#2-æ’åºå®ç°>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æŸ¥è¯¢å‚æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>?</span>sort<span style=color:#ff7b72;font-weight:700>=</span>createdAt<span style=color:#ff7b72;font-weight:700>&amp;</span>order<span style=color:#ff7b72;font-weight:700>=</span>desc
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>?</span>sort<span style=color:#ff7b72;font-weight:700>=</span>name,age<span style=color:#ff7b72;font-weight:700>&amp;</span>order<span style=color:#ff7b72;font-weight:700>=</span>asc,desc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// å®ç°ç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>app.get(<span style=color:#a5d6ff>&#39;/api/v1/users&#39;</span>, <span style=color:#ff7b72>async</span> (req, res) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> { sort <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;createdAt&#39;</span>, order <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;desc&#39;</span> } <span style=color:#ff7b72;font-weight:700>=</span> req.query;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> sortFields <span style=color:#ff7b72;font-weight:700>=</span> sort.split(<span style=color:#a5d6ff>&#39;,&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> sortOrders <span style=color:#ff7b72;font-weight:700>=</span> order.split(<span style=color:#a5d6ff>&#39;,&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> sortObj <span style=color:#ff7b72;font-weight:700>=</span> {};
</span></span><span style=display:flex><span>  sortFields.forEach((field, index) =&gt; {
</span></span><span style=display:flex><span>    sortObj[field] <span style=color:#ff7b72;font-weight:700>=</span> sortOrders[index] <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;desc&#39;</span> <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>1</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1</span>;
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> users <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> User.find().sort(sortObj);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  res.json({ success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>, data<span style=color:#ff7b72;font-weight:700>:</span> users });
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h3 id=3-è¿‡æ»¤å®ç°>3. è¿‡æ»¤å®ç°<a hidden class=anchor aria-hidden=true href=#3-è¿‡æ»¤å®ç°>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æŸ¥è¯¢å‚æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>?</span>age<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>30</span>
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>?</span>age_min<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>18</span><span style=color:#ff7b72;font-weight:700>&amp;</span>age_max<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>65</span>
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>?</span>name<span style=color:#ff7b72;font-weight:700>=</span>john<span style=color:#ff7b72;font-weight:700>&amp;</span>email<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#f85149>@</span>example.com
</span></span><span style=display:flex><span>GET <span style=color:#ff7b72;font-weight:700>/</span>api<span style=color:#ff7b72;font-weight:700>/</span>v1<span style=color:#ff7b72;font-weight:700>/</span>users<span style=color:#ff7b72;font-weight:700>?</span>tags<span style=color:#ff7b72;font-weight:700>=</span>admin,active
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// å®ç°ç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>app.get(<span style=color:#a5d6ff>&#39;/api/v1/users&#39;</span>, <span style=color:#ff7b72>async</span> (req, res) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> filters <span style=color:#ff7b72;font-weight:700>=</span> {};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ç²¾ç¡®åŒ¹é…
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>if</span> (req.query.age) {
</span></span><span style=display:flex><span>    filters.age <span style=color:#ff7b72;font-weight:700>=</span> parseInt(req.query.age);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// èŒƒå›´æŸ¥è¯¢
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>if</span> (req.query.age_min <span style=color:#ff7b72;font-weight:700>||</span> req.query.age_max) {
</span></span><span style=display:flex><span>    filters.age <span style=color:#ff7b72;font-weight:700>=</span> {};
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (req.query.age_min) {
</span></span><span style=display:flex><span>      filters.age.$gte <span style=color:#ff7b72;font-weight:700>=</span> parseInt(req.query.age_min);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (req.query.age_max) {
</span></span><span style=display:flex><span>      filters.age.$lte <span style=color:#ff7b72;font-weight:700>=</span> parseInt(req.query.age_max);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// æ¨¡ç³ŠæŸ¥è¯¢
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>if</span> (req.query.name) {
</span></span><span style=display:flex><span>    filters.name <span style=color:#ff7b72;font-weight:700>=</span> { $regex<span style=color:#ff7b72;font-weight:700>:</span> req.query.name, $options<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;i&#39;</span> };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// å¤šå€¼æŸ¥è¯¢
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>if</span> (req.query.tags) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> tags <span style=color:#ff7b72;font-weight:700>=</span> req.query.tags.split(<span style=color:#a5d6ff>&#39;,&#39;</span>);
</span></span><span style=display:flex><span>    filters.tags <span style=color:#ff7b72;font-weight:700>=</span> { $in<span style=color:#ff7b72;font-weight:700>:</span> tags };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> users <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> User.find(filters);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  res.json({ success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>, data<span style=color:#ff7b72;font-weight:700>:</span> users });
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h2 id=è®¤è¯å’Œæˆæƒ>è®¤è¯å’Œæˆæƒ<a hidden class=anchor aria-hidden=true href=#è®¤è¯å’Œæˆæƒ>#</a></h2><h3 id=1-jwt-è®¤è¯>1. JWT è®¤è¯<a hidden class=anchor aria-hidden=true href=#1-jwt-è®¤è¯>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ç”Ÿæˆ token
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> generateToken <span style=color:#ff7b72;font-weight:700>=</span> (user) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> jwt.sign(
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      userId<span style=color:#ff7b72;font-weight:700>:</span> user.id,
</span></span><span style=display:flex><span>      email<span style=color:#ff7b72;font-weight:700>:</span> user.email,
</span></span><span style=display:flex><span>      role<span style=color:#ff7b72;font-weight:700>:</span> user.role
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    process.env.JWT_SECRET,
</span></span><span style=display:flex><span>    { expiresIn<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;24h&#39;</span> }
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è®¤è¯ä¸­é—´ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> authenticateToken <span style=color:#ff7b72;font-weight:700>=</span> (req, res, next) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> authHeader <span style=color:#ff7b72;font-weight:700>=</span> req.headers[<span style=color:#a5d6ff>&#39;authorization&#39;</span>];
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> token <span style=color:#ff7b72;font-weight:700>=</span> authHeader <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> authHeader.split(<span style=color:#a5d6ff>&#39; &#39;</span>)[<span style=color:#a5d6ff>1</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>token) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> res.status(<span style=color:#a5d6ff>401</span>).json({
</span></span><span style=display:flex><span>      success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>,
</span></span><span style=display:flex><span>      error<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        code<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;TOKEN_MISSING&#39;</span>,
</span></span><span style=display:flex><span>        message<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Access token is required&#39;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  jwt.verify(token, process.env.JWT_SECRET, (err, user) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (err) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> res.status(<span style=color:#a5d6ff>401</span>).json({
</span></span><span style=display:flex><span>        success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>,
</span></span><span style=display:flex><span>        error<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>          code<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;TOKEN_INVALID&#39;</span>,
</span></span><span style=display:flex><span>          message<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Invalid or expired token&#39;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    req.user <span style=color:#ff7b72;font-weight:700>=</span> user;
</span></span><span style=display:flex><span>    next();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h3 id=2-æˆæƒä¸­é—´ä»¶>2. æˆæƒä¸­é—´ä»¶<a hidden class=anchor aria-hidden=true href=#2-æˆæƒä¸­é—´ä»¶>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è§’è‰²æˆæƒ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> authorize <span style=color:#ff7b72;font-weight:700>=</span> (...roles) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (req, res, next) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>roles.includes(req.user.role)) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> res.status(<span style=color:#a5d6ff>403</span>).json({
</span></span><span style=display:flex><span>        success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>,
</span></span><span style=display:flex><span>        error<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>          code<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;INSUFFICIENT_PERMISSIONS&#39;</span>,
</span></span><span style=display:flex><span>          message<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;You do not have permission to perform this action&#39;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    next();
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// èµ„æºæ‰€æœ‰æƒæ£€æŸ¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> checkOwnership <span style=color:#ff7b72;font-weight:700>=</span> (resourceModel) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>async</span> (req, res, next) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> resource <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> resourceModel.findById(req.params.id);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>resource) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> res.status(<span style=color:#a5d6ff>404</span>).json({
</span></span><span style=display:flex><span>          success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>,
</span></span><span style=display:flex><span>          error<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>            code<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;RESOURCE_NOT_FOUND&#39;</span>,
</span></span><span style=display:flex><span>            message<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;Resource not found&#39;</span>
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (resource.userId.toString() <span style=color:#ff7b72;font-weight:700>!==</span> req.user.userId <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> req.user.role <span style=color:#ff7b72;font-weight:700>!==</span> <span style=color:#a5d6ff>&#39;admin&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> res.status(<span style=color:#a5d6ff>403</span>).json({
</span></span><span style=display:flex><span>          success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>,
</span></span><span style=display:flex><span>          error<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>            code<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;ACCESS_DENIED&#39;</span>,
</span></span><span style=display:flex><span>            message<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;You can only access your own resources&#39;</span>
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      req.resource <span style=color:#ff7b72;font-weight:700>=</span> resource;
</span></span><span style=display:flex><span>      next();
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      next(error);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨ç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>app.<span style=color:#ff7b72>delete</span>(
</span></span><span style=display:flex><span>  <span style=color:#a5d6ff>&#39;/api/v1/users/:id&#39;</span>,
</span></span><span style=display:flex><span>  authenticateToken,
</span></span><span style=display:flex><span>  checkOwnership(User),
</span></span><span style=display:flex><span>  (req, res) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// åˆ é™¤é€»è¾‘
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  }
</span></span><span style=display:flex><span>);
</span></span></code></pre></td></tr></table></div></div><h2 id=ç¼“å­˜ç­–ç•¥>ç¼“å­˜ç­–ç•¥<a hidden class=anchor aria-hidden=true href=#ç¼“å­˜ç­–ç•¥>#</a></h2><h3 id=1-http-ç¼“å­˜å¤´>1. HTTP ç¼“å­˜å¤´<a hidden class=anchor aria-hidden=true href=#1-http-ç¼“å­˜å¤´>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// è®¾ç½®ç¼“å­˜å¤´
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> setCacheHeaders <span style=color:#ff7b72;font-weight:700>=</span> (req, res, next) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// å…¬å…±ç¼“å­˜ï¼Œ1å°æ—¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>if</span> (req.path.startsWith(<span style=color:#a5d6ff>&#39;/api/v1/public/&#39;</span>)) {
</span></span><span style=display:flex><span>    res.set(<span style=color:#a5d6ff>&#39;Cache-Control&#39;</span>, <span style=color:#a5d6ff>&#39;public, max-age=3600&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ç§æœ‰ç¼“å­˜ï¼Œ5åˆ†é’Ÿ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>else</span> <span style=color:#ff7b72>if</span> (req.path.startsWith(<span style=color:#a5d6ff>&#39;/api/v1/users/profile&#39;</span>)) {
</span></span><span style=display:flex><span>    res.set(<span style=color:#a5d6ff>&#39;Cache-Control&#39;</span>, <span style=color:#a5d6ff>&#39;private, max-age=300&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ä¸ç¼“å­˜
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>else</span> {
</span></span><span style=display:flex><span>    res.set(<span style=color:#a5d6ff>&#39;Cache-Control&#39;</span>, <span style=color:#a5d6ff>&#39;no-cache, no-store, must-revalidate&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// ETag
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>if</span> (req.method <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;GET&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> data <span style=color:#ff7b72;font-weight:700>=</span> JSON.stringify(res.locals.data);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> etag <span style=color:#ff7b72;font-weight:700>=</span> require(<span style=color:#a5d6ff>&#39;crypto&#39;</span>).createHash(<span style=color:#a5d6ff>&#39;md5&#39;</span>).update(data).digest(<span style=color:#a5d6ff>&#39;hex&#39;</span>);
</span></span><span style=display:flex><span>    res.set(<span style=color:#a5d6ff>&#39;ETag&#39;</span>, etag);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (req.headers[<span style=color:#a5d6ff>&#39;if-none-match&#39;</span>] <span style=color:#ff7b72;font-weight:700>===</span> etag) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> res.status(<span style=color:#a5d6ff>304</span>).end();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  next();
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h3 id=2-redis-ç¼“å­˜>2. Redis ç¼“å­˜<a hidden class=anchor aria-hidden=true href=#2-redis-ç¼“å­˜>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">61
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff7b72>const</span> redis <span style=color:#ff7b72;font-weight:700>=</span> require(<span style=color:#a5d6ff>&#39;redis&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> client <span style=color:#ff7b72;font-weight:700>=</span> redis.createClient();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> cache <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>  get<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>async</span> (key) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> data <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> client.get(key);
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> data <span style=color:#ff7b72;font-weight:700>?</span> JSON.parse(data) <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>null</span>;
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> <span style=color:#79c0ff>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  set<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>async</span> (key, data, ttl <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>3600</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>await</span> client.setex(key, ttl, JSON.stringify(data));
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      console.error(<span style=color:#a5d6ff>&#39;Cache set error:&#39;</span>, error);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  del<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>async</span> (key) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>await</span> client.del(key);
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      console.error(<span style=color:#a5d6ff>&#39;Cache delete error:&#39;</span>, error);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ç¼“å­˜ä¸­é—´ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> cacheMiddleware <span style=color:#ff7b72;font-weight:700>=</span> (ttl <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>3600</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>async</span> (req, res, next) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> key <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`cache:</span><span style=color:#a5d6ff>${</span>req.originalUrl<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// å°è¯•ä»ç¼“å­˜è·å–
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> cachedData <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> cache.get(key);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (cachedData) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> res.json({
</span></span><span style=display:flex><span>        ...cachedData,
</span></span><span style=display:flex><span>        cached<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// é‡å†™ res.json ä»¥ç¼“å­˜å“åº”
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> originalJson <span style=color:#ff7b72;font-weight:700>=</span> res.json;
</span></span><span style=display:flex><span>    res.json <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>function</span>(data) {
</span></span><span style=display:flex><span>      cache.set(key, data, ttl);
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> originalJson.call(<span style=color:#ff7b72>this</span>, data);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    next();
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨ç¤ºä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>app.get(<span style=color:#a5d6ff>&#39;/api/v1/users&#39;</span>, cacheMiddleware(<span style=color:#a5d6ff>300</span>), <span style=color:#ff7b72>async</span> (req, res) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> users <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> User.find();
</span></span><span style=display:flex><span>  res.json({ success<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>, data<span style=color:#ff7b72;font-weight:700>:</span> users });
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h2 id=api-æ–‡æ¡£>API æ–‡æ¡£<a hidden class=anchor aria-hidden=true href=#api-æ–‡æ¡£>#</a></h2><h3 id=1-swaggeropenapi-é…ç½®>1. Swagger/OpenAPI é…ç½®<a hidden class=anchor aria-hidden=true href=#1-swaggeropenapi-é…ç½®>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">95
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8b949e;font-style:italic># swagger.yaml</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>openapi</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>3.0.0</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>info</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>title</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>User API</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>version</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>1.0.0</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>description</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>ç”¨æˆ·ç®¡ç† API</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>paths</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>/api/v1/users</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>get</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>summary</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>è·å–ç”¨æˆ·åˆ—è¡¨</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>tags</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span>- <span style=color:#a5d6ff>Users</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>parameters</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span>- <span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>page</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>in</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>query</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>schema</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>            </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>integer</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>            </span><span style=color:#7ee787>minimum</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>            </span><span style=color:#7ee787>default</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span>- <span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>limit</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>in</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>query</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>schema</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>            </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>integer</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>            </span><span style=color:#7ee787>minimum</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>            </span><span style=color:#7ee787>maximum</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>100</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>            </span><span style=color:#7ee787>default</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>20</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>responses</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>&#39;200&#39;</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>description</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>æˆåŠŸè¿”å›ç”¨æˆ·åˆ—è¡¨</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>content</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>            </span><span style=color:#7ee787>application/json</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>              </span><span style=color:#7ee787>schema</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>                </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>object</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>                </span><span style=color:#7ee787>properties</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>                  </span><span style=color:#7ee787>success</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>                    </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>boolean</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>                  </span><span style=color:#7ee787>data</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>                    </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>array</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>                    </span><span style=color:#7ee787>items</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>                      </span><span style=color:#7ee787>$ref</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#39;#/components/schemas/User&#39;</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>                  </span><span style=color:#7ee787>pagination</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>                    </span><span style=color:#7ee787>$ref</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#39;#/components/schemas/Pagination&#39;</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>post</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>summary</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>åˆ›å»ºæ–°ç”¨æˆ·</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>tags</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span>- <span style=color:#a5d6ff>Users</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>requestBody</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>required</span>:<span style=color:#6e7681> </span><span style=color:#79c0ff>true</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>content</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>application/json</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>            </span><span style=color:#7ee787>schema</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>              </span><span style=color:#7ee787>$ref</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#39;#/components/schemas/CreateUserRequest&#39;</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>responses</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>&#39;201&#39;</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>description</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>ç”¨æˆ·åˆ›å»ºæˆåŠŸ</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>&#39;400&#39;</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>description</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>è¯·æ±‚å‚æ•°é”™è¯¯</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>&#39;409&#39;</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>description</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>ç”¨æˆ·å·²å­˜åœ¨</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>components</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>schemas</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>User</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>object</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>properties</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>id</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>string</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>string</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>email</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>string</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>format</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>email</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>createdAt</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>string</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>format</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>date-time</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>CreateUserRequest</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>object</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>required</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span>- <span style=color:#a5d6ff>name</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span>- <span style=color:#a5d6ff>email</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>properties</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>string</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>minLength</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>2</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>maxLength</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>50</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>email</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>string</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>format</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>email</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>age</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>type</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>integer</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>minimum</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>0</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>          </span><span style=color:#7ee787>maximum</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>120</span><span style=color:#6e7681>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=æ€»ç»“>æ€»ç»“<a hidden class=anchor aria-hidden=true href=#æ€»ç»“>#</a></h2><p>RESTful API è®¾è®¡çš„æœ€ä½³å®è·µï¼š</p><ol><li><strong>èµ„æºå¯¼å‘</strong>ï¼šä½¿ç”¨åè¯è€ŒéåŠ¨è¯ï¼Œéµå¾ª REST åŸåˆ™</li><li><strong>URL è®¾è®¡</strong>ï¼šæ¸…æ™°ã€ä¸€è‡´ã€å¯é¢„æµ‹çš„ URL ç»“æ„</li><li><strong>HTTP æ–¹æ³•</strong>ï¼šæ­£ç¡®ä½¿ç”¨ HTTP åŠ¨è¯å’ŒçŠ¶æ€ç </li><li><strong>æ•°æ®æ ¼å¼</strong>ï¼šç»Ÿä¸€çš„è¯·æ±‚å’Œå“åº”æ ¼å¼</li><li><strong>éªŒè¯è¿‡æ»¤</strong>ï¼šä¸¥æ ¼çš„è¾“å…¥éªŒè¯å’Œçµæ´»çš„æ•°æ®è¿‡æ»¤</li><li><strong>è®¤è¯æˆæƒ</strong>ï¼šå®‰å…¨çš„èº«ä»½éªŒè¯å’Œç»†ç²’åº¦çš„æƒé™æ§åˆ¶</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåˆç†çš„ç¼“å­˜ç­–ç•¥å’Œåˆ†é¡µæœºåˆ¶</li><li><strong>æ–‡æ¡£å®Œå–„</strong>ï¼šæ¸…æ™°ã€è¯¦ç»†çš„ API æ–‡æ¡£</li></ol><p>éµå¾ªè¿™äº›å®è·µï¼Œå¯ä»¥æ„å»ºå‡ºæ˜“äºç†è§£ã€ä½¿ç”¨å’Œç»´æŠ¤çš„ API æ¥å£ã€‚</p><hr><p><strong>ç›¸å…³å·¥å…·ï¼š</strong></p><ul><li><a href=https://www.postman.com/>Postman API æµ‹è¯•</a></li><li><a href=https://editor.swagger.io/>Swagger Editor</a></li><li><a href=https://www.util.cn/tools/api-doc/>API æ–‡æ¡£ç”Ÿæˆå™¨</a></li></ul></div><footer class=post-footer-modern><div class=post-tags-modern><span class=tags-label>ğŸ·ï¸ æ ‡ç­¾</span><div class=tags-list><a href=/blog/tags/api%E8%AE%BE%E8%AE%A1/ class=tag-pill>APIè®¾è®¡
</a><a href=/blog/tags/restful/ class=tag-pill>RESTful
</a><a href=/blog/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/ class=tag-pill>åç«¯å¼€å‘
</a><a href=/blog/tags/%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83/ class=tag-pill>æ¥å£è§„èŒƒ</a></div></div><style>.post-footer-modern{margin-top:3rem;padding-top:2rem;border-top:1px solid var(--border,#333333)}.post-tags-modern{display:flex;align-items:center;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.tags-label{font-size:.875rem;font-weight:600;color:var(--secondary,#999999) !important;white-space:nowrap}.tags-list{display:flex;flex-wrap:wrap;gap:.5rem;flex:1}.tag-pill{display:inline-block;padding:.25rem .75rem;background:rgba(255,255,255,5%);border:1px solid var(--border,#333333);border-radius:0;color:var(--secondary,#cccccc) !important;text-decoration:none;font-size:.8rem;font-weight:500;transition:all .2s ease}.tag-pill:hover{background:var(--primary,#ffffff);color:var(--background,#000000) !important;border-color:var(--primary,#ffffff);transform:translateY(-1px)}.post-nav-modern{margin-top:2rem}.nav-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.nav-card{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:rgba(255,255,255,2%);border:1px solid var(--border,#333333);border-radius:12px;text-decoration:none;transition:all .2s ease;min-height:80px}.nav-card:hover{background:rgba(255,255,255,5%);border-color:var(--primary,#ffffff);transform:translateY(-2px)}.nav-card.nav-prev{justify-content:flex-start}.nav-card.nav-next{justify-content:flex-end;text-align:right}.nav-card.nav-next .nav-content{text-align:right}.nav-empty{display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,1%);border:1px dashed var(--border,#333333);color:var(--secondary,#666666)}.nav-arrow{font-size:1.5rem;color:var(--primary,#ffffff);font-weight:300}.nav-content{flex:1}.nav-title{font-size:.95rem;font-weight:600;color:var(--primary,#ffffff) !important;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}[data-theme=light] .post-footer-modern{border-color:var(--border-light,#dee2e6)}[data-theme=light] .tags-label{color:var(--secondary-light,#6c757d) !important}[data-theme=light] .tag-pill{background:rgba(0,0,0,5%);border-color:var(--border-light,#dee2e6);color:var(--secondary-light,#495057) !important}[data-theme=light] .tag-pill:hover{background:var(--primary-light,#0066cc);color:var(--background-light,#ffffff) !important;border-color:var(--primary-light,#0066cc)}[data-theme=light] .nav-card{background:rgba(0,0,0,2%);border-color:var(--border-light,#dee2e6)}[data-theme=light] .nav-card:hover{background:rgba(0,102,204,5%);border-color:var(--primary-light,#0066cc)}[data-theme=light] .nav-empty{background:rgba(0,0,0,1%);border-color:var(--border-light,#dee2e6);color:var(--secondary-light,#6c757d)}[data-theme=light] .nav-arrow{color:var(--primary-light,#0066cc)}[data-theme=light] .nav-title{color:var(--primary-light,#212529) !important}@media(max-width:768px){.nav-grid{grid-template-columns:1fr;gap:.75rem}.nav-card{padding:1rem;min-height:70px}.nav-card.nav-next{text-align:left}.nav-card.nav-next .nav-content{text-align:left}.nav-title{font-size:.875rem}.post-tags-modern{flex-direction:column;gap:.75rem}}@media(max-width:480px){.nav-arrow{font-size:1.25rem}.nav-card{padding:.875rem}.nav-title{font-size:.8rem;-webkit-line-clamp:1}}</style><nav class=post-nav-modern><div class=nav-grid><div class="nav-card nav-empty"><div class=nav-content><div class=nav-title>å·²æ˜¯ç¬¬ä¸€ç¯‡</div></div></div><a href=/blog/articles/docker-containerization-guide/ class="nav-card nav-next"><div class=nav-content><div class=nav-title>Docker å®¹å™¨åŒ–éƒ¨ç½²å®Œå…¨æŒ‡å—</div></div><div class=nav-arrow>â†’</div></a></div></nav></footer></main><aside class=post-sidebar><div class=sidebar-toc id=sidebar-toc><div class=toc-header><div class=toc-title>ç›®å½•</div><button class=toc-toggle id=toc-toggle aria-label="Toggle TOC">
<svg class="toc-toggle-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg></button></div><div class=toc-content id=toc-content><ul class=toc-list><li class="toc-item toc-h2"><a href=#h2-0 class=toc-item-link><span class=toc-item-text>å‰è¨€</span></a></li><li class="toc-item toc-h2"><a href=#h2-1 class=toc-item-link><span class=toc-item-text>RESTful åŸºç¡€åŸåˆ™</span></a></li><li class="toc-item toc-h2"><a href=#h2-2 class=toc-item-link><span class=toc-item-text>URL è®¾è®¡è§„èŒƒ</span></a></li><li class="toc-item toc-h2"><a href=#h2-3 class=toc-item-link><span class=toc-item-text>è¯·æ±‚å’Œå“åº”è®¾è®¡</span></a></li><li class="toc-item toc-h2"><a href=#h2-4 class=toc-item-link><span class=toc-item-text>çŠ¶æ€ç ä½¿ç”¨æŒ‡å—</span></a></li><li class="toc-item toc-h2"><a href=#h2-5 class=toc-item-link><span class=toc-item-text>æ•°æ®éªŒè¯å’Œè¿‡æ»¤</span></a></li><li class="toc-item toc-h2"><a href=#h2-6 class=toc-item-link><span class=toc-item-text>åˆ†é¡µã€æ’åºå’Œè¿‡æ»¤</span></a></li><li class="toc-item toc-h2"><a href=#h2-7 class=toc-item-link><span class=toc-item-text>è®¤è¯å’Œæˆæƒ</span></a></li><li class="toc-item toc-h2"><a href=#h2-8 class=toc-item-link><span class=toc-item-text>ç¼“å­˜ç­–ç•¥</span></a></li><li class="toc-item toc-h2"><a href=#h2-9 class=toc-item-link><span class=toc-item-text>API æ–‡æ¡£</span></a></li><li class="toc-item toc-h2"><a href=#h2-10 class=toc-item-link><span class=toc-item-text>æ€»ç»“</span></a></li></ul></div></div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("sidebar-toc"),t=document.getElementById("toc-toggle"),o=document.getElementById("toc-content"),i=t?.querySelector(".toc-toggle-icon");if(!e)return;let n=!1;t&&t.addEventListener("click",function(){n=!n,n?(o.style.display="none",e.style.width="auto",i.innerHTML='<path d="M9 18l6-6-6-6"/>'):(o.style.display="block",e.style.width="200px",i.innerHTML='<path d="M18 6L6 18M6 6l12 12"/>')});const s=document.querySelector(".post-content");if(s){const e=s.querySelectorAll("h1");e.forEach((e,t)=>{e.id=`h1-${t}`});const t=s.querySelectorAll("h2");t.forEach((e,t)=>{e.id=`h2-${t}`})}const a=document.querySelectorAll(".toc-item-link");a.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const n=this.getAttribute("href").substring(1),t=document.getElementById(n);if(t){const e=document.querySelector(".post-header-main")?.offsetHeight||0,n=t.offsetTop-e-20;window.scrollTo({top:n,behavior:"smooth"})}})})})</script><style>.sidebar-toc{position:sticky;top:2rem;width:200px;background:#fff;border:1px solid #e5e7eb;border-radius:4px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.1);z-index:100}.sidebar-toc.hidden{display:none}.toc-header{padding:12px 16px;border-bottom:1px solid #e5e7eb;background:#fafbfc;display:flex;align-items:center;justify-content:space-between}.toc-title{margin:0;font-size:13px;font-weight:500;color:#374151 !important;font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,sans-serif;text-transform:uppercase;letter-spacing:1px}.toc-toggle{background:0 0;border:none;cursor:pointer;padding:4px;border-radius:4px;display:flex;align-items:center;justify-content:center;transition:all .2s ease;color:#6b7280}.toc-toggle:hover{background:#e5e7eb;color:#374151}.toc-toggle-icon{transition:transform .2s ease}.toc-content{padding:12px 0}.toc-list{list-style:none;margin:0;padding:0}.toc-item{margin-bottom:4px;display:block !important;visibility:visible !important}.toc-h1,.toc-h2{display:block !important}.toc-h2{margin-left:0}.toc-item-link{display:flex;align-items:center;gap:8px;padding:8px 12px;color:#374151 !important;text-decoration:none;font-size:13px;line-height:1.4;border-radius:3px;transition:all .2s ease;font-weight:400}.toc-item-link:hover{background:#f8fafc;color:#1f2937 !important}.toc-item-link.active{background:#e0f2fe;color:#01579b !important;font-weight:500}.toc-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}.dot-red{background:#ef4444}.dot-blue{background:#2196f3}.toc-item-text{color:#1f2937 !important;font-weight:400;flex:1;display:inline !important;visibility:visible !important;opacity:1 !important;font-size:13px !important;line-height:1.4 !important}.toc-item-link .toc-item-text{color:#1f2937 !important;display:inline !important;visibility:visible !important;opacity:1 !important}.toc-item.active .dot-red{background:#d32f2f}.toc-item.active .dot-blue{background:#1976d2}[data-theme=dark] .sidebar-toc{background:#1f2937;border-color:#374151;box-shadow:0 1px 3px rgba(0,0,0,.3)}[data-theme=dark] .toc-header{background:#111827;border-color:#374151}[data-theme=dark] .toc-title{color:#f3f4f6 !important}[data-theme=dark] .toc-toggle{color:#9ca3af}[data-theme=dark] .toc-toggle:hover{background:#374151;color:#f3f4f6}[data-theme=dark] .toc-item-link{color:#e5e7eb !important}[data-theme=dark] .toc-item-link:hover{background:#374151;color:#f9fafb !important}[data-theme=dark] .toc-item-link.active{background:#0d47a1;color:#fff !important}[data-theme=dark] .toc-item-text{color:#f9fafb !important;display:inline !important;visibility:visible !important;opacity:1 !important}[data-theme=dark] .toc-item-link .toc-item-text{color:#f9fafb !important;display:inline !important;visibility:visible !important;opacity:1 !important}@media(max-width:1024px){.sidebar-toc{display:none}.post-content-wrapper{grid-template-columns:1fr !important;padding:0 1rem !important}}</style><style>.post-content-wrapper{display:grid;grid-template-columns:1fr 200px;gap:2rem;padding:0 2rem;max-width:100%}.post-content-main{min-width:0}.post-sidebar{position:sticky;top:2rem;height:fit-content;min-width:0}.post-header-main{margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border,#333333)}.post-header-main .post-title{color:var(--primary,#ffffff) !important;font-size:2.5rem;font-weight:700;line-height:1.2;margin-bottom:1rem}.post-header-main .post-description{color:var(--secondary,#cccccc) !important;font-size:1.1rem;line-height:1.6;margin-bottom:1rem}.post-header-main .post-meta{margin-bottom:0}@media(max-width:1024px){.post-content-wrapper{grid-template-columns:1fr !important;gap:1rem;padding:0 1rem !important}.post-sidebar{display:none}}@media(max-width:768px){.post-header-main .post-title{font-size:2rem}.post-header-main .post-description{font-size:1rem}}</style></aside></div></article></main><footer class=footer><span>Â© 2024-2025 æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢</span> Â·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>