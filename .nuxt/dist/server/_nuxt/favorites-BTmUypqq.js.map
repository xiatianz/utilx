{"version":3,"file":"favorites-BTmUypqq.js","sources":["../../../../src/pages/favorites.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-8xl mx-auto py-8\">\n    <div class=\"mb-8 flex items-center justify-between\">\n      <div>\n        <h1 class=\"text-3xl font-bold text-foreground mb-2 flex items-center gap-2\">\n          <Heart class=\"w-8 h-8 text-red-500 fill-current\" />\n          我的收藏\n        </h1>\n        <p class=\"text-muted-foreground\">您收藏的实用工具 · 拖拽卡片可调整顺序</p>\n      </div>\n      <div class=\"flex items-center gap-2 text-sm text-muted-foreground\">\n        <GripVertical class=\"w-4 h-4\" />\n        <span>拖拽排序</span>\n      </div>\n    </div>\n\n    <!-- 收藏的工具 -->\n    <section>\n      <div v-if=\"favoriteTools.length > 0\">\n        <div\n          ref=\"sortableContainer\"\n          class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\"\n        >\n          <div\n            v-for=\"tool in favoriteTools\"\n            :key=\"tool.id\"\n            :data-id=\"tool.id\"\n            class=\"sortable-item\"\n          >\n            <ToolCard\n              :tool=\"tool\"\n              :title=\"tool.name\"\n              :description=\"tool.description\"\n              :category=\"tool.category\"\n              :usage-count=\"formatViewCount(tool.viewCount)\"\n              :icon=\"tool.icon\"\n              :is-draggable=\"true\"\n              @select=\"handleToolSelect\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <!-- 空状态 -->\n      <div\n        v-else\n        class=\"text-center py-12\"\n      >\n        <div class=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4\">\n          <Heart class=\"w-8 h-8 text-muted-foreground\" />\n        </div>\n        <h3 class=\"text-lg font-medium text-foreground\">暂无收藏</h3>\n        <p class=\"text-muted-foreground mt-2\">您还没有收藏任何工具，快去探索吧！</p>\n        <NuxtLink\n          to=\"/explore\"\n          class=\"inline-flex items-center gap-2 mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors\"\n        >\n          <Compass class=\"w-4 h-4\" />\n          去探索\n        </NuxtLink>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, nextTick } from 'vue'\nimport { useRouter } from 'vue-router'\nimport {\n  Heart, Compass, GripVertical,\n  FileJson, Database, Link, Hash, Timer, Regex, FileDiff,\n  Globe, FolderOpen, GitBranch, Type, Wifi, Image, Code,\n  Shield, Layout, Clock, Lock\n} from 'lucide-vue-next'\nimport { useSortable } from '@vueuse/integrations/useSortable'\nimport Sortable from 'sortablejs'\nimport { tools } from '~/data/tools'\nimport { getFavoriteTools, initToolsData, addRecentTool } from '~/composables/useTools'\nimport { useSEO } from '~/composables/useSEO'\nimport ToolCard from '~/components/ToolCard.vue'\n\ndefinePageMeta({\n  layout: 'default'\n})\n\n// 使用SEO composable设置页面标题\nconst { setPageTitle } = useSEO()\nsetPageTitle('我的收藏')\n\n// 初始化工具数据\ninitToolsData()\n\nconst router = useRouter()\nconst sortableContainer = ref(null)\n\n// 图标映射\nconst iconMap = {\n  FileText: FileJson, Lock, Shield, Clock, Type, Wifi, Image, Code,\n  FileJson, Database, Link, Hash, Timer, Regex, FileDiff,\n  Globe, FolderOpen, GitBranch, Layout, Heart, Compass\n}\n\n// 获取收藏工具排序\nconst getFavoriteOrder = () => {\n  try {\n    const savedOrder = localStorage.getItem('favorite-tools-order')\n    return savedOrder ? JSON.parse(savedOrder) : []\n  } catch (error) {\n    console.warn('Failed to load favorite tools order:', error)\n    return []\n  }\n}\n\n// 保存收藏工具排序\nconst saveFavoriteOrder = (order) => {\n  try {\n    localStorage.setItem('favorite-tools-order', JSON.stringify(order))\n  } catch (error) {\n    console.warn('Failed to save favorite tools order:', error)\n  }\n}\n\n// 收藏的工具（支持排序）\nconst favoriteTools = computed(() => {\n  const favoriteIds = getFavoriteTools()\n  const savedOrder = getFavoriteOrder()\n\n  // 获取收藏的工具\n  const favoriteToolsList = favoriteIds\n    .map(id => tools.find(tool => tool.id === id))\n    .filter(Boolean)\n\n  // 按保存的顺序排序\n  if (savedOrder.length > 0) {\n    return favoriteToolsList.sort((a, b) => {\n      const aIndex = savedOrder.indexOf(a.id)\n      const bIndex = savedOrder.indexOf(b.id)\n\n      // 如果都在保存的顺序中，按保存的顺序排\n      if (aIndex !== -1 && bIndex !== -1) {\n        return aIndex - bIndex\n      }\n\n      // 如果只有一个在保存的顺序中，在保存顺序中的排在前面\n      if (aIndex !== -1) return -1\n      if (bIndex !== -1) return 1\n\n      // 如果都不在保存的顺序中，按原始顺序排\n      return favoriteIds.indexOf(a.id) - favoriteIds.indexOf(b.id)\n    })\n  }\n\n  return favoriteToolsList\n})\n\n// 格式化浏览量\nconst formatViewCount = (count) => {\n  if (count >= 10000) {\n    return `${(count / 10000).toFixed(1)}w+`\n  } else if (count >= 1000) {\n    return `${(count / 1000).toFixed(1)}k+`\n  }\n  return `${count}`\n}\n\n// 处理工具选择\nconst handleToolSelect = (tool) => {\n  // 获取工具URL\n  const toolUrl = `/tools/${tool.id}/`\n  // 跳转到具体工具页面\n  router.push(toolUrl)\n  // 添加到最近使用\n  addRecentTool(tool.id)\n}\n\n// 获取图标组件\nconst getIconComponent = (iconName) => {\n  return iconMap[iconName] || FileText\n}\n\n// 初始化拖拽排序\nonMounted(async () => {\n  await nextTick()\n\n  if (sortableContainer.value) {\n    useSortable(sortableContainer, favoriteTools, {\n      animation: 150,\n      ghostClass: 'sortable-ghost',\n      chosenClass: 'sortable-chosen',\n      dragClass: 'sortable-drag',\n      handle: '.sortable-item',\n      onUpdate: (event) => {\n        // 获取新的排序\n        const items = event.target.querySelectorAll('.sortable-item')\n        const newOrder = Array.from(items).map(item => item.dataset.id)\n\n        // 保存新的排序\n        saveFavoriteOrder(newOrder)\n\n        console.log('Favorite tools order updated:', newOrder)\n      }\n    })\n  }\n})\n</script>\n\n<style>\n.sortable-ghost {\n  opacity: 0.5;\n  transform: scale(0.95);\n}\n\n.sortable-chosen {\n  cursor: grabbing !important;\n}\n\n.sortable-chosen .tool-card {\n  transform: scale(1.02);\n  box-shadow: 0 10px 25px -5px rgb(0 0 0 / 0.2);\n  z-index: 1000;\n}\n\n.sortable-drag {\n  opacity: 0.8;\n  transform: rotate(5deg);\n}\n\n.sortable-item {\n  cursor: grab;\n}\n\n.sortable-item:active {\n  cursor: grabbing;\n}\n\n.tool-card {\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.sortable-item:hover .tool-card {\n  transform: translateY(-2px);\n}\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_unref","_ssrRenderList","_push","_parent","_createVNode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAsFA,UAAM,EAAE,aAAY,IAAK,OAAM;AAC/B,iBAAa,MAAM;AAGnB,kBAAa;AAEb,UAAM,SAAS,UAAS;AACE,QAAI,IAAI;AAUlC,UAAM,mBAAmB,MAAM;AAC7B,UAAI;AACF,cAAM,aAAa,aAAa,QAAQ,sBAAsB;AAC9D,eAAO,aAAa,KAAK,MAAM,UAAU,IAAI,CAAA;AAAA,MAC/C,SAAS,OAAO;AACd,gBAAQ,KAAK,wCAAwC,KAAK;AAC1D,eAAO,CAAA;AAAA,MACT;AAAA,IACF;AAYA,UAAM,gBAAgB,SAAS,MAAM;AACnC,YAAM,cAAc,iBAAgB;AACpC,YAAM,aAAa,iBAAgB;AAGnC,YAAM,oBAAoB,YACvB,IAAI,QAAM,MAAM,KAAK,UAAQ,KAAK,OAAO,EAAE,CAAC,EAC5C,OAAO,OAAO;AAGjB,UAAI,WAAW,SAAS,GAAG;AACzB,eAAO,kBAAkB,KAAK,CAAC,GAAG,MAAM;AACtC,gBAAM,SAAS,WAAW,QAAQ,EAAE,EAAE;AACtC,gBAAM,SAAS,WAAW,QAAQ,EAAE,EAAE;AAGtC,cAAI,WAAW,MAAM,WAAW,IAAI;AAClC,mBAAO,SAAS;AAAA,UAClB;AAGA,cAAI,WAAW,GAAI,QAAO;AAC1B,cAAI,WAAW,GAAI,QAAO;AAG1B,iBAAO,YAAY,QAAQ,EAAE,EAAE,IAAI,YAAY,QAAQ,EAAE,EAAE;AAAA,QAC7D,CAAC;AAAA,MACH;AAEA,aAAO;AAAA,IACT,CAAC;AAGD,UAAM,kBAAkB,CAAC,UAAU;AACjC,UAAI,SAAS,KAAO;AAClB,eAAO,IAAI,QAAQ,KAAO,QAAQ,CAAC,CAAC;AAAA,MACtC,WAAW,SAAS,KAAM;AACxB,eAAO,IAAI,QAAQ,KAAM,QAAQ,CAAC,CAAC;AAAA,MACrC;AACA,aAAO,GAAG,KAAK;AAAA,IACjB;AAGA,UAAM,mBAAmB,CAAC,SAAS;AAEjC,YAAM,UAAU,UAAU,KAAK,EAAE;AAEjC,aAAO,KAAK,OAAO;AAEnB,oBAAc,KAAK,EAAE;AAAA,IACvB;;;AA5KO,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAM,4BAAwB,MAAA,CAAA,CAAA,wIAAA;AAIpB,YAAAC,mBAAAC,MAAA,KAAA,GAAA,EAAA,OAAM,oCAAmC,GAAA,MAAA,OAAA,CAAA;;AAMpC,YAAAD,mBAAAC,MAAA,YAAA,GAAA,EAAA,OAAM,UAAS,GAAA,MAAA,OAAA,CAAA;;AAOpB,UAAA,cAAA,MAAc,SAAM,GAAA;;AAMVC,sBAAA,cAAA,QAAR,SAAI;qCAEV,WAAS,KAAK,EAAE,CAAA,yBAAA;;YAId;AAAA,YACA,OAAO,KAAK;AAAA,YACZ,aAAa,KAAK;AAAA,YAClB,UAAU,KAAK;AAAA,YACf,eAAa,gBAAgB,KAAK,SAAS;AAAA,YAC3C,MAAM,KAAK;AAAA,YACX,gBAAc;AAAA,YACd,UAAQ;AAAA;;;;;;AAYN,cAAAF,mBAAAC,MAAA,KAAA,GAAA,EAAA,OAAM,gCAA+B,GAAA,MAAA,OAAA,CAAA;;;UAK5C,IAAG;AAAA,UACH,OAAM;AAAA;2BAFR,CAMW,GAAAE,QAAAC,UAAA,aAAA;;AAFA,cAAAD,OAAAH,mBAAAC,MAAA,OAAA,GAAA,EAAA,OAAM,aAAS,MAAAG,UAAA,QAAA,CAAA;;;;gBAAxBC,YAA2BJ,MAAA,OAAA,GAAA,EAAlB,OAAM,UAAS,CAAA;AAAA,gCAAG,OAE7B;AAAA;;;;;;;;;;;;;;;;;"}