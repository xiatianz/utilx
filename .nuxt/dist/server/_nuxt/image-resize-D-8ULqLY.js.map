{"version":3,"file":"image-resize-D-8ULqLY.js","sources":["../../../../src/pages/tools/image-resize.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-8xl mx-auto\">\n    <!-- 面包屑导航 -->\n    <!-- <Breadcrumb :category=\"category\" /> -->\n\n    <!-- 工具标题 -->\n    <div class=\"mt-4 mb-8\">\n      <h1 class=\"text-3xl font-bold mb-3\">图片尺寸调整</h1>\n      <p class=\"text-muted-foreground\">在线调整图片尺寸，支持像素、百分比和预设尺寸</p>\n    </div>\n\n    <!-- 主要功能区域 -->\n    <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n      <!-- 左侧：上传和控制 -->\n      <div class=\"space-y-4\">\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">上传图片</h2>\n\n          <!-- 拖拽上传 -->\n          <div\n            class=\"border-2 border-dashed rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer\"\n            @drop=\"handleDrop\"\n            @dragover.prevent\n            @dragleave.prevent\n            @click=\"triggerFileInput\"\n          >\n            <input\n              ref=\"fileInput\"\n              type=\"file\"\n              class=\"hidden\"\n              accept=\"image/*\"\n              @change=\"handleFileSelect\"\n            />\n            <ImageIcon class=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\n            <p class=\"text-lg font-medium mb-2\">拖拽图片到这里</p>\n            <p class=\"text-sm text-muted-foreground\">或者点击选择文件</p>\n          </div>\n\n          <!-- 图片信息 -->\n          <div v-if=\"image\" class=\"mt-4 p-4 bg-muted rounded-lg\">\n            <div class=\"flex items-center gap-3 mb-3\">\n              <img :src=\"image.preview\" :alt=\"image.name\" class=\"w-16 h-16 object-cover rounded\" />\n              <div class=\"flex-1\">\n                <p class=\"font-medium truncate\">{{ image.name }}</p>\n                <p class=\"text-sm text-muted-foreground\">\n                  {{ image.originalWidth }} × {{ image.originalHeight }} px\n                </p>\n              </div>\n            </div>\n            <button\n              @click=\"clearImage\"\n              class=\"w-full px-3 py-2 text-sm text-destructive hover:bg-destructive/5 rounded-md transition-colors\"\n            >\n              移除图片\n            </button>\n          </div>\n        </div>\n\n        <!-- 尺寸设置 -->\n        <div v-if=\"image\" class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">尺寸设置</h2>\n\n          <div class=\"space-y-4\">\n            <!-- 调整模式 -->\n            <div>\n              <label class=\"text-sm font-medium\">调整模式</label>\n              <div class=\"mt-2 grid grid-cols-2 gap-2\">\n                <button\n                  v-for=\"mode in resizeModes\"\n                  :key=\"mode.value\"\n                  @click=\"resizeMode = mode.value\"\n                  :class=\"[\n                    'px-3 py-2 rounded-md transition-colors text-sm',\n                    resizeMode === mode.value\n                      ? 'bg-primary text-primary-foreground'\n                      : 'bg-muted hover:bg-muted/80'\n                  ]\"\n                >\n                  {{ mode.name }}\n                </button>\n              </div>\n            </div>\n\n            <!-- 尺寸输入 -->\n            <div class=\"grid grid-cols-2 gap-3\">\n              <div>\n                <label class=\"text-sm font-medium\">宽度</label>\n                <div class=\"relative\">\n                  <input\n                    v-model.number=\"width\"\n                    type=\"number\"\n                    min=\"1\"\n                    class=\"w-full px-3 py-2 pr-12 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n                    @input=\"handleSizeChange\"\n                  />\n                  <span class=\"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground\">px</span>\n                </div>\n              </div>\n              <div>\n                <label class=\"text-sm font-medium\">高度</label>\n                <div class=\"relative\">\n                  <input\n                    v-model.number=\"height\"\n                    type=\"number\"\n                    min=\"1\"\n                    class=\"w-full px-3 py-2 pr-12 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n                    @input=\"handleSizeChange\"\n                  />\n                  <span class=\"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground\">px</span>\n                </div>\n              </div>\n            </div>\n\n            <!-- 百分比调整 -->\n            <div>\n              <label class=\"text-sm font-medium\">百分比调整</label>\n              <div class=\"mt-2 flex items-center gap-2\">\n                <input\n                  v-model.number=\"percentage\"\n                  type=\"range\"\n                  min=\"10\"\n                  max=\"200\"\n                  step=\"5\"\n                  class=\"flex-1\"\n                  @input=\"handlePercentageChange\"\n                />\n                <span class=\"text-sm font-mono w-12 text-right\">{{ percentage }}%</span>\n              </div>\n            </div>\n\n            <!-- 锁定比例 -->\n            <label class=\"flex items-center gap-2\">\n              <input\n                v-model=\"lockAspectRatio\"\n                type=\"checkbox\"\n                class=\"rounded\"\n                checked\n              />\n              <span class=\"text-sm\">锁定宽高比</span>\n            </label>\n\n            <!-- 预设尺寸 -->\n            <div>\n              <label class=\"text-sm font-medium\">常用尺寸</label>\n              <div class=\"mt-2 grid grid-cols-2 gap-2\">\n                <button\n                  v-for=\"preset in sizePresets\"\n                  :key=\"preset.name\"\n                  @click=\"applyPreset(preset)\"\n                  class=\"px-3 py-2 bg-muted hover:bg-muted/80 rounded-md transition-colors text-sm\"\n                >\n                  {{ preset.name }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 右侧：预览和结果 -->\n      <div class=\"lg:col-span-2 space-y-4\">\n        <!-- 图片预览 -->\n        <div v-if=\"image\" class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">预览对比</h2>\n\n          <!-- 缩放控制 -->\n          <div class=\"mb-4 flex items-center gap-4\">\n            <label class=\"text-sm font-medium\">预览缩放</label>\n            <input\n              v-model=\"zoomLevel\"\n              type=\"range\"\n              min=\"10\"\n              max=\"100\"\n              step=\"10\"\n              class=\"flex-1\"\n            />\n            <span class=\"text-sm font-mono\">{{ zoomLevel }}%</span>\n          </div>\n\n          <!-- 对比视图 -->\n          <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n            <!-- 原图 -->\n            <div>\n              <h3 class=\"text-sm font-medium mb-2\">原图</h3>\n              <div class=\"border rounded-lg overflow-hidden bg-checkered\">\n                <img\n                  :src=\"image.preview\"\n                  :alt=\"image.name\"\n                  :style=\"{\n                    width: image.originalWidth * zoomLevel / 100 + 'px',\n                    height: 'auto',\n                    maxWidth: '100%'\n                  }\"\n                  class=\"block mx-auto\"\n                />\n              </div>\n              <p class=\"mt-2 text-sm text-muted-foreground\">\n                {{ image.originalWidth }} × {{ image.originalHeight }} px\n              </p>\n            </div>\n\n            <!-- 调整后 -->\n            <div>\n              <h3 class=\"text-sm font-medium mb-2\">调整后</h3>\n              <div class=\"border rounded-lg overflow-hidden bg-checkered\">\n                <img\n                  v-if=\"resizedUrl\"\n                  :src=\"resizedUrl\"\n                  :alt=\"image.name\"\n                  :style=\"{\n                    width: width * zoomLevel / 100 + 'px',\n                    height: 'auto',\n                    maxWidth: '100%'\n                  }\"\n                  class=\"block mx-auto\"\n                />\n                <div\n                  v-else\n                  class=\"flex items-center justify-center h-64 text-muted-foreground\"\n                >\n                  调整尺寸后预览将显示在这里\n                </div>\n              </div>\n              <p v-if=\"width && height\" class=\"mt-2 text-sm text-muted-foreground\">\n                {{ width }} × {{ height }} px\n                <span v-if=\"image.originalWidth !== width || image.originalHeight !== height\" class=\"ml-2 text-primary\">\n                  ({{ resizedPercentage }})\n                </span>\n              </p>\n            </div>\n          </div>\n\n          <!-- 操作按钮 -->\n          <div class=\"mt-6 flex gap-3\">\n            <button\n              @click=\"applyResize\"\n              :disabled=\"!width || !height || isProcessing\"\n              class=\"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2\"\n            >\n              <Settings v-if=\"isProcessing\" class=\"w-4 h-4 animate-spin\" />\n              {{ isProcessing ? '处理中...' : '应用调整' }}\n            </button>\n            <button\n              v-if=\"resizedUrl\"\n              @click=\"downloadResized\"\n              class=\"px-4 py-2 border border-primary text-primary rounded-md hover:bg-primary/5 transition-colors flex items-center gap-2\"\n            >\n              <Download class=\"w-4 h-4\" />\n              下载\n            </button>\n            <button\n              @click=\"reset\"\n              class=\"px-4 py-2 border border-muted text-muted-foreground rounded-md hover:bg-muted transition-colors flex items-center gap-2\"\n            >\n              <RotateCcw class=\"w-4 h-4\" />\n              重置\n            </button>\n          </div>\n        </div>\n\n        <!-- 批量处理 -->\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">批量处理</h2>\n          <p class=\"text-sm text-muted-foreground mb-4\">\n            上传多张图片，使用相同的设置批量调整尺寸\n          </p>\n\n          <div\n            class=\"border-2 border-dashed rounded-lg p-4 text-center hover:border-primary transition-colors cursor-pointer\"\n            @drop=\"handleBatchDrop\"\n            @dragover.prevent\n            @dragleave.prevent\n            @click=\"triggerBatchFileInput\"\n          >\n            <input\n              ref=\"batchFileInput\"\n              type=\"file\"\n              class=\"hidden\"\n              accept=\"image/*\"\n              multiple\n              @change=\"handleBatchSelect\"\n            />\n            <Plus class=\"w-8 h-8 mx-auto text-muted-foreground mb-2\" />\n            <p class=\"text-sm\">添加多张图片</p>\n          </div>\n\n          <!-- 批量列表 -->\n          <div v-if=\"batchImages.length > 0\" class=\"mt-4 space-y-2\">\n            <div class=\"flex justify-between items-center mb-2\">\n              <span class=\"text-sm font-medium\">{{ batchImages.length }} 张图片</span>\n              <div class=\"flex gap-2\">\n                <button\n                  @click=\"processBatch\"\n                  :disabled=\"isProcessingBatch\"\n                  class=\"px-3 py-1 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50\"\n                >\n                  {{ isProcessingBatch ? '处理中...' : '批量处理' }}\n                </button>\n                <button\n                  @click=\"clearBatch\"\n                  class=\"px-3 py-1 text-sm text-destructive hover:bg-destructive/5 rounded-md transition-colors\"\n                >\n                  清空\n                </button>\n              </div>\n            </div>\n\n            <div class=\"max-h-48 overflow-y-auto space-y-2\">\n              <div\n                v-for=\"(img, index) in batchImages\"\n                :key=\"img.id\"\n                class=\"flex items-center gap-3 p-2 bg-muted rounded-lg\"\n              >\n                <img :src=\"img.preview\" :alt=\"img.name\" class=\"w-10 h-10 object-cover rounded\" />\n                <div class=\"flex-1 min-w-0\">\n                  <p class=\"text-sm font-medium truncate\">{{ img.name }}</p>\n                  <p class=\"text-xs text-muted-foreground\">\n                    {{ img.width }} × {{ img.height }} → {{ width || '0' }} × {{ height || '0' }}\n                  </p>\n                </div>\n                <div class=\"text-xs text-muted-foreground\">\n                  {{ img.status }}\n                </div>\n              </div>\n            </div>\n\n            <button\n              v-if=\"batchProcessedCount > 0\"\n              @click=\"downloadAllBatch\"\n              class=\"w-full mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors\"\n            >\n              下载所有 ({{ batchProcessedCount }} 张)\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 使用说明 -->\n    <div class=\"mt-12 space-y-6\">\n      <div class=\"bg-card border-rounded p-6\">\n        <h3 class=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n          <Info class=\"w-5 h-5 text-primary\" />\n          使用说明\n        </h3>\n        <div class=\"space-y-4 text-sm text-muted-foreground\">\n          <div>\n            <h4 class=\"font-medium text-foreground mb-2\">调整模式说明</h4>\n            <ul class=\"list-disc list-inside space-y-1 ml-4\">\n              <li><strong>拉伸</strong>：强制调整到指定尺寸，可能变形</li>\n              <li><strong>适应</strong>：保持比例，适应指定尺寸，可能有空白</li>\n              <li><strong>裁剪</strong>：保持比例，裁剪到指定尺寸</li>\n              <li><strong>填充</strong>：保持比例，填充到指定尺寸</li>\n            </ul>\n          </div>\n          <div>\n            <h4 class=\"font-medium text-foreground mb-2\">使用提示</h4>\n            <ul class=\"list-disc list-inside space-y-1 ml-4\">\n              <li>锁定宽高比可保持图片不变形</li>\n              <li>支持批量处理，提高效率</li>\n              <li>预览功能帮助确认效果</li>\n              <li>处理速度取决于图片大小和数量</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <!-- 相关工具 -->\n      <div class=\"bg-card   rounded-lg p-6\">\n        <h3 class=\"text-lg font-semibold mb-4\">相关工具</h3>\n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <NuxtLink\n            to=\"/tools/image-crop\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Crop class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">图片裁剪</p>\n              <p class=\"text-xs text-muted-foreground\">在线裁剪图片</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n          <NuxtLink\n            to=\"/tools/image-compress\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Zap class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">图片压缩</p>\n              <p class=\"text-xs text-muted-foreground\">在线压缩图片</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n          <NuxtLink\n            to=\"/tools/image-watermark\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Droplet class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">图片水印</p>\n              <p class=\"text-xs text-muted-foreground\">添加文字/图片水印</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport { Info, ImageIcon, Download, RotateCcw, Settings, Plus, Crop, Zap, Droplet, ArrowRight } from 'lucide-vue-next'\nimport Breadcrumb from '~/components/Breadcrumb.vue'\nimport JSZip from 'jszip'\n\n// 分类信息\nconst category = { id: 'image', name: '图片处理', description: '图片处理工具集合' }\n\n// 状态管理\nconst image = ref(null)\nconst resizedUrl = ref(null)\nconst width = ref(null)\nconst height = ref(null)\nconst resizeMode = ref('fit')\nconst lockAspectRatio = ref(true)\nconst percentage = ref(100)\nconst zoomLevel = ref(50)\nconst isProcessing = ref(false)\nconst fileInput = ref(null)\nconst batchFileInput = ref(null)\nconst batchImages = ref([])\nconst isProcessingBatch = ref(false)\n\n// 调整模式\nconst resizeModes = [\n  { value: 'stretch', name: '拉伸' },\n  { value: 'fit', name: '适应' },\n  { value: 'crop', name: '裁剪' },\n  { value: 'fill', name: '填充' }\n]\n\n// 预设尺寸\nconst sizePresets = [\n  { name: '16:9 (1920×1080)', width: 1920, height: 1080 },\n  { name: '4:3 (1024×768)', width: 1024, height: 768 },\n  { name: '1:1 (1080×1080)', width: 1080, height: 1080 },\n  { name: '头像 (500×500)', width: 500, height: 500 },\n  { name: '缩略图 (150×150)', width: 150, height: 150 },\n  { name: '高清 (4K)', width: 3840, height: 2160 }\n]\n\n// 计算属性\nconst resizedPercentage = computed(() => {\n  if (!image.value || !width.value || !height.value) return ''\n  const areaDiff = (width.value * height.value) / (image.value.originalWidth * image.value.originalHeight)\n  return `${(areaDiff * 100).toFixed(1)}%`\n})\n\nconst batchProcessedCount = computed(() => {\n  return batchImages.value.filter(img => img.processedUrl).length\n})\n\n// 处理文件选择\nconst handleFileSelect = (e) => {\n  const file = e.target.files[0]\n  if (file && file.type.startsWith('image/')) {\n    processFile(file)\n  }\n}\n\n// 处理拖拽\nconst handleDrop = (e) => {\n  e.preventDefault()\n  const file = e.dataTransfer.files[0]\n  if (file && file.type.startsWith('image/')) {\n    processFile(file)\n  }\n}\n\n// 处理文件\nconst processFile = (file) => {\n  const reader = new FileReader()\n  reader.onload = (e) => {\n    const img = new Image()\n    img.onload = () => {\n      image.value = {\n        name: file.name,\n        file,\n        preview: e.target.result,\n        originalWidth: img.width,\n        originalHeight: img.height\n      }\n      width.value = img.width\n      height.value = img.height\n      resizedUrl.value = null\n    }\n    img.src = e.target.result\n  }\n  reader.readAsDataURL(file)\n}\n\n// 处理尺寸变化\nconst handleSizeChange = () => {\n  if (!image.value || !lockAspectRatio.value) return\n\n  const aspectRatio = image.value.originalWidth / image.value.originalHeight\n\n  // 根据最后输入的字段调整另一个字段\n  if (width.value && !height.value) {\n    height.value = Math.round(width.value / aspectRatio)\n  } else if (height.value && !width.value) {\n    width.value = Math.round(height.value * aspectRatio)\n  } else if (width.value && height.value) {\n    // 更新百分比\n    percentage.value = Math.round((width.value / image.value.originalWidth) * 100)\n  }\n}\n\n// 处理百分比变化\nconst handlePercentageChange = () => {\n  if (!image.value) return\n\n  const scale = percentage.value / 100\n  width.value = Math.round(image.value.originalWidth * scale)\n  height.value = Math.round(image.value.originalHeight * scale)\n}\n\n// 应用预设\nconst applyPreset = (preset) => {\n  width.value = preset.width\n  height.value = preset.height\n  if (image.value) {\n    percentage.value = Math.round((width.value / image.value.originalWidth) * 100)\n  }\n}\n\n// 应用调整\nconst applyResize = async () => {\n  if (!image.value || !width.value || !height.value) return\n\n  isProcessing.value = true\n\n  const canvas = document.createElement('canvas')\n  const ctx = canvas.getContext('2d')\n\n  canvas.width = width.value\n  canvas.height = height.value\n\n  const img = new Image()\n  img.onload = () => {\n    // 根据模式绘制图片\n    switch (resizeMode.value) {\n      case 'stretch':\n        ctx.drawImage(img, 0, 0, width.value, height.value)\n        break\n      case 'fit':\n        const scale = Math.min(width.value / img.width, height.value / img.height)\n        const fitWidth = img.width * scale\n        const fitHeight = img.height * scale\n        ctx.drawImage(img, (width.value - fitWidth) / 2, (height.value - fitHeight) / 2, fitWidth, fitHeight)\n        break\n      case 'crop':\n        const cropScale = Math.max(width.value / img.width, height.value / img.height)\n        const cropWidth = img.width * cropScale\n        const cropHeight = img.height * cropScale\n        ctx.drawImage(img, (width.value - cropWidth) / 2, (height.value - cropHeight) / 2, cropWidth, cropHeight)\n        break\n      case 'fill':\n        ctx.drawImage(img, 0, 0, width.value, height.value)\n        break\n    }\n\n    canvas.toBlob((blob) => {\n      if (resizedUrl.value) {\n        URL.revokeObjectURL(resizedUrl.value)\n      }\n      resizedUrl.value = URL.createObjectURL(blob)\n      isProcessing.value = false\n    }, 'image/png')\n  }\n  img.src = image.value.preview\n}\n\n// 下载调整后的图片\nconst downloadResized = () => {\n  if (!resizedUrl.value) return\n\n  const a = document.createElement('a')\n  a.href = resizedUrl.value\n  a.download = `resized_${image.value.name.split('.')[0]}.png`\n  a.click()\n}\n\n// 重置\nconst reset = () => {\n  if (image.value) {\n    width.value = image.value.originalWidth\n    height.value = image.value.originalHeight\n    percentage.value = 100\n    if (resizedUrl.value) {\n      URL.revokeObjectURL(resizedUrl.value)\n      resizedUrl.value = null\n    }\n  }\n}\n\n// 清空图片\nconst clearImage = () => {\n  if (resizedUrl.value) {\n    URL.revokeObjectURL(resizedUrl.value)\n  }\n  image.value = null\n  resizedUrl.value = null\n  width.value = null\n  height.value = null\n  percentage.value = 100\n}\n\n// 批量处理相关\nconst handleBatchSelect = (e) => {\n  const files = Array.from(e.target.files)\n  processBatchFiles(files)\n}\n\nconst handleBatchDrop = (e) => {\n  e.preventDefault()\n  const files = Array.from(e.dataTransfer.files)\n  processBatchFiles(files)\n}\n\nconst processBatchFiles = (files) => {\n  files.forEach(file => {\n    if (!file.type.startsWith('image/')) return\n\n    const reader = new FileReader()\n    reader.onload = (e) => {\n      const img = new Image()\n      img.onload = () => {\n        batchImages.value.push({\n          id: Date.now() + Math.random(),\n          name: file.name,\n          file,\n          preview: e.target.result,\n          width: img.width,\n          height: img.height,\n          status: '待处理',\n          processedUrl: null\n        })\n      }\n      img.src = e.target.result\n    }\n    reader.readAsDataURL(file)\n  })\n}\n\n// 批量处理\nconst processBatch = async () => {\n  if (!width.value || !height.value) return\n\n  isProcessingBatch.value = true\n\n  for (const batchImg of batchImages.value) {\n    batchImg.status = '处理中...'\n\n    const canvas = document.createElement('canvas')\n    const ctx = canvas.getContext('2d')\n    canvas.width = width.value\n    canvas.height = height.value\n\n    const img = new Image()\n    await new Promise(resolve => {\n      img.onload = () => {\n        ctx.drawImage(img, 0, 0, width.value, height.value)\n\n        canvas.toBlob((blob) => {\n          batchImg.processedUrl = URL.createObjectURL(blob)\n          batchImg.status = '完成'\n          resolve()\n        }, 'image/png')\n      }\n      img.src = batchImg.preview\n    })\n  }\n\n  isProcessingBatch.value = false\n}\n\n// 下载所有批量处理的图片\nconst downloadAllBatch = async () => {\n  const zip = new JSZip()\n\n  for (const img of batchImages.value) {\n    if (img.processedUrl) {\n      const response = await fetch(img.processedUrl)\n      const blob = await response.blob()\n      zip.file(`resized_${img.name}`, blob)\n    }\n  }\n\n  const zipBlob = await zip.generateAsync({ type: 'blob' })\n  const url = URL.createObjectURL(zipBlob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = `resized_images_${Date.now()}.zip`\n  a.click()\n  URL.revokeObjectURL(url)\n}\n\n// 清空批量\nconst clearBatch = () => {\n  batchImages.value.forEach(img => {\n    if (img.processedUrl) {\n      URL.revokeObjectURL(img.processedUrl)\n    }\n  })\n  batchImages.value = []\n}\n\n// 触发文件输入\nconst triggerFileInput = () => {\n  fileInput.value.click()\n}\n\nconst triggerBatchFileInput = () => {\n  batchFileInput.value.click()\n}\n\n// SEO配置\nuseSeoMeta({\n  title: '图片尺寸调整 - 在线调整图片尺寸工具',\n  description: '免费在线图片尺寸调整工具，支持像素和百分比调整、批量处理、多种裁剪模式。',\n  keywords: ['图片尺寸', '图片调整', '图片缩放', '像素调整', '在线工具']\n})\n\ndefinePageMeta({\n  layout: 'default'\n})\n\n// 清理\nonUnmounted(() => {\n  if (resizedUrl.value) {\n    URL.revokeObjectURL(resizedUrl.value)\n  }\n  batchImages.value.forEach(img => {\n    if (img.processedUrl) {\n      URL.revokeObjectURL(img.processedUrl)\n    }\n  })\n})\n</script>\n\n<style scoped>\n.bg-checkered {\n  background-image:\n    linear-gradient(45deg, #f0f0f0 25%, transparent 25%),\n    linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #f0f0f0 75%),\n    linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n}\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_unref","_ssrInterpolate","_ssrRenderList","_ssrRenderAttr","_push","_parent","_createVNode"],"mappings":"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"}