import{_ as ee}from"./D4g1_bQ7.js";import{r as d,q as te,c,a as t,y as B,V as se,b as l,j as r,t as x,h as v,v as k,R as $,F,k as P,P as oe,d as _,x as ae,w as L,o as p}from"./DEsTSaKd.js";import{J as le}from"./KP_Dlcgk.js";import{I as re}from"./4T928kbW.js";import{D as S}from"./ClT_iCD-.js";import{X as ne}from"./DJb2aM7w.js";import{P as ie}from"./DUPD8JlR.js";import{I as de}from"./MvNwXCJb.js";import{H as ue}from"./ZC22Qqbx.js";import{A as D}from"./Bluep4Ee.js";import{Z as me}from"./CgBn4Hdk.js";import{C as ce}from"./vEvaw0F6.js";import"./CE1G-McA.js";import"./TDtrdbi3.js";import"./wERbHxDK.js";const pe={class:"max-w-8xl mx-auto"},ge={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ve={class:"space-y-4"},fe={class:"bg-card rounded-lg p-6"},xe={key:0,class:"space-y-4"},be={class:"p-4 bg-muted rounded-lg"},he=["src","alt"],ye={class:"mt-2 text-xs text-muted-foreground"},we={class:"flex items-center justify-between mb-2"},Be={class:"flex gap-2"},ke={class:"relative"},_e={class:"absolute bottom-2 right-2 text-xs text-muted-foreground"},Ie={class:"space-y-3"},Ce={class:"flex items-center gap-2"},Ue={class:"flex items-center gap-2"},je={class:"bg-card rounded-lg p-6"},Le={class:"grid grid-cols-3 gap-2"},De=["onClick"],Re=["src","alt"],Me={class:"space-y-4"},ze={class:"bg-card rounded-lg p-6"},Ve={class:"space-y-4"},Te={key:0,class:"space-y-4"},$e={class:"p-4 bg-muted rounded-lg"},Fe=["src"],Pe={class:"mt-2 text-xs text-muted-foreground"},Se={class:"space-y-3"},Ee={class:"bg-card rounded-lg p-6"},We={class:"space-y-3"},Ne=["onUpdate:modelValue","placeholder","onInput"],Oe={key:0,class:"flex items-center gap-2 p-2 bg-muted rounded"},Ae=["src"],He=["onClick"],Ge={class:"flex gap-2"},qe={class:"mt-12 space-y-6"},Je={class:"bg-card rounded-lg p-6"},Ze={class:"text-lg font-semibold mb-4 flex items-center gap-2"},Ke={class:"bg-card rounded-lg p-6"},Xe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},gt={__name:"base64-image",setup(Qe){const u=d(null),m=d(""),b=d(""),n=d(null),w=d("image"),f=d("png"),I=d(!0),C=d(!0),h=d(!1),R=d(null),g=d([{base64:"",image:null}]),E=[{id:1,name:"示例1",url:"https://picsum.photos/200/200?random=1"},{id:2,name:"示例2",url:"https://picsum.photos/200/200?random=2"},{id:3,name:"示例3",url:"https://picsum.photos/200/200?random=3"}],W=s=>{const e=s.target.files[0];e&&e.type.startsWith("image/")&&U(e)},N=s=>{s.preventDefault();const e=s.dataTransfer.files[0];e&&e.type.startsWith("image/")&&U(e)},O=()=>{},U=s=>{const e=new FileReader;e.onload=a=>{u.value={name:s.name,size:s.size,url:a.target.result},j()},e.readAsDataURL(s)},j=()=>{if(!u.value)return;let s=u.value.url;I.value||(s=s.split(",")[1]),C.value&&(s=s.replace(/\s+/g,"")),m.value=s},A=async s=>{try{const a=await(await fetch(s.url)).blob(),o=new File([a],`${s.name}.jpg`,{type:"image/jpeg"});U(o)}catch(e){console.error("加载示例图片失败:",e)}},H=async()=>{if(m.value)try{await navigator.clipboard.writeText(m.value),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch{const e=document.createElement("textarea");e.value=m.value,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}},G=()=>{u.value=null,m.value=""},M=()=>{if(!b.value){n.value=null;return}try{let s=b.value.trim();if(!s.startsWith("data:")){let e="image/png";s.startsWith("/9j/")?e="image/jpeg":s.startsWith("R0lGOD")?e="image/gif":s.startsWith("iVBORw0K")&&(e="image/png"),s=`data:${e};base64,${s}`}if(!s.match(/^data:image\/[a-z]+;base64,/))throw new Error("无效的 Base64 格式");n.value={url:s,format:s.split(":")[1].split(";")[0].split("/")[1].toUpperCase(),size:Math.round(s.length*.75)}}catch(s){n.value=null,console.error("Base64 解析失败:",s)}},q=()=>{b.value="",n.value=null},J=()=>{if(!n.value)return;const s=document.createElement("a");if(s.href=n.value.url,f.value!=="png"){const e=new Image;e.onload=()=>{const a=document.createElement("canvas"),o=a.getContext("2d");a.width=e.width,a.height=e.height,o.drawImage(e,0,0);const i=f.value==="jpeg"?"image/jpeg":"image/webp",y=f.value==="jpeg"?.9:void 0;a.toBlob(Y=>{const T=URL.createObjectURL(Y);s.href=T,s.download=`${w.value}.${f.value}`,s.click(),URL.revokeObjectURL(T)},i,y)},e.src=n.value.url}else s.download=`${w.value}.png`,s.click()},z=()=>{g.value.push({base64:"",image:null})},Z=s=>{g.value.splice(s,1),g.value.length===0&&z()},K=s=>{const e=g.value[s];if(!e.base64){e.image=null;return}try{let a=e.base64.trim();a.startsWith("data:")||(a=`data:image/png;base64,${a}`),e.image=a}catch{e.image=null}},X=async()=>{const s=new le;g.value.forEach((e,a)=>{e.image&&fetch(e.image).then(i=>i.blob()).then(i=>{s.file(`image_${a+1}.png`,i)})}),setTimeout(async()=>{const e=await s.generateAsync({type:"blob"}),a=URL.createObjectURL(e),o=document.createElement("a");o.href=a,o.download=`base64_images_${Date.now()}.zip`,o.click(),URL.revokeObjectURL(a)},1e3)},V=s=>{if(s===0)return"0 B";const e=1024,a=["B","KB","MB","GB"],o=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,o)).toFixed(2))+" "+a[o]},Q=()=>{R.value.click()};return te({title:"Base64图片 - 在线图片与Base64互转工具",description:"免费在线图片转Base64和Base64转图片工具，支持批量处理，直接预览和下载。",keywords:["base64图片","图片base64","data url","图片编码","在线工具"]}),(s,e)=>{const a=ee;return p(),c("div",pe,[e[33]||(e[33]=t("div",{class:"mt-4 mb-8"},[t("h1",{class:"text-3xl font-bold mb-3"},"Base64 图片"),t("p",{class:"text-muted-foreground"},"图片与 Base64 互转，支持在线预览和下载")],-1)),t("div",ge,[t("div",ve,[t("div",fe,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold mb-4"},"图片转 Base64",-1)),t("div",{class:"border-2 border-dashed rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer mb-4",onDrop:N,onDragover:e[0]||(e[0]=se(()=>{},["prevent"])),onDragleave:O,onClick:Q},[t("input",{ref_key:"imageInput",ref:R,type:"file",class:"hidden",accept:"image/*",onChange:W},null,544),l(r(re),{class:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e[7]||(e[7]=t("p",{class:"text-lg font-medium mb-2"},"拖拽图片到这里",-1)),e[8]||(e[8]=t("p",{class:"text-sm text-muted-foreground"},"或者点击选择文件",-1))],32),u.value?(p(),c("div",xe,[t("div",be,[e[9]||(e[9]=t("h3",{class:"text-sm font-medium mb-2"},"图片预览",-1)),t("img",{src:u.value.url,alt:u.value.name,class:"w-full max-h-64 object-contain rounded"},null,8,he),t("div",ye,x(u.value.name)+" • "+x(V(u.value.size)),1)]),t("div",null,[t("div",we,[e[10]||(e[10]=t("h3",{class:"text-sm font-medium"},"Base64 编码",-1)),t("div",Be,[t("button",{onClick:H,class:"px-3 py-1 text-sm text-primary hover:text-primary/80 transition-colors"},x(h.value?"已复制":"复制"),1),t("button",{onClick:G,class:"px-3 py-1 text-sm text-destructive hover:text-destructive/80 transition-colors"}," 清空 ")])]),t("div",ke,[v(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o),readonly:"",rows:"6",class:"w-full px-3 py-2 border rounded-md bg-muted font-mono text-xs resize-none",placeholder:"Base64 编码将显示在这里"},null,512),[[k,m.value]]),t("div",_e,x(m.value.length)+" 字符 ",1)])]),t("div",Ie,[t("label",Ce,[v(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>I.value=o),type:"checkbox",class:"rounded",onChange:j},null,544),[[$,I.value]]),e[11]||(e[11]=t("span",{class:"text-sm"},"包含 Data URL 前缀",-1))]),t("label",Ue,[v(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>C.value=o),type:"checkbox",class:"rounded",onChange:j},null,544),[[$,C.value]]),e[12]||(e[12]=t("span",{class:"text-sm"},"移除换行符和空格",-1))])])])):B("",!0)]),t("div",je,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold mb-4"},"示例图片",-1)),t("div",Le,[(p(),c(F,null,P(E,o=>t("button",{key:o.id,onClick:i=>A(o),class:"aspect-square rounded-lg overflow-hidden hover:ring-2 hover:ring-primary transition-all"},[t("img",{src:o.url,alt:o.name,class:"w-full h-full object-cover"},null,8,Re)],8,De)),64))])])]),t("div",Me,[t("div",ze,[e[21]||(e[21]=t("h2",{class:"text-lg font-semibold mb-4"},"Base64 转图片",-1)),t("div",Ve,[t("div",null,[e[15]||(e[15]=t("label",{class:"text-sm font-medium"},"粘贴 Base64 字符串",-1)),v(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>b.value=o),rows:"6",class:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm resize-none",placeholder:"粘贴 Base64 字符串或 Data URL",onInput:M},null,544),[[k,b.value]])]),t("div",{class:"flex gap-2"},[t("button",{onClick:M,class:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors"}," 转换为图片 "),t("button",{onClick:q,class:"px-4 py-2 border border-muted text-muted-foreground rounded-md hover:bg-muted transition-colors"}," 清空 ")]),n.value?(p(),c("div",Te,[t("div",$e,[e[16]||(e[16]=t("h3",{class:"text-sm font-medium mb-2"},"预览",-1)),t("img",{src:n.value.url,alt:"Decoded image",class:"w-full max-h-64 object-contain rounded"},null,8,Fe),t("div",Pe,x(n.value.format)+" • "+x(V(n.value.size)),1)]),t("div",Se,[t("div",null,[e[17]||(e[17]=t("label",{class:"text-sm font-medium"},"文件名",-1)),v(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>w.value=o),type:"text",placeholder:"image",class:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary mt-1"},null,512),[[k,w.value]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"text-sm font-medium"},"保存格式",-1)),v(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>f.value=o),class:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary mt-1"},[...e[18]||(e[18]=[t("option",{value:"png"},"PNG",-1),t("option",{value:"jpeg"},"JPEG",-1),t("option",{value:"webp"},"WebP",-1)])],512),[[oe,f.value]])]),t("button",{onClick:J,class:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center justify-center gap-2"},[l(r(S),{class:"w-4 h-4"}),e[20]||(e[20]=_(" 下载图片 ",-1))])])])):B("",!0)])]),t("div",Ee,[e[25]||(e[25]=t("h2",{class:"text-lg font-semibold mb-4"},"批量转换",-1)),e[26]||(e[26]=t("p",{class:"text-sm text-muted-foreground mb-4"}," 同时处理多个 Base64 字符串，批量转换为图片 ",-1)),t("div",We,[(p(!0),c(F,null,P(g.value,(o,i)=>(p(),c("div",{key:i,class:"space-y-2"},[v(t("textarea",{"onUpdate:modelValue":y=>o.base64=y,rows:"3",class:"w-full px-3 py-2 border rounded-md font-mono text-xs resize-none",placeholder:`Base64 ${i+1}`,onInput:y=>K(i)},null,40,Ne),[[k,o.base64]]),o.image?(p(),c("div",Oe,[t("img",{src:o.image,alt:"Preview",class:"w-12 h-12 object-cover rounded"},null,8,Ae),e[22]||(e[22]=t("span",{class:"text-sm flex-1"},"已解析",-1)),t("button",{onClick:y=>Z(i),class:"text-destructive hover:text-destructive/80"},[l(r(ne),{class:"w-4 h-4"})],8,He)])):B("",!0)]))),128)),t("div",Ge,[t("button",{onClick:z,class:"flex-1 px-4 py-2 bg-muted hover:bg-muted/80 rounded-md transition-colors flex items-center justify-center gap-2"},[l(r(ie),{class:"w-4 h-4"}),e[23]||(e[23]=_(" 添加项 ",-1))]),g.value.some(o=>o.image)?(p(),c("button",{key:0,onClick:X,class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center gap-2"},[l(r(S),{class:"w-4 h-4"}),e[24]||(e[24]=_(" 下载所有 ",-1))])):B("",!0)])])])])]),t("div",qe,[t("div",Je,[t("h3",Ze,[l(r(de),{class:"w-5 h-5 text-primary"}),e[27]||(e[27]=_(" 关于 Base64 ",-1))]),e[28]||(e[28]=ae('<div class="space-y-4 text-sm text-muted-foreground"><div><h4 class="font-medium text-foreground mb-2">什么是 Base64？</h4><p>Base64 是一种基于64个可打印字符来表示二进制数据的编码方法。常用于在文本协议中传输二进制数据。</p></div><div><h4 class="font-medium text-foreground mb-2">Data URL 格式</h4><code class="block bg-muted p-3 rounded-md text-xs"> data:[MIME-type];base64,[base64-data] </code></div><div><h4 class="font-medium text-foreground mb-2">使用场景</h4><ul class="list-disc list-inside space-y-1 ml-4"><li>在 HTML/CSS 中直接嵌入小图片</li><li>电子邮件中的图片附件</li><li>API 接口传输图片数据</li><li>减少 HTTP 请求数量</li></ul></div></div>',1))]),t("div",Ke,[e[32]||(e[32]=t("h3",{class:"text-lg font-semibold mb-4"},"相关工具",-1)),t("div",Xe,[l(a,{to:"/tools/base64-encode",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:L(()=>[l(r(ue),{class:"w-5 h-5 text-primary"}),e[29]||(e[29]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"Base64 编码"),t("p",{class:"text-xs text-muted-foreground"},"文本Base64编码")],-1)),l(r(D),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1}),l(a,{to:"/tools/image-compress",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:L(()=>[l(r(me),{class:"w-5 h-5 text-primary"}),e[30]||(e[30]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"图片压缩"),t("p",{class:"text-xs text-muted-foreground"},"在线压缩图片")],-1)),l(r(D),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1}),l(a,{to:"/tools/html-encode",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:L(()=>[l(r(ce),{class:"w-5 h-5 text-primary"}),e[31]||(e[31]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"HTML 编码"),t("p",{class:"text-xs text-muted-foreground"},"HTML实体编码")],-1)),l(r(D),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1})])])])])}}};export{gt as default};
