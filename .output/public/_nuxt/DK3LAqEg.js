import{_ as j}from"./D4g1_bQ7.js";import{r as m,e as K,p as Y,f as z,c as F,a as e,h as E,y as J,P as I,x as w,v as X,z as _,V as k,t as h,n as y,j as U,l as $,F as Z,k as ee,m as te,o as p,w as oe,C as se}from"./DEsTSaKd.js";import{t as g}from"./B-fbZyPE.js";import{c as re}from"./3IwUeceH.js";import{C as le,a as ne}from"./BaG5JeHk.js";import{G as ie}from"./sCtjrDU-.js";import{F as ae}from"./OWHW6ZUB.js";import{G as ue}from"./B8QRyNMs.js";import{F as de}from"./BIbbmz6B.js";import{R as ce}from"./b4Up8kzW.js";import{T as me}from"./C1JgnPlw.js";import{H as fe}from"./ZC22Qqbx.js";import{L as pe}from"./BP6Cft7q.js";import{D as xe}from"./DESX2TF9.js";import{F as ge}from"./C-LEKrTT.js";import{C as ve}from"./vEvaw0F6.js";import{I as be}from"./4T928kbW.js";import{W as Se}from"./BUYFD_dQ.js";import{T as Le}from"./Z_ZHHb8E.js";import{C as Ee}from"./BuCd20m7.js";import{S as he}from"./w5JABn4e.js";import{L as ye}from"./DbWJs76d.js";import{F as Qe}from"./CRvidJJ3.js";import"./wERbHxDK.js";const Re={class:"max-w-8xl mx-auto"},Ce={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Fe={class:"flex flex-col h-full"},Te={class:"flex items-center justify-between mb-2"},Ne={class:"flex items-center gap-2"},Oe={class:"flex items-center gap-2"},Ie=["onKeydown"],we={key:0,class:"mt-2 p-2 bg-destructive/20 text-destructive text-sm rounded"},_e={class:"flex flex-col h-full"},ke={class:"p-6 mb-12 relative"},Ue=["title"],Me={class:"mb-12"},De={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ae={class:"flex items-center gap-2 mb-2"},Ge={class:"font-medium text-foreground"},Pe={class:"text-sm text-muted-foreground line-clamp-2"},mt={__name:"sql-formatter",setup(Ve){te();const T=g.find(o=>o.id==="sql-formatter");re.find(o=>o.id==="format");const f=m(""),d=m(""),v=m(""),Q=m("2"),N=m("sql"),b=m(!0),c=m(null),x=m(!1),M={FileText:Qe,Lock:ye,Shield:he,Clock:Ee,Type:Le,Wifi:Se,Image:be,Code:ve,FileJson:ge,Database:xe,Link:pe,Hash:fe,Timer:me,Regex:ce,FileDiff:de,Globe:ue,FolderOpen:ae,GitBranch:ie},D=K(()=>{const o=g.filter(r=>r.category==="format"&&r.id!=="sql-formatter").slice(0,3),t=[g.find(r=>r.id==="json-formatter"),g.find(r=>r.id==="xml-formatter"),g.find(r=>r.id==="yaml-converter"),g.find(r=>r.id==="base64-encoder")].filter(Boolean);return[...o,...t].slice(0,4)}),O=new Set(["SELECT","FROM","WHERE","INSERT","UPDATE","DELETE","CREATE","ALTER","DROP","TABLE","INDEX","VIEW","PROCEDURE","FUNCTION","TRIGGER","JOIN","INNER","LEFT","RIGHT","FULL","OUTER","ON","AND","OR","NOT","IN","EXISTS","BETWEEN","LIKE","ORDER","BY","GROUP","HAVING","LIMIT","OFFSET","UNION","ALL","DISTINCT","AS","CASE","WHEN","THEN","ELSE","END","IF","IS","NULL","COUNT","SUM","AVG","MAX","MIN","PRIMARY","KEY","FOREIGN","REFERENCES","CONSTRAINT"]),R=()=>{if(f.value)try{v.value="";const o=A(f.value,parseInt(Q.value));d.value=o}catch(o){v.value=`格式化错误: ${o.message}`,d.value=""}},A=(o,t)=>{const r=" ".repeat(t);let s="",a=0,S=!1,C="",u="";for(let n=0;n<o.length;n++){const l=o[n],L=n>0?o[n-1]:"";if((l==="'"||l==='"')&&L!=="\\"){S?l===C&&(S=!1,C=""):(S=!0,C=l),s+=l,u+=l;continue}if(S){s+=l,u+=l;continue}if(l==="-"&&L==="-"){let i="--";for(n++;n<o.length&&o[n]!==`
`;)i+=o[n],n++;s+=i+`
`+r.repeat(a),u="";continue}if(l==="/"&&L==="*"){s+=l;continue}if(l==="*"&&L==="/"){let i="/*";for(n++;n<o.length&&!(o[n]==="/"&&o[n-1]==="*");)i+=o[n],n++;i+="/",s+=i+`
`+r.repeat(a),u="";continue}if(/[a-zA-Z_]/.test(l))u+=l;else{if(u){const i=u.toUpperCase();O.has(i)?(["SELECT","FROM","WHERE","ORDER","GROUP","HAVING","LIMIT","UNION"].includes(i)?s+=`
`+r.repeat(a)+i+" ":s+=i+" ",["SELECT","FROM","WHERE","SET","VALUES"].includes(i)&&a++,["AND","OR"].includes(i)&&(s+=`
`+r.repeat(Math.max(0,a-1)))):s+=u+" ",u=""}l===","?s+=`,
`+r.repeat(a):l==="("?(s+=`(
`+r.repeat(a+1),a++):l===")"?(a=Math.max(0,a-1),s+=`
`+r.repeat(a)+")"):l===";"?(a=0,s+=`;
`):l!==" "&&l!=="	"&&l!==`
`&&(s+=l)}}if(u){const n=u.toUpperCase();O.has(n)?s+=n:s+=u}return s.replace(/\n\s*\n/g,`
`).replace(/^\s+|\s+$/g,"").replace(/\s+/g," ").replace(/,\s*\n\s*/g,`,
`+r).replace(/\(\s+/g,`(
`+r).replace(/\s+\)/g,`
)`)},G=()=>{f.value="",d.value="",v.value=""},P=async()=>{try{const o=await navigator.clipboard.readText();f.value=o}catch(o){console.error("粘贴失败:",o)}},V=()=>{f.value="SELECT u.id, u.name, u.email, COUNT(o.id) as order_count, SUM(o.total_amount) as total_spent FROM users u LEFT JOIN orders o ON u.id = o.user_id WHERE u.created_at >= '2023-01-01' AND u.status = 'active' GROUP BY u.id, u.name, u.email HAVING COUNT(o.id) > 0 ORDER BY total_spent DESC LIMIT 10"},B=async()=>{if(d.value)try{await navigator.clipboard.writeText(d.value)}catch(o){console.error("复制失败:",o)}},q=()=>{if(!d.value)return;const o=new Blob([d.value],{type:"text/sql"}),t=URL.createObjectURL(o),r=document.createElement("a");r.href=t,r.download="formatted.sql",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},H=()=>{c.value&&(x.value?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():c.value.requestFullscreen?c.value.requestFullscreen():c.value.webkitRequestFullscreen?c.value.webkitRequestFullscreen():c.value.msRequestFullscreen&&c.value.msRequestFullscreen(),x.value=!x.value)},W=()=>{b.value=!b.value};return T&&Y(T.id),z(()=>{document.addEventListener("fullscreenchange",()=>{x.value=!!document.fullscreenElement}),document.addEventListener("webkitfullscreenchange",()=>{x.value=!!document.webkitFullscreenElement}),document.addEventListener("msfullscreenchange",()=>{x.value=!!document.msFullscreenElement})}),(o,t)=>{const r=j;return p(),F("div",Re,[t[11]||(t[11]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-foreground mb-3"},"SQL格式化 - 在线SQL美化与格式化工具"),e("p",{class:"text-muted-foreground"},"一款免费的在线 SQL Formatter。支持一键美化、格式化各种 SQL 语句，包括 SELECT、INSERT、UPDATE、DELETE 等。支持多种数据库方言，纯本地计算，数据隐私绝对安全。")],-1)),e("div",Ce,[e("div",Fe,[e("div",{class:"flex items-center justify-between mb-3"},[t[3]||(t[3]=e("label",{class:"text-sm font-medium text-foreground"},"输入SQL",-1)),e("div",{class:"flex gap-2"},[e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:G}," 清空 "),e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:P}," 粘贴 "),e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:V}," 示例SQL ")])]),e("div",Te,[e("div",Ne,[t[5]||(t[5]=e("label",{class:"text-xs text-muted-foreground"},"缩进:",-1)),E(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>Q.value=s),class:"text-xs bg-muted border border-border rounded px-2 py-1"},[...t[4]||(t[4]=[e("option",{value:"2"},"2空格",-1),e("option",{value:"4"},"4空格",-1)])],512),[[I,Q.value]])]),e("div",Oe,[t[7]||(t[7]=e("label",{class:"text-xs text-muted-foreground"},"数据库:",-1)),E(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>N.value=s),class:"text-xs bg-muted border border-border rounded px-2 py-1"},[...t[6]||(t[6]=[w('<option value="sql">标准SQL</option><option value="mysql">MySQL</option><option value="postgresql">PostgreSQL</option><option value="sqlite">SQLite</option><option value="oracle">Oracle</option><option value="sqlserver">SQL Server</option>',6)])],512),[[I,N.value]])])]),E(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),class:"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-none font-mono text-sm",placeholder:"在此输入SQL语句...",onKeydown:[_(k(R,["ctrl"]),["enter"]),_(k(R,["meta"]),["enter"])]},null,40,Ie),[[X,f.value]]),v.value?(p(),F("div",we,h(v.value),1)):J("",!0)]),e("div",_e,[e("div",{class:"flex items-center justify-between mb-3"},[t[8]||(t[8]=e("label",{class:"text-sm font-medium text-foreground"},"格式化结果",-1)),e("div",{class:"flex gap-2"},[e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:B}," 复制 "),e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:q}," 下载SQL "),e("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:H}," 全屏模式 ")])]),e("pre",{ref_key:"outputPre",ref:c,class:"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg overflow-auto font-mono text-sm whitespace-pre-wrap"},h(d.value),513)])]),e("div",{class:"flex justify-center mb-12"},[e("button",{onClick:R,class:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium"}," 格式化 SQL ")]),e("div",ke,[e("button",{onClick:W,class:"absolute top-4 right-4 text-muted-foreground hover:text-foreground transition-colors",title:b.value?"折叠内容":"展开内容"},[b.value?(p(),y(U(ne),{key:1,class:"w-5 h-5"})):(p(),y(U(le),{key:0,class:"w-5 h-5"}))],8,Ue),E(e("div",null,[...t[9]||(t[9]=[w('<h2 class="text-2xl font-bold text-foreground mb-4 flex items-center"><span class="text-primary mr-2">#</span> 什么是 SQL 格式化？ </h2><p class="text-muted-foreground mb-4"> SQL（Structured Query Language）是用于管理关系数据库系统的标准化语言。 SQL 格式化是将混乱、压缩的 SQL 语句转换为具有良好缩进、换行和结构化的可读格式的过程。 这不仅提高了代码的可读性，也有助于团队协作和代码维护。 </p><p class="text-muted-foreground"> 在实际开发中，ORM 工具生成的 SQL 或为了节省传输带宽而压缩的 SQL 往往难以阅读。 SQL 格式化工具可以帮助开发者快速分析和优化 SQL 查询，提高开发效率。 </p><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 如何使用本工具 </h2><ol class="list-decimal list-inside space-y-2 text-muted-foreground mb-6"><li>将您的 SQL 语句粘贴到左侧输入框</li><li>选择合适的数据库类型（标准SQL、MySQL、PostgreSQL等）</li><li>调整缩进大小（2空格或4空格）</li><li>点击&quot;格式化 SQL&quot;按钮或使用快捷键 Ctrl+Enter</li><li>查看右侧格式化后的结果，可复制或下载</li></ol><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 核心功能特性 </h2><ul class="list-disc list-inside space-y-2 text-muted-foreground mb-6"><li><strong>多数据库支持</strong>: 支持 MySQL、PostgreSQL、SQLite、Oracle、SQL Server 等主流数据库方言</li><li><strong>智能格式化</strong>: 自动识别 SQL 关键字、表名、字段名并进行合理格式化</li><li><strong>自定义缩进</strong>: 支持 2 空格或 4 空格缩进，满足不同编码规范</li><li><strong>本地处理</strong>: 所有格式化都在浏览器本地完成，数据不会上传到服务器</li><li><strong>快捷操作</strong>: 支持快捷键操作，提高工作效率</li><li><strong>导出功能</strong>: 支持复制和下载格式化后的 SQL</li></ul><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 常见问题 (FAQ) </h2><div class="space-y-4"><div><h3 class="text-lg font-semibold text-foreground">SQL 格式化工具支持哪些数据库？</h3><p class="text-muted-foreground mt-1"> 我们支持主流的数据库系统，包括标准 SQL、MySQL、PostgreSQL、SQLite、Oracle 和 SQL Server。 每种数据库都有其特有的语法特性，工具会根据选择的数据库类型进行相应的优化。 </p></div><div><h3 class="text-lg font-semibold text-foreground">格式化后的 SQL 会改变执行逻辑吗？</h3><p class="text-muted-foreground mt-1"> 不会。SQL 格式化只改变代码的视觉呈现（缩进、换行、空格），不会改变 SQL 的执行逻辑和性能。 格式化后的 SQL 与原始 SQL 在功能上完全等价。 </p></div><div><h3 class="text-lg font-semibold text-foreground">为什么需要 SQL 格式化？</h3><p class="text-muted-foreground mt-1"> 格式化 SQL 有多个好处：提高代码可读性、便于团队协作、有助于发现语法错误、 方便代码审查、提升维护效率。对于复杂的 SQL 查询，格式化尤其重要。 </p></div></div>',9)])],512),[[$,b.value]])]),e("section",Me,[t[10]||(t[10]=e("h2",{class:"text-2xl font-bold text-foreground mb-4"},"您可能还需要...",-1)),e("div",De,[(p(!0),F(Z,null,ee(D.value,s=>(p(),y(r,{key:s.id,to:`/tools/${s.id}/`,class:"block p-4 bg-card border border-border rounded-lg hover:bg-accent transition-colors"},{default:oe(()=>[e("div",Ae,[(p(),y(se(M[s.icon]),{class:"w-5 h-5 text-primary"})),e("span",Ge,h(s.name),1)]),e("p",Pe,h(s.description),1)]),_:2},1032,["to"]))),128))])])])}}};export{mt as default};
