import{_ as B}from"./D4g1_bQ7.js";import{r as p,q as U,c as x,a as t,x as K,y as X,h as k,v as P,E as q,t as v,z as I,b as i,j as b,T as L,F as Q,k as W,w as M,o as g}from"./DEsTSaKd.js";import{X as H}from"./DJb2aM7w.js";import{F as Y}from"./CRvidJJ3.js";import{A as S}from"./Bluep4Ee.js";import{F as C}from"./C-LEKrTT.js";import"./wERbHxDK.js";const G={class:"max-w-8xl mx-auto"},Z={class:"space-y-6"},tt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},et={class:"space-y-4"},st={class:"relative"},ot={class:"absolute bottom-2 right-2 text-xs text-muted-foreground bg-background px-2 py-1 rounded"},rt={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm"},lt={class:"space-y-4"},at={class:"space-y-2"},dt={class:"relative"},nt={class:"space-y-3"},it={class:"flex flex-wrap gap-3"},ut={class:"flex items-center"},ct={class:"flex items-center"},pt={class:"flex items-center"},mt={class:"space-y-2"},xt={class:"grid grid-cols-1 gap-2"},vt=["onClick"],bt={class:"font-mono text-primary"},gt={class:"text-xs text-muted-foreground"},yt=["disabled"],ft={key:0,class:"space-y-2"},ht={class:"flex items-center justify-between"},kt={class:"flex gap-2"},_t={class:"border rounded-lg overflow-hidden"},wt={class:"px-3 py-2 bg-muted border-b flex items-center gap-2"},Xt={class:"text-sm font-medium"},Lt={class:"max-h-64 overflow-auto p-4"},Mt={key:0,class:"text-sm whitespace-pre-wrap"},St={key:1,class:"text-sm text-muted-foreground"},Et={class:"bg-card rounded-lg p-6"},Tt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Pt=`<?xml version="1.0" encoding="UTF-8"?>
<bookstore>
  <book category="children">
    <title lang="en">Harry Potter</title>
    <author>J. K. Rowling</author>
    <year>2005</year>
    <price>29.99</price>
  </book>
  <book category="web">
    <title lang="en">XQuery Kick Start</title>
    <author>James McGovern</author>
    <author>Per Bothner</author>
    <author>Kurt Cagle</author>
    <author>James Linn</author>
    <author>Vaidyanathan Nagarajan</author>
    <year>2003</year>
    <price>49.99</price>
  </book>
  <book category="web" cover="paperback">
    <title lang="en">Learning XML</title>
    <author>Erik T. Ray</author>
    <year>2003</year>
    <price>39.95</price>
  </book>
</bookstore>`,Ft={__name:"xpath-tester",setup(Ct){const c=p(""),d=p(""),a=p(null),y=p(""),l=p(null),m=p(0),h=p(!1),u=p("multiple"),N=[{xpath:"/bookstore/book",description:"获取所有书籍节点"},{xpath:"//book",description:"获取文档中所有书籍节点"},{xpath:"//book[1]",description:"获取第一本书"},{xpath:"//book[last()]",description:"获取最后一本书"},{xpath:'//book[@category="web"]',description:"获取 web 类别的书"},{xpath:"//book[price>35]",description:"获取价格大于 35 的书"},{xpath:"//title/text()",description:"获取所有书的标题文本"},{xpath:"count(//book)",description:"统计书籍总数"}],R=s=>{const r=new DOMParser().parseFromString(s,"text/xml");if(r.getElementsByTagName("parsererror").length)throw new Error("XML 解析错误");return r},_=()=>{if(y.value="",a.value=null,!!c.value.trim())try{a.value=R(c.value)}catch{y.value="XML 解析错误: 请检查 XML 格式是否正确"}},z=()=>{if(a.value||_(),a.value){const r=new XMLSerializer().serializeToString(a.value).replace(/></g,`>
<`).replace(/<(\w+)([^>]*)>/g,(f,n,w)=>f.includes("</")?f:`<${n}${w}>`);let o=0;const J=r.split(`
`).map(f=>{const n=f.trim();if(!n)return"";n.startsWith("</")&&o--;const w="  ".repeat(Math.max(0,o))+n;if(n.startsWith("<")&&!n.startsWith("</")&&!n.endsWith("/>")){const A=`</${n.match(/<(\w+)/)[1]}>`;n.includes(A)||o++}return w}).filter(f=>f);c.value=J.join(`
`)}},D=()=>{c.value=Pt,_()},O=()=>{c.value="",a.value=null,y.value="",l.value=null,m.value=0},V=()=>{d.value="",l.value=null,m.value=0},j=s=>{d.value=s.xpath},E=()=>{if(!(!a.value||!d.value))try{if(u.value==="count"){const s=a.value.evaluate(d.value,a.value,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);l.value=s.snapshotLength,m.value=s.snapshotLength}else if(u.value==="single"){const s=a.value.evaluate(d.value,a.value,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);l.value=s.singleNodeValue,m.value=s.singleNodeValue?1:0}else{const s=a.value.evaluate(d.value,a.value,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),e=[];for(let r=0;r<s.snapshotLength;r++){const o=s.snapshotItem(r);e.push(o)}l.value=e,m.value=e.length}}catch(s){l.value="XPath 查询错误: "+s.message,m.value=0}},T=()=>{if(!l.value)return"";if(typeof l.value=="number")return l.value.toString();if(l.value.nodeType===1)return new XMLSerializer().serializeToString(l.value);if(Array.isArray(l.value)){const s=new XMLSerializer;return l.value.map(e=>e.nodeType===1?s.serializeToString(e):e.nodeType===2?`${e.name}="${e.value}"`:e.textContent||e.nodeValue).join(`

`)}return l.value.toString()},F=async()=>{const s=T();try{await navigator.clipboard.writeText(s),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}catch{const r=document.createElement("textarea");r.value=s,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),h.value=!0,setTimeout(()=>{h.value=!1},2e3)}};return U({title:"XPath测试器 - 在线XML路径表达式查询",description:"免费在线XPath测试工具，支持使用XPath表达式查询和提取XML数据，提供语法说明和示例。",keywords:["xpath","xml","query","path","test","在线工具"]}),(s,e)=>{const r=B;return g(),x("div",G,[e[20]||(e[20]=t("div",{class:"mt-4 mb-8"},[t("h1",{class:"text-3xl font-bold mb-3"},"XPath 测试器"),t("p",{class:"text-muted-foreground"},"使用 XPath 表达式查询和提取 XML 数据")],-1)),t("div",Z,[t("div",tt,[t("div",et,[t("div",{class:"flex items-center justify-between"},[e[6]||(e[6]=t("h2",{class:"text-lg font-semibold"},"XML 数据",-1)),t("div",{class:"flex gap-2"},[t("button",{onClick:D,class:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"}," 加载示例 "),t("button",{onClick:z,class:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"}," 格式化 "),t("button",{onClick:O,class:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"}," 清空 ")])]),t("div",st,[k(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),onInput:_,placeholder:"请输入 XML 数据...",class:q(["w-full h-96 p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm",{"border-red-500":y.value}])},null,34),[[P,c.value]]),t("div",ot,v(c.value.length)+" 字符 ",1)]),y.value?(g(),x("div",rt,v(y.value),1)):X("",!0)]),t("div",lt,[t("div",{class:"flex items-center justify-between"},[e[7]||(e[7]=t("h2",{class:"text-lg font-semibold"},"XPath 查询",-1)),t("div",{class:"flex gap-2"},[t("button",{onClick:V,class:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"}," 清空 ")])]),t("div",at,[e[8]||(e[8]=t("label",{class:"text-sm font-medium"},"XPath 表达式",-1)),t("div",dt,[k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),onKeyup:I(E,["enter"]),placeholder:"例如: //book/title",class:"w-full p-3 pr-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary font-mono"},null,544),[[P,d.value]]),d.value?(g(),x("button",{key:0,onClick:e[2]||(e[2]=o=>d.value=""),class:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"},[i(b(H),{class:"w-4 h-4"})])):X("",!0)])]),t("div",nt,[e[12]||(e[12]=t("label",{class:"text-sm font-medium"},"查询选项",-1)),t("div",it,[t("label",ut,[k(t("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=o=>u.value=o),value:"single",class:"mr-2"},null,512),[[L,u.value]]),e[9]||(e[9]=t("span",{class:"text-sm"},"返回单个结果",-1))]),t("label",ct,[k(t("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=o=>u.value=o),value:"multiple",class:"mr-2"},null,512),[[L,u.value]]),e[10]||(e[10]=t("span",{class:"text-sm"},"返回所有结果",-1))]),t("label",pt,[k(t("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=o=>u.value=o),value:"count",class:"mr-2"},null,512),[[L,u.value]]),e[11]||(e[11]=t("span",{class:"text-sm"},"只返回数量",-1))])])]),t("div",mt,[e[13]||(e[13]=t("label",{class:"text-sm font-medium"},"快捷示例",-1)),t("div",xt,[(g(),x(Q,null,W(N,o=>t("button",{key:o.xpath,onClick:$=>j(o),class:"p-2 text-sm bg-muted hover:bg-muted/80 rounded text-left transition-colors"},[t("div",bt,v(o.xpath),1),t("div",gt,v(o.description),1)],8,vt)),64))])]),t("button",{onClick:E,disabled:!a.value||!d.value,class:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," 执行查询 ",8,yt),l.value!==null?(g(),x("div",ft,[t("div",ht,[e[14]||(e[14]=t("label",{class:"text-sm font-medium"},"查询结果",-1)),t("div",kt,[t("button",{onClick:F,class:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors"},v(h.value?"已复制":"复制"),1)])]),t("div",_t,[t("div",wt,[t("span",Xt,v(u.value==="count"?"匹配数量":`找到 ${m.value} 个结果`),1)]),t("div",Lt,[l.value?(g(),x("pre",Mt,v(T()),1)):(g(),x("div",St,"没有找到匹配的结果"))])])])):X("",!0)])]),e[19]||(e[19]=K('<div class="bg-card rounded-lg p-6"><h2 class="text-lg font-semibold mb-4">XPath 语法说明</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><h3 class="font-medium mb-3">节点选择</h3><table class="w-full text-sm"><thead><tr class="border-b"><th class="text-left py-2">表达式</th><th class="text-left py-2">说明</th></tr></thead><tbody><tr class="border-b"><td class="py-2 font-mono text-primary">nodename</td><td class="py-2">选择所有 nodename 子节点</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">/</td><td class="py-2">从根节点选择</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">//</td><td class="py-2">从当前节点选择匹配的节点</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">.</td><td class="py-2">选择当前节点</td></tr><tr><td class="py-2 font-mono text-primary">..</td><td class="py-2">选择当前节点的父节点</td></tr></tbody></table></div><div><h3 class="font-medium mb-3">谓语（Predicates）</h3><table class="w-full text-sm"><thead><tr class="border-b"><th class="text-left py-2">表达式</th><th class="text-left py-2">说明</th></tr></thead><tbody><tr class="border-b"><td class="py-2 font-mono text-primary">[1]</td><td class="py-2">第一个节点</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">[last()]</td><td class="py-2">最后一个节点</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">[@attr]</td><td class="py-2">包含 attr 属性的节点</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">[@attr=&#39;value&#39;]</td><td class="py-2">attr 属性等于 value 的节点</td></tr><tr><td class="py-2 font-mono text-primary">[text()=&#39;value&#39;]</td><td class="py-2">文本内容等于 value 的节点</td></tr></tbody></table></div></div><div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6"><div><h3 class="font-medium mb-3">通配符</h3><table class="w-full text-sm"><thead><tr class="border-b"><th class="text-left py-2">表达式</th><th class="text-left py-2">说明</th></tr></thead><tbody><tr class="border-b"><td class="py-2 font-mono text-primary">*</td><td class="py-2">匹配任何元素节点</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">@*</td><td class="py-2">匹配任何属性节点</td></tr><tr><td class="py-2 font-mono text-primary">node()</td><td class="py-2">匹配任何类型的节点</td></tr></tbody></table></div><div><h3 class="font-medium mb-3">常用函数</h3><table class="w-full text-sm"><thead><tr class="border-b"><th class="text-left py-2">函数</th><th class="text-left py-2">说明</th></tr></thead><tbody><tr class="border-b"><td class="py-2 font-mono text-primary">text()</td><td class="py-2">获取节点的文本内容</td></tr><tr class="border-b"><td class="py-2 font-mono text-primary">count()</td><td class="py-2">统计节点数量</td></tr><tr><td class="py-2 font-mono text-primary">contains()</td><td class="py-2">检查是否包含指定字符串</td></tr></tbody></table></div></div><div class="mt-6"><h3 class="font-medium mb-3">常用示例</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><h4 class="text-sm font-medium mb-2">基础查询</h4><ul class="space-y-1 text-sm"><li><code class="bg-muted px-1 rounded">/bookstore/book</code> - bookstore 下的所有 book</li><li><code class="bg-muted px-1 rounded">//book</code> - 所有 book 节点</li><li><code class="bg-muted px-1 rounded">//@lang</code> - 所有 lang 属性</li><li><code class="bg-muted px-1 rounded">/bookstore/book[1]</code> - 第一个 book</li></ul></div><div><h4 class="text-sm font-medium mb-2">高级查询</h4><ul class="space-y-1 text-sm"><li><code class="bg-muted px-1 rounded">//book[price&gt;35]</code> - 价格大于 35 的书</li><li><code class="bg-muted px-1 rounded">//book[@category=&#39;web&#39;]</code> - web 类别的书</li><li><code class="bg-muted px-1 rounded">//book/title/text()</code> - 所有书的标题文本</li><li><code class="bg-muted px-1 rounded">count(//book)</code> - 书籍总数</li></ul></div></div></div></div>',1)),t("div",Et,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold mb-4"},"相关工具",-1)),t("div",Tt,[i(r,{to:"/tools/format/xml-formatter",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:M(()=>[i(b(Y),{class:"w-5 h-5 text-primary"}),e[15]||(e[15]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"XML格式化"),t("p",{class:"text-xs text-muted-foreground"},"美化压缩XML")],-1)),i(b(S),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1}),i(r,{to:"/tools/format/xml-to-json",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:M(()=>[i(b(C),{class:"w-5 h-5 text-primary"}),e[16]||(e[16]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"XML转JSON"),t("p",{class:"text-xs text-muted-foreground"},"XML转换为JSON")],-1)),i(b(S),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1}),i(r,{to:"/tools/text/json-path",class:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group"},{default:M(()=>[i(b(C),{class:"w-5 h-5 text-primary"}),e[17]||(e[17]=t("div",null,[t("p",{class:"font-medium group-hover:text-primary"},"JSONPath查询"),t("p",{class:"text-xs text-muted-foreground"},"JSON路径查询")],-1)),i(b(S),{class:"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary"})]),_:1})])])])])}}};export{Ft as default};
