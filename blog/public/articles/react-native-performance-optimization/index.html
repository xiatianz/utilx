<!doctype html><html lang=zh-cn dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>React Native性能优化实战：打造60FPS流畅体验的终极指南 | 技术博客 - 有条工具</title><meta name=keywords content="React Native,性能优化,移动应用,60FPS,内存优化,渲染优化"><meta name=description content="本文全面介绍React Native应用的性能优化技巧，包括渲染优化、内存管理、启动速度、网络请求等关键环节。"><meta name=author content="Util Tech Team"><link rel=canonical href=/blog/articles/react-native-performance-optimization/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.7e8505b7cdf8bb22ab2305e53c2700bb06c7e64faeb72cd3468823a9a3bd3d6e.css integrity="sha256-foUFt834uyKrIwXlPCcAuwbH5k+utyzTRogjqaO9PW4=" rel="preload stylesheet" as=style><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/blog/favicon-32x32.png><link rel=apple-touch-icon href=/blog/apple-touch-icon.png><link rel=mask-icon href=/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=/blog/articles/react-native-performance-optimization/feed.xml title=rss><link rel=alternate hreflang=zh-cn href=/blog/articles/react-native-performance-optimization/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script src=/js/external-link-config.js></script><script src=/js/external-link-interceptor.js></script><link rel=stylesheet href=/blog/css/custom.css media=screen><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"技术博客 - 有条工具 | 开发者工具使用教程 & 编程技巧分享","url":"https://www.util.cn/blog/","description":"有条工具技术博客 - 分享开发者工具使用教程、编程技巧和实战开发经验。提供JSON格式化、SQL优化、Markdown编辑器等在线工具的详细使用指南，帮助开发者提升工作效率。","publisher":{"@type":"Organization","name":"有条工具","url":"https://www.util.cn","logo":{"@type":"ImageObject","url":"https://www.util.cn/blog/logo/logo-256.png","width":256,"height":256}},"potentialAction":[{"@type":"SearchAction","target":"https://www.util.cn/blog/search?q={search_term_string}","query-input":"required name=search_term_string"}]}</script><meta property="og:type" content="website"><meta property="og:title" content="技术博客 - 有条工具 | 开发者工具使用教程 & 编程技巧分享"><meta property="og:description" content="有条工具技术博客 - 分享开发者工具使用教程、编程技巧和实战开发经验。提供JSON格式化、SQL优化、Markdown编辑器等在线工具的详细使用指南，帮助开发者提升工作效率。"><meta property="og:url" content="https://www.util.cn/blog/"><meta property="og:site_name" content="有条工具技术博客"><meta property="og:image" content="https://www.util.cn/blog/logo/logo-256.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="技术博客 - 有条工具 | 开发者工具使用教程 & 编程技巧分享"><meta name=twitter:description content="有条工具技术博客 - 分享开发者工具使用教程、编程技巧和实战开发经验。"><meta name=twitter:image content="https://www.util.cn/blog/logo/logo-256.png"><meta name=baidu-site-verification content><meta name=category content="技术博客,开发者工具,编程教程"><meta name=coverage content="Worldwide"><meta name=distribution content="Global"><meta name=rating content="General"><script id=51la_code async crossorigin=anonymous src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=pro"></script><script>window.addEventListener("load",function(){setTimeout(function(){typeof la!="undefined"?console.log("51la统计已加载"):(console.warn("51la统计加载失败，使用备用方案"),function(){var e=document.createElement("script");e.src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=backup",e.async=!0,document.head.appendChild(e)}())},3e3)})</script><meta property="og:url" content="/blog/articles/react-native-performance-optimization/"><meta property="og:site_name" content="技术博客 - 有条工具"><meta property="og:title" content="React Native性能优化实战：打造60FPS流畅体验的终极指南"><meta property="og:description" content="本文全面介绍React Native应用的性能优化技巧，包括渲染优化、内存管理、启动速度、网络请求等关键环节。"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-20T14:00:00+08:00"><meta property="article:modified_time" content="2025-12-20T14:00:00+08:00"><meta property="article:tag" content="React Native"><meta property="article:tag" content="性能优化"><meta property="article:tag" content="移动开发"><meta property="article:tag" content="APP优化"><meta property="article:tag" content="60FPS"><meta name=twitter:card content="summary"><meta name=twitter:title content="React Native性能优化实战：打造60FPS流畅体验的终极指南"><meta name=twitter:description content="本文全面介绍React Native应用的性能优化技巧，包括渲染优化、内存管理、启动速度、网络请求等关键环节。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"所有文章","item":"/blog/posts/"},{"@type":"ListItem","position":2,"name":"React Native性能优化实战：打造60FPS流畅体验的终极指南","item":"/blog/articles/react-native-performance-optimization/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"React Native性能优化实战：打造60FPS流畅体验的终极指南","name":"React Native性能优化实战：打造60FPS流畅体验的终极指南","description":"本文全面介绍React Native应用的性能优化技巧，包括渲染优化、内存管理、启动速度、网络请求等关键环节。","keywords":["React Native","性能优化","移动应用","60FPS","内存优化","渲染优化"],"articleBody":"引言 React Native作为跨平台移动开发的主流框架，性能优化一直是开发者关注的重点。一个流畅的应用需要保持60FPS的帧率，快速响应交互，并且有效管理内存资源。本文将从底层原理到实际应用，全面探讨React Native性能优化的各种技巧。\nReact Native架构与性能原理 渲染流程解析 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 // React Native渲染流程 /* JavaScript Thread (JS Thread) ↓ (schedule work) UI Thread (Main Thread) ↓ (create UI elements) Native Modules ↓ (render to screen) Display Hardware */ // 性能监控工具 class PerformanceMonitor { constructor() { this.metrics = { fps: 60, jsBundleLoadTime: 0, renderTime: 0, memoryUsage: 0, networkLatency: 0 }; this.frameCount = 0; this.lastFrameTime = Date.now(); } // 开始性能监控 startMonitoring() { this.startFPSMonitoring(); this.startMemoryMonitoring(); this.startNetworkMonitoring(); } // FPS监控 startFPSMonitoring() { const measure = () =\u003e { const now = Date.now(); const delta = now - this.lastFrameTime; if (delta \u003e= 1000) { this.metrics.fps = Math.round((this.frameCount * 1000) / delta); this.frameCount = 0; this.lastFrameTime = now; // 上报性能数据 this.reportMetrics(); } this.frameCount++; requestAnimationFrame(measure); }; requestAnimationFrame(measure); } // 内存使用监控 startMemoryMonitoring() { if (Platform.OS === 'android') { const getMemoryInfo = () =\u003e { // Android内存监控 return require('react-native').NativeModules.MemoryInfoModule.getMemoryInfo(); }; setInterval(async () =\u003e { try { const memoryInfo = await getMemoryInfo(); this.metrics.memoryUsage = memoryInfo.usedMemory; } catch (error) { console.warn('Memory monitoring failed:', error); } }, 5000); } else { // iOS内存监控 const getMemoryUsage = () =\u003e { return require('react-native').NativeModules.MemoryModule.getMemoryUsage(); }; setInterval(async () =\u003e { try { const memoryUsage = await getMemoryUsage(); this.metrics.memoryUsage = memoryUsage.heapSize; } catch (error) { console.warn('Memory monitoring failed:', error); } }, 5000); } } // 网络延迟监控 startNetworkMonitoring() { const originalFetch = global.fetch; global.fetch = async (...args) =\u003e { const startTime = Date.now(); try { const response = await originalFetch(...args); const endTime = Date.now(); this.metrics.networkLatency = endTime - startTime; return response; } catch (error) { const endTime = Date.now(); this.metrics.networkLatency = endTime - startTime; throw error; } }; } // 上报性能指标 reportMetrics() { if (this.metrics.fps \u003c 50) { console.warn('Low FPS detected:', this.metrics.fps); // 发送到监控系统 this.sendToAnalytics('performance_warning', { fps: this.metrics.fps, memoryUsage: this.metrics.memoryUsage, timestamp: Date.now() }); } } // 发送分析数据 sendToAnalytics(event, data) { // 集成分析SDK // Analytics.track(event, data); } } // 使用示例 const performanceMonitor = new PerformanceMonitor(); performanceMonitor.startMonitoring(); 渲染性能优化 组件优化策略 使用React.memo避免不必要渲染 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 import React, { memo } from 'react'; import { View, Text, TouchableOpacity, StyleSheet } from 'react-native'; // 普通组件（每次父组件更新都会重新渲染） const ListItem = (props) =\u003e { console.log('ListItem rendered'); return ( \u003cTouchableOpacity style={styles.item} onPress={props.onPress}\u003e \u003cText style={styles.title}\u003e{props.title}\u003c/Text\u003e \u003cText style={styles.subtitle}\u003e{props.subtitle}\u003c/Text\u003e \u003c/TouchableOpacity\u003e ); }; // 优化后的组件（仅在props变化时重新渲染） const OptimizedListItem = memo((props) =\u003e { console.log('OptimizedListItem rendered'); // 使用useCallback优化回调函数 const handlePress = React.useCallback(() =\u003e { props.onPress(props.id); }, [props.id, props.onPress]); return ( \u003cTouchableOpacity style={styles.item} onPress={handlePress}\u003e \u003cText style={styles.title}\u003e{props.title}\u003c/Text\u003e \u003cText style={styles.subtitle}\u003e{props.subtitle}\u003c/Text\u003e \u003c/TouchableOpacity\u003e ); }, (prevProps, nextProps) =\u003e { // 自定义比较函数 return ( prevProps.id === nextProps.id \u0026\u0026 prevProps.title === nextProps.title \u0026\u0026 prevProps.subtitle === nextProps.subtitle ); }); // 复杂对象比较优化 const MemoizedComplexItem = memo(({ user, settings }) =\u003e { const lastUserRef = React.useRef(null); // 深度比较user对象 if (lastUserRef.current?.id !== user.id || lastUserRef.current?.name !== user.name || lastUserRef.current?.avatar !== user.avatar) { lastUserRef.current = user; console.log('User data changed, re-rendering'); } return ( \u003cView style={styles.complexItem}\u003e \u003cImage source={{ uri: user.avatar }} style={styles.avatar} /\u003e \u003cView style={styles.userInfo}\u003e \u003cText style={styles.userName}\u003e{user.name}\u003c/Text\u003e \u003cText style={styles.userEmail}\u003e{user.email}\u003c/Text\u003e \u003c/View\u003e \u003c/View\u003e ); }); FlatList优化 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 import React, { useState, useCallback, useMemo, useRef } from 'react'; import { FlatList, View, Text, RefreshControl, ActivityIndicator } from 'react-native'; const OptimizedFlatList = () =\u003e { const [data, setData] = useState([]); const [loading, setLoading] = useState(false); const [refreshing, setRefreshing] = useState(false); const flatListRef = useRef(null); // 生成大量测试数据 const generateData = useCallback((start, count) =\u003e { return Array.from({ length: count }, (_, index) =\u003e ({ id: start + index, title: `Item ${start + index}`, subtitle: `Subtitle for item ${start + index}`, // 复杂对象用于测试渲染性能 metadata: { created: new Date().toISOString(), tags: ['tag1', 'tag2', 'tag3'], score: Math.random() * 100 } })); }, []); // 初始化数据 React.useEffect(() =\u003e { setData(generateData(0, 1000)); }, [generateData]); // 渲染项组件 const renderItem = useCallback(({ item, index }) =\u003e { return ( \u003cMemoizedListItem item={item} index={index} onPress={handleItemPress} /\u003e ); }, []); // 项的唯一键 const keyExtractor = useCallback((item) =\u003e item.id.toString(), []); // 智能滚动性能优化 const getItemLayout = useCallback((data, index) =\u003e ({ length: ITEM_HEIGHT, offset: ITEM_HEIGHT * index, index, }), []); // 处理项目点击 const handleItemPress = useCallback((id) =\u003e { console.log('Item pressed:', id); }, []); // 下拉刷新 const handleRefresh = useCallback(async () =\u003e { setRefreshing(true); try { // 模拟网络请求 await new Promise(resolve =\u003e setTimeout(resolve, 1000)); setData(prevData =\u003e [...generateData(1000, 10), ...prevData]); } catch (error) { console.error('Refresh failed:', error); } finally { setRefreshing(false); } }, [generateData]); // 加载更多 const handleLoadMore = useCallback(async () =\u003e { if (loading) return; setLoading(true); try { // 模拟加载更多 await new Promise(resolve =\u003e setTimeout(resolve, 500)); const newData = generateData(data.length, 20); setData(prevData =\u003e [...prevData, ...newData]); } catch (error) { console.error('Load more failed:', error); } finally { setLoading(false); } }, [loading, data.length, generateData]); // 列表头部组件 const ListHeaderComponent = useMemo(() =\u003e ( \u003cView style={styles.header}\u003e \u003cText style={styles.headerText}\u003eOptimized List ({data.length} items)\u003c/Text\u003e \u003c/View\u003e ), [data.length]); // 列表尾部组件 const ListFooterComponent = useMemo(() =\u003e ( loading ? ( \u003cView style={styles.footer}\u003e \u003cActivityIndicator size=\"large\" color=\"#007AFF\" /\u003e \u003cText style={styles.footerText}\u003eLoading more...\u003c/Text\u003e \u003c/View\u003e ) : null ), [loading]); // 空列表组件 const ListEmptyComponent = useMemo(() =\u003e ( \u003cView style={styles.empty}\u003e \u003cText style={styles.emptyText}\u003eNo data available\u003c/Text\u003e \u003c/View\u003e ), []); return ( \u003cFlatList ref={flatListRef} data={data} renderItem={renderItem} keyExtractor={keyExtractor} getItemLayout={getItemLayout} // 性能优化属性 removeClippedSubviews={true} maxToRenderPerBatch={10} updateCellsBatchingPeriod={50} initialNumToRender={10} windowSize={10} // 滚动优化 showsVerticalScrollIndicator={false} contentContainerStyle={styles.listContainer} // 加载和刷新 refreshControl={ \u003cRefreshControl refreshing={refreshing} onRefresh={handleRefresh} colors={['#007AFF']} tintColor=\"#007AFF\" /\u003e } // 组件配置 ListHeaderComponent={ListHeaderComponent} ListFooterComponent={ListFooterComponent} ListEmptyComponent={ListEmptyComponent} // 滚动到底部加载更多 onEndReached={handleLoadMore} onEndReachedThreshold={0.1} /\u003e ); }; // 优化的列表项组件 const MemoizedListItem = memo(({ item, index, onPress }) =\u003e { // 使用useMemo缓存计算结果 const formattedTitle = useMemo(() =\u003e { return `${item.title} #${index + 1}`; }, [item.title, index]); const metadataInfo = useMemo(() =\u003e { const score = Math.round(item.metadata.score); const tags = item.metadata.tags.slice(0, 2).join(', '); return `Score: ${score} | Tags: ${tags}`; }, [item.metadata]); return ( \u003cTouchableOpacity style={styles.item} onPress={() =\u003e onPress(item.id)} activeOpacity={0.7} \u003e \u003cView style={styles.itemContent}\u003e \u003cText style={styles.itemTitle} numberOfLines={1}\u003e {formattedTitle} \u003c/Text\u003e \u003cText style={styles.itemSubtitle} numberOfLines={2}\u003e {item.subtitle} \u003c/Text\u003e \u003cText style={styles.itemMetadata}\u003e {metadataInfo} \u003c/Text\u003e \u003c/View\u003e \u003c/TouchableOpacity\u003e ); }); 动画性能优化 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 import React, { useRef, useEffect } from 'react'; import { View, Text, StyleSheet, Animated, PanGestureHandler, State } from 'react-native'; import { PanGestureHandler } from 'react-native-gesture-handler'; // 使用原生驱动的高性能动画 const AnimatedCard = ({ title, content, onSwipe }) =\u003e { const translateX = useRef(new Animated.Value(0)).current; const scale = useRef(new Animated.Value(1)).current; const opacity = useRef(new Animated.Value(1)).current; // 手势处理 const onGestureEvent = Animated.event( [{ nativeEvent: { translationX: translateX } }], { useNativeDriver: true } ); const onHandlerStateChange = (event) =\u003e { if (event.nativeEvent.state === State.END) { const { translationX } = event.nativeEvent; // 判断滑动方向和距离 if (Math.abs(translationX) \u003e 100) { // 执行滑出动画 Animated.parallel([ Animated.timing(translateX, { toValue: translationX \u003e 0 ? 300 : -300, duration: 250, useNativeDriver: true }), Animated.timing(opacity, { toValue: 0, duration: 250, useNativeDriver: true }) ]).start(() =\u003e { onSwipe(translationX \u003e 0 ? 'right' : 'left'); }); } else { // 回弹动画 Animated.spring(translateX, { toValue: 0, useNativeDriver: true, tension: 100, friction: 8 }).start(); } } }; // 进入动画 useEffect(() =\u003e { Animated.parallel([ Animated.spring(scale, { toValue: 1, fromValue: 0.8, useNativeDriver: true, tension: 100, friction: 8 }), Animated.timing(opacity, { toValue: 1, fromValue: 0, duration: 200, useNativeDriver: true }) ]).start(); }, []); // 按压动画 const handlePressIn = () =\u003e { Animated.spring(scale, { toValue: 0.95, useNativeDriver: true, tension: 200, friction: 8 }).start(); }; const handlePressOut = () =\u003e { Animated.spring(scale, { toValue: 1, useNativeDriver: true, tension: 200, friction: 8 }).start(); }; return ( \u003cAnimated.View style={[ styles.card, { transform: [ { translateX }, { scale } ], opacity } ]} \u003e \u003cPanGestureHandler onGestureEvent={onGestureEvent} onHandlerStateChange={onHandlerStateChange} \u003e \u003cAnimated.View style={styles.cardContent} onStartShouldSetResponder={() =\u003e true} onResponderGrant={handlePressIn} onResponderRelease={handlePressOut} \u003e \u003cText style={styles.title}\u003e{title}\u003c/Text\u003e \u003cText style={styles.content}\u003e{content}\u003c/Text\u003e \u003c/Animated.View\u003e \u003c/PanGestureHandler\u003e \u003c/Animated.View\u003e ); }; // 复杂动画序列 const ComplexAnimation = () =\u003e { const animatedValues = useRef({ scale: new Animated.Value(0), rotate: new Animated.Value(0), translateX: new Animated.Value(0), opacity: new Animated.Value(0) }).current; // 执行复杂动画序列 const startComplexAnimation = () =\u003e { const sequence = [ // 第一阶段：淡入和缩放 Animated.parallel([ Animated.timing(animatedValues.opacity, { toValue: 1, duration: 300, useNativeDriver: true }), Animated.spring(animatedValues.scale, { toValue: 1, tension: 100, friction: 8, useNativeDriver: true }) ]), // 第二阶段：旋转和移动 Animated.parallel([ Animated.timing(animatedValues.rotate, { toValue: 1, duration: 500, useNativeDriver: true }), Animated.timing(animatedValues.translateX, { toValue: 100, duration: 500, useNativeDriver: true }) ]), // 第三阶段：回弹 Animated.spring(animatedValues.translateX, { toValue: 0, tension: 100, friction: 8, useNativeDriver: true }) ]; Animated.sequence(sequence).start(); }; return ( \u003cAnimated.View style={[ styles.animatedBox, { transform: [ { scale: animatedValues.scale }, { rotate: animatedValues.rotate.interpolate({ inputRange: [0, 1], outputRange: ['0deg', '360deg'] }) }, { translateX: animatedValues.translateX } ], opacity: animatedValues.opacity } ]} /\u003e ); }; // 列表项进入动画 const ListItemEnterAnimation = ({ children, index, delay }) =\u003e { const translateY = useRef(new Animated.Value(50)).current; const opacity = useRef(new Animated.Value(0)).current; useEffect(() =\u003e { const timer = setTimeout(() =\u003e { Animated.parallel([ Animated.timing(translateY, { toValue: 0, duration: 300, useNativeDriver: true }), Animated.timing(opacity, { toValue: 1, duration: 300, useNativeDriver: true }) ]).start(); }, delay * index); return () =\u003e clearTimeout(timer); }, [index, delay]); return ( \u003cAnimated.View style={{ transform: [{ translateY }], opacity }} \u003e {children} \u003c/Animated.View\u003e ); }; 内存管理优化 图片内存优化 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 import React, { useState, useEffect, useCallback } from 'react'; import { Image, View, Dimensions } from 'react-native'; // 图片缓存管理器 class ImageCacheManager { constructor(maxCacheSize = 100) { this.cache = new Map(); this.maxCacheSize = maxCacheSize; this.accessOrder = []; } // 获取缓存的图片 get(uri) { if (this.cache.has(uri)) { // 更新访问顺序 this.updateAccessOrder(uri); return Promise.resolve(this.cache.get(uri)); } // 加载并缓存图片 return this.loadAndCache(uri); } // 加载并缓存图片 async loadAndCache(uri) { try { // 预加载图片信息以获取尺寸 const imageInfo = await this.getImageInfo(uri); // 根据屏幕尺寸调整图片大小 const optimizedUri = this.optimizeImageUri(uri, imageInfo); // 加载优化后的图片 const image = await this.loadImage(optimizedUri); // 添加到缓存 this.addToCache(uri, image); return image; } catch (error) { console.error('Failed to load image:', uri, error); throw error; } } // 优化图片URI optimizeImageUri(originalUri, imageInfo) { const { width: screenWidth } = Dimensions.get('window'); const { width: imageWidth, height: imageHeight } = imageInfo; // 如果图片宽度过大，添加尺寸参数 if (imageWidth \u003e screenWidth * 2) { const separator = originalUri.includes('?') ? '\u0026' : '?'; return `${originalUri}${separator}w=${screenWidth * 2}`; } return originalUri; } // 加载图片 loadImage(uri) { return new Promise((resolve, reject) =\u003e { Image.getSize( uri, (width, height) =\u003e { resolve({ uri, width, height }); }, reject ); }); } // 获取图片信息 getImageInfo(uri) { return new Promise((resolve, reject) =\u003e { Image.getSize( uri, (width, height) =\u003e resolve({ width, height }), reject ); }); } // 添加到缓存 addToCache(uri, image) { // 如果缓存已满，删除最久未使用的图片 if (this.cache.size \u003e= this.maxCacheSize) { const oldestUri = this.accessOrder.shift(); this.cache.delete(oldestUri); } this.cache.set(uri, image); this.accessOrder.push(uri); } // 更新访问顺序 updateAccessOrder(uri) { const index = this.accessOrder.indexOf(uri); if (index \u003e -1) { this.accessOrder.splice(index, 1); } this.accessOrder.push(uri); } // 清理缓存 clearCache() { this.cache.clear(); this.accessOrder = []; } // 获取缓存大小 getCacheSize() { return this.cache.size; } } // 优化的图片组件 const OptimizedImage = ({ source, style, placeholder, onLoad, onError, resizeMode = 'cover' }) =\u003e { const [imageLoaded, setImageLoaded] = useState(false); const [imageSource, setImageSource] = useState(placeholder || null); const cacheManager = React.useMemo(() =\u003e new ImageCacheManager(), []); useEffect(() =\u003e { const uri = typeof source === 'string' ? source : source.uri; if (!uri) return; // 从缓存获取图片 cacheManager.get(uri) .then(cachedImage =\u003e { setImageSource(cachedImage); setImageLoaded(true); onLoad?.(cachedImage); }) .catch(error =\u003e { console.error('Image load failed:', error); onError?.(error); }); // 清理函数 return () =\u003e { // 可以在这里添加清理逻辑 }; }, [source, onLoad, onError, cacheManager]); // 使用blurhash作为占位符 const [blurhash] = useState('LGF5?xYk^6#M@-5c,1J5@[or[Q6.'); return ( \u003cView style={style}\u003e {!imageLoaded \u0026\u0026 placeholder \u0026\u0026 ( \u003cImage source={placeholder} style={[style, { position: 'absolute' }]} blurRadius={2} /\u003e )} \u003cImage source={imageSource} style={[ style, { opacity: imageLoaded ? 1 : 0 } ]} resizeMode={resizeMode} onLoad={() =\u003e setImageLoaded(true)} /\u003e \u003c/View\u003e ); }; // 图片懒加载组件 const LazyImage = ({ source, style, containerStyle, lazy = true, threshold = 100 }) =\u003e { const [isVisible, setIsVisible] = useState(!lazy); const [hasLoaded, setHasLoaded] = useState(false); const viewRef = React.useRef(null); useEffect(() =\u003e { if (!lazy) return; const observer = new IntersectionObserver( ([entry]) =\u003e { if (entry.isIntersecting) { setIsVisible(true); observer.disconnect(); } }, { threshold: 0.1, rootMargin: `${threshold}px` } ); if (viewRef.current) { observer.observe(viewRef.current); } return () =\u003e observer.disconnect(); }, [lazy, threshold]); return ( \u003cView ref={viewRef} style={containerStyle}\u003e {isVisible \u0026\u0026 ( \u003cOptimizedImage source={source} style={style} onLoad={() =\u003e setHasLoaded(true)} placeholder={require('./assets/placeholder.png')} /\u003e )} \u003c/View\u003e ); }; 网络请求优化 请求缓存与批处理 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 // 网络请求管理器 class NetworkManager { constructor() { this.cache = new Map(); this.pendingRequests = new Map(); this.batchQueue = []; this.batchTimeout = null; this.batchDelay = 50; // 50ms批处理延迟 } // 请求配置 defaultConfig = { timeout: 10000, cache: true, cacheTime: 5 * 60 * 1000, // 5分钟 retry: 3, retryDelay: 1000 }; // 发送请求 async request(url, options = {}, config = {}) { const finalConfig = { ...this.defaultConfig, ...config }; const cacheKey = this.getCacheKey(url, options); // 检查缓存 if (finalConfig.cache \u0026\u0026 this.cache.has(cacheKey)) { const cached = this.cache.get(cacheKey); if (Date.now() - cached.timestamp \u003c finalConfig.cacheTime) { return cached.data; } else { this.cache.delete(cacheKey); } } // 检查是否有相同请求正在进行 if (this.pendingRequests.has(cacheKey)) { return this.pendingRequests.get(cacheKey); } // 创建请求Promise const requestPromise = this.executeRequest(url, options, finalConfig); this.pendingRequests.set(cacheKey, requestPromise); try { const response = await requestPromise; // 缓存响应 if (finalConfig.cache \u0026\u0026 response.ok) { this.cache.set(cacheKey, { data: response, timestamp: Date.now() }); } return response; } finally { this.pendingRequests.delete(cacheKey); } } // 执行请求 async executeRequest(url, options, config) { let lastError; for (let attempt = 0; attempt \u003c= config.retry; attempt++) { try { const controller = new AbortController(); const timeoutId = setTimeout(() =\u003e controller.abort(), config.timeout); const response = await fetch(url, { ...options, signal: controller.signal, headers: { 'Content-Type': 'application/json', ...options.headers } }); clearTimeout(timeoutId); if (!response.ok) { throw new Error(`HTTP ${response.status}: ${response.statusText}`); } const data = await response.json(); return { ...response, data }; } catch (error) { lastError = error; if (attempt \u003c config.retry) { // 指数退避重试 const delay = config.retryDelay * Math.pow(2, attempt); await new Promise(resolve =\u003e setTimeout(resolve, delay)); } } } throw lastError; } // 批量请求 batchRequest(requests) { return new Promise((resolve, reject) =\u003e { this.batchQueue.push({ requests, resolve, reject }); if (this.batchTimeout) { clearTimeout(this.batchTimeout); } this.batchTimeout = setTimeout(() =\u003e { this.processBatch(); }, this.batchDelay); }); } // 处理批量请求 async processBatch() { if (this.batchQueue.length === 0) return; const batch = this.batchQueue.splice(0); const allRequests = batch.flatMap(item =\u003e item.requests); try { const responses = await Promise.allSettled( allRequests.map(req =\u003e this.request(req.url, req.options, req.config)) ); // 按批次分组响应 let responseIndex = 0; batch.forEach(({ requests, resolve }) =\u003e { const batchResponses = responses.slice( responseIndex, responseIndex + requests.length ); responseIndex += requests.length; resolve(batchResponses); }); } catch (error) { batch.forEach(({ reject }) =\u003e reject(error)); } } // 并发控制请求 async concurrentRequests(requests, maxConcurrent = 3) { const results = []; const executing = []; for (const [index, request] of requests.entries()) { const promise = this.request(request.url, request.options, request.config) .then(response =\u003e ({ index, response })) .catch(error =\u003e ({ index, error })); results.push(promise); executing.push(promise); if (executing.length \u003e= maxConcurrent) { await Promise.race(executing); executing.splice(executing.findIndex(p =\u003e p === promise), 1); } } return Promise.allSettled(results); } // 生成缓存键 getCacheKey(url, options) { const optionsStr = JSON.stringify(options); return `${url}:${optionsStr}`; } // 清理缓存 clearCache() { this.cache.clear(); } // 获取缓存统计 getCacheStats() { return { size: this.cache.size, keys: Array.from(this.cache.keys()) }; } } // GraphQL查询管理器 class GraphQLManager extends NetworkManager { constructor(endpoint) { super(); this.endpoint = endpoint; this.queryCache = new Map(); } // 执行GraphQL查询 async query(query, variables = {}, options = {}) { const cacheKey = this.getGraphQLCacheKey(query, variables); // 检查查询缓存 if (this.queryCache.has(cacheKey)) { return this.queryCache.get(cacheKey); } const response = await this.request(this.endpoint, { method: 'POST', body: JSON.stringify({ query, variables }) }, options); // 缓存查询结果 if (response.ok) { this.queryCache.set(cacheKey, response.data); } return response; } // 生成GraphQL缓存键 getGraphQLCacheKey(query, variables) { const queryStr = typeof query === 'string' ? query : query.loc?.source.body || ''; const variablesStr = JSON.stringify(variables); const hash = this.simpleHash(queryStr + variablesStr); return `gql_${hash}`; } // 简单哈希函数 simpleHash(str) { let hash = 0; for (let i = 0; i \u003c str.length; i++) { const char = str.charCodeAt(i); hash = ((hash \u003c\u003c 5) - hash) + char; hash = hash \u0026 hash; } return hash.toString(36); } // 预取查询 prefetch(query, variables, options) { // 不等待结果，异步预取 this.query(query, variables, { ...options, cache: true }); } } // 使用示例 const networkManager = new NetworkManager(); const graphqlManager = new GraphQLManager('https://api.example.com/graphql'); // API服务 const ApiService = { // 获取用户信息 async getUser(userId) { return networkManager.request( `https://api.example.com/users/${userId}`, { method: 'GET' }, { cache: true, cacheTime: 10 * 60 * 1000 } ); }, // 批量获取用户信息 async getUsersBatch(userIds) { const requests = userIds.map(id =\u003e ({ url: `https://api.example.com/users/${id}`, options: { method: 'GET' } })); const responses = await networkManager.concurrentRequests(requests, 5); return responses .filter(r =\u003e r.status === 'fulfilled') .map(r =\u003e r.value.data); }, // GraphQL查询示例 async getUserPosts(userId, limit = 10) { const query = ` query GetUserPosts($userId: ID!, $limit: Int!) { user(id: $userId) { posts(first: $limit) { edges { node { id title content createdAt } } } } } `; return graphqlManager.query(query, { userId, limit }); }, // 预取用户数据 prefetchUserData(userId) { networkManager.request( `https://api.example.com/users/${userId}/profile`, { method: 'GET' }, { cache: true } ); graphqlManager.prefetch(` query GetUserDetails($userId: ID!) { user(id: $userId) { friends { id name avatar } achievements { id title description } } } `, { userId }); } }; 启动性能优化 Bundle拆分与懒加载 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 // 异步组件加载 const AsyncComponentLoader = ({ componentLoader, fallback }) =\u003e { const [Component, setComponent] = useState(null); useEffect(() =\u003e { componentLoader() .then(module =\u003e { setComponent(() =\u003e module.default); }) .catch(error =\u003e { console.error('Component loading failed:', error); }); }, [componentLoader]); if (!Component) { return fallback || \u003cActivityIndicator size=\"large\" /\u003e; } return \u003cComponent /\u003e; }; // 使用示例 const LazyUserProfile = () =\u003e ( \u003cAsyncComponentLoader componentLoader={() =\u003e import('./UserProfile')} fallback={\u003cView\u003e\u003cText\u003eLoading profile...\u003c/Text\u003e} /\u003e ); const LazySettings = () =\u003e ( \u003cAsyncComponentLoader componentLoader={() =\u003e import('./Settings')} fallback={\u003cView\u003e\u003cText\u003eLoading settings...\u003c/Text\u003e} /\u003e ); // 路由级别的代码分割 const createLazyRoute = (componentPath) =\u003e { return () =\u003e { const Component = React.lazy(() =\u003e import(componentPath)); return ( \u003cReact.Suspense fallback={\u003cActivityIndicator size=\"large\" /\u003e}\u003e \u003cComponent /\u003e \u003c/React.Suspense\u003e ); }; }; // 使用代码分割的路由配置 const routes = { Home: createLazyRoute('./screens/Home'), Profile: createLazyRoute('./screens/Profile'), Settings: createLazyRoute('./screens/Settings'), Chat: createLazyRoute('./screens/Chat') }; // Metro配置优化 (metro.config.js) module.exports = { transformer: { getTransformOptions: async () =\u003e ({ transform: { experimentalImportSupport: false, inlineRequires: true, }, }), }, resolver: { alias: { '@': './src', '@components': './src/components', '@screens': './src/screens', '@utils': './src/utils', '@assets': './src/assets' } }, watchFolders: [ './src' ], maxWorkers: 4, resetCache: true, // 启用压缩 minifierConfig: { keep_fnames: true, mangle: { keep_fnames: true } } }; // Bundle分析工具 const BundleAnalyzer = { // 获取Bundle大小信息 async getBundleInfo(platform = 'android') { const fs = require('fs'); const path = require('path'); const bundlePath = platform === 'android' ? 'android/app/build/generated/assets/react/release/index.android.bundle' : 'ios/YourApp/build/Build/Products/Release-iphoneos/YourApp.app/main.jsbundle'; try { const stats = fs.statSync(bundlePath); return { size: stats.size, sizeFormatted: this.formatFileSize(stats.size), path: bundlePath }; } catch (error) { console.error('Bundle file not found:', bundlePath); return null; } }, // 格式化文件大小 formatFileSize(bytes) { if (bytes === 0) return '0 Bytes'; const k = 1024; const sizes = ['Bytes', 'KB', 'MB', 'GB']; const i = Math.floor(Math.log(bytes) / Math.log(k)); return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]; }, // 分析Bundle内容 async analyzeBundle() { const { execSync } = require('child_process'); try { // 使用react-native-bundle-visualizer const result = execSync('npx react-native-bundle-visualizer', { encoding: 'utf8' }); console.log('Bundle analysis completed'); return result; } catch (error) { console.error('Bundle analysis failed:', error); return null; } } }; // 预加载管理器 class PreloadManager { constructor() { this.preloadQueue = []; this.isPreloading = false; } // 添加预加载任务 addPreloadTask(task) { this.preloadQueue.push(task); if (!this.isPreloading) { this.startPreload(); } } // 开始预加载 async startPreload() { if (this.isPreloading || this.preloadQueue.length === 0) return; this.isPreloading = true; while (this.preloadQueue.length \u003e 0) { const task = this.preloadQueue.shift(); try { await this.executePreloadTask(task); } catch (error) { console.error('Preload task failed:', error); } // 给UI线程一些时间 await new Promise(resolve =\u003e setTimeout(resolve, 100)); } this.isPreloading = false; } // 执行预加载任务 async executePreloadTask(task) { switch (task.type) { case 'component': await import(task.componentPath); break; case 'image': await Image.prefetch(task.imageUrl); break; case 'data': await task.dataLoader(); break; case 'asset': await this.preloadAsset(task.assetPath); break; default: console.warn('Unknown preload task type:', task.type); } } // 预加载资源 async preloadAsset(assetPath) { // 实现资源预加载逻辑 return new Promise(resolve =\u003e { setTimeout(resolve, 100); // 模拟预加载 }); } // 预加载常用组件 preloadCommonComponents() { this.addPreloadTask({ type: 'component', componentPath: './screens/Home' }); this.addPreloadTask({ type: 'component', componentPath: './screens/Profile' }); } // 预加载关键图片 preloadKeyImages() { const keyImages = [ 'https://example.com/logo.png', 'https://example.com/hero-image.jpg', 'https://example.com/background.jpg' ]; keyImages.forEach(imageUrl =\u003e { this.addPreloadTask({ type: 'image', imageUrl }); }); } // 预加载用户数据 preloadUserData(userId) { this.addPreloadTask({ type: 'data', dataLoader: () =\u003e ApiService.getUser(userId) }); this.addPreloadTask({ type: 'data', dataLoader: () =\u003e ApiService.getUserPosts(userId) }); } } // 使用预加载管理器 const preloadManager = new PreloadManager(); // 在应用启动时预加载 AppRegistry.registerComponent('MyApp', () =\u003e { // 启动预加载 preloadManager.preloadCommonComponents(); preloadManager.preloadKeyImages(); return App; }); 性能监控与分析 实时性能监控 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 // 性能监控SDK class PerformanceSDK { constructor(config) { this.config = { apiKey: config.apiKey, endpoint: config.endpoint, enableCrashReporting: config.enableCrashReporting || true, enableANRReporting: config.enableANRReporting || true, enableNetworkMonitoring: config.enableNetworkMonitoring || true, enableMemoryLeakDetection: config.enableMemoryLeakDetection || true, sampleRate: config.sampleRate || 1.0 }; this.metrics = { fps: [], memory: [], network: [], crashes: [], anr: [] }; this.isInitialized = false; } // 初始化SDK async initialize() { if (this.isInitialized) return; try { // 设置全局错误处理 if (this.config.enableCrashReporting) { this.setupCrashReporting(); } // 设置ANR监控 if (this.config.enableANRReporting) { this.setupANRMonitoring(); } // 设置网络监控 if (this.config.enableNetworkMonitoring) { this.setupNetworkMonitoring(); } // 设置内存泄漏检测 if (this.config.enableMemoryLeakDetection) { this.setupMemoryLeakDetection(); } this.isInitialized = true; console.log('Performance SDK initialized'); } catch (error) { console.error('Failed to initialize Performance SDK:', error); } } // 设置崩溃报告 setupCrashReporting() { const defaultErrorHandler = ErrorUtils.getGlobalHandler(); ErrorUtils.setGlobalHandler((error, isFatal) =\u003e { // 记录崩溃信息 const crashInfo = { message: error.message, stack: error.stack, isFatal, timestamp: Date.now(), deviceInfo: this.getDeviceInfo(), appState: this.getAppState() }; this.metrics.crashes.push(crashInfo); // 上报崩溃 this.reportCrash(crashInfo); // 调用原始错误处理器 defaultErrorHandler(error, isFatal); }); } // 设置ANR监控 setupANRMonitoring() { let isChecking = false; const checkANR = () =\u003e { if (isChecking) return; isChecking = true; const startTime = Date.now(); // 使用setTimeout检测阻塞 setTimeout(() =\u003e { const endTime = Date.now(); const duration = endTime - startTime; // 如果执行时间超过2秒，认为是ANR if (duration \u003e 2000) { const anrInfo = { duration, timestamp: Date.now(), stackTrace: this.getCurrentStackTrace(), deviceInfo: this.getDeviceInfo() }; this.metrics.anr.push(anrInfo); this.reportANR(anrInfo); } isChecking = false; }, 100); }; // 定期检查 setInterval(checkANR, 1000); } // 设置网络监控 setupNetworkMonitoring() { const originalFetch = global.fetch; global.fetch = async (...args) =\u003e { const startTime = Date.now(); const [url, options] = args; try { const response = await originalFetch(...args); const endTime = Date.now(); // 记录网络请求 const networkMetric = { url, method: options?.method || 'GET', status: response.status, duration: endTime - startTime, size: response.headers.get('content-length'), timestamp: endTime }; this.metrics.network.push(networkMetric); this.reportNetworkMetric(networkMetric); return response; } catch (error) { const endTime = Date.now(); // 记录网络错误 const networkMetric = { url, method: options?.method || 'GET', error: error.message, duration: endTime - startTime, timestamp: endTime }; this.metrics.network.push(networkMetric); this.reportNetworkMetric(networkMetric); throw error; } }; } // 设置内存泄漏检测 setupMemoryLeakDetection() { let lastMemoryUsage = 0; let leakCount = 0; setInterval(() =\u003e { const currentMemoryUsage = this.getMemoryUsage(); if (lastMemoryUsage \u003e 0) { const memoryIncrease = currentMemoryUsage - lastMemoryUsage; // 如果内存持续增长，可能存在内存泄漏 if (memoryIncrease \u003e 10 * 1024 * 1024) { // 10MB leakCount++; if (leakCount \u003e= 3) { const leakInfo = { currentUsage: currentMemoryUsage, increase: memoryIncrease, leakCount, timestamp: Date.now() }; this.reportMemoryLeak(leakInfo); leakCount = 0; } } else { leakCount = 0; } } lastMemoryUsage = currentMemoryUsage; this.metrics.memory.push({ usage: currentMemoryUsage, timestamp: Date.now() }); }, 30000); // 每30秒检查一次 } // 记录自定义指标 recordMetric(name, value, tags = {}) { const metric = { name, value, tags, timestamp: Date.now() }; // 根据指标类型分类 if (name.startsWith('fps.')) { this.metrics.fps.push(metric); } this.reportCustomMetric(metric); } // 记录FPS recordFPS(fps) { this.recordMetric('fps.current', fps); if (fps \u003c 30) { this.recordMetric('fps.low_fps', 1, { fps_range: '0-30' }); } else if (fps \u003c 45) { this.recordMetric('fps.low_fps', 1, { fps_range: '30-45' }); } } // 记录屏幕性能 recordScreenPerformance(screenName, metrics) { this.recordMetric(`screen.${screenName}.load_time`, metrics.loadTime); this.recordMetric(`screen.${screenName}.render_time`, metrics.renderTime); if (metrics.interactionTime) { this.recordMetric(`screen.${screenName}.interaction_time`, metrics.interactionTime); } } // 获取设备信息 getDeviceInfo() { return { platform: Platform.OS, version: Platform.Version, brand: DeviceInfo.getBrand(), model: DeviceInfo.getModel(), systemVersion: DeviceInfo.getSystemVersion(), appVersion: DeviceInfo.getVersion(), buildNumber: DeviceInfo.getBuildNumber(), bundleId: DeviceInfo.getBundleId(), isEmulator: DeviceInfo.isEmulatorSync() }; } // 获取应用状态 getAppState() { return { state: AppState.currentState, memoryUsage: this.getMemoryUsage(), storageUsage: this.getStorageUsage() }; } // 获取内存使用情况 getMemoryUsage() { if (Platform.OS === 'android') { return require('react-native').NativeModules.MemoryInfoModule.getMemoryUsage(); } else { return require('react-native').NativeModules.MemoryModule.getMemoryUsage(); } } // 获取存储使用情况 getStorageUsage() { // 实现存储使用情况获取 return { used: 0, total: 0 }; } // 获取当前堆栈跟踪 getCurrentStackTrace() { // 实现堆栈跟踪获取 return new Error().stack; } // 上报崩溃 reportCrash(crashInfo) { this.sendToEndpoint('/crashes', crashInfo); } // 上报ANR reportANR(anrInfo) { this.sendToEndpoint('/anr', anrInfo); } // 上报网络指标 reportNetworkMetric(networkMetric) { this.sendToEndpoint('/network', networkMetric); } // 上报内存泄漏 reportMemoryLeak(leakInfo) { this.sendToEndpoint('/memory-leaks', leakInfo); } // 上报自定义指标 reportCustomMetric(metric) { this.sendToEndpoint('/metrics', metric); } // 发送到端点 async sendToEndpoint(path, data) { if (Math.random() \u003e this.config.sampleRate) return; try { await fetch(`${this.config.endpoint}${path}`, { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-API-Key': this.config.apiKey }, body: JSON.stringify({ ...data, deviceInfo: this.getDeviceInfo(), sessionId: this.getSessionId() }) }); } catch (error) { console.error('Failed to report to endpoint:', error); } } // 获取会话ID getSessionId() { let sessionId = require('react-native').AsyncStorage.getItem('performance_session_id'); if (!sessionId) { sessionId = Date.now().toString(36) + Math.random().toString(36).substr(2); require('react-native').AsyncStorage.setItem('performance_session_id', sessionId); } return sessionId; } // 生成性能报告 generateReport() { const report = { timeRange: { start: Date.now() - 24 * 60 * 60 * 1000, // 24小时前 end: Date.now() }, summary: { totalCrashes: this.metrics.crashes.length, totalANR: this.metrics.anr.length, avgFPS: this.calculateAverageFPS(), avgMemoryUsage: this.calculateAverageMemory(), networkErrorRate: this.calculateNetworkErrorRate() }, details: { crashes: this.metrics.crashes.slice(-10), anr: this.metrics.anr.slice(-10), networkErrors: this.metrics.network.filter(m =\u003e m.error).slice(-20) } }; return report; } // 计算平均FPS calculateAverageFPS() { const recentFPS = this.metrics.fps.slice(-100); if (recentFPS.length === 0) return 60; const total = recentFPS.reduce((sum, metric) =\u003e sum + metric.value, 0); return Math.round(total / recentFPS.length); } // 计算平均内存使用 calculateAverageMemory() { const recentMemory = this.metrics.memory.slice(-50); if (recentMemory.length === 0) return 0; const total = recentMemory.reduce((sum, metric) =\u003e sum + metric.usage, 0); return Math.round(total / recentMemory.length); } // 计算网络错误率 calculateNetworkErrorRate() { const recentNetwork = this.metrics.network.slice(-100); if (recentNetwork.length === 0) return 0; const errors = recentNetwork.filter(m =\u003e m.error).length; return Math.round((errors / recentNetwork.length) * 100); } } // 使用示例 const performanceSDK = new PerformanceSDK({ apiKey: 'your-api-key', endpoint: 'https://your-performance-endpoint.com/api/v1', sampleRate: 0.1 // 10%采样率 }); // 在应用启动时初始化 performanceSDK.initialize(); // 在组件中使用 const MyComponent = () =\u003e { useEffect(() =\u003e { // 记录屏幕性能 const startTime = Date.now(); // 模拟渲染时间 setTimeout(() =\u003e { const renderTime = Date.now() - startTime; performanceSDK.recordScreenPerformance('MyComponent', { loadTime: startTime - performance.mark('component_start'), renderTime }); }, 0); // 记录FPS const fpsInterval = setInterval(() =\u003e { performanceSDK.recordFPS(58); // 示例FPS值 }, 1000); return () =\u003e { clearInterval(fpsInterval); }; }, []); return \u003cView\u003eMy Component\u003c/View\u003e; }; 总结 React Native性能优化需要从多个维度入手：\n渲染优化：\n使用React.memo和useCallback避免不必要渲染 优化FlatList性能配置 使用原生驱动的动画 实现图片懒加载和缓存 内存管理：\n实现智能图片缓存 避免内存泄漏 合理使用组件卸载 监控内存使用情况 网络优化：\n实现请求缓存和批处理 控制并发请求数量 使用GraphQL优化数据获取 预加载关键数据 启动优化：\n实现代码分割和懒加载 优化Bundle大小 预加载关键资源 异步加载非关键组件 监控分析：\n建立全面的性能监控体系 实时追踪关键指标 定期生成性能报告 持续优化和改进 通过系统性的性能优化策略，可以将React Native应用的性能提升到接近原生应用的水平，为用户提供流畅的60FPS体验。\n相关资源：\nReact Native官方性能指南 Flipper调试工具 Reactotron Bundle分析工具 ","wordCount":"5939","inLanguage":"zh-cn","datePublished":"2025-12-20T14:00:00+08:00","dateModified":"2025-12-20T14:00:00+08:00","author":{"@type":"Person","name":"Util Tech Team"},"mainEntityOfPage":{"@type":"WebPage","@id":"/blog/articles/react-native-performance-optimization/"},"publisher":{"@type":"Organization","name":"技术博客 - 有条工具","logo":{"@type":"ImageObject","url":"/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=/blog/ accesskey=h title="技术博客 - 有条工具 (Alt + H)">技术博客 - 有条工具</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=/blog/posts/ title="所有文章列表 - 有条工具技术博客：查看所有技术文章和教程内容"><span>文章</span></a></li><li><a href=https://www.util.cn title="有条工具 - 开发者的常用工具集合：无广告 · 本地计算 · 即开即用的在线工具平台，提供JSON格式化、SQL格式化、Markdown编辑器等实用工具"><span>有条工具</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=/blog/categories/ title="文章分类 - 有条工具技术博客：按技术领域分类的优质文章，包括前端开发、工具使用、编程技巧等"><span>分类</span></a></li><li><a href=/blog/tags/ title="标签云 - 有条工具技术博客：通过标签快速找到感兴趣的技术文章和教程内容"><span>标签</span></a></li><li><a href=/blog/archives/ title="文章归档 - 有条工具技术博客：按时间查看历史文章"><span>归档</span></a></li><li><a href=/blog/search/ title="搜索文章 - 有条工具技术博客：通过关键词搜索找到感兴趣的技术文章和教程内容，支持标题、内容、分类和标签搜索"><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><div class=post-content-wrapper><main class=post-content-main><header class=post-header-main><h1 class="post-title entry-hint-parent">React Native性能优化实战：打造60FPS流畅体验的终极指南</h1><div class=post-description>本文全面介绍React Native应用的性能优化技巧，包括渲染优化、内存管理、启动速度、网络请求等关键环节。</div><div class=post-meta><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91/ class=category-link>移动开发</a><a href=/blog/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ class=category-link>性能优化</a></div><span class=post-date>2025-12-20</span><span class=post-author>Util Tech Team</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'📁';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></div></header><div class=post-content><h2 id=引言>引言<a hidden class=anchor aria-hidden=true href=#引言>#</a></h2><p>React Native作为跨平台移动开发的主流框架，性能优化一直是开发者关注的重点。一个流畅的应用需要保持60FPS的帧率，快速响应交互，并且有效管理内存资源。本文将从底层原理到实际应用，全面探讨React Native性能优化的各种技巧。</p><h2 id=react-native架构与性能原理>React Native架构与性能原理<a hidden class=anchor aria-hidden=true href=#react-native架构与性能原理>#</a></h2><h3 id=渲染流程解析>渲染流程解析<a hidden class=anchor aria-hidden=true href=#渲染流程解析>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">132
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// React Native渲染流程
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#8b949e;font-style:italic>/*
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>JavaScript Thread (JS Thread)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>    ↓ (schedule work)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>UI Thread (Main Thread)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>    ↓ (create UI elements)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>Native Modules
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>    ↓ (render to screen)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>Display Hardware
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>*/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 性能监控工具
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> PerformanceMonitor {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.metrics <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>      fps<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>60</span>,
</span></span><span style=display:flex><span>      jsBundleLoadTime<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>      renderTime<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>      memoryUsage<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>      networkLatency<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.frameCount <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.lastFrameTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 开始性能监控
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  startMonitoring() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.startFPSMonitoring();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.startMemoryMonitoring();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.startNetworkMonitoring();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// FPS监控
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  startFPSMonitoring() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> measure <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> now <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> delta <span style=color:#ff7b72;font-weight:700>=</span> now <span style=color:#ff7b72;font-weight:700>-</span> <span style=color:#ff7b72>this</span>.lastFrameTime;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (delta <span style=color:#ff7b72;font-weight:700>&gt;=</span> <span style=color:#a5d6ff>1000</span>) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.metrics.fps <span style=color:#ff7b72;font-weight:700>=</span> Math.round((<span style=color:#ff7b72>this</span>.frameCount <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>1000</span>) <span style=color:#ff7b72;font-weight:700>/</span> delta);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.frameCount <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.lastFrameTime <span style=color:#ff7b72;font-weight:700>=</span> now;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// 上报性能数据
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#ff7b72>this</span>.reportMetrics();
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.frameCount<span style=color:#ff7b72;font-weight:700>++</span>;
</span></span><span style=display:flex><span>      requestAnimationFrame(measure);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    requestAnimationFrame(measure);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 内存使用监控
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  startMemoryMonitoring() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (Platform.OS <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;android&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> getMemoryInfo <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// Android内存监控
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#ff7b72>return</span> require(<span style=color:#a5d6ff>&#39;react-native&#39;</span>).NativeModules.MemoryInfoModule.getMemoryInfo();
</span></span><span style=display:flex><span>      };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      setInterval(<span style=color:#ff7b72>async</span> () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>const</span> memoryInfo <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> getMemoryInfo();
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.metrics.memoryUsage <span style=color:#ff7b72;font-weight:700>=</span> memoryInfo.usedMemory;
</span></span><span style=display:flex><span>        } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>          console.warn(<span style=color:#a5d6ff>&#39;Memory monitoring failed:&#39;</span>, error);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }, <span style=color:#a5d6ff>5000</span>);
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// iOS内存监控
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>const</span> getMemoryUsage <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> require(<span style=color:#a5d6ff>&#39;react-native&#39;</span>).NativeModules.MemoryModule.getMemoryUsage();
</span></span><span style=display:flex><span>      };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      setInterval(<span style=color:#ff7b72>async</span> () =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>const</span> memoryUsage <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> getMemoryUsage();
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.metrics.memoryUsage <span style=color:#ff7b72;font-weight:700>=</span> memoryUsage.heapSize;
</span></span><span style=display:flex><span>        } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>          console.warn(<span style=color:#a5d6ff>&#39;Memory monitoring failed:&#39;</span>, error);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }, <span style=color:#a5d6ff>5000</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 网络延迟监控
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  startNetworkMonitoring() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> originalFetch <span style=color:#ff7b72;font-weight:700>=</span> global.fetch;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    global.fetch <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>async</span> (...args) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> startTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> response <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> originalFetch(...args);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> endTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.metrics.networkLatency <span style=color:#ff7b72;font-weight:700>=</span> endTime <span style=color:#ff7b72;font-weight:700>-</span> startTime;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> response;
</span></span><span style=display:flex><span>      } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> endTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.metrics.networkLatency <span style=color:#ff7b72;font-weight:700>=</span> endTime <span style=color:#ff7b72;font-weight:700>-</span> startTime;
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>throw</span> error;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 上报性能指标
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  reportMetrics() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.metrics.fps <span style=color:#ff7b72;font-weight:700>&lt;</span> <span style=color:#a5d6ff>50</span>) {
</span></span><span style=display:flex><span>      console.warn(<span style=color:#a5d6ff>&#39;Low FPS detected:&#39;</span>, <span style=color:#ff7b72>this</span>.metrics.fps);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 发送到监控系统
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>this</span>.sendToAnalytics(<span style=color:#a5d6ff>&#39;performance_warning&#39;</span>, {
</span></span><span style=display:flex><span>        fps<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.metrics.fps,
</span></span><span style=display:flex><span>        memoryUsage<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.metrics.memoryUsage,
</span></span><span style=display:flex><span>        timestamp<span style=color:#ff7b72;font-weight:700>:</span> Date.now()
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 发送分析数据
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  sendToAnalytics(event, data) {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 集成分析SDK
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#8b949e;font-style:italic>// Analytics.track(event, data);
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 使用示例
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> performanceMonitor <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> PerformanceMonitor();
</span></span><span style=display:flex><span>performanceMonitor.startMonitoring();
</span></span></code></pre></td></tr></table></div></div><h2 id=渲染性能优化>渲染性能优化<a hidden class=anchor aria-hidden=true href=#渲染性能优化>#</a></h2><h3 id=组件优化策略>组件优化策略<a hidden class=anchor aria-hidden=true href=#组件优化策略>#</a></h3><h4 id=使用reactmemo避免不必要渲染>使用React.memo避免不必要渲染<a hidden class=anchor aria-hidden=true href=#使用reactmemo避免不必要渲染>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">60
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff7b72>import</span> React, { memo } from <span style=color:#a5d6ff>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> { View, Text, TouchableOpacity, StyleSheet } from <span style=color:#a5d6ff>&#39;react-native&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 普通组件（每次父组件更新都会重新渲染）
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> ListItem <span style=color:#ff7b72;font-weight:700>=</span> (props) =&gt; {
</span></span><span style=display:flex><span>  console.log(<span style=color:#a5d6ff>&#39;ListItem rendered&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>TouchableOpacity style<span style=color:#ff7b72;font-weight:700>=</span>{styles.item} onPress<span style=color:#ff7b72;font-weight:700>=</span>{props.onPress}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.title}<span style=color:#ff7b72;font-weight:700>&gt;</span>{props.title}<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.subtitle}<span style=color:#ff7b72;font-weight:700>&gt;</span>{props.subtitle}<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/TouchableOpacity&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 优化后的组件（仅在props变化时重新渲染）
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> OptimizedListItem <span style=color:#ff7b72;font-weight:700>=</span> memo((props) =&gt; {
</span></span><span style=display:flex><span>  console.log(<span style=color:#a5d6ff>&#39;OptimizedListItem rendered&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 使用useCallback优化回调函数
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> handlePress <span style=color:#ff7b72;font-weight:700>=</span> React.useCallback(() =&gt; {
</span></span><span style=display:flex><span>    props.onPress(props.id);
</span></span><span style=display:flex><span>  }, [props.id, props.onPress]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>TouchableOpacity style<span style=color:#ff7b72;font-weight:700>=</span>{styles.item} onPress<span style=color:#ff7b72;font-weight:700>=</span>{handlePress}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.title}<span style=color:#ff7b72;font-weight:700>&gt;</span>{props.title}<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.subtitle}<span style=color:#ff7b72;font-weight:700>&gt;</span>{props.subtitle}<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/TouchableOpacity&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}, (prevProps, nextProps) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 自定义比较函数
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    prevProps.id <span style=color:#ff7b72;font-weight:700>===</span> nextProps.id <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span>
</span></span><span style=display:flex><span>    prevProps.title <span style=color:#ff7b72;font-weight:700>===</span> nextProps.title <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span>
</span></span><span style=display:flex><span>    prevProps.subtitle <span style=color:#ff7b72;font-weight:700>===</span> nextProps.subtitle
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 复杂对象比较优化
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> MemoizedComplexItem <span style=color:#ff7b72;font-weight:700>=</span> memo(({ user, settings }) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> lastUserRef <span style=color:#ff7b72;font-weight:700>=</span> React.useRef(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 深度比较user对象
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>if</span> (lastUserRef.current<span style=color:#ff7b72;font-weight:700>?</span>.id <span style=color:#ff7b72;font-weight:700>!==</span> user.id <span style=color:#ff7b72;font-weight:700>||</span>
</span></span><span style=display:flex><span>      lastUserRef.current<span style=color:#ff7b72;font-weight:700>?</span>.name <span style=color:#ff7b72;font-weight:700>!==</span> user.name <span style=color:#ff7b72;font-weight:700>||</span>
</span></span><span style=display:flex><span>      lastUserRef.current<span style=color:#ff7b72;font-weight:700>?</span>.avatar <span style=color:#ff7b72;font-weight:700>!==</span> user.avatar) {
</span></span><span style=display:flex><span>    lastUserRef.current <span style=color:#ff7b72;font-weight:700>=</span> user;
</span></span><span style=display:flex><span>    console.log(<span style=color:#a5d6ff>&#39;User data changed, re-rendering&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>View style<span style=color:#ff7b72;font-weight:700>=</span>{styles.complexItem}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>Image source<span style=color:#ff7b72;font-weight:700>=</span>{{ uri<span style=color:#ff7b72;font-weight:700>:</span> user.avatar }} style<span style=color:#ff7b72;font-weight:700>=</span>{styles.avatar} <span style=color:#ff7b72;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>View style<span style=color:#ff7b72;font-weight:700>=</span>{styles.userInfo}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.userName}<span style=color:#ff7b72;font-weight:700>&gt;</span>{user.name}<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.userEmail}<span style=color:#ff7b72;font-weight:700>&gt;</span>{user.email}<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/View&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/View&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h4 id=flatlist优化>FlatList优化<a hidden class=anchor aria-hidden=true href=#flatlist优化>#</a></h4><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">186
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff7b72>import</span> React, { useState, useCallback, useMemo, useRef } from <span style=color:#a5d6ff>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> { FlatList, View, Text, RefreshControl, ActivityIndicator } from <span style=color:#a5d6ff>&#39;react-native&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> OptimizedFlatList <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> [data, setData] <span style=color:#ff7b72;font-weight:700>=</span> useState([]);
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> [loading, setLoading] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> [refreshing, setRefreshing] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> flatListRef <span style=color:#ff7b72;font-weight:700>=</span> useRef(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 生成大量测试数据
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> generateData <span style=color:#ff7b72;font-weight:700>=</span> useCallback((start, count) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> Array.from({ length<span style=color:#ff7b72;font-weight:700>:</span> count }, (_, index) =&gt; ({
</span></span><span style=display:flex><span>      id<span style=color:#ff7b72;font-weight:700>:</span> start <span style=color:#ff7b72;font-weight:700>+</span> index,
</span></span><span style=display:flex><span>      title<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>`Item </span><span style=color:#a5d6ff>${</span>start <span style=color:#ff7b72;font-weight:700>+</span> index<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>,
</span></span><span style=display:flex><span>      subtitle<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>`Subtitle for item </span><span style=color:#a5d6ff>${</span>start <span style=color:#ff7b72;font-weight:700>+</span> index<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>,
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 复杂对象用于测试渲染性能
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      metadata<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        created<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>new</span> Date().toISOString(),
</span></span><span style=display:flex><span>        tags<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>&#39;tag1&#39;</span>, <span style=color:#a5d6ff>&#39;tag2&#39;</span>, <span style=color:#a5d6ff>&#39;tag3&#39;</span>],
</span></span><span style=display:flex><span>        score<span style=color:#ff7b72;font-weight:700>:</span> Math.random() <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>100</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }));
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 初始化数据
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  React.useEffect(() =&gt; {
</span></span><span style=display:flex><span>    setData(generateData(<span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>1000</span>));
</span></span><span style=display:flex><span>  }, [generateData]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 渲染项组件
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> renderItem <span style=color:#ff7b72;font-weight:700>=</span> useCallback(({ item, index }) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>MemoizedListItem
</span></span><span style=display:flex><span>        item<span style=color:#ff7b72;font-weight:700>=</span>{item}
</span></span><span style=display:flex><span>        index<span style=color:#ff7b72;font-weight:700>=</span>{index}
</span></span><span style=display:flex><span>        onPress<span style=color:#ff7b72;font-weight:700>=</span>{handleItemPress}
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 项的唯一键
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> keyExtractor <span style=color:#ff7b72;font-weight:700>=</span> useCallback((item) =&gt; item.id.toString(), []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 智能滚动性能优化
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> getItemLayout <span style=color:#ff7b72;font-weight:700>=</span> useCallback((data, index) =&gt; ({
</span></span><span style=display:flex><span>    length<span style=color:#ff7b72;font-weight:700>:</span> ITEM_HEIGHT,
</span></span><span style=display:flex><span>    offset<span style=color:#ff7b72;font-weight:700>:</span> ITEM_HEIGHT <span style=color:#ff7b72;font-weight:700>*</span> index,
</span></span><span style=display:flex><span>    index,
</span></span><span style=display:flex><span>  }), []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 处理项目点击
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> handleItemPress <span style=color:#ff7b72;font-weight:700>=</span> useCallback((id) =&gt; {
</span></span><span style=display:flex><span>    console.log(<span style=color:#a5d6ff>&#39;Item pressed:&#39;</span>, id);
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 下拉刷新
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> handleRefresh <span style=color:#ff7b72;font-weight:700>=</span> useCallback(<span style=color:#ff7b72>async</span> () =&gt; {
</span></span><span style=display:flex><span>    setRefreshing(<span style=color:#79c0ff>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 模拟网络请求
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>new</span> Promise(resolve =&gt; setTimeout(resolve, <span style=color:#a5d6ff>1000</span>));
</span></span><span style=display:flex><span>      setData(prevData =&gt; [...generateData(<span style=color:#a5d6ff>1000</span>, <span style=color:#a5d6ff>10</span>), ...prevData]);
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      console.error(<span style=color:#a5d6ff>&#39;Refresh failed:&#39;</span>, error);
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>finally</span> {
</span></span><span style=display:flex><span>      setRefreshing(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }, [generateData]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 加载更多
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> handleLoadMore <span style=color:#ff7b72;font-weight:700>=</span> useCallback(<span style=color:#ff7b72>async</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (loading) <span style=color:#ff7b72>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    setLoading(<span style=color:#79c0ff>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 模拟加载更多
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>new</span> Promise(resolve =&gt; setTimeout(resolve, <span style=color:#a5d6ff>500</span>));
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> newData <span style=color:#ff7b72;font-weight:700>=</span> generateData(data.length, <span style=color:#a5d6ff>20</span>);
</span></span><span style=display:flex><span>      setData(prevData =&gt; [...prevData, ...newData]);
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      console.error(<span style=color:#a5d6ff>&#39;Load more failed:&#39;</span>, error);
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>finally</span> {
</span></span><span style=display:flex><span>      setLoading(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }, [loading, data.length, generateData]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 列表头部组件
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> ListHeaderComponent <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>View style<span style=color:#ff7b72;font-weight:700>=</span>{styles.header}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.headerText}<span style=color:#ff7b72;font-weight:700>&gt;</span>Optimized List ({data.length} items)<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/View&gt;</span>
</span></span><span style=display:flex><span>  ), [data.length]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 列表尾部组件
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> ListFooterComponent <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; (
</span></span><span style=display:flex><span>    loading <span style=color:#ff7b72;font-weight:700>?</span> (
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>View style<span style=color:#ff7b72;font-weight:700>=</span>{styles.footer}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>ActivityIndicator size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;large&#34;</span> color<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;#007AFF&#34;</span> <span style=color:#ff7b72;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.footerText}<span style=color:#ff7b72;font-weight:700>&gt;</span>Loading more...<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/View&gt;</span>
</span></span><span style=display:flex><span>    ) <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>null</span>
</span></span><span style=display:flex><span>  ), [loading]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 空列表组件
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> ListEmptyComponent <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>View style<span style=color:#ff7b72;font-weight:700>=</span>{styles.empty}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.emptyText}<span style=color:#ff7b72;font-weight:700>&gt;</span>No data available<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/View&gt;</span>
</span></span><span style=display:flex><span>  ), []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>FlatList
</span></span><span style=display:flex><span>      ref<span style=color:#ff7b72;font-weight:700>=</span>{flatListRef}
</span></span><span style=display:flex><span>      data<span style=color:#ff7b72;font-weight:700>=</span>{data}
</span></span><span style=display:flex><span>      renderItem<span style=color:#ff7b72;font-weight:700>=</span>{renderItem}
</span></span><span style=display:flex><span>      keyExtractor<span style=color:#ff7b72;font-weight:700>=</span>{keyExtractor}
</span></span><span style=display:flex><span>      getItemLayout<span style=color:#ff7b72;font-weight:700>=</span>{getItemLayout}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 性能优化属性
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      removeClippedSubviews<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#79c0ff>true</span>}
</span></span><span style=display:flex><span>      maxToRenderPerBatch<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>10</span>}
</span></span><span style=display:flex><span>      updateCellsBatchingPeriod<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>50</span>}
</span></span><span style=display:flex><span>      initialNumToRender<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>10</span>}
</span></span><span style=display:flex><span>      windowSize<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>10</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 滚动优化
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      showsVerticalScrollIndicator<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#79c0ff>false</span>}
</span></span><span style=display:flex><span>      contentContainerStyle<span style=color:#ff7b72;font-weight:700>=</span>{styles.listContainer}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 加载和刷新
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      refreshControl<span style=color:#ff7b72;font-weight:700>=</span>{
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>RefreshControl
</span></span><span style=display:flex><span>          refreshing<span style=color:#ff7b72;font-weight:700>=</span>{refreshing}
</span></span><span style=display:flex><span>          onRefresh<span style=color:#ff7b72;font-weight:700>=</span>{handleRefresh}
</span></span><span style=display:flex><span>          colors<span style=color:#ff7b72;font-weight:700>=</span>{[<span style=color:#a5d6ff>&#39;#007AFF&#39;</span>]}
</span></span><span style=display:flex><span>          tintColor<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;#007AFF&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 组件配置
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      ListHeaderComponent<span style=color:#ff7b72;font-weight:700>=</span>{ListHeaderComponent}
</span></span><span style=display:flex><span>      ListFooterComponent<span style=color:#ff7b72;font-weight:700>=</span>{ListFooterComponent}
</span></span><span style=display:flex><span>      ListEmptyComponent<span style=color:#ff7b72;font-weight:700>=</span>{ListEmptyComponent}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 滚动到底部加载更多
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      onEndReached<span style=color:#ff7b72;font-weight:700>=</span>{handleLoadMore}
</span></span><span style=display:flex><span>      onEndReachedThreshold<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>0.1</span>}
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 优化的列表项组件
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> MemoizedListItem <span style=color:#ff7b72;font-weight:700>=</span> memo(({ item, index, onPress }) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 使用useMemo缓存计算结果
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> formattedTitle <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>item.title<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff> #</span><span style=color:#a5d6ff>${</span>index <span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#a5d6ff>1</span><span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>;
</span></span><span style=display:flex><span>  }, [item.title, index]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> metadataInfo <span style=color:#ff7b72;font-weight:700>=</span> useMemo(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> score <span style=color:#ff7b72;font-weight:700>=</span> Math.round(item.metadata.score);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> tags <span style=color:#ff7b72;font-weight:700>=</span> item.metadata.tags.slice(<span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>2</span>).join(<span style=color:#a5d6ff>&#39;, &#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>`Score: </span><span style=color:#a5d6ff>${</span>score<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff> | Tags: </span><span style=color:#a5d6ff>${</span>tags<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>;
</span></span><span style=display:flex><span>  }, [item.metadata]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>TouchableOpacity
</span></span><span style=display:flex><span>      style<span style=color:#ff7b72;font-weight:700>=</span>{styles.item}
</span></span><span style=display:flex><span>      onPress<span style=color:#ff7b72;font-weight:700>=</span>{() =&gt; onPress(item.id)}
</span></span><span style=display:flex><span>      activeOpacity<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>0.7</span>}
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>View style<span style=color:#ff7b72;font-weight:700>=</span>{styles.itemContent}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.itemTitle} numberOfLines<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>1</span>}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>          {formattedTitle}
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.itemSubtitle} numberOfLines<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>2</span>}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>          {item.subtitle}
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.itemMetadata}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>          {metadataInfo}
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/View&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/TouchableOpacity&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h3 id=动画性能优化>动画性能优化<a hidden class=anchor aria-hidden=true href=#动画性能优化>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">190
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">191
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">192
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">193
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">194
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">195
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">196
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">197
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">198
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">199
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">200
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">201
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">202
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">203
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">204
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">205
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">206
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">207
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">208
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">209
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">210
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">211
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">212
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">213
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">214
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">215
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">216
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">217
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">218
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">219
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">220
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">221
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">222
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">223
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">224
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">225
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">226
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">227
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">228
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">229
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">230
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">231
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">232
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">233
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff7b72>import</span> React, { useRef, useEffect } from <span style=color:#a5d6ff>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> {
</span></span><span style=display:flex><span>  View,
</span></span><span style=display:flex><span>  Text,
</span></span><span style=display:flex><span>  StyleSheet,
</span></span><span style=display:flex><span>  Animated,
</span></span><span style=display:flex><span>  PanGestureHandler,
</span></span><span style=display:flex><span>  State
</span></span><span style=display:flex><span>} from <span style=color:#a5d6ff>&#39;react-native&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> { PanGestureHandler } from <span style=color:#a5d6ff>&#39;react-native-gesture-handler&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 使用原生驱动的高性能动画
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> AnimatedCard <span style=color:#ff7b72;font-weight:700>=</span> ({ title, content, onSwipe }) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> translateX <span style=color:#ff7b72;font-weight:700>=</span> useRef(<span style=color:#ff7b72>new</span> Animated.Value(<span style=color:#a5d6ff>0</span>)).current;
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> scale <span style=color:#ff7b72;font-weight:700>=</span> useRef(<span style=color:#ff7b72>new</span> Animated.Value(<span style=color:#a5d6ff>1</span>)).current;
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> opacity <span style=color:#ff7b72;font-weight:700>=</span> useRef(<span style=color:#ff7b72>new</span> Animated.Value(<span style=color:#a5d6ff>1</span>)).current;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 手势处理
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> onGestureEvent <span style=color:#ff7b72;font-weight:700>=</span> Animated.event(
</span></span><span style=display:flex><span>    [{ nativeEvent<span style=color:#ff7b72;font-weight:700>:</span> { translationX<span style=color:#ff7b72;font-weight:700>:</span> translateX } }],
</span></span><span style=display:flex><span>    { useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span> }
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> onHandlerStateChange <span style=color:#ff7b72;font-weight:700>=</span> (event) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (event.nativeEvent.state <span style=color:#ff7b72;font-weight:700>===</span> State.END) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> { translationX } <span style=color:#ff7b72;font-weight:700>=</span> event.nativeEvent;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 判断滑动方向和距离
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>if</span> (Math.abs(translationX) <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>100</span>) {
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// 执行滑出动画
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        Animated.parallel([
</span></span><span style=display:flex><span>          Animated.timing(translateX, {
</span></span><span style=display:flex><span>            toValue<span style=color:#ff7b72;font-weight:700>:</span> translationX <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>300</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>300</span>,
</span></span><span style=display:flex><span>            duration<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>250</span>,
</span></span><span style=display:flex><span>            useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>          }),
</span></span><span style=display:flex><span>          Animated.timing(opacity, {
</span></span><span style=display:flex><span>            toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>            duration<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>250</span>,
</span></span><span style=display:flex><span>            useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>          })
</span></span><span style=display:flex><span>        ]).start(() =&gt; {
</span></span><span style=display:flex><span>          onSwipe(translationX <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span> <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>&#39;right&#39;</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;left&#39;</span>);
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      } <span style=color:#ff7b72>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// 回弹动画
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        Animated.spring(translateX, {
</span></span><span style=display:flex><span>          toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>          useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>          tension<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>100</span>,
</span></span><span style=display:flex><span>          friction<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>8</span>
</span></span><span style=display:flex><span>        }).start();
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 进入动画
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  useEffect(() =&gt; {
</span></span><span style=display:flex><span>    Animated.parallel([
</span></span><span style=display:flex><span>      Animated.spring(scale, {
</span></span><span style=display:flex><span>        toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>        fromValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0.8</span>,
</span></span><span style=display:flex><span>        useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>        tension<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>100</span>,
</span></span><span style=display:flex><span>        friction<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>8</span>
</span></span><span style=display:flex><span>      }),
</span></span><span style=display:flex><span>      Animated.timing(opacity, {
</span></span><span style=display:flex><span>        toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>        fromValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>        duration<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>200</span>,
</span></span><span style=display:flex><span>        useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    ]).start();
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 按压动画
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> handlePressIn <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    Animated.spring(scale, {
</span></span><span style=display:flex><span>      toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0.95</span>,
</span></span><span style=display:flex><span>      useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>      tension<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>200</span>,
</span></span><span style=display:flex><span>      friction<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>8</span>
</span></span><span style=display:flex><span>    }).start();
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> handlePressOut <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    Animated.spring(scale, {
</span></span><span style=display:flex><span>      toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>      useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>      tension<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>200</span>,
</span></span><span style=display:flex><span>      friction<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>8</span>
</span></span><span style=display:flex><span>    }).start();
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>Animated.View
</span></span><span style=display:flex><span>      style<span style=color:#ff7b72;font-weight:700>=</span>{[
</span></span><span style=display:flex><span>        styles.card,
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          transform<span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>            { translateX },
</span></span><span style=display:flex><span>            { scale }
</span></span><span style=display:flex><span>          ],
</span></span><span style=display:flex><span>          opacity
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]}
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>PanGestureHandler
</span></span><span style=display:flex><span>        onGestureEvent<span style=color:#ff7b72;font-weight:700>=</span>{onGestureEvent}
</span></span><span style=display:flex><span>        onHandlerStateChange<span style=color:#ff7b72;font-weight:700>=</span>{onHandlerStateChange}
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>Animated.View
</span></span><span style=display:flex><span>          style<span style=color:#ff7b72;font-weight:700>=</span>{styles.cardContent}
</span></span><span style=display:flex><span>          onStartShouldSetResponder<span style=color:#ff7b72;font-weight:700>=</span>{() =&gt; <span style=color:#79c0ff>true</span>}
</span></span><span style=display:flex><span>          onResponderGrant<span style=color:#ff7b72;font-weight:700>=</span>{handlePressIn}
</span></span><span style=display:flex><span>          onResponderRelease<span style=color:#ff7b72;font-weight:700>=</span>{handlePressOut}
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.title}<span style=color:#ff7b72;font-weight:700>&gt;</span>{title}<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#ff7b72;font-weight:700>&lt;</span>Text style<span style=color:#ff7b72;font-weight:700>=</span>{styles.content}<span style=color:#ff7b72;font-weight:700>&gt;</span>{content}<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Animated.View&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/PanGestureHandler&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Animated.View&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 复杂动画序列
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> ComplexAnimation <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> animatedValues <span style=color:#ff7b72;font-weight:700>=</span> useRef({
</span></span><span style=display:flex><span>    scale<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>new</span> Animated.Value(<span style=color:#a5d6ff>0</span>),
</span></span><span style=display:flex><span>    rotate<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>new</span> Animated.Value(<span style=color:#a5d6ff>0</span>),
</span></span><span style=display:flex><span>    translateX<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>new</span> Animated.Value(<span style=color:#a5d6ff>0</span>),
</span></span><span style=display:flex><span>    opacity<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>new</span> Animated.Value(<span style=color:#a5d6ff>0</span>)
</span></span><span style=display:flex><span>  }).current;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 执行复杂动画序列
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> startComplexAnimation <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> sequence <span style=color:#ff7b72;font-weight:700>=</span> [
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 第一阶段：淡入和缩放
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      Animated.parallel([
</span></span><span style=display:flex><span>        Animated.timing(animatedValues.opacity, {
</span></span><span style=display:flex><span>          toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>          duration<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>300</span>,
</span></span><span style=display:flex><span>          useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>        }),
</span></span><span style=display:flex><span>        Animated.spring(animatedValues.scale, {
</span></span><span style=display:flex><span>          toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>          tension<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>100</span>,
</span></span><span style=display:flex><span>          friction<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>8</span>,
</span></span><span style=display:flex><span>          useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>      ]),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 第二阶段：旋转和移动
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      Animated.parallel([
</span></span><span style=display:flex><span>        Animated.timing(animatedValues.rotate, {
</span></span><span style=display:flex><span>          toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>          duration<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>500</span>,
</span></span><span style=display:flex><span>          useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>        }),
</span></span><span style=display:flex><span>        Animated.timing(animatedValues.translateX, {
</span></span><span style=display:flex><span>          toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>100</span>,
</span></span><span style=display:flex><span>          duration<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>500</span>,
</span></span><span style=display:flex><span>          useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>      ]),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 第三阶段：回弹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      Animated.spring(animatedValues.translateX, {
</span></span><span style=display:flex><span>        toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>        tension<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>100</span>,
</span></span><span style=display:flex><span>        friction<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>8</span>,
</span></span><span style=display:flex><span>        useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Animated.sequence(sequence).start();
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>Animated.View
</span></span><span style=display:flex><span>      style<span style=color:#ff7b72;font-weight:700>=</span>{[
</span></span><span style=display:flex><span>        styles.animatedBox,
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          transform<span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>            { scale<span style=color:#ff7b72;font-weight:700>:</span> animatedValues.scale },
</span></span><span style=display:flex><span>            { rotate<span style=color:#ff7b72;font-weight:700>:</span> animatedValues.rotate.interpolate({
</span></span><span style=display:flex><span>              inputRange<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>0</span>, <span style=color:#a5d6ff>1</span>],
</span></span><span style=display:flex><span>              outputRange<span style=color:#ff7b72;font-weight:700>:</span> [<span style=color:#a5d6ff>&#39;0deg&#39;</span>, <span style=color:#a5d6ff>&#39;360deg&#39;</span>]
</span></span><span style=display:flex><span>            }) },
</span></span><span style=display:flex><span>            { translateX<span style=color:#ff7b72;font-weight:700>:</span> animatedValues.translateX }
</span></span><span style=display:flex><span>          ],
</span></span><span style=display:flex><span>          opacity<span style=color:#ff7b72;font-weight:700>:</span> animatedValues.opacity
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]}
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 列表项进入动画
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> ListItemEnterAnimation <span style=color:#ff7b72;font-weight:700>=</span> ({ children, index, delay }) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> translateY <span style=color:#ff7b72;font-weight:700>=</span> useRef(<span style=color:#ff7b72>new</span> Animated.Value(<span style=color:#a5d6ff>50</span>)).current;
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> opacity <span style=color:#ff7b72;font-weight:700>=</span> useRef(<span style=color:#ff7b72>new</span> Animated.Value(<span style=color:#a5d6ff>0</span>)).current;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  useEffect(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> timer <span style=color:#ff7b72;font-weight:700>=</span> setTimeout(() =&gt; {
</span></span><span style=display:flex><span>      Animated.parallel([
</span></span><span style=display:flex><span>        Animated.timing(translateY, {
</span></span><span style=display:flex><span>          toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>          duration<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>300</span>,
</span></span><span style=display:flex><span>          useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>        }),
</span></span><span style=display:flex><span>        Animated.timing(opacity, {
</span></span><span style=display:flex><span>          toValue<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1</span>,
</span></span><span style=display:flex><span>          duration<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>300</span>,
</span></span><span style=display:flex><span>          useNativeDriver<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>      ]).start();
</span></span><span style=display:flex><span>    }, delay <span style=color:#ff7b72;font-weight:700>*</span> index);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> () =&gt; clearTimeout(timer);
</span></span><span style=display:flex><span>  }, [index, delay]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>Animated.View
</span></span><span style=display:flex><span>      style<span style=color:#ff7b72;font-weight:700>=</span>{{
</span></span><span style=display:flex><span>        transform<span style=color:#ff7b72;font-weight:700>:</span> [{ translateY }],
</span></span><span style=display:flex><span>        opacity
</span></span><span style=display:flex><span>      }}
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      {children}
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Animated.View&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h2 id=内存管理优化>内存管理优化<a hidden class=anchor aria-hidden=true href=#内存管理优化>#</a></h2><h3 id=图片内存优化>图片内存优化<a hidden class=anchor aria-hidden=true href=#图片内存优化>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">190
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">191
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">192
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">193
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">194
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">195
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">196
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">197
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">198
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">199
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">200
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">201
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">202
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">203
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">204
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">205
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">206
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">207
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">208
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">209
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">210
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">211
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">212
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">213
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">214
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">215
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">216
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">217
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">218
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">219
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">220
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">221
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">222
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">223
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff7b72>import</span> React, { useState, useEffect, useCallback } from <span style=color:#a5d6ff>&#39;react&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> { Image, View, Dimensions } from <span style=color:#a5d6ff>&#39;react-native&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 图片缓存管理器
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> ImageCacheManager {
</span></span><span style=display:flex><span>  constructor(maxCacheSize <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>100</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.cache <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> Map();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.maxCacheSize <span style=color:#ff7b72;font-weight:700>=</span> maxCacheSize;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.accessOrder <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取缓存的图片
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  get(uri) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.cache.has(uri)) {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 更新访问顺序
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>this</span>.updateAccessOrder(uri);
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> Promise.resolve(<span style=color:#ff7b72>this</span>.cache.get(uri));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 加载并缓存图片
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>this</span>.loadAndCache(uri);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 加载并缓存图片
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> loadAndCache(uri) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 预加载图片信息以获取尺寸
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>const</span> imageInfo <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>this</span>.getImageInfo(uri);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 根据屏幕尺寸调整图片大小
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>const</span> optimizedUri <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.optimizeImageUri(uri, imageInfo);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 加载优化后的图片
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>const</span> image <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>this</span>.loadImage(optimizedUri);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 添加到缓存
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>this</span>.addToCache(uri, image);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> image;
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      console.error(<span style=color:#a5d6ff>&#39;Failed to load image:&#39;</span>, uri, error);
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>throw</span> error;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 优化图片URI
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  optimizeImageUri(originalUri, imageInfo) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> { width<span style=color:#ff7b72;font-weight:700>:</span> screenWidth } <span style=color:#ff7b72;font-weight:700>=</span> Dimensions.get(<span style=color:#a5d6ff>&#39;window&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> { width<span style=color:#ff7b72;font-weight:700>:</span> imageWidth, height<span style=color:#ff7b72;font-weight:700>:</span> imageHeight } <span style=color:#ff7b72;font-weight:700>=</span> imageInfo;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 如果图片宽度过大，添加尺寸参数
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>if</span> (imageWidth <span style=color:#ff7b72;font-weight:700>&gt;</span> screenWidth <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>2</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> separator <span style=color:#ff7b72;font-weight:700>=</span> originalUri.includes(<span style=color:#a5d6ff>&#39;?&#39;</span>) <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>&#39;&amp;&#39;</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;?&#39;</span>;
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>originalUri<span style=color:#a5d6ff>}${</span>separator<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>w=</span><span style=color:#a5d6ff>${</span>screenWidth <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>2</span><span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> originalUri;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 加载图片
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  loadImage(uri) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>new</span> Promise((resolve, reject) =&gt; {
</span></span><span style=display:flex><span>      Image.getSize(
</span></span><span style=display:flex><span>        uri,
</span></span><span style=display:flex><span>        (width, height) =&gt; {
</span></span><span style=display:flex><span>          resolve({ uri, width, height });
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        reject
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取图片信息
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getImageInfo(uri) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>new</span> Promise((resolve, reject) =&gt; {
</span></span><span style=display:flex><span>      Image.getSize(
</span></span><span style=display:flex><span>        uri,
</span></span><span style=display:flex><span>        (width, height) =&gt; resolve({ width, height }),
</span></span><span style=display:flex><span>        reject
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 添加到缓存
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  addToCache(uri, image) {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 如果缓存已满，删除最久未使用的图片
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.cache.size <span style=color:#ff7b72;font-weight:700>&gt;=</span> <span style=color:#ff7b72>this</span>.maxCacheSize) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> oldestUri <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.accessOrder.shift();
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.cache.<span style=color:#ff7b72>delete</span>(oldestUri);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.cache.set(uri, image);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.accessOrder.push(uri);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 更新访问顺序
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  updateAccessOrder(uri) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> index <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.accessOrder.indexOf(uri);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (index <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>1</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.accessOrder.splice(index, <span style=color:#a5d6ff>1</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.accessOrder.push(uri);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 清理缓存
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  clearCache() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.cache.clear();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.accessOrder <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取缓存大小
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getCacheSize() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>this</span>.cache.size;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 优化的图片组件
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> OptimizedImage <span style=color:#ff7b72;font-weight:700>=</span> ({
</span></span><span style=display:flex><span>  source,
</span></span><span style=display:flex><span>  style,
</span></span><span style=display:flex><span>  placeholder,
</span></span><span style=display:flex><span>  onLoad,
</span></span><span style=display:flex><span>  onError,
</span></span><span style=display:flex><span>  resizeMode <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;cover&#39;</span>
</span></span><span style=display:flex><span>}) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> [imageLoaded, setImageLoaded] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> [imageSource, setImageSource] <span style=color:#ff7b72;font-weight:700>=</span> useState(placeholder <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> cacheManager <span style=color:#ff7b72;font-weight:700>=</span> React.useMemo(() =&gt; <span style=color:#ff7b72>new</span> ImageCacheManager(), []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  useEffect(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> uri <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>typeof</span> source <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;string&#39;</span> <span style=color:#ff7b72;font-weight:700>?</span> source <span style=color:#ff7b72;font-weight:700>:</span> source.uri;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>uri) <span style=color:#ff7b72>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 从缓存获取图片
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    cacheManager.get(uri)
</span></span><span style=display:flex><span>      .then(cachedImage =&gt; {
</span></span><span style=display:flex><span>        setImageSource(cachedImage);
</span></span><span style=display:flex><span>        setImageLoaded(<span style=color:#79c0ff>true</span>);
</span></span><span style=display:flex><span>        onLoad<span style=color:#ff7b72;font-weight:700>?</span>.(cachedImage);
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#ff7b72>catch</span>(error =&gt; {
</span></span><span style=display:flex><span>        console.error(<span style=color:#a5d6ff>&#39;Image load failed:&#39;</span>, error);
</span></span><span style=display:flex><span>        onError<span style=color:#ff7b72;font-weight:700>?</span>.(error);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 清理函数
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>return</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 可以在这里添加清理逻辑
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    };
</span></span><span style=display:flex><span>  }, [source, onLoad, onError, cacheManager]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 使用blurhash作为占位符
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>const</span> [blurhash] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#a5d6ff>&#39;LGF5?xYk^6#M@-5c,1J5@[or[Q6.&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>View style<span style=color:#ff7b72;font-weight:700>=</span>{style}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      {<span style=color:#ff7b72;font-weight:700>!</span>imageLoaded <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> placeholder <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> (
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>Image
</span></span><span style=display:flex><span>          source<span style=color:#ff7b72;font-weight:700>=</span>{placeholder}
</span></span><span style=display:flex><span>          style<span style=color:#ff7b72;font-weight:700>=</span>{[style, { position<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;absolute&#39;</span> }]}
</span></span><span style=display:flex><span>          blurRadius<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#a5d6ff>2</span>}
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      )}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>Image
</span></span><span style=display:flex><span>        source<span style=color:#ff7b72;font-weight:700>=</span>{imageSource}
</span></span><span style=display:flex><span>        style<span style=color:#ff7b72;font-weight:700>=</span>{[
</span></span><span style=display:flex><span>          style,
</span></span><span style=display:flex><span>          { opacity<span style=color:#ff7b72;font-weight:700>:</span> imageLoaded <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>1</span> <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span> }
</span></span><span style=display:flex><span>        ]}
</span></span><span style=display:flex><span>        resizeMode<span style=color:#ff7b72;font-weight:700>=</span>{resizeMode}
</span></span><span style=display:flex><span>        onLoad<span style=color:#ff7b72;font-weight:700>=</span>{() =&gt; setImageLoaded(<span style=color:#79c0ff>true</span>)}
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/View&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 图片懒加载组件
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> LazyImage <span style=color:#ff7b72;font-weight:700>=</span> ({
</span></span><span style=display:flex><span>  source,
</span></span><span style=display:flex><span>  style,
</span></span><span style=display:flex><span>  containerStyle,
</span></span><span style=display:flex><span>  lazy <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>  threshold <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>100</span>
</span></span><span style=display:flex><span>}) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> [isVisible, setIsVisible] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#ff7b72;font-weight:700>!</span>lazy);
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> [hasLoaded, setHasLoaded] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> viewRef <span style=color:#ff7b72;font-weight:700>=</span> React.useRef(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  useEffect(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>lazy) <span style=color:#ff7b72>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> observer <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> IntersectionObserver(
</span></span><span style=display:flex><span>      ([entry]) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (entry.isIntersecting) {
</span></span><span style=display:flex><span>          setIsVisible(<span style=color:#79c0ff>true</span>);
</span></span><span style=display:flex><span>          observer.disconnect();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      { threshold<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0.1</span>, rootMargin<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>threshold<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>px`</span> }
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (viewRef.current) {
</span></span><span style=display:flex><span>      observer.observe(viewRef.current);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> () =&gt; observer.disconnect();
</span></span><span style=display:flex><span>  }, [lazy, threshold]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span>View ref<span style=color:#ff7b72;font-weight:700>=</span>{viewRef} style<span style=color:#ff7b72;font-weight:700>=</span>{containerStyle}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      {isVisible <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> (
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>OptimizedImage
</span></span><span style=display:flex><span>          source<span style=color:#ff7b72;font-weight:700>=</span>{source}
</span></span><span style=display:flex><span>          style<span style=color:#ff7b72;font-weight:700>=</span>{style}
</span></span><span style=display:flex><span>          onLoad<span style=color:#ff7b72;font-weight:700>=</span>{() =&gt; setHasLoaded(<span style=color:#79c0ff>true</span>)}
</span></span><span style=display:flex><span>          placeholder<span style=color:#ff7b72;font-weight:700>=</span>{require(<span style=color:#a5d6ff>&#39;./assets/placeholder.png&#39;</span>)}
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      )}
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/View&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h2 id=网络请求优化>网络请求优化<a hidden class=anchor aria-hidden=true href=#网络请求优化>#</a></h2><h3 id=请求缓存与批处理>请求缓存与批处理<a hidden class=anchor aria-hidden=true href=#请求缓存与批处理>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">190
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">191
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">192
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">193
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">194
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">195
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">196
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">197
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">198
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">199
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">200
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">201
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">202
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">203
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">204
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">205
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">206
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">207
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">208
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">209
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">210
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">211
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">212
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">213
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">214
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">215
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">216
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">217
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">218
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">219
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">220
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">221
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">222
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">223
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">224
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">225
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">226
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">227
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">228
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">229
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">230
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">231
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">232
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">233
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">234
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">235
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">236
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">237
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">238
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">239
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">240
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">241
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">242
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">243
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">244
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">245
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">246
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">247
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">248
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">249
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">250
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">251
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">252
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">253
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">254
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">255
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">256
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">257
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">258
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">259
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">260
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">261
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">262
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">263
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">264
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">265
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">266
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">267
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">268
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">269
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">270
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">271
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">272
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">273
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">274
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">275
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">276
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">277
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">278
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">279
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">280
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">281
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">282
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">283
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">284
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">285
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">286
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">287
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">288
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">289
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">290
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">291
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">292
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">293
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">294
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">295
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">296
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">297
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">298
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">299
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">300
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">301
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">302
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">303
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">304
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">305
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">306
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">307
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">308
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">309
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">310
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">311
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">312
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">313
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">314
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">315
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">316
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">317
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">318
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">319
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">320
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">321
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 网络请求管理器
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> NetworkManager {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.cache <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> Map();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.pendingRequests <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> Map();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.batchQueue <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.batchTimeout <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>null</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.batchDelay <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>50</span>; <span style=color:#8b949e;font-style:italic>// 50ms批处理延迟
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 请求配置
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  defaultConfig <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>    timeout<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>10000</span>,
</span></span><span style=display:flex><span>    cache<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>    cacheTime<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>5</span> <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>60</span> <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>1000</span>, <span style=color:#8b949e;font-style:italic>// 5分钟
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    retry<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>3</span>,
</span></span><span style=display:flex><span>    retryDelay<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>1000</span>
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 发送请求
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> request(url, options <span style=color:#ff7b72;font-weight:700>=</span> {}, config <span style=color:#ff7b72;font-weight:700>=</span> {}) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> finalConfig <span style=color:#ff7b72;font-weight:700>=</span> { ...<span style=color:#ff7b72>this</span>.defaultConfig, ...config };
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> cacheKey <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.getCacheKey(url, options);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 检查缓存
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>if</span> (finalConfig.cache <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> <span style=color:#ff7b72>this</span>.cache.has(cacheKey)) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> cached <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.cache.get(cacheKey);
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (Date.now() <span style=color:#ff7b72;font-weight:700>-</span> cached.timestamp <span style=color:#ff7b72;font-weight:700>&lt;</span> finalConfig.cacheTime) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> cached.data;
</span></span><span style=display:flex><span>      } <span style=color:#ff7b72>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.cache.<span style=color:#ff7b72>delete</span>(cacheKey);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 检查是否有相同请求正在进行
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.pendingRequests.has(cacheKey)) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>this</span>.pendingRequests.get(cacheKey);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 创建请求Promise
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> requestPromise <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.executeRequest(url, options, finalConfig);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.pendingRequests.set(cacheKey, requestPromise);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> response <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> requestPromise;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 缓存响应
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>if</span> (finalConfig.cache <span style=color:#ff7b72;font-weight:700>&amp;&amp;</span> response.ok) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.cache.set(cacheKey, {
</span></span><span style=display:flex><span>          data<span style=color:#ff7b72;font-weight:700>:</span> response,
</span></span><span style=display:flex><span>          timestamp<span style=color:#ff7b72;font-weight:700>:</span> Date.now()
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> response;
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>finally</span> {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.pendingRequests.<span style=color:#ff7b72>delete</span>(cacheKey);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 执行请求
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> executeRequest(url, options, config) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>let</span> lastError;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>for</span> (<span style=color:#ff7b72>let</span> attempt <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>; attempt <span style=color:#ff7b72;font-weight:700>&lt;=</span> config.retry; attempt<span style=color:#ff7b72;font-weight:700>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> controller <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> AbortController();
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> timeoutId <span style=color:#ff7b72;font-weight:700>=</span> setTimeout(() =&gt; controller.abort(), config.timeout);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> response <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> fetch(url, {
</span></span><span style=display:flex><span>          ...options,
</span></span><span style=display:flex><span>          signal<span style=color:#ff7b72;font-weight:700>:</span> controller.signal,
</span></span><span style=display:flex><span>          headers<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>            <span style=color:#a5d6ff>&#39;Content-Type&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;application/json&#39;</span>,
</span></span><span style=display:flex><span>            ...options.headers
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        clearTimeout(timeoutId);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>response.ok) {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>throw</span> <span style=color:#ff7b72>new</span> Error(<span style=color:#a5d6ff>`HTTP </span><span style=color:#a5d6ff>${</span>response.status<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>: </span><span style=color:#a5d6ff>${</span>response.statusText<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> data <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> response.json();
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> { ...response, data };
</span></span><span style=display:flex><span>      } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>        lastError <span style=color:#ff7b72;font-weight:700>=</span> error;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>if</span> (attempt <span style=color:#ff7b72;font-weight:700>&lt;</span> config.retry) {
</span></span><span style=display:flex><span>          <span style=color:#8b949e;font-style:italic>// 指数退避重试
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>          <span style=color:#ff7b72>const</span> delay <span style=color:#ff7b72;font-weight:700>=</span> config.retryDelay <span style=color:#ff7b72;font-weight:700>*</span> Math.pow(<span style=color:#a5d6ff>2</span>, attempt);
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>new</span> Promise(resolve =&gt; setTimeout(resolve, delay));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>throw</span> lastError;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 批量请求
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  batchRequest(requests) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>new</span> Promise((resolve, reject) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.batchQueue.push({ requests, resolve, reject });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.batchTimeout) {
</span></span><span style=display:flex><span>        clearTimeout(<span style=color:#ff7b72>this</span>.batchTimeout);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.batchTimeout <span style=color:#ff7b72;font-weight:700>=</span> setTimeout(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.processBatch();
</span></span><span style=display:flex><span>      }, <span style=color:#ff7b72>this</span>.batchDelay);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 处理批量请求
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> processBatch() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.batchQueue.length <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span>) <span style=color:#ff7b72>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> batch <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.batchQueue.splice(<span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> allRequests <span style=color:#ff7b72;font-weight:700>=</span> batch.flatMap(item =&gt; item.requests);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> responses <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> Promise.allSettled(
</span></span><span style=display:flex><span>        allRequests.map(req =&gt; <span style=color:#ff7b72>this</span>.request(req.url, req.options, req.config))
</span></span><span style=display:flex><span>      );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 按批次分组响应
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>let</span> responseIndex <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>      batch.forEach(({ requests, resolve }) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> batchResponses <span style=color:#ff7b72;font-weight:700>=</span> responses.slice(
</span></span><span style=display:flex><span>          responseIndex,
</span></span><span style=display:flex><span>          responseIndex <span style=color:#ff7b72;font-weight:700>+</span> requests.length
</span></span><span style=display:flex><span>        );
</span></span><span style=display:flex><span>        responseIndex <span style=color:#ff7b72;font-weight:700>+=</span> requests.length;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        resolve(batchResponses);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      batch.forEach(({ reject }) =&gt; reject(error));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 并发控制请求
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> concurrentRequests(requests, maxConcurrent <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>3</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> results <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> executing <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>for</span> (<span style=color:#ff7b72>const</span> [index, request] <span style=color:#ff7b72>of</span> requests.entries()) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> promise <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.request(request.url, request.options, request.config)
</span></span><span style=display:flex><span>        .then(response =&gt; ({ index, response }))
</span></span><span style=display:flex><span>        .<span style=color:#ff7b72>catch</span>(error =&gt; ({ index, error }));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      results.push(promise);
</span></span><span style=display:flex><span>      executing.push(promise);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (executing.length <span style=color:#ff7b72;font-weight:700>&gt;=</span> maxConcurrent) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>await</span> Promise.race(executing);
</span></span><span style=display:flex><span>        executing.splice(executing.findIndex(p =&gt; p <span style=color:#ff7b72;font-weight:700>===</span> promise), <span style=color:#a5d6ff>1</span>);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> Promise.allSettled(results);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 生成缓存键
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getCacheKey(url, options) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> optionsStr <span style=color:#ff7b72;font-weight:700>=</span> JSON.stringify(options);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span>url<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>:</span><span style=color:#a5d6ff>${</span>optionsStr<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 清理缓存
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  clearCache() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.cache.clear();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取缓存统计
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getCacheStats() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>      size<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.cache.size,
</span></span><span style=display:flex><span>      keys<span style=color:#ff7b72;font-weight:700>:</span> Array.from(<span style=color:#ff7b72>this</span>.cache.keys())
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// GraphQL查询管理器
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> GraphQLManager <span style=color:#ff7b72>extends</span> NetworkManager {
</span></span><span style=display:flex><span>  constructor(endpoint) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>super</span>();
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.endpoint <span style=color:#ff7b72;font-weight:700>=</span> endpoint;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.queryCache <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> Map();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 执行GraphQL查询
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> query(query, variables <span style=color:#ff7b72;font-weight:700>=</span> {}, options <span style=color:#ff7b72;font-weight:700>=</span> {}) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> cacheKey <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.getGraphQLCacheKey(query, variables);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 检查查询缓存
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.queryCache.has(cacheKey)) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>this</span>.queryCache.get(cacheKey);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> response <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>this</span>.request(<span style=color:#ff7b72>this</span>.endpoint, {
</span></span><span style=display:flex><span>      method<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>      body<span style=color:#ff7b72;font-weight:700>:</span> JSON.stringify({
</span></span><span style=display:flex><span>        query,
</span></span><span style=display:flex><span>        variables
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    }, options);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 缓存查询结果
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>if</span> (response.ok) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.queryCache.set(cacheKey, response.data);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> response;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 生成GraphQL缓存键
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getGraphQLCacheKey(query, variables) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> queryStr <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>typeof</span> query <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;string&#39;</span> <span style=color:#ff7b72;font-weight:700>?</span> query <span style=color:#ff7b72;font-weight:700>:</span> query.loc<span style=color:#ff7b72;font-weight:700>?</span>.source.body <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>&#39;&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> variablesStr <span style=color:#ff7b72;font-weight:700>=</span> JSON.stringify(variables);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> hash <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.simpleHash(queryStr <span style=color:#ff7b72;font-weight:700>+</span> variablesStr);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>`gql_</span><span style=color:#a5d6ff>${</span>hash<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 简单哈希函数
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  simpleHash(str) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>let</span> hash <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>for</span> (<span style=color:#ff7b72>let</span> i <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>; i <span style=color:#ff7b72;font-weight:700>&lt;</span> str.length; i<span style=color:#ff7b72;font-weight:700>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> <span style=color:#ff7b72>char</span> <span style=color:#ff7b72;font-weight:700>=</span> str.charCodeAt(i);
</span></span><span style=display:flex><span>      hash <span style=color:#ff7b72;font-weight:700>=</span> ((hash <span style=color:#ff7b72;font-weight:700>&lt;&lt;</span> <span style=color:#a5d6ff>5</span>) <span style=color:#ff7b72;font-weight:700>-</span> hash) <span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#ff7b72>char</span>;
</span></span><span style=display:flex><span>      hash <span style=color:#ff7b72;font-weight:700>=</span> hash <span style=color:#ff7b72;font-weight:700>&amp;</span> hash;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> hash.toString(<span style=color:#a5d6ff>36</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 预取查询
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  prefetch(query, variables, options) {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 不等待结果，异步预取
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>this</span>.query(query, variables, { ...options, cache<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span> });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 使用示例
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> networkManager <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> NetworkManager();
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> graphqlManager <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> GraphQLManager(<span style=color:#a5d6ff>&#39;https://api.example.com/graphql&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// API服务
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> ApiService <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取用户信息
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> getUser(userId) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> networkManager.request(
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>`https://api.example.com/users/</span><span style=color:#a5d6ff>${</span>userId<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>,
</span></span><span style=display:flex><span>      { method<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;GET&#39;</span> },
</span></span><span style=display:flex><span>      { cache<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>, cacheTime<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>10</span> <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>60</span> <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>1000</span> }
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 批量获取用户信息
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> getUsersBatch(userIds) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> requests <span style=color:#ff7b72;font-weight:700>=</span> userIds.map(id =&gt; ({
</span></span><span style=display:flex><span>      url<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>`https://api.example.com/users/</span><span style=color:#a5d6ff>${</span>id<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>,
</span></span><span style=display:flex><span>      options<span style=color:#ff7b72;font-weight:700>:</span> { method<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;GET&#39;</span> }
</span></span><span style=display:flex><span>    }));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> responses <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> networkManager.concurrentRequests(requests, <span style=color:#a5d6ff>5</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> responses
</span></span><span style=display:flex><span>      .filter(r =&gt; r.status <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;fulfilled&#39;</span>)
</span></span><span style=display:flex><span>      .map(r =&gt; r.value.data);
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// GraphQL查询示例
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> getUserPosts(userId, limit <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>10</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> query <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>`
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      query GetUserPosts($userId: ID!, $limit: Int!) {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        user(id: $userId) {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>          posts(first: $limit) {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            edges {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>              node {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>                id
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>                title
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>                content
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>                createdAt
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>              }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>          }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>    `</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> graphqlManager.query(query, { userId, limit });
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 预取用户数据
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  prefetchUserData(userId) {
</span></span><span style=display:flex><span>    networkManager.request(
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>`https://api.example.com/users/</span><span style=color:#a5d6ff>${</span>userId<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>/profile`</span>,
</span></span><span style=display:flex><span>      { method<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;GET&#39;</span> },
</span></span><span style=display:flex><span>      { cache<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span> }
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    graphqlManager.prefetch(<span style=color:#a5d6ff>`
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      query GetUserDetails($userId: ID!) {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        user(id: $userId) {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>          friends {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            id
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            name
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            avatar
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>          }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>          achievements {
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            id
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            title
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>            description
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>          }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>        }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>      }
</span></span></span><span style=display:flex><span><span style=color:#a5d6ff>    `</span>, { userId });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h2 id=启动性能优化>启动性能优化<a hidden class=anchor aria-hidden=true href=#启动性能优化>#</a></h2><h3 id=bundle拆分与懒加载>Bundle拆分与懒加载<a hidden class=anchor aria-hidden=true href=#bundle拆分与懒加载>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">190
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">191
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">192
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">193
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">194
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">195
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">196
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">197
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">198
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">199
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">200
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">201
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">202
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">203
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">204
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">205
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">206
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">207
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">208
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">209
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">210
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">211
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">212
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">213
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">214
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">215
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">216
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">217
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">218
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">219
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">220
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">221
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">222
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">223
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">224
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">225
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">226
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">227
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">228
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">229
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">230
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">231
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">232
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">233
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">234
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">235
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">236
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">237
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">238
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">239
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">240
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">241
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">242
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">243
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">244
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">245
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">246
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">247
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">248
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">249
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">250
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">251
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">252
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">253
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">254
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">255
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">256
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">257
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">258
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">259
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">260
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">261
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">262
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">263
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">264
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">265
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">266
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">267
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">268
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">269
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 异步组件加载
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> AsyncComponentLoader <span style=color:#ff7b72;font-weight:700>=</span> ({ componentLoader, fallback }) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>const</span> [Component, setComponent] <span style=color:#ff7b72;font-weight:700>=</span> useState(<span style=color:#79c0ff>null</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  useEffect(() =&gt; {
</span></span><span style=display:flex><span>    componentLoader()
</span></span><span style=display:flex><span>      .then(module =&gt; {
</span></span><span style=display:flex><span>        setComponent(() =&gt; module.<span style=color:#ff7b72>default</span>);
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#ff7b72>catch</span>(error =&gt; {
</span></span><span style=display:flex><span>        console.error(<span style=color:#a5d6ff>&#39;Component loading failed:&#39;</span>, error);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  }, [componentLoader]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>Component) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> fallback <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>ActivityIndicator size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;large&#34;</span> <span style=color:#ff7b72;font-weight:700>/&gt;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>Component <span style=color:#ff7b72;font-weight:700>/&gt;</span>;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 使用示例
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> LazyUserProfile <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; (
</span></span><span style=display:flex><span>  <span style=color:#ff7b72;font-weight:700>&lt;</span>AsyncComponentLoader
</span></span><span style=display:flex><span>    componentLoader<span style=color:#ff7b72;font-weight:700>=</span>{() =&gt; <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./UserProfile&#39;</span>)}
</span></span><span style=display:flex><span>    fallback<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#ff7b72;font-weight:700>&lt;</span>View<span style=color:#ff7b72;font-weight:700>&gt;&lt;</span>Text<span style=color:#ff7b72;font-weight:700>&gt;</span>Loading profile...<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;&lt;/View&gt;}</span>
</span></span><span style=display:flex><span>  <span style=color:#f85149>/&gt;</span>
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>const</span> LazySettings <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; (
</span></span><span style=display:flex><span>  <span style=color:#ff7b72;font-weight:700>&lt;</span>AsyncComponentLoader
</span></span><span style=display:flex><span>    componentLoader<span style=color:#ff7b72;font-weight:700>=</span>{() =&gt; <span style=color:#ff7b72>import</span>(<span style=color:#a5d6ff>&#39;./Settings&#39;</span>)}
</span></span><span style=display:flex><span>    fallback<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#ff7b72;font-weight:700>&lt;</span>View<span style=color:#ff7b72;font-weight:700>&gt;&lt;</span>Text<span style=color:#ff7b72;font-weight:700>&gt;</span>Loading settings...<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/Text&gt;&lt;/View&gt;}</span>
</span></span><span style=display:flex><span>  <span style=color:#f85149>/&gt;</span>
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 路由级别的代码分割
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> createLazyRoute <span style=color:#ff7b72;font-weight:700>=</span> (componentPath) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> Component <span style=color:#ff7b72;font-weight:700>=</span> React.lazy(() =&gt; <span style=color:#ff7b72>import</span>(componentPath));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> (
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span>React.Suspense fallback<span style=color:#ff7b72;font-weight:700>=</span>{<span style=color:#ff7b72;font-weight:700>&lt;</span>ActivityIndicator size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;large&#34;</span> <span style=color:#ff7b72;font-weight:700>/&gt;</span>}<span style=color:#ff7b72;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>&lt;</span>Component <span style=color:#ff7b72;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/React.Suspense&gt;</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 使用代码分割的路由配置
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> routes <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>  Home<span style=color:#ff7b72;font-weight:700>:</span> createLazyRoute(<span style=color:#a5d6ff>&#39;./screens/Home&#39;</span>),
</span></span><span style=display:flex><span>  Profile<span style=color:#ff7b72;font-weight:700>:</span> createLazyRoute(<span style=color:#a5d6ff>&#39;./screens/Profile&#39;</span>),
</span></span><span style=display:flex><span>  Settings<span style=color:#ff7b72;font-weight:700>:</span> createLazyRoute(<span style=color:#a5d6ff>&#39;./screens/Settings&#39;</span>),
</span></span><span style=display:flex><span>  Chat<span style=color:#ff7b72;font-weight:700>:</span> createLazyRoute(<span style=color:#a5d6ff>&#39;./screens/Chat&#39;</span>)
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// Metro配置优化 (metro.config.js)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>module.exports <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>  transformer<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    getTransformOptions<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>async</span> () =&gt; ({
</span></span><span style=display:flex><span>      transform<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        experimentalImportSupport<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>false</span>,
</span></span><span style=display:flex><span>        inlineRequires<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  resolver<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    alias<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;@&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;./src&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;@components&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;./src/components&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;@screens&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;./src/screens&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;@utils&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;./src/utils&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;@assets&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;./src/assets&#39;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  watchFolders<span style=color:#ff7b72;font-weight:700>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#a5d6ff>&#39;./src&#39;</span>
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  maxWorkers<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>4</span>,
</span></span><span style=display:flex><span>  resetCache<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 启用压缩
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  minifierConfig<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    keep_fnames<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>    mangle<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>      keep_fnames<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#79c0ff>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// Bundle分析工具
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> BundleAnalyzer <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取Bundle大小信息
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> getBundleInfo(platform <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#39;android&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> fs <span style=color:#ff7b72;font-weight:700>=</span> require(<span style=color:#a5d6ff>&#39;fs&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> path <span style=color:#ff7b72;font-weight:700>=</span> require(<span style=color:#a5d6ff>&#39;path&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> bundlePath <span style=color:#ff7b72;font-weight:700>=</span> platform <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;android&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>?</span> <span style=color:#a5d6ff>&#39;android/app/build/generated/assets/react/release/index.android.bundle&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;ios/YourApp/build/Build/Products/Release-iphoneos/YourApp.app/main.jsbundle&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> stats <span style=color:#ff7b72;font-weight:700>=</span> fs.statSync(bundlePath);
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>        size<span style=color:#ff7b72;font-weight:700>:</span> stats.size,
</span></span><span style=display:flex><span>        sizeFormatted<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.formatFileSize(stats.size),
</span></span><span style=display:flex><span>        path<span style=color:#ff7b72;font-weight:700>:</span> bundlePath
</span></span><span style=display:flex><span>      };
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      console.error(<span style=color:#a5d6ff>&#39;Bundle file not found:&#39;</span>, bundlePath);
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> <span style=color:#79c0ff>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 格式化文件大小
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  formatFileSize(bytes) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (bytes <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span>) <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>&#39;0 Bytes&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> k <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>1024</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> sizes <span style=color:#ff7b72;font-weight:700>=</span> [<span style=color:#a5d6ff>&#39;Bytes&#39;</span>, <span style=color:#a5d6ff>&#39;KB&#39;</span>, <span style=color:#a5d6ff>&#39;MB&#39;</span>, <span style=color:#a5d6ff>&#39;GB&#39;</span>];
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> i <span style=color:#ff7b72;font-weight:700>=</span> Math.floor(Math.log(bytes) <span style=color:#ff7b72;font-weight:700>/</span> Math.log(k));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> parseFloat((bytes <span style=color:#ff7b72;font-weight:700>/</span> Math.pow(k, i)).toFixed(<span style=color:#a5d6ff>2</span>)) <span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#a5d6ff>&#39; &#39;</span> <span style=color:#ff7b72;font-weight:700>+</span> sizes[i];
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 分析Bundle内容
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> analyzeBundle() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> { execSync } <span style=color:#ff7b72;font-weight:700>=</span> require(<span style=color:#a5d6ff>&#39;child_process&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 使用react-native-bundle-visualizer
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>const</span> result <span style=color:#ff7b72;font-weight:700>=</span> execSync(<span style=color:#a5d6ff>&#39;npx react-native-bundle-visualizer&#39;</span>, {
</span></span><span style=display:flex><span>        encoding<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;utf8&#39;</span>
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      console.log(<span style=color:#a5d6ff>&#39;Bundle analysis completed&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> result;
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      console.error(<span style=color:#a5d6ff>&#39;Bundle analysis failed:&#39;</span>, error);
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> <span style=color:#79c0ff>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 预加载管理器
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> PreloadManager {
</span></span><span style=display:flex><span>  constructor() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.preloadQueue <span style=color:#ff7b72;font-weight:700>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.isPreloading <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>false</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 添加预加载任务
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  addPreloadTask(task) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.preloadQueue.push(task);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span><span style=color:#ff7b72>this</span>.isPreloading) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.startPreload();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 开始预加载
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> startPreload() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.isPreloading <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#ff7b72>this</span>.preloadQueue.length <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span>) <span style=color:#ff7b72>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.isPreloading <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>true</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>while</span> (<span style=color:#ff7b72>this</span>.preloadQueue.length <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> task <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.preloadQueue.shift();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>this</span>.executePreloadTask(task);
</span></span><span style=display:flex><span>      } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>        console.error(<span style=color:#a5d6ff>&#39;Preload task failed:&#39;</span>, error);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 给UI线程一些时间
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>new</span> Promise(resolve =&gt; setTimeout(resolve, <span style=color:#a5d6ff>100</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.isPreloading <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>false</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 执行预加载任务
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> executePreloadTask(task) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>switch</span> (task.type) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;component&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>import</span>(task.componentPath);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>break</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;image&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>await</span> Image.prefetch(task.imageUrl);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>break</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;data&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>await</span> task.dataLoader();
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>break</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>case</span> <span style=color:#a5d6ff>&#39;asset&#39;</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>await</span> <span style=color:#ff7b72>this</span>.preloadAsset(task.assetPath);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>break</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>default</span><span style=color:#ff7b72;font-weight:700>:</span>
</span></span><span style=display:flex><span>        console.warn(<span style=color:#a5d6ff>&#39;Unknown preload task type:&#39;</span>, task.type);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 预加载资源
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> preloadAsset(assetPath) {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 实现资源预加载逻辑
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>new</span> Promise(resolve =&gt; {
</span></span><span style=display:flex><span>      setTimeout(resolve, <span style=color:#a5d6ff>100</span>); <span style=color:#8b949e;font-style:italic>// 模拟预加载
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 预加载常用组件
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  preloadCommonComponents() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.addPreloadTask({
</span></span><span style=display:flex><span>      type<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;component&#39;</span>,
</span></span><span style=display:flex><span>      componentPath<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;./screens/Home&#39;</span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.addPreloadTask({
</span></span><span style=display:flex><span>      type<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;component&#39;</span>,
</span></span><span style=display:flex><span>      componentPath<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;./screens/Profile&#39;</span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 预加载关键图片
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  preloadKeyImages() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> keyImages <span style=color:#ff7b72;font-weight:700>=</span> [
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;https://example.com/logo.png&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;https://example.com/hero-image.jpg&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a5d6ff>&#39;https://example.com/background.jpg&#39;</span>
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    keyImages.forEach(imageUrl =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.addPreloadTask({
</span></span><span style=display:flex><span>        type<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;image&#39;</span>,
</span></span><span style=display:flex><span>        imageUrl
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 预加载用户数据
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  preloadUserData(userId) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.addPreloadTask({
</span></span><span style=display:flex><span>      type<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;data&#39;</span>,
</span></span><span style=display:flex><span>      dataLoader<span style=color:#ff7b72;font-weight:700>:</span> () =&gt; ApiService.getUser(userId)
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.addPreloadTask({
</span></span><span style=display:flex><span>      type<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;data&#39;</span>,
</span></span><span style=display:flex><span>      dataLoader<span style=color:#ff7b72;font-weight:700>:</span> () =&gt; ApiService.getUserPosts(userId)
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 使用预加载管理器
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> preloadManager <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> PreloadManager();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 在应用启动时预加载
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>AppRegistry.registerComponent(<span style=color:#a5d6ff>&#39;MyApp&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 启动预加载
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  preloadManager.preloadCommonComponents();
</span></span><span style=display:flex><span>  preloadManager.preloadKeyImages();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> App;
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><h2 id=性能监控与分析>性能监控与分析<a hidden class=anchor aria-hidden=true href=#性能监控与分析>#</a></h2><h3 id=实时性能监控>实时性能监控<a hidden class=anchor aria-hidden=true href=#实时性能监控>#</a></h3><div class=highlight><div style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">190
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">191
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">192
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">193
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">194
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">195
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">196
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">197
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">198
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">199
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">200
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">201
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">202
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">203
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">204
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">205
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">206
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">207
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">208
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">209
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">210
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">211
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">212
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">213
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">214
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">215
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">216
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">217
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">218
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">219
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">220
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">221
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">222
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">223
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">224
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">225
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">226
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">227
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">228
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">229
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">230
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">231
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">232
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">233
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">234
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">235
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">236
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">237
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">238
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">239
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">240
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">241
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">242
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">243
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">244
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">245
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">246
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">247
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">248
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">249
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">250
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">251
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">252
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">253
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">254
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">255
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">256
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">257
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">258
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">259
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">260
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">261
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">262
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">263
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">264
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">265
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">266
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">267
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">268
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">269
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">270
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">271
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">272
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">273
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">274
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">275
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">276
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">277
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">278
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">279
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">280
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">281
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">282
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">283
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">284
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">285
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">286
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">287
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">288
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">289
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">290
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">291
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">292
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">293
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">294
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">295
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">296
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">297
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">298
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">299
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">300
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">301
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">302
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">303
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">304
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">305
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">306
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">307
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">308
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">309
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">310
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">311
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">312
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">313
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">314
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">315
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">316
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">317
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">318
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">319
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">320
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">321
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">322
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">323
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">324
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">325
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">326
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">327
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">328
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">329
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">330
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">331
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">332
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">333
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">334
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">335
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">336
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">337
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">338
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">339
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">340
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">341
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">342
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">343
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">344
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">345
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">346
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">347
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">348
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">349
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">350
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">351
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">352
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">353
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">354
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">355
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">356
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">357
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">358
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">359
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">360
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">361
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">362
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">363
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">364
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">365
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">366
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">367
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">368
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">369
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">370
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">371
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">372
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">373
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">374
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">375
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">376
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">377
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">378
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">379
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">380
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">381
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">382
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">383
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">384
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">385
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">386
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">387
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">388
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">389
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">390
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">391
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">392
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">393
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">394
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">395
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">396
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">397
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">398
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">399
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">400
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">401
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">402
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">403
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">404
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">405
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">406
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">407
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">408
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">409
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">410
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">411
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">412
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">413
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">414
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">415
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">416
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">417
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">418
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">419
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">420
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">421
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">422
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">423
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">424
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">425
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">426
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">427
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">428
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">429
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">430
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">431
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">432
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">433
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">434
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">435
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#737679">436
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 性能监控SDK
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>class</span> PerformanceSDK {
</span></span><span style=display:flex><span>  constructor(config) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.config <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>      apiKey<span style=color:#ff7b72;font-weight:700>:</span> config.apiKey,
</span></span><span style=display:flex><span>      endpoint<span style=color:#ff7b72;font-weight:700>:</span> config.endpoint,
</span></span><span style=display:flex><span>      enableCrashReporting<span style=color:#ff7b72;font-weight:700>:</span> config.enableCrashReporting <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>      enableANRReporting<span style=color:#ff7b72;font-weight:700>:</span> config.enableANRReporting <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>      enableNetworkMonitoring<span style=color:#ff7b72;font-weight:700>:</span> config.enableNetworkMonitoring <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>      enableMemoryLeakDetection<span style=color:#ff7b72;font-weight:700>:</span> config.enableMemoryLeakDetection <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#79c0ff>true</span>,
</span></span><span style=display:flex><span>      sampleRate<span style=color:#ff7b72;font-weight:700>:</span> config.sampleRate <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>1.0</span>
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.metrics <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>      fps<span style=color:#ff7b72;font-weight:700>:</span> [],
</span></span><span style=display:flex><span>      memory<span style=color:#ff7b72;font-weight:700>:</span> [],
</span></span><span style=display:flex><span>      network<span style=color:#ff7b72;font-weight:700>:</span> [],
</span></span><span style=display:flex><span>      crashes<span style=color:#ff7b72;font-weight:700>:</span> [],
</span></span><span style=display:flex><span>      anr<span style=color:#ff7b72;font-weight:700>:</span> []
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.isInitialized <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>false</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 初始化SDK
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> initialize() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.isInitialized) <span style=color:#ff7b72>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 设置全局错误处理
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.config.enableCrashReporting) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.setupCrashReporting();
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 设置ANR监控
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.config.enableANRReporting) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.setupANRMonitoring();
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 设置网络监控
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.config.enableNetworkMonitoring) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.setupNetworkMonitoring();
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 设置内存泄漏检测
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72>this</span>.config.enableMemoryLeakDetection) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.setupMemoryLeakDetection();
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.isInitialized <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>true</span>;
</span></span><span style=display:flex><span>      console.log(<span style=color:#a5d6ff>&#39;Performance SDK initialized&#39;</span>);
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      console.error(<span style=color:#a5d6ff>&#39;Failed to initialize Performance SDK:&#39;</span>, error);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 设置崩溃报告
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  setupCrashReporting() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> defaultErrorHandler <span style=color:#ff7b72;font-weight:700>=</span> ErrorUtils.getGlobalHandler();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ErrorUtils.setGlobalHandler((error, isFatal) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 记录崩溃信息
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>const</span> crashInfo <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>        message<span style=color:#ff7b72;font-weight:700>:</span> error.message,
</span></span><span style=display:flex><span>        stack<span style=color:#ff7b72;font-weight:700>:</span> error.stack,
</span></span><span style=display:flex><span>        isFatal,
</span></span><span style=display:flex><span>        timestamp<span style=color:#ff7b72;font-weight:700>:</span> Date.now(),
</span></span><span style=display:flex><span>        deviceInfo<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getDeviceInfo(),
</span></span><span style=display:flex><span>        appState<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getAppState()
</span></span><span style=display:flex><span>      };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.metrics.crashes.push(crashInfo);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 上报崩溃
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      <span style=color:#ff7b72>this</span>.reportCrash(crashInfo);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 调用原始错误处理器
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      defaultErrorHandler(error, isFatal);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 设置ANR监控
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  setupANRMonitoring() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>let</span> isChecking <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> checkANR <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (isChecking) <span style=color:#ff7b72>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      isChecking <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>true</span>;
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> startTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#8b949e;font-style:italic>// 使用setTimeout检测阻塞
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>      setTimeout(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> endTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> duration <span style=color:#ff7b72;font-weight:700>=</span> endTime <span style=color:#ff7b72;font-weight:700>-</span> startTime;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// 如果执行时间超过2秒，认为是ANR
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#ff7b72>if</span> (duration <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>2000</span>) {
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>const</span> anrInfo <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>            duration,
</span></span><span style=display:flex><span>            timestamp<span style=color:#ff7b72;font-weight:700>:</span> Date.now(),
</span></span><span style=display:flex><span>            stackTrace<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getCurrentStackTrace(),
</span></span><span style=display:flex><span>            deviceInfo<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getDeviceInfo()
</span></span><span style=display:flex><span>          };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.metrics.anr.push(anrInfo);
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>this</span>.reportANR(anrInfo);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        isChecking <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>false</span>;
</span></span><span style=display:flex><span>      }, <span style=color:#a5d6ff>100</span>);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 定期检查
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    setInterval(checkANR, <span style=color:#a5d6ff>1000</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 设置网络监控
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  setupNetworkMonitoring() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> originalFetch <span style=color:#ff7b72;font-weight:700>=</span> global.fetch;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    global.fetch <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>async</span> (...args) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> startTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> [url, options] <span style=color:#ff7b72;font-weight:700>=</span> args;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> response <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>await</span> originalFetch(...args);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> endTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// 记录网络请求
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#ff7b72>const</span> networkMetric <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>          url,
</span></span><span style=display:flex><span>          method<span style=color:#ff7b72;font-weight:700>:</span> options<span style=color:#ff7b72;font-weight:700>?</span>.method <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>&#39;GET&#39;</span>,
</span></span><span style=display:flex><span>          status<span style=color:#ff7b72;font-weight:700>:</span> response.status,
</span></span><span style=display:flex><span>          duration<span style=color:#ff7b72;font-weight:700>:</span> endTime <span style=color:#ff7b72;font-weight:700>-</span> startTime,
</span></span><span style=display:flex><span>          size<span style=color:#ff7b72;font-weight:700>:</span> response.headers.get(<span style=color:#a5d6ff>&#39;content-length&#39;</span>),
</span></span><span style=display:flex><span>          timestamp<span style=color:#ff7b72;font-weight:700>:</span> endTime
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.metrics.network.push(networkMetric);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.reportNetworkMetric(networkMetric);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> response;
</span></span><span style=display:flex><span>      } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> endTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// 记录网络错误
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#ff7b72>const</span> networkMetric <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>          url,
</span></span><span style=display:flex><span>          method<span style=color:#ff7b72;font-weight:700>:</span> options<span style=color:#ff7b72;font-weight:700>?</span>.method <span style=color:#ff7b72;font-weight:700>||</span> <span style=color:#a5d6ff>&#39;GET&#39;</span>,
</span></span><span style=display:flex><span>          error<span style=color:#ff7b72;font-weight:700>:</span> error.message,
</span></span><span style=display:flex><span>          duration<span style=color:#ff7b72;font-weight:700>:</span> endTime <span style=color:#ff7b72;font-weight:700>-</span> startTime,
</span></span><span style=display:flex><span>          timestamp<span style=color:#ff7b72;font-weight:700>:</span> endTime
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.metrics.network.push(networkMetric);
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>this</span>.reportNetworkMetric(networkMetric);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>throw</span> error;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 设置内存泄漏检测
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  setupMemoryLeakDetection() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>let</span> lastMemoryUsage <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>let</span> leakCount <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    setInterval(() =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> currentMemoryUsage <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.getMemoryUsage();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>if</span> (lastMemoryUsage <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>0</span>) {
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>const</span> memoryIncrease <span style=color:#ff7b72;font-weight:700>=</span> currentMemoryUsage <span style=color:#ff7b72;font-weight:700>-</span> lastMemoryUsage;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// 如果内存持续增长，可能存在内存泄漏
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#ff7b72>if</span> (memoryIncrease <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#a5d6ff>10</span> <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>1024</span> <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>1024</span>) { <span style=color:#8b949e;font-style:italic>// 10MB
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>          leakCount<span style=color:#ff7b72;font-weight:700>++</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#ff7b72>if</span> (leakCount <span style=color:#ff7b72;font-weight:700>&gt;=</span> <span style=color:#a5d6ff>3</span>) {
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>const</span> leakInfo <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>              currentUsage<span style=color:#ff7b72;font-weight:700>:</span> currentMemoryUsage,
</span></span><span style=display:flex><span>              increase<span style=color:#ff7b72;font-weight:700>:</span> memoryIncrease,
</span></span><span style=display:flex><span>              leakCount,
</span></span><span style=display:flex><span>              timestamp<span style=color:#ff7b72;font-weight:700>:</span> Date.now()
</span></span><span style=display:flex><span>            };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>this</span>.reportMemoryLeak(leakInfo);
</span></span><span style=display:flex><span>            leakCount <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        } <span style=color:#ff7b72>else</span> {
</span></span><span style=display:flex><span>          leakCount <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      lastMemoryUsage <span style=color:#ff7b72;font-weight:700>=</span> currentMemoryUsage;
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.metrics.memory.push({
</span></span><span style=display:flex><span>        usage<span style=color:#ff7b72;font-weight:700>:</span> currentMemoryUsage,
</span></span><span style=display:flex><span>        timestamp<span style=color:#ff7b72;font-weight:700>:</span> Date.now()
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }, <span style=color:#a5d6ff>30000</span>); <span style=color:#8b949e;font-style:italic>// 每30秒检查一次
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 记录自定义指标
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  recordMetric(name, value, tags <span style=color:#ff7b72;font-weight:700>=</span> {}) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> metric <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>      name,
</span></span><span style=display:flex><span>      value,
</span></span><span style=display:flex><span>      tags,
</span></span><span style=display:flex><span>      timestamp<span style=color:#ff7b72;font-weight:700>:</span> Date.now()
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 根据指标类型分类
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>if</span> (name.startsWith(<span style=color:#a5d6ff>&#39;fps.&#39;</span>)) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.metrics.fps.push(metric);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.reportCustomMetric(metric);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 记录FPS
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  recordFPS(fps) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.recordMetric(<span style=color:#a5d6ff>&#39;fps.current&#39;</span>, fps);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (fps <span style=color:#ff7b72;font-weight:700>&lt;</span> <span style=color:#a5d6ff>30</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.recordMetric(<span style=color:#a5d6ff>&#39;fps.low_fps&#39;</span>, <span style=color:#a5d6ff>1</span>, { fps_range<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;0-30&#39;</span> });
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>else</span> <span style=color:#ff7b72>if</span> (fps <span style=color:#ff7b72;font-weight:700>&lt;</span> <span style=color:#a5d6ff>45</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.recordMetric(<span style=color:#a5d6ff>&#39;fps.low_fps&#39;</span>, <span style=color:#a5d6ff>1</span>, { fps_range<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;30-45&#39;</span> });
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 记录屏幕性能
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  recordScreenPerformance(screenName, metrics) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.recordMetric(<span style=color:#a5d6ff>`screen.</span><span style=color:#a5d6ff>${</span>screenName<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>.load_time`</span>, metrics.loadTime);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.recordMetric(<span style=color:#a5d6ff>`screen.</span><span style=color:#a5d6ff>${</span>screenName<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>.render_time`</span>, metrics.renderTime);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (metrics.interactionTime) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>this</span>.recordMetric(<span style=color:#a5d6ff>`screen.</span><span style=color:#a5d6ff>${</span>screenName<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>.interaction_time`</span>, metrics.interactionTime);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取设备信息
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getDeviceInfo() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>      platform<span style=color:#ff7b72;font-weight:700>:</span> Platform.OS,
</span></span><span style=display:flex><span>      version<span style=color:#ff7b72;font-weight:700>:</span> Platform.Version,
</span></span><span style=display:flex><span>      brand<span style=color:#ff7b72;font-weight:700>:</span> DeviceInfo.getBrand(),
</span></span><span style=display:flex><span>      model<span style=color:#ff7b72;font-weight:700>:</span> DeviceInfo.getModel(),
</span></span><span style=display:flex><span>      systemVersion<span style=color:#ff7b72;font-weight:700>:</span> DeviceInfo.getSystemVersion(),
</span></span><span style=display:flex><span>      appVersion<span style=color:#ff7b72;font-weight:700>:</span> DeviceInfo.getVersion(),
</span></span><span style=display:flex><span>      buildNumber<span style=color:#ff7b72;font-weight:700>:</span> DeviceInfo.getBuildNumber(),
</span></span><span style=display:flex><span>      bundleId<span style=color:#ff7b72;font-weight:700>:</span> DeviceInfo.getBundleId(),
</span></span><span style=display:flex><span>      isEmulator<span style=color:#ff7b72;font-weight:700>:</span> DeviceInfo.isEmulatorSync()
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取应用状态
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getAppState() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>      state<span style=color:#ff7b72;font-weight:700>:</span> AppState.currentState,
</span></span><span style=display:flex><span>      memoryUsage<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getMemoryUsage(),
</span></span><span style=display:flex><span>      storageUsage<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getStorageUsage()
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取内存使用情况
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getMemoryUsage() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (Platform.OS <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>&#39;android&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> require(<span style=color:#a5d6ff>&#39;react-native&#39;</span>).NativeModules.MemoryInfoModule.getMemoryUsage();
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>return</span> require(<span style=color:#a5d6ff>&#39;react-native&#39;</span>).NativeModules.MemoryModule.getMemoryUsage();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取存储使用情况
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getStorageUsage() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 实现存储使用情况获取
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>return</span> {
</span></span><span style=display:flex><span>      used<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>,
</span></span><span style=display:flex><span>      total<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0</span>
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取当前堆栈跟踪
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getCurrentStackTrace() {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 实现堆栈跟踪获取
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>new</span> Error().stack;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 上报崩溃
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  reportCrash(crashInfo) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.sendToEndpoint(<span style=color:#a5d6ff>&#39;/crashes&#39;</span>, crashInfo);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 上报ANR
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  reportANR(anrInfo) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.sendToEndpoint(<span style=color:#a5d6ff>&#39;/anr&#39;</span>, anrInfo);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 上报网络指标
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  reportNetworkMetric(networkMetric) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.sendToEndpoint(<span style=color:#a5d6ff>&#39;/network&#39;</span>, networkMetric);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 上报内存泄漏
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  reportMemoryLeak(leakInfo) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.sendToEndpoint(<span style=color:#a5d6ff>&#39;/memory-leaks&#39;</span>, leakInfo);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 上报自定义指标
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  reportCustomMetric(metric) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>this</span>.sendToEndpoint(<span style=color:#a5d6ff>&#39;/metrics&#39;</span>, metric);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 发送到端点
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  <span style=color:#ff7b72>async</span> sendToEndpoint(path, data) {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (Math.random() <span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72>this</span>.config.sampleRate) <span style=color:#ff7b72>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>await</span> fetch(<span style=color:#a5d6ff>`</span><span style=color:#a5d6ff>${</span><span style=color:#ff7b72>this</span>.config.endpoint<span style=color:#a5d6ff>}${</span>path<span style=color:#a5d6ff>}</span><span style=color:#a5d6ff>`</span>, {
</span></span><span style=display:flex><span>        method<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;POST&#39;</span>,
</span></span><span style=display:flex><span>        headers<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>          <span style=color:#a5d6ff>&#39;Content-Type&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;application/json&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a5d6ff>&#39;X-API-Key&#39;</span><span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.config.apiKey
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        body<span style=color:#ff7b72;font-weight:700>:</span> JSON.stringify({
</span></span><span style=display:flex><span>          ...data,
</span></span><span style=display:flex><span>          deviceInfo<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getDeviceInfo(),
</span></span><span style=display:flex><span>          sessionId<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.getSessionId()
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    } <span style=color:#ff7b72>catch</span> (error) {
</span></span><span style=display:flex><span>      console.error(<span style=color:#a5d6ff>&#39;Failed to report to endpoint:&#39;</span>, error);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 获取会话ID
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  getSessionId() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>let</span> sessionId <span style=color:#ff7b72;font-weight:700>=</span> require(<span style=color:#a5d6ff>&#39;react-native&#39;</span>).AsyncStorage.getItem(<span style=color:#a5d6ff>&#39;performance_session_id&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (<span style=color:#ff7b72;font-weight:700>!</span>sessionId) {
</span></span><span style=display:flex><span>      sessionId <span style=color:#ff7b72;font-weight:700>=</span> Date.now().toString(<span style=color:#a5d6ff>36</span>) <span style=color:#ff7b72;font-weight:700>+</span> Math.random().toString(<span style=color:#a5d6ff>36</span>).substr(<span style=color:#a5d6ff>2</span>);
</span></span><span style=display:flex><span>      require(<span style=color:#a5d6ff>&#39;react-native&#39;</span>).AsyncStorage.setItem(<span style=color:#a5d6ff>&#39;performance_session_id&#39;</span>, sessionId);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> sessionId;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 生成性能报告
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  generateReport() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> report <span style=color:#ff7b72;font-weight:700>=</span> {
</span></span><span style=display:flex><span>      timeRange<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        start<span style=color:#ff7b72;font-weight:700>:</span> Date.now() <span style=color:#ff7b72;font-weight:700>-</span> <span style=color:#a5d6ff>24</span> <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>60</span> <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>60</span> <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>1000</span>, <span style=color:#8b949e;font-style:italic>// 24小时前
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        end<span style=color:#ff7b72;font-weight:700>:</span> Date.now()
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      summary<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        totalCrashes<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.metrics.crashes.length,
</span></span><span style=display:flex><span>        totalANR<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.metrics.anr.length,
</span></span><span style=display:flex><span>        avgFPS<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.calculateAverageFPS(),
</span></span><span style=display:flex><span>        avgMemoryUsage<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.calculateAverageMemory(),
</span></span><span style=display:flex><span>        networkErrorRate<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.calculateNetworkErrorRate()
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      details<span style=color:#ff7b72;font-weight:700>:</span> {
</span></span><span style=display:flex><span>        crashes<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.metrics.crashes.slice(<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>10</span>),
</span></span><span style=display:flex><span>        anr<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.metrics.anr.slice(<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>10</span>),
</span></span><span style=display:flex><span>        networkErrors<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#ff7b72>this</span>.metrics.network.filter(m =&gt; m.error).slice(<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>20</span>)
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> report;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 计算平均FPS
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  calculateAverageFPS() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> recentFPS <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.metrics.fps.slice(<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>100</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (recentFPS.length <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span>) <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>60</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> total <span style=color:#ff7b72;font-weight:700>=</span> recentFPS.reduce((sum, metric) =&gt; sum <span style=color:#ff7b72;font-weight:700>+</span> metric.value, <span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> Math.round(total <span style=color:#ff7b72;font-weight:700>/</span> recentFPS.length);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 计算平均内存使用
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  calculateAverageMemory() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> recentMemory <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.metrics.memory.slice(<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>50</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (recentMemory.length <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span>) <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> total <span style=color:#ff7b72;font-weight:700>=</span> recentMemory.reduce((sum, metric) =&gt; sum <span style=color:#ff7b72;font-weight:700>+</span> metric.usage, <span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> Math.round(total <span style=color:#ff7b72;font-weight:700>/</span> recentMemory.length);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8b949e;font-style:italic>// 计算网络错误率
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>  calculateNetworkErrorRate() {
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> recentNetwork <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>this</span>.metrics.network.slice(<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#a5d6ff>100</span>);
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>if</span> (recentNetwork.length <span style=color:#ff7b72;font-weight:700>===</span> <span style=color:#a5d6ff>0</span>) <span style=color:#ff7b72>return</span> <span style=color:#a5d6ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>const</span> errors <span style=color:#ff7b72;font-weight:700>=</span> recentNetwork.filter(m =&gt; m.error).length;
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> Math.round((errors <span style=color:#ff7b72;font-weight:700>/</span> recentNetwork.length) <span style=color:#ff7b72;font-weight:700>*</span> <span style=color:#a5d6ff>100</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 使用示例
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> performanceSDK <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> PerformanceSDK({
</span></span><span style=display:flex><span>  apiKey<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;your-api-key&#39;</span>,
</span></span><span style=display:flex><span>  endpoint<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>&#39;https://your-performance-endpoint.com/api/v1&#39;</span>,
</span></span><span style=display:flex><span>  sampleRate<span style=color:#ff7b72;font-weight:700>:</span> <span style=color:#a5d6ff>0.1</span> <span style=color:#8b949e;font-style:italic>// 10%采样率
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 在应用启动时初始化
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>performanceSDK.initialize();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// 在组件中使用
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#ff7b72>const</span> MyComponent <span style=color:#ff7b72;font-weight:700>=</span> () =&gt; {
</span></span><span style=display:flex><span>  useEffect(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 记录屏幕性能
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> startTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 模拟渲染时间
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    setTimeout(() =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#ff7b72>const</span> renderTime <span style=color:#ff7b72;font-weight:700>=</span> Date.now() <span style=color:#ff7b72;font-weight:700>-</span> startTime;
</span></span><span style=display:flex><span>      performanceSDK.recordScreenPerformance(<span style=color:#a5d6ff>&#39;MyComponent&#39;</span>, {
</span></span><span style=display:flex><span>        loadTime<span style=color:#ff7b72;font-weight:700>:</span> startTime <span style=color:#ff7b72;font-weight:700>-</span> performance.mark(<span style=color:#a5d6ff>&#39;component_start&#39;</span>),
</span></span><span style=display:flex><span>        renderTime
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    }, <span style=color:#a5d6ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// 记录FPS
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>const</span> fpsInterval <span style=color:#ff7b72;font-weight:700>=</span> setInterval(() =&gt; {
</span></span><span style=display:flex><span>      performanceSDK.recordFPS(<span style=color:#a5d6ff>58</span>); <span style=color:#8b949e;font-style:italic>// 示例FPS值
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    }, <span style=color:#a5d6ff>1000</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>return</span> () =&gt; {
</span></span><span style=display:flex><span>      clearInterval(fpsInterval);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff7b72>return</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>View<span style=color:#ff7b72;font-weight:700>&gt;</span>My Component<span style=color:#ff7b72;font-weight:700>&lt;</span><span style=color:#f85149>/View&gt;;</span>
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><h2 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h2><p>React Native性能优化需要从多个维度入手：</p><p><strong>渲染优化：</strong></p><ol><li>使用React.memo和useCallback避免不必要渲染</li><li>优化FlatList性能配置</li><li>使用原生驱动的动画</li><li>实现图片懒加载和缓存</li></ol><p><strong>内存管理：</strong></p><ol><li>实现智能图片缓存</li><li>避免内存泄漏</li><li>合理使用组件卸载</li><li>监控内存使用情况</li></ol><p><strong>网络优化：</strong></p><ol><li>实现请求缓存和批处理</li><li>控制并发请求数量</li><li>使用GraphQL优化数据获取</li><li>预加载关键数据</li></ol><p><strong>启动优化：</strong></p><ol><li>实现代码分割和懒加载</li><li>优化Bundle大小</li><li>预加载关键资源</li><li>异步加载非关键组件</li></ol><p><strong>监控分析：</strong></p><ol><li>建立全面的性能监控体系</li><li>实时追踪关键指标</li><li>定期生成性能报告</li><li>持续优化和改进</li></ol><p>通过系统性的性能优化策略，可以将React Native应用的性能提升到接近原生应用的水平，为用户提供流畅的60FPS体验。</p><hr><p><strong>相关资源：</strong></p><ul><li><a href=https://reactnative.dev/docs/performance>React Native官方性能指南</a></li><li><a href=https://fbflipper.com/>Flipper调试工具</a></li><li><a href=https://github.com/infinitered/reactotron>Reactotron</a></li><li><a href=https://github.com/react-native-community/hermes-engine>Bundle分析工具</a></li></ul></div><footer class=post-footer-modern><div class=post-tags-modern><span class=tags-label>🏷️ 标签</span><div class=tags-list><a href=/blog/tags/react-native/ class=tag-pill>React Native
</a><a href=/blog/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ class=tag-pill>性能优化
</a><a href=/blog/tags/%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91/ class=tag-pill>移动开发
</a><a href=/blog/tags/app%E4%BC%98%E5%8C%96/ class=tag-pill>APP优化
</a><a href=/blog/tags/60fps/ class=tag-pill>60FPS</a></div></div><style>.post-footer-modern{margin-top:3rem;padding-top:2rem;border-top:1px solid var(--border,#333333)}.post-tags-modern{display:flex;align-items:center;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}.tags-label{font-size:.875rem;font-weight:600;color:var(--secondary,#999999) !important;white-space:nowrap}.tags-list{display:flex;flex-wrap:wrap;gap:.5rem;flex:1}.tag-pill{display:inline-block;padding:.25rem .75rem;background:rgba(255,255,255,5%);border:1px solid var(--border,#333333);border-radius:0;color:var(--secondary,#cccccc) !important;text-decoration:none;font-size:.8rem;font-weight:500;transition:all .2s ease}.tag-pill:hover{background:var(--primary,#ffffff);color:var(--background,#000000) !important;border-color:var(--primary,#ffffff);transform:translateY(-1px)}.post-nav-modern{margin-top:2rem}.nav-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.nav-card{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:rgba(255,255,255,2%);border:1px solid var(--border,#333333);border-radius:12px;text-decoration:none;transition:all .2s ease;min-height:80px}.nav-card:hover{background:rgba(255,255,255,5%);border-color:var(--primary,#ffffff);transform:translateY(-2px)}.nav-card.nav-prev{justify-content:flex-start}.nav-card.nav-next{justify-content:flex-end;text-align:right}.nav-card.nav-next .nav-content{text-align:right}.nav-empty{display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,1%);border:1px dashed var(--border,#333333);color:var(--secondary,#666666)}.nav-arrow{font-size:1.5rem;color:var(--primary,#ffffff);font-weight:300}.nav-content{flex:1}.nav-title{font-size:.95rem;font-weight:600;color:var(--primary,#ffffff) !important;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}[data-theme=light] .post-footer-modern{border-color:var(--border-light,#dee2e6)}[data-theme=light] .tags-label{color:var(--secondary-light,#6c757d) !important}[data-theme=light] .tag-pill{background:rgba(0,0,0,5%);border-color:var(--border-light,#dee2e6);color:var(--secondary-light,#495057) !important}[data-theme=light] .tag-pill:hover{background:var(--primary-light,#0066cc);color:var(--background-light,#ffffff) !important;border-color:var(--primary-light,#0066cc)}[data-theme=light] .nav-card{background:rgba(0,0,0,2%);border-color:var(--border-light,#dee2e6)}[data-theme=light] .nav-card:hover{background:rgba(0,102,204,5%);border-color:var(--primary-light,#0066cc)}[data-theme=light] .nav-empty{background:rgba(0,0,0,1%);border-color:var(--border-light,#dee2e6);color:var(--secondary-light,#6c757d)}[data-theme=light] .nav-arrow{color:var(--primary-light,#0066cc)}[data-theme=light] .nav-title{color:var(--primary-light,#212529) !important}@media(max-width:768px){.nav-grid{grid-template-columns:1fr;gap:.75rem}.nav-card{padding:1rem;min-height:70px}.nav-card.nav-next{text-align:left}.nav-card.nav-next .nav-content{text-align:left}.nav-title{font-size:.875rem}.post-tags-modern{flex-direction:column;gap:.75rem}}@media(max-width:480px){.nav-arrow{font-size:1.25rem}.nav-card{padding:.875rem}.nav-title{font-size:.8rem;-webkit-line-clamp:1}}</style><nav class=post-nav-modern><div class=nav-grid><a href=/blog/articles/game-localization-overseas-strategy/ class="nav-card nav-prev"><div class=nav-arrow>←</div><div class=nav-content><div class=nav-title>游戏出海全攻略：从本土化到全球发行的制胜之道</div></div></a><a href=/blog/articles/flutter-advanced-animations/ class="nav-card nav-next"><div class=nav-content><div class=nav-title>Flutter高级动画完全指南：打造电影级流畅体验的终极秘籍</div></div><div class=nav-arrow>→</div></a></div></nav></footer></main><aside class=post-sidebar><div class=sidebar-toc id=sidebar-toc><div class=toc-header><div class=toc-title>目录</div><button class=toc-toggle id=toc-toggle aria-label="Toggle TOC">
<svg class="toc-toggle-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg></button></div><div class=toc-content id=toc-content><ul class=toc-list><li class="toc-item toc-h2"><a href=#h2-0 class=toc-item-link><span class=toc-item-text>引言</span></a></li><li class="toc-item toc-h2"><a href=#h2-1 class=toc-item-link><span class=toc-item-text>React Native架构与性能原理</span></a></li><li class="toc-item toc-h2"><a href=#h2-2 class=toc-item-link><span class=toc-item-text>渲染性能优化</span></a></li><li class="toc-item toc-h2"><a href=#h2-3 class=toc-item-link><span class=toc-item-text>内存管理优化</span></a></li><li class="toc-item toc-h2"><a href=#h2-4 class=toc-item-link><span class=toc-item-text>网络请求优化</span></a></li><li class="toc-item toc-h2"><a href=#h2-5 class=toc-item-link><span class=toc-item-text>启动性能优化</span></a></li><li class="toc-item toc-h2"><a href=#h2-6 class=toc-item-link><span class=toc-item-text>性能监控与分析</span></a></li><li class="toc-item toc-h2"><a href=#h2-7 class=toc-item-link><span class=toc-item-text>总结</span></a></li></ul></div></div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("sidebar-toc"),t=document.getElementById("toc-toggle"),o=document.getElementById("toc-content"),i=t?.querySelector(".toc-toggle-icon");if(!e)return;let n=!1;t&&t.addEventListener("click",function(){n=!n,n?(o.style.display="none",e.style.width="auto",i.innerHTML='<path d="M9 18l6-6-6-6"/>'):(o.style.display="block",e.style.width="200px",i.innerHTML='<path d="M18 6L6 18M6 6l12 12"/>')});const s=document.querySelector(".post-content");if(s){const e=s.querySelectorAll("h1");e.forEach((e,t)=>{e.id=`h1-${t}`});const t=s.querySelectorAll("h2");t.forEach((e,t)=>{e.id=`h2-${t}`})}const a=document.querySelectorAll(".toc-item-link");a.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const n=this.getAttribute("href").substring(1),t=document.getElementById(n);if(t){const e=document.querySelector(".post-header-main")?.offsetHeight||0,n=t.offsetTop-e-20;window.scrollTo({top:n,behavior:"smooth"})}})})})</script><style>.sidebar-toc{position:sticky;top:2rem;width:200px;background:#fff;border:1px solid #e5e7eb;border-radius:4px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.1);z-index:100}.sidebar-toc.hidden{display:none}.toc-header{padding:12px 16px;border-bottom:1px solid #e5e7eb;background:#fafbfc;display:flex;align-items:center;justify-content:space-between}.toc-title{margin:0;font-size:13px;font-weight:500;color:#374151 !important;font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,sans-serif;text-transform:uppercase;letter-spacing:1px}.toc-toggle{background:0 0;border:none;cursor:pointer;padding:4px;border-radius:4px;display:flex;align-items:center;justify-content:center;transition:all .2s ease;color:#6b7280}.toc-toggle:hover{background:#e5e7eb;color:#374151}.toc-toggle-icon{transition:transform .2s ease}.toc-content{padding:12px 0}.toc-list{list-style:none;margin:0;padding:0}.toc-item{margin-bottom:4px;display:block !important;visibility:visible !important}.toc-h1,.toc-h2{display:block !important}.toc-h2{margin-left:0}.toc-item-link{display:flex;align-items:center;gap:8px;padding:8px 12px;color:#374151 !important;text-decoration:none;font-size:13px;line-height:1.4;border-radius:3px;transition:all .2s ease;font-weight:400}.toc-item-link:hover{background:#f8fafc;color:#1f2937 !important}.toc-item-link.active{background:#e0f2fe;color:#01579b !important;font-weight:500}.toc-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}.dot-red{background:#ef4444}.dot-blue{background:#2196f3}.toc-item-text{color:#1f2937 !important;font-weight:400;flex:1;display:inline !important;visibility:visible !important;opacity:1 !important;font-size:13px !important;line-height:1.4 !important}.toc-item-link .toc-item-text{color:#1f2937 !important;display:inline !important;visibility:visible !important;opacity:1 !important}.toc-item.active .dot-red{background:#d32f2f}.toc-item.active .dot-blue{background:#1976d2}[data-theme=dark] .sidebar-toc{background:#1f2937;border-color:#374151;box-shadow:0 1px 3px rgba(0,0,0,.3)}[data-theme=dark] .toc-header{background:#111827;border-color:#374151}[data-theme=dark] .toc-title{color:#f3f4f6 !important}[data-theme=dark] .toc-toggle{color:#9ca3af}[data-theme=dark] .toc-toggle:hover{background:#374151;color:#f3f4f6}[data-theme=dark] .toc-item-link{color:#e5e7eb !important}[data-theme=dark] .toc-item-link:hover{background:#374151;color:#f9fafb !important}[data-theme=dark] .toc-item-link.active{background:#0d47a1;color:#fff !important}[data-theme=dark] .toc-item-text{color:#f9fafb !important;display:inline !important;visibility:visible !important;opacity:1 !important}[data-theme=dark] .toc-item-link .toc-item-text{color:#f9fafb !important;display:inline !important;visibility:visible !important;opacity:1 !important}@media(max-width:1024px){.sidebar-toc{display:none}.post-content-wrapper{grid-template-columns:1fr !important;padding:0 1rem !important}}</style><style>.post-content-wrapper{display:grid;grid-template-columns:1fr 200px;gap:2rem;padding:0 2rem;max-width:100%}.post-content-main{min-width:0}.post-sidebar{position:sticky;top:2rem;height:fit-content;min-width:0}.post-header-main{margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border,#333333)}.post-header-main .post-title{color:var(--primary,#ffffff) !important;font-size:2.5rem;font-weight:700;line-height:1.2;margin-bottom:1rem}.post-header-main .post-description{color:var(--secondary,#cccccc) !important;font-size:1.1rem;line-height:1.6;margin-bottom:1rem}.post-header-main .post-meta{margin-bottom:0}@media(max-width:1024px){.post-content-wrapper{grid-template-columns:1fr !important;gap:1rem;padding:0 1rem !important}.post-sidebar{display:none}}@media(max-width:768px){.post-header-main .post-title{font-size:2rem}.post-header-main .post-description{font-size:1rem}}</style></aside></div></article></main><footer class=footer><span>© 2024-2025 有条工具技术博客</span> ·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>