<!doctype html><html lang=zh-cn dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>æ‰€æœ‰æ–‡ç«  | æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</title><meta name=keywords content="æŠ€æœ¯æ–‡ç« ,åšå®¢æ–‡ç« ,å¼€å‘æ•™ç¨‹,å·¥å…·ä½¿ç”¨"><meta name=description content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢çš„æ‰€æœ‰æŠ€æœ¯æ–‡ç« åˆ—è¡¨ï¼ŒåŒ…å«å‰ç«¯å¼€å‘ã€å·¥å…·ä½¿ç”¨ã€ç¼–ç¨‹æŠ€å·§ç­‰å†…å®¹"><meta name=author content="util.cn Team"><link rel=canonical href=/blog/posts/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.7e8505b7cdf8bb22ab2305e53c2700bb06c7e64faeb72cd3468823a9a3bd3d6e.css integrity="sha256-foUFt834uyKrIwXlPCcAuwbH5k+utyzTRogjqaO9PW4=" rel="preload stylesheet" as=style><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/blog/favicon-32x32.png><link rel=apple-touch-icon href=/blog/apple-touch-icon.png><link rel=mask-icon href=/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=/blog/posts/feed.xml title=rss><link rel=alternate hreflang=zh-cn href=/blog/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script src=/js/external-link-config.js></script><script src=/js/external-link-interceptor.js></script><link rel=stylesheet href=/blog/css/custom.css media=screen><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«","url":"https://www.util.cn/blog/","description":"æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚","publisher":{"@type":"Organization","name":"æœ‰æ¡å·¥å…·","url":"https://www.util.cn","logo":{"@type":"ImageObject","url":"https://www.util.cn/blog/logo/logo-256.png","width":256,"height":256}},"potentialAction":[{"@type":"SearchAction","target":"https://www.util.cn/blog/search?q={search_term_string}","query-input":"required name=search_term_string"}]}</script><meta property="og:type" content="website"><meta property="og:title" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta property="og:description" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚"><meta property="og:url" content="https://www.util.cn/blog/"><meta property="og:site_name" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢"><meta property="og:image" content="https://www.util.cn/blog/logo/logo-256.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta name=twitter:description content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚"><meta name=twitter:image content="https://www.util.cn/blog/logo/logo-256.png"><meta name=baidu-site-verification content><meta name=category content="æŠ€æœ¯åšå®¢,å¼€å‘è€…å·¥å…·,ç¼–ç¨‹æ•™ç¨‹"><meta name=coverage content="Worldwide"><meta name=distribution content="Global"><meta name=rating content="General"><script id=51la_code async crossorigin=anonymous src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=pro"></script><script>window.addEventListener("load",function(){setTimeout(function(){typeof la!="undefined"?console.log("51laç»Ÿè®¡å·²åŠ è½½"):(console.warn("51laç»Ÿè®¡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ"),function(){var e=document.createElement("script");e.src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=backup",e.async=!0,document.head.appendChild(e)}())},3e3)})</script><meta property="og:url" content="/blog/posts/"><meta property="og:site_name" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·"><meta property="og:title" content="æ‰€æœ‰æ–‡ç« "><meta property="og:description" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢çš„æ‰€æœ‰æŠ€æœ¯æ–‡ç« åˆ—è¡¨ï¼ŒåŒ…å«å‰ç«¯å¼€å‘ã€å·¥å…·ä½¿ç”¨ã€ç¼–ç¨‹æŠ€å·§ç­‰å†…å®¹"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="æ‰€æœ‰æ–‡ç« "><meta name=twitter:description content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢çš„æ‰€æœ‰æŠ€æœ¯æ–‡ç« åˆ—è¡¨ï¼ŒåŒ…å«å‰ç«¯å¼€å‘ã€å·¥å…·ä½¿ç”¨ã€ç¼–ç¨‹æŠ€å·§ç­‰å†…å®¹"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ‰€æœ‰æ–‡ç« ","item":"/blog/posts/"}]}</script></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=/blog/ accesskey=h title="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· (Alt + H)">æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=/blog/posts/ title="æ‰€æœ‰æ–‡ç« åˆ—è¡¨ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŸ¥çœ‹æ‰€æœ‰æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span class=active>æ–‡ç« </span></a></li><li><a href=https://www.util.cn title="æœ‰æ¡å·¥å…· - å¼€å‘è€…çš„å¸¸ç”¨å·¥å…·é›†åˆï¼šæ— å¹¿å‘Š Â· æœ¬åœ°è®¡ç®— Â· å³å¼€å³ç”¨çš„åœ¨çº¿å·¥å…·å¹³å°ï¼Œæä¾›JSONæ ¼å¼åŒ–ã€SQLæ ¼å¼åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰å®ç”¨å·¥å…·"><span>æœ‰æ¡å·¥å…·</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=/blog/categories/ title="æ–‡ç« åˆ†ç±» - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æŠ€æœ¯é¢†åŸŸåˆ†ç±»çš„ä¼˜è´¨æ–‡ç« ï¼ŒåŒ…æ‹¬å‰ç«¯å¼€å‘ã€å·¥å…·ä½¿ç”¨ã€ç¼–ç¨‹æŠ€å·§ç­‰"><span>åˆ†ç±»</span></a></li><li><a href=/blog/tags/ title="æ ‡ç­¾äº‘ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡æ ‡ç­¾å¿«é€Ÿæ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ ‡ç­¾</span></a></li><li><a href=/blog/archives/ title="æ–‡ç« å½’æ¡£ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æ—¶é—´æŸ¥çœ‹å†å²æ–‡ç« "><span>å½’æ¡£</span></a></li><li><a href=/blog/search/ title="æœç´¢æ–‡ç«  - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡å…³é”®è¯æœç´¢æ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹ï¼Œæ”¯æŒæ ‡é¢˜ã€å†…å®¹ã€åˆ†ç±»å’Œæ ‡ç­¾æœç´¢"><span>æœç´¢</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>æ‰€æœ‰æ–‡ç« </h1><div class=post-description>æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢çš„æ‰€æœ‰æŠ€æœ¯æ–‡ç« åˆ—è¡¨ï¼ŒåŒ…å«å‰ç«¯å¼€å‘ã€å·¥å…·ä½¿ç”¨ã€ç¼–ç¨‹æŠ€å·§ç­‰å†…å®¹</div></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Serverlessæ¶æ„ä¸å‰ç«¯éƒ¨ç½²ï¼šç°ä»£åŒ–éƒ¨ç½²ç­–ç•¥</h2></header><div class=entry-content><p>Serverlessæ¶æ„æ¦‚è¿° Serverlessæ¶æ„è®©å¼€å‘è€…æ— éœ€ç®¡ç†æœåŠ¡å™¨å³å¯éƒ¨ç½²åº”ç”¨ï¼Œä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š
æŒ‰éœ€ä»˜è´¹ - åªä¸ºå®é™…ä½¿ç”¨çš„èµ„æºä»˜è´¹ è‡ªåŠ¨æ‰©å±• - æ ¹æ®æµé‡è‡ªåŠ¨è°ƒæ•´ é›¶è¿ç»´ - æ— éœ€ç®¡ç†æœåŠ¡å™¨ å…¨çƒCDN - å†…å®¹åˆ†å‘ç½‘ç»œåŠ é€Ÿ Verceléƒ¨ç½² é¡¹ç›®é…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 // vercel.json { "buildCommand": "npm run build", "outputDirectory": ".output/public", "devCommand": "npm run dev", "installCommand": "npm install", "framework": "nuxt", "regions": ["hkg1", "sin1"], "headers": [ { "source": "/api/(.*)", "headers": [ { "key": "Access-Control-Allow-Origin", "value": "*" } ] } ], "rewrites": [ { "source": "/api/:path*", "destination": "/api/:path*" } ] } ç¯å¢ƒå˜é‡ 1 2 3 4 # åœ¨Vercelæ§åˆ¶å°è®¾ç½®ç¯å¢ƒå˜é‡ # æˆ–é€šè¿‡vercel CLI vercel env add DATABASE_URL production vercel env add API_KEY production Serverlesså‡½æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 // api/hello.js export default function handler(req, res) { const { name } = req.query res.status(200).json({ message: `Hello ${name || 'World'}!`, timestamp: Date.now() }) } // api/users/[id].js export default function handler(req, res) { const { id } = req.query switch (req.method) { case 'GET': res.status(200).json({ id, name: `User ${id}` }) break case 'PUT': res.status(200).json({ id, ...req.body }) break default: res.setHeader('Allow', ['GET', 'PUT']) res.status(405).end(`Method ${req.method} Not Allowed`) } } Netlifyéƒ¨ç½² netlify.tomlé…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 [build] command = "npm run build" publish = "dist" [build.environment] NODE_VERSION = "18" [[redirects]] from = "/api/*" to = "/.netlify/functions/:splat" status = 200 [[redirects]] from = "/*" to = "/index.html" status = 200 [functions] directory = "netlify/functions" [[plugins]] package = "@netlify/plugin-lighthouse" Netlify Functions 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 // netlify/functions/hello.js exports.handler = async (event, context) => { const { name } = event.queryStringParameters || {} return { statusCode: 200, body: JSON.stringify({ message: `Hello ${name || 'World'}!` }), headers: { 'Content-Type': 'application/json' } } } // netlify/functions/users/[id].js exports.handler = async (event, context) => { const { id } = event.pathParameters switch (event.httpMethod) { case 'GET': return { statusCode: 200, body: JSON.stringify({ id, name: `User ${id}` }) } default: return { statusCode: 405, body: 'Method Not Allowed' } } } Cloudflare Workers Workeré…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 // worker.js export default { async fetch(request, env, ctx) { const url = new URL(request.url) // APIè·¯ç”± if (url.pathname.startsWith('/api/')) { return handleAPI(request, env) } // é™æ€èµ„æº return env.ASSETS.fetch(request) } } async function handleAPI(request, env) { const url = new URL(request.url) const path = url.pathname.replace('/api/', '') switch (path) { case 'hello': return new Response(JSON.stringify({ message: 'Hello from Cloudflare!' }), { headers: { 'Content-Type': 'application/json' } }) default: return new Response('Not Found', { status: 404 }) } } wrangler.tomlé…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 name = "my-worker" main = "worker.js" compatibility_date = "2024-01-01" [env.production] routes = [ { pattern = "https://example.com/api/*", zone_name = "example.com" } ] [env.production.vars] ENVIRONMENT = "production" API_URL = "https://api.example.com" [[env.production.kv_namespaces]] binding = "KV" id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" CI/CDé…ç½® GitHub Actions 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 # .github/workflows/deploy.yml name: Deploy on: push: branches: [main] pull_request: branches: [main] jobs: test: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Setup Node.js uses: actions/setup-node@v3 with: node-version: '18' - name: Install dependencies run: npm ci - name: Run tests run: npm test - name: Build run: npm run build deploy-vercel: needs: test if: github.ref == 'refs/heads/main' runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Deploy to Vercel uses: amondnet/vercel-action@v20 with: vercel-token: ${{ secrets.VERCEL_TOKEN }} vercel-org-id: ${{ secrets.ORG_ID }} vercel-project-id: ${{ secrets.PROJECT_ID }} vercel-args: '--prod' deploy-netlify: needs: test if: github.ref == 'refs/heads/main' runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Deploy to Netlify uses: nwtgck/actions-netlify@v1.2 with: publish-dir: './dist' production-branch: main github-token: ${{ secrets.GITHUB_TOKEN }} deploy-message: "Deploy from GitHub Actions" env: NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }} NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }} GitLab CI 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 # .gitlab-ci.yml stages: - test - build - deploy test: stage: test image: node:18 script: - npm ci - npm test build: stage: build image: node:18 script: - npm ci - npm run build artifacts: paths: - dist deploy: stage: deploy image: node:18 script: - npm install -g vercel - vercel --prod --token=$VERCEL_TOKEN only: - main Dockeréƒ¨ç½² Dockerfile 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 # å¤šé˜¶æ®µæ„å»º FROM node:18-alpine AS builder WORKDIR /app COPY package*.json ./ RUN npm ci COPY . . RUN npm run build # ç”Ÿäº§é•œåƒ FROM node:18-alpine WORKDIR /app COPY package*.json ./ RUN npm ci --production COPY --from=builder /app/.output ./.output EXPOSE 3000 CMD ["node", ".output/server/index.mjs"] docker-compose.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 version: '3.8' services: app: build: . ports: - "3000:3000" environment: - NODE_ENV=production - DATABASE_URL=${DATABASE_URL} restart: unless-stopped nginx: image: nginx:alpine ports: - "80:80" - "443:443" volumes: - ./nginx.conf:/etc/nginx/nginx.conf - ./ssl:/etc/nginx/ssl depends_on: - app æ€§èƒ½ä¼˜åŒ– CDNé…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 // nuxt.config.ts export default defineNuxtConfig({ app: { cdnURL: 'https://cdn.example.com' }, nitro: { routeRules: { '/': { cache: { maxAge: 3600 } }, '/api/**': { cache: { maxAge: 60 } }, '/_nuxt/**': { cache: { maxAge: 31536000 } } } } }) å›¾ç‰‡ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 &lt;script setup> // ä½¿ç”¨Nuxt Imageç»„ä»¶ import { NuxtImg } from '#components' &lt;/script> &lt;template> &lt;NuxtImg src="/image.jpg" width="500" height="300" format="webp" loading="lazy" placeholder /> &lt;/template> ç›‘æ§å’Œæ—¥å¿— æ€§èƒ½ç›‘æ§ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // æœåŠ¡ç«¯æ€§èƒ½è¿½è¸ª export default defineEventHandler(async (event) => { const start = Date.now() // å¤„ç†è¯·æ±‚ const result = await fetchData() const duration = Date.now() - start // ä¸ŠæŠ¥æ€§èƒ½æ•°æ® $fetch('/api/analytics', { method: 'POST', body: { path: event.path, duration, timestamp: Date.now() } }) return result }) é”™è¯¯è¿½è¸ª 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // é›†æˆSentry import * as Sentry from '@sentry/node' Sentry.init({ dsn: process.env.SENTRY_DSN, environment: process.env.NODE_ENV, tracesSampleRate: 0.2 }) export default defineEventHandler(async (event) => { try { return await fetchData() } catch (error) { Sentry.captureException(error) throw error } }) æœ€ä½³å®è·µ è‡ªåŠ¨åŒ–éƒ¨ç½² - ä½¿ç”¨CI/CDè‡ªåŠ¨éƒ¨ç½² ç¯å¢ƒéš”ç¦» - åŒºåˆ†å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒ ç›‘æ§å‘Šè­¦ - è®¾ç½®æ€§èƒ½å’Œé”™è¯¯ç›‘æ§ å¤‡ä»½ç­–ç•¥ - å®šæœŸå¤‡ä»½é‡è¦æ•°æ® ç¾éš¾æ¢å¤ - å‡†å¤‡å›æ»šæ–¹æ¡ˆ æ€»ç»“ Serverlessæ¶æ„ä¸ºå‰ç«¯éƒ¨ç½²æä¾›äº†çµæ´»ã€é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡åˆç†é€‰æ‹©å¹³å°å’Œé…ç½®CI/CDæµç¨‹ï¼Œå¯ä»¥æ˜¾è‘—æå‡éƒ¨ç½²æ•ˆç‡å’Œåº”ç”¨çš„ç¨³å®šæ€§ã€‚
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/ class=category-link>å‰ç«¯æŠ€æœ¯</a><a href=/blog/categories/%E9%83%A8%E7%BD%B2/ class=category-link>éƒ¨ç½²</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to Serverlessæ¶æ„ä¸å‰ç«¯éƒ¨ç½²ï¼šç°ä»£åŒ–éƒ¨ç½²ç­–ç•¥" href=/blog/articles/serverless%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%89%8D%E7%AB%AF%E9%83%A8%E7%BD%B2%E7%8E%B0%E4%BB%A3%E5%8C%96%E9%83%A8%E7%BD%B2%E7%AD%96%E7%95%A5/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>å‰ç«¯å®‰å…¨é˜²æŠ¤æœ€ä½³å®è·µï¼šæ„å»ºå®‰å…¨çš„Webåº”ç”¨</h2></header><div class=entry-content><p>å‰ç«¯å®‰å…¨å¨èƒæ¦‚è¿° å‰ç«¯å®‰å…¨æ˜¯Webåº”ç”¨çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ä¸»è¦çš„å®‰å…¨å¨èƒåŒ…æ‹¬ï¼š
XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰ ç‚¹å‡»åŠ«æŒ ä¸­é—´äººæ”»å‡» æ•æ„Ÿä¿¡æ¯æ³„éœ² XSSé˜²æŠ¤ å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 // é€šè¿‡HTTPå¤´è®¾ç½®CSP // Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.example.com // åœ¨HTMLä¸­è®¾ç½® &lt;meta http-equiv="Content-Security-Policy" content=" default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.trusted.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://api.example.com; "> // Nuxté…ç½® export default defineNuxtConfig({ app: { head: { meta: [ { 'http-equiv': 'Content-Security-Policy', content: "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';" } ] } } }) è¾“å…¥è½¬ä¹‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 // HTMLè½¬ä¹‰å‡½æ•° function escapeHtml(unsafe) { return unsafe .replace(/&/g, "&amp;amp;") .replace(/&lt;/g, "&amp;lt;") .replace(/>/g, "&amp;gt;") .replace(/"/g, "&amp;quot;") .replace(/'/g, "&amp;#039;") } // URLè½¬ä¹‰ function escapeUrl(unsafe) { return encodeURIComponent(unsafe) } // ä½¿ç”¨DOM APIè€ŒéinnerHTML const div = document.createElement('div') div.textContent = userInput // è‡ªåŠ¨è½¬ä¹‰ document.body.appendChild(div) Vueè‡ªåŠ¨è½¬ä¹‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 &lt;template> &lt;!-- Vueè‡ªåŠ¨è½¬ä¹‰ --> &lt;div>{{ userInput }}&lt;/div> &lt;!-- ä½¿ç”¨v-htmlæ—¶éœ€è¦ç‰¹åˆ«å°å¿ƒ --> &lt;div v-html="sanitizedHtml">&lt;/div> &lt;/template> &lt;script setup> import DOMPurify from 'dompurify' const userInput = ref('&lt;script>alert("XSS")&lt;\/script>') // ä½¿ç”¨DOMPurifyæ¸…ç†HTML const sanitizedHtml = computed(() => { return DOMPurify.sanitize(userInput.value) }) &lt;/script> CSRFé˜²æŠ¤ CSRF Token 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 // ç”ŸæˆCSRF Token function generateCsrfToken() { const array = new Uint8Array(32) crypto.getRandomValues(array) return Array.from(array, b => b.toString(16).padStart(2, '0')).join('') } // å­˜å‚¨Token document.cookie = `csrf_token=${generateCsrfToken()}; SameSite=Strict; Secure` // å‘é€è¯·æ±‚æ—¶æºå¸¦Token fetch('/api/data', { method: 'POST', headers: { 'X-CSRF-Token': getCsrfToken() }, body: JSON.stringify(data) }) SameSite Cookie 1 2 3 4 5 // è®¾ç½®SameSiteå±æ€§ document.cookie = 'session_id=xxx; SameSite=Strict; Secure; HttpOnly' // æœåŠ¡å™¨ç«¯è®¾ç½®Cookie Set-Cookie: session_id=xxx; SameSite=Strict; Secure; HttpOnly ç‚¹å‡»åŠ«æŒé˜²æŠ¤ X-Frame-Options 1 2 3 4 5 6 7 8 9 10 11 12 13 14 // é€šè¿‡HTTPå¤´è®¾ç½® X-Frame-Options: DENY X-Frame-Options: SAMEORIGIN // Nuxté…ç½® export default defineNuxtConfig({ routeRules: { '/**': { headers: { 'X-Frame-Options': 'DENY' } } } }) Frame Ancestors CSP 1 2 3 // ä½¿ç”¨CSP frame-ancestors Content-Security-Policy: frame-ancestors 'none'; Content-Security-Policy: frame-ancestors 'self'; æ•æ„Ÿä¿¡æ¯ä¿æŠ¤ ä¸åœ¨æœ¬åœ°å­˜å‚¨æ•æ„Ÿä¿¡æ¯ 1 2 3 4 5 6 7 8 9 10 11 12 // âŒ ä¸è¦å­˜å‚¨å¯†ç  localStorage.setItem('password', password) // âŒ ä¸è¦å­˜å‚¨æ•æ„Ÿtoken localStorage.setItem('api_key', api_key) // âœ… ä½¿ç”¨httpOnly cookie // æœåŠ¡å™¨ç«¯è®¾ç½® Set-Cookie: token=xxx; HttpOnly; Secure; SameSite=Strict // âœ… ä½¿ç”¨sessionStorageï¼ˆå…³é—­æµè§ˆå™¨å³æ¸…é™¤ï¼‰ sessionStorage.setItem('temp_data', data) å®‰å…¨çš„æ•°æ®ä¼ è¾“ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 // å§‹ç»ˆä½¿ç”¨HTTPS fetch('https://api.example.com/data', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) }) // å¯ç”¨HSTS Strict-Transport-Security: max-age=31536000; includeSubDomains // å­åŸŸåèµ„æºé™åˆ¶ Content-Security-Policy: frame-ancestors 'self' https://trusted.example.com; å¯†ç å®‰å…¨ å‰ç«¯å¯†ç éªŒè¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 function validatePassword(password) { const checks = { length: password.length >= 8, uppercase: /[A-Z]/.test(password), lowercase: /[a-z]/.test(password), numbers: /\d/.test(password), special: /[!@#$%^&*]/.test(password) } return { valid: Object.values(checks).every(Boolean), checks } } // å¯†ç å¼ºåº¦è¯„ä¼° function getPasswordStrength(password) { let score = 0 if (password.length >= 8) score++ if (password.length >= 12) score++ if (/[a-z]/.test(password)) score++ if (/[A-Z]/.test(password)) score++ if (/\d/.test(password)) score++ if (/[!@#$%^&*]/.test(password)) score++ return ['weak', 'fair', 'good', 'strong'][score] } å®‰å…¨çš„å¯†ç è¾“å…¥ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 &lt;template> &lt;div class="password-input"> &lt;input :type="showPassword ? 'text' : 'password'" v-model="password" @input="validate" /> &lt;button @click="showPassword = !showPassword"> {{ showPassword ? 'Hide' : 'Show' }} &lt;/button> &lt;div v-if="error" class="error">{{ error }}&lt;/div> &lt;/div> &lt;/template> &lt;script setup> const password = ref('') const showPassword = ref(false) const error = ref('') function validate() { const result = validatePassword(password.value) if (!result.valid) { const failedChecks = Object.entries(result.checks) .filter(([, valid]) => !valid) .map(([check]) => check) error.value = `Password fails: ${failedChecks.join(', ')}` } else { error.value = '' } } &lt;/script> APIå®‰å…¨ è¯·æ±‚ç­¾å 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 async function makeSecureRequest(url, data) { const timestamp = Date.now() const nonce = generateNonce() // æ„å»ºç­¾åå†…å®¹ const signatureContent = `${timestamp}${nonce}${JSON.stringify(data)}` const signature = await hmac(signatureContent, secretKey) return fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-Timestamp': timestamp, 'X-Nonce': nonce, 'X-Signature': signature }, body: JSON.stringify(data) }) } å“åº”æ•°æ®éªŒè¯ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 async function fetchAndValidate(url) { const response = await fetch(url) const data = await response.json() // éªŒè¯å“åº”æ•°æ®ç»“æ„ const validatedData = validateResponseSchema(data, { required: ['id', 'name'], types: { id: 'number', name: 'string', email: 'string' } }) return validatedData } function validateResponseSchema(data, schema) { const errors = [] for (const field of schema.required) { if (!(field in data)) { errors.push(`Missing required field: ${field}`) } } for (const [field, type] of Object.entries(schema.types)) { if (field in data && typeof data[field] !== type) { errors.push(`Invalid type for ${field}: expected ${type}`) } } if (errors.length > 0) { throw new Error(`Validation error: ${errors.join(', ')}`) } return data } ç¬¬ä¸‰æ–¹èµ„æºå®‰å…¨ Subresource Integrity (SRI) 1 2 3 4 5 6 &lt;!-- ä½¿ç”¨SRIç¡®ä¿CDNèµ„æºæœªè¢«ç¯¡æ”¹ --> &lt;script src="https://cdn.example.com/library.js" integrity="sha384-..." crossorigin="anonymous" >&lt;/script> é¢„åŠ è½½å®‰å…¨æ£€æŸ¥ 1 2 3 4 5 6 7 8 9 10 11 12 13 // éªŒè¯å¤–éƒ¨è„šæœ¬ async function validateExternalScript(url) { const response = await fetch(url) const content = await response.text() // æ£€æŸ¥æ˜¯å¦åŒ…å«å¯ç–‘ä»£ç  if (content.includes('eval') || content.includes('innerHTML')) { console.warn('Potentially unsafe script detected') return false } return true } å®‰å…¨å®¡è®¡ ä¾èµ–æ£€æŸ¥ 1 2 3 4 5 6 7 8 # æ£€æŸ¥ä¾èµ–æ¼æ´ npm audit # è‡ªåŠ¨ä¿®å¤æ¼æ´ npm audit fix # ä½¿ç”¨Snykè¿›è¡Œæ·±åº¦æ‰«æ npx snyk test ä»£ç å®‰å…¨æ‰«æ 1 2 3 4 5 6 7 8 // ESLintå®‰å…¨è§„åˆ™ // .eslintrc.js module.exports = { extends: [ 'plugin:security/recommended' ], plugins: ['security'] } å®‰å…¨ç›‘æ§ å®æ—¶ç›‘æ§ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 class SecurityMonitor { constructor() { this.init() } init() { // ç›‘æ§XSSå°è¯• this.monitorXSS() // ç›‘æ§å¼‚å¸¸è¯·æ±‚ this.monitorRequests() // ç›‘æ§æ§åˆ¶å°é”™è¯¯ this.monitorErrors() } monitorXSS() { const originalCreateElement = document.createElement document.createElement = function(tagName) { const element = originalCreateElement.call(this, tagName) if (tagName === 'script') { let originalSrc = '' Object.defineProperty(element, 'src', { get() { return originalSrc }, set(value) { // æ£€æŸ¥è„šæœ¬æ¥æº if (!this.isTrustedSource(value)) { console.warn('Untrusted script source:', value) securityEvent('untrusted_script', { src: value }) } originalSrc = value } }) } return element } } monitorRequests() { const originalFetch = window.fetch window.fetch = function(...args) { const url = args[0] // æ£€æŸ¥è¯·æ±‚ç›®æ ‡ if (!this.isTrustedDomain(url)) { console.warn('Request to untrusted domain:', url) securityEvent('untrusted_request', { url }) } return originalFetch.apply(this, args) } } monitorErrors() { window.addEventListener('error', (event) => { if (event.message.includes('Script error')) { securityEvent('possible_xss', { message: event.message, filename: event.filename }) } }) } isTrustedSource(url) { const trusted = ['https://cdn.trusted.com', 'https://api.trusted.com'] return trusted.some(domain => url.startsWith(domain)) } isTrustedDomain(url) { try { const urlObj = new URL(url, window.location.origin) return urlObj.origin === window.location.origin } catch { return false } } } æœ€ä½³å®è·µæ€»ç»“ æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·è¾“å…¥ - å§‹ç»ˆéªŒè¯å’Œè½¬ä¹‰ ä½¿ç”¨HTTPS - ä¿æŠ¤æ•°æ®ä¼ è¾“ è®¾ç½®CSP - é™åˆ¶èµ„æºåŠ è½½ ä½¿ç”¨HttpOnly Cookie - é˜²æ­¢XSSçªƒå– å®šæœŸå®¡è®¡ - æ£€æŸ¥ä¾èµ–å’Œä»£ç å®‰å…¨æ€§ æ€»ç»“ å‰ç«¯å®‰å…¨æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ã€‚é€šè¿‡å®æ–½è¿™äº›å®‰å…¨æªæ–½ï¼Œå¯ä»¥å¤§å¤§é™ä½åº”ç”¨çš„å®‰å…¨é£é™©ï¼Œä¿æŠ¤ç”¨æˆ·æ•°æ®å®‰å…¨ã€‚
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/ class=category-link>å‰ç«¯æŠ€æœ¯</a><a href=/blog/categories/%E5%AE%89%E5%85%A8/ class=category-link>å®‰å…¨</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to å‰ç«¯å®‰å…¨é˜²æŠ¤æœ€ä½³å®è·µï¼šæ„å»ºå®‰å…¨çš„Webåº”ç”¨" href=/blog/articles/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8%E9%98%B2%E6%8A%A4%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%9E%84%E5%BB%BA%E5%AE%89%E5%85%A8%E7%9A%84web%E5%BA%94%E7%94%A8/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Tailwind CSSæ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—</h2></header><div class=entry-content><p>Tailwind CSSæ€§èƒ½ä¼˜åŒ– Tailwind CSSé€šè¿‡JITç¼–è¯‘å™¨å’ŒPurgeCSSæä¾›äº†å‡ºè‰²çš„æ€§èƒ½ä¼˜åŒ–èƒ½åŠ›ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å„ç§ä¼˜åŒ–ç­–ç•¥ã€‚
JITæ¨¡å¼ä¼˜åŒ– å¯ç”¨JITæ¨¡å¼ 1 2 3 4 5 6 7 8 9 10 11 12 // tailwind.config.js module.exports = { mode: 'jit', content: [ './src/**/*.{html,js,jsx,ts,tsx,vue}', './public/**/*.html' ], theme: { extend: {} }, plugins: [] } JITæ¨¡å¼ä¼˜åŠ¿ æŒ‰éœ€ç”Ÿæˆ - åªç”Ÿæˆä½¿ç”¨çš„ç±» ä»»æ„å€¼æ”¯æŒ - å¯ä»¥ä½¿ç”¨åŠ¨æ€å€¼ æ›´å¿«çš„æ„å»º - ç¼–è¯‘é€Ÿåº¦æå‡ æ›´å°çš„CSS - æœ€ç»ˆCSSä½“ç§¯æ›´å° PurgeCSSé…ç½® å†…å®¹è·¯å¾„é…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 // tailwind.config.js module.exports = { content: [ // ç²¾ç¡®æŒ‡å®šå†…å®¹è·¯å¾„ './src/components/**/*.{vue,js}', './src/pages/**/*.{vue,js}', './src/layouts/**/*.{vue,js}', // åŒ…æ‹¬åŠ¨æ€å¯¼å…¥çš„æ–‡ä»¶ './src/**/*.vue', // ç¬¬ä¸‰æ–¹åº“ './node_modules/@mycompany/ui-library/**/*.{js,jsx}' ], safelist: [ // ä¿ç•™åŠ¨æ€ç±»å { pattern: /bg-(red|blue|green)-500/, variants: ['hover', 'focus'] } ] } å®‰å…¨åˆ—è¡¨ç­–ç•¥ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 // tailwind.config.js module.exports = { safelist: [ // ç²¾ç¡®åŒ¹é… 'bg-blue-500', 'text-center', // æ­£åˆ™æ¨¡å¼ /^bg-/, /^text-/, /p-[0-9]+/, // å˜ä½“ { pattern: /bg-(red|blue|green)-500/, variants: ['hover', 'focus', 'active'] } ] } åŠ¨æ€ç±»åå¤„ç† é¿å…å­—ç¬¦ä¸²æ‹¼æ¥ 1 2 3 4 5 6 7 8 9 &lt;!-- âŒ é”™è¯¯åšæ³• --> &lt;div :class="`text-${color}-500`">&lt;/div> &lt;!-- âœ… æ­£ç¡®åšæ³• --> &lt;div :class="{ 'text-red-500': color === 'red', 'text-blue-500': color === 'blue', 'text-green-500': color === 'green' }">&lt;/div> ä½¿ç”¨å®Œæ•´ç±»å 1 2 3 4 5 6 7 8 9 10 11 &lt;script setup> const sizes = { sm: 'text-sm px-2 py-1', md: 'text-md px-4 py-2', lg: 'text-lg px-6 py-3' } &lt;/script> &lt;template> &lt;button :class="sizes[size]">Click me&lt;/button> &lt;/template> CSSä½“ç§¯ä¼˜åŒ– ç¦ç”¨æœªä½¿ç”¨çš„æ ¸å¿ƒæ’ä»¶ 1 2 3 4 5 6 7 8 9 10 // tailwind.config.js module.exports = { corePlugins: { // ç¦ç”¨ä¸éœ€è¦çš„æ’ä»¶ float: false, objectFit: false, objectPosition: false, userSelect: false } } è‡ªå®šä¹‰æ–­ç‚¹ 1 2 3 4 5 6 7 8 9 10 11 12 // tailwind.config.js module.exports = { theme: { screens: { // åªä½¿ç”¨éœ€è¦çš„æ–­ç‚¹ 'sm': '640px', 'md': '768px', 'lg': '1024px', 'xl': '1280px' } } } è¿è¡Œæ—¶ä¼˜åŒ– æ‡’åŠ è½½ç»„ä»¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 &lt;script setup> import { defineAsyncComponent } from 'vue' const HeavyComponent = defineAsyncComponent(() => import('./HeavyComponent.vue') ) &lt;/script> &lt;template> &lt;Suspense> &lt;component :is="HeavyComponent" /> &lt;/Suspense> &lt;/template> CSSæå– 1 2 3 4 5 6 7 // vite.config.js export default { build: { cssCodeSplit: true, cssMinify: 'lightningcss' } } æ€§èƒ½åˆ†æ CSSä½“ç§¯åˆ†æ 1 2 3 4 5 6 7 8 # åˆ†æCSSä½“ç§¯ npx tailwindcss --help # æŸ¥çœ‹ç”Ÿæˆçš„CSS npx tailwindcss -i ./src/styles.css -o ./dist/output.css # åˆ†æç»“æœ npx tailwindcss -o build.css --minify ä½¿ç”¨PurgeCSSåˆ†æ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 // tailwind.config.js module.exports = { content: ['./src/**/*.{html,js}'], purge: { enabled: true, layers: ['components', 'utilities'], options: { // ç”Ÿæˆåˆ†ææŠ¥å‘Š keyframes: true, fontFace: true, variables: true } } } å®ç”¨æŠ€å·§ 1. ä½¿ç”¨@apply 1 2 3 4 5 6 7 8 9 10 /* å¯¹äºå¤æ‚çš„ç»„ä»¶æ ·å¼ */ @layer components { .card { @apply bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow; } .btn-primary { @apply bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded; } } 2. ä¸»é¢˜å®šåˆ¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // tailwind.config.js module.exports = { theme: { extend: { colors: { // è‡ªå®šä¹‰é¢œè‰² primary: { 50: '#f0f9ff', 100: '#e0f2fe', 500: '#0ea5e9', 900: '#0c4a6e' } }, spacing: { // è‡ªå®šä¹‰é—´è· '128': '32rem', '144': '36rem' } } } } 3. å“åº”å¼è®¾è®¡ 1 2 3 4 5 6 7 8 9 10 &lt;template> &lt;!-- å“åº”å¼ç±»å --> &lt;div class=" text-sm md:text-base lg:text-lg p-2 md:p-4 lg:p-6 bg-white md:bg-gray-100 lg:bg-gray-200 "> Responsive content &lt;/div> &lt;/template> æœ€ä½³å®è·µ æŒ‰éœ€å¼•å…¥ - åªä½¿ç”¨éœ€è¦çš„ç±» é¿å…å†…è”æ ·å¼ - ä½¿ç”¨Tailwindç±» ç»„ä»¶åŒ– - ä¸ºå¤æ‚ç»„ä»¶åˆ›å»º@applyè§„åˆ™ å®šæœŸæ¸…ç† - ä½¿ç”¨PurgeCSSæ¸…ç†æœªä½¿ç”¨çš„ç±» æ€§èƒ½ç›‘æ§ - ç›‘æ§CSSä½“ç§¯å’ŒåŠ è½½æ—¶é—´ æ€»ç»“ Tailwind CSSæä¾›äº†å¤šç§ä¼˜åŒ–ç­–ç•¥ã€‚é€šè¿‡åˆç†é…ç½®JITæ¨¡å¼ã€PurgeCSSå’ŒåŠ¨æ€ç±»åå¤„ç†ï¼Œå¯ä»¥æ„å»ºé«˜æ€§èƒ½çš„CSSåº”ç”¨ã€‚
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/ class=category-link>å‰ç«¯æŠ€æœ¯</a><a href=/blog/categories/css/ class=category-link>CSS</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to Tailwind CSSæ€§èƒ½ä¼˜åŒ–å®Œå…¨æŒ‡å—" href=/blog/articles/tailwind-css%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>å‰ç«¯ç›‘æ§ä¸é”™è¯¯è¿½è¸ªå®æˆ˜æŒ‡å—</h2></header><div class=entry-content><p>å‰ç«¯ç›‘æ§ç³»ç»Ÿæ¦‚è§ˆ å®Œæ•´çš„å‰ç«¯ç›‘æ§ç³»ç»Ÿåº”è¯¥åŒ…å«ï¼š
æ€§èƒ½ç›‘æ§ - é¡µé¢åŠ è½½ã€èµ„æºã€äº¤äº’æ€§èƒ½ é”™è¯¯è¿½è¸ª - JavaScripté”™è¯¯ã€èµ„æºé”™è¯¯ã€ç½‘ç»œé”™è¯¯ ç”¨æˆ·ä½“éªŒ - Core Web Vitalsã€ç”¨æˆ·è¡Œä¸º ä¸šåŠ¡æŒ‡æ ‡ - è½¬åŒ–ç‡ã€ç•™å­˜ç‡ç­‰ æ€§èƒ½ç›‘æ§ Performance API 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 // é¡µé¢åŠ è½½æ€§èƒ½ function measurePagePerformance() { if (!window.performance) return const timing = window.performance.timing const navigation = performance.getEntriesByType('navigation')[0] const metrics = { // DNSæŸ¥è¯¢æ—¶é—´ dns: timing.domainLookupEnd - timing.domainLookupStart, // TCPè¿æ¥æ—¶é—´ tcp: timing.connectEnd - timing.connectStart, // è¯·æ±‚å“åº”æ—¶é—´ request: timing.responseEnd - timing.requestStart, // DOMè§£ææ—¶é—´ domParse: timing.domComplete - timing.domLoading, // é¦–æ¬¡å†…å®¹ç»˜åˆ¶ fcp: navigation?.loadEventEnd, // é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ fid: 0, // æœ€å¤§å†…å®¹ç»˜åˆ¶ lcp: 0, // é¦–æ¬¡å­—èŠ‚æ—¶é—´ ttfb: timing.responseStart - timing.navigationStart, // é¡µé¢å®Œå…¨åŠ è½½æ—¶é—´ loadTime: timing.loadEventEnd - timing.navigationStart } return metrics } Core Web Vitals 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 // LCP (Largest Contentful Paint) function measureLCP() { new PerformanceObserver((list) => { const entries = list.getEntries() const lastEntry = entries[entries.length - 1] console.log('LCP:', lastEntry.startTime) }).observe({ entryTypes: ['largest-contentful-paint'] }) } // FID (First Input Delay) function measureFID() { new PerformanceObserver((list) => { for (const entry of list.getEntries()) { console.log('FID:', entry.processingStart - entry.startTime) } }).observe({ entryTypes: ['first-input'] }) } // CLS (Cumulative Layout Shift) function measureCLS() { let clsValue = 0 new PerformanceObserver((list) => { for (const entry of list.getEntries()) { if (!entry.hadRecentInput) { clsValue += entry.value } } console.log('CLS:', clsValue) }).observe({ entryTypes: ['layout-shift'] }) } èµ„æºåŠ è½½ç›‘æ§ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 function monitorResources() { const resources = performance.getEntriesByType('resource') resources.forEach(resource => { const data = { name: resource.name, type: resource.initiatorType, duration: resource.duration, size: resource.transferSize, // èµ„æºåŠ è½½æ—¶é—´åˆ†è§£ dns: resource.domainLookupEnd - resource.domainLookupStart, tcp: resource.connectEnd - resource.connectStart, ssl: resource.secureConnectionStart > 0 ? resource.connectEnd - resource.secureConnectionStart : 0, ttfb: resource.responseStart - resource.requestStart, download: resource.responseEnd - resource.responseStart } // æ£€æµ‹æ…¢èµ„æº if (data.duration > 1000) { console.warn('Slow resource:', data) } }) } é”™è¯¯è¿½è¸ª å…¨å±€é”™è¯¯æ•è· 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 // JavaScripté”™è¯¯ window.addEventListener('error', (event) => { const error = { message: event.message, filename: event.filename, lineno: event.lineno, colno: event.colno, error: event.error?.stack, type: 'javascript', timestamp: Date.now(), url: window.location.href, userAgent: navigator.userAgent } sendErrorToServer(error) }) // Promiseé”™è¯¯ window.addEventListener('unhandledrejection', (event) => { const error = { reason: event.reason, promise: event.promise, type: 'promise', timestamp: Date.now(), url: window.location.href } sendErrorToServer(error) }) // èµ„æºåŠ è½½é”™è¯¯ window.addEventListener('error', (event) => { if (event.target !== window) { const error = { tagName: event.target.tagName, src: event.target.src || event.target.href, type: 'resource', timestamp: Date.now() } sendErrorToServer(error) } }, true) Vueé”™è¯¯å¤„ç† 1 2 3 4 5 6 7 8 9 10 11 12 13 // Vueåº”ç”¨å…¨å±€é”™è¯¯å¤„ç† app.config.errorHandler = (err, instance, info) => { const error = { message: err.message, stack: err.stack, component: instance?.$options.name, info: info, type: 'vue', timestamp: Date.now() } sendErrorToServer(error) } é”™è¯¯èšåˆä¸ŠæŠ¥ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 class ErrorTracker { constructor(config) { this.config = { batchSize: 10, flushInterval: 5000, ...config } this.errorQueue = [] this.startFlushTimer() } addError(error) { this.errorQueue.push({ ...error, timestamp: Date.now(), url: window.location.href, userAgent: navigator.userAgent, userId: this.getUserId() }) if (this.errorQueue.length >= this.config.batchSize) { this.flush() } } async flush() { if (this.errorQueue.length === 0) return const errors = [...this.errorQueue] this.errorQueue = [] try { await fetch('/api/errors', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ errors }) }) } catch (e) { console.error('Failed to send errors:', e) // é‡æ–°å…¥é˜Ÿ this.errorQueue.unshift(...errors) } } startFlushTimer() { setInterval(() => { this.flush() }, this.config.flushInterval) } getUserId() { // è·å–æˆ–ç”Ÿæˆç”¨æˆ·ID let userId = localStorage.getItem('tracker_user_id') if (!userId) { userId = 'user_' + Date.now() + '_' + Math.random() localStorage.setItem('tracker_user_id', userId) } return userId } } ç”¨æˆ·è¡Œä¸ºè¿½è¸ª é¡µé¢è®¿é—®è¿½è¸ª 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 class PageTracker { constructor() { this.currentPage = null this.pageStartTime = null this.init() } init() { // é¡µé¢åŠ è½½å®Œæˆ window.addEventListener('load', () => { this.trackPageView() }) // SPAè·¯ç”±å˜åŒ– this.trackRouteChanges() } trackPageView() { this.pageStartTime = Date.now() this.currentPage = { url: window.location.pathname, referrer: document.referrer, title: document.title, timestamp: this.pageStartTime } this.sendEvent('pageview', this.currentPage) } trackRouteChanges() { // ç›‘å¬è·¯ç”±å˜åŒ–ï¼ˆéœ€è¦æ ¹æ®å…·ä½“æ¡†æ¶å®ç°ï¼‰ let lastUrl = location.href new MutationObserver(() => { const url = location.href if (url !== lastUrl) { lastUrl = url this.trackPageView() } }).observe(document, { subtree: true, childList: true }) } trackEvent(category, action, label, value) { this.sendEvent('event', { category, action, label, value, timestamp: Date.now() }) } sendEvent(type, data) { // å‘é€åˆ°åˆ†ææœåŠ¡å™¨ fetch('/api/analytics', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ type, data, userId: this.getUserId(), sessionId: this.getSessionId() }) }) } } äº¤äº’è¿½è¸ª 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 class InteractionTracker { constructor() { this.init() } init() { // ç‚¹å‡»è¿½è¸ª document.addEventListener('click', (e) => { const target = e.target const data = { tagName: target.tagName, id: target.id, className: target.className, text: target.textContent?.slice(0, 50), x: e.clientX, y: e.clientY } this.track('click', data) }, true) // æ»šåŠ¨è¿½è¸ª let scrollTimeout document.addEventListener('scroll', () => { clearTimeout(scrollTimeout) scrollTimeout = setTimeout(() => { this.track('scroll', { scrollDepth: this.getScrollDepth() }) }, 100) }) } getScrollDepth() { const scrollTop = window.pageYOffset const docHeight = document.documentElement.scrollHeight const winHeight = window.innerHeight return Math.round((scrollTop / (docHeight - winHeight)) * 100) } track(type, data) { // å‘é€äº¤äº’æ•°æ® } } å®Œæ•´ç›‘æ§æ–¹æ¡ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 class MonitorSDK { constructor(config) { this.config = config this.errorTracker = new ErrorTracker(config.error) this.pageTracker = new PageTracker() this.interactionTracker = new InteractionTracker() } // æ€§èƒ½æŒ‡æ ‡ startPerformanceMonitoring() { if ('PerformanceObserver' in window) { // ç›‘æ§LCP this.observeLCP() // ç›‘æ§FID this.observeFID() // ç›‘æ§CLS this.observeCLS() } // é¡µé¢å¸è½½æ—¶å‘é€æœ€ç»ˆæ•°æ® window.addEventListener('beforeunload', () => { this.flush() }) } observeLCP() { new PerformanceObserver((list) => { const entries = list.getEntries() const lastEntry = entries[entries.length - 1] this.reportMetric('LCP', lastEntry.startTime) }).observe({ entryTypes: ['largest-contentful-paint'] }) } observeFID() { new PerformanceObserver((list) => { for (const entry of list.getEntries()) { this.reportMetric('FID', entry.processingStart - entry.startTime) } }).observe({ entryTypes: ['first-input'] }) } observeCLS() { let clsValue = 0 new PerformanceObserver((list) => { for (const entry of list.getEntries()) { if (!entry.hadRecentInput) { clsValue += entry.value } } this.reportMetric('CLS', clsValue) }).observe({ entryTypes: ['layout-shift'] }) } reportMetric(name, value) { // ä¸ŠæŠ¥æ€§èƒ½æŒ‡æ ‡ fetch('/api/metrics', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ metric: name, value, timestamp: Date.now(), url: window.location.href }) }) } flush() { this.errorTracker.flush() } } // åˆå§‹åŒ– const monitor = new MonitorSDK({ error: { batchSize: 10, flushInterval: 5000 } }) monitor.startPerformanceMonitoring() æœ€ä½³å®è·µ é‡‡æ ·ç­–ç•¥ - é«˜æµé‡æ—¶é‡‡ç”¨é‡‡æ · æ•°æ®å‹ç¼© - å‡å°‘ä¼ è¾“æ•°æ®é‡ æœ¬åœ°ç¼“å­˜ - ç¦»çº¿æ—¶ç¼“å­˜æ•°æ® éšç§ä¿æŠ¤ - éµå®ˆéšç§æ³•è§„ æ€§èƒ½å½±å“ - æœ€å°åŒ–ç›‘æ§å¯¹æ€§èƒ½çš„å½±å“ æ€»ç»“ å‰ç«¯ç›‘æ§ç³»ç»Ÿæ˜¯ä¿éšœåº”ç”¨è´¨é‡çš„é‡è¦å·¥å…·ã€‚é€šè¿‡å…¨é¢çš„æ€§èƒ½ç›‘æ§ã€é”™è¯¯è¿½è¸ªå’Œç”¨æˆ·è¡Œä¸ºåˆ†æï¼Œå¯ä»¥åŠæ—¶å‘ç°å¹¶è§£å†³é—®é¢˜ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/ class=category-link>å‰ç«¯æŠ€æœ¯</a><a href=/blog/categories/%E7%9B%91%E6%8E%A7/ class=category-link>ç›‘æ§</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to å‰ç«¯ç›‘æ§ä¸é”™è¯¯è¿½è¸ªå®æˆ˜æŒ‡å—" href=/blog/articles/%E5%89%8D%E7%AB%AF%E7%9B%91%E6%8E%A7%E4%B8%8E%E9%94%99%E8%AF%AF%E8%BF%BD%E8%B8%AA%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>WebCrypto APIå®æˆ˜ï¼šå‰ç«¯åŠ å¯†ä¸å®‰å…¨é€šä¿¡å®Œå…¨æŒ‡å—</h2></header><div class=entry-content><p>WebCrypto APIç®€ä»‹ WebCrypto APIæ˜¯ç°ä»£æµè§ˆå™¨æä¾›çš„åŸç”ŸåŠ å¯†APIï¼Œæä¾›äº†å®‰å…¨çš„åŠ å¯†æ“ä½œèƒ½åŠ›ã€‚ä¸ç¬¬ä¸‰æ–¹åº“ç›¸æ¯”ï¼Œå®ƒæœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š
æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œæ— éœ€é¢å¤–ä¾èµ– ä½¿ç”¨ç³»ç»Ÿçº§åŠ å¯†åº“ï¼Œæ€§èƒ½æ›´ä¼˜ å®‰å…¨çš„å¯†é’¥ç®¡ç†ï¼Œå¯†é’¥ä¸æš´éœ²ç»™JavaScript åŒæ­¥å’Œå¼‚æ­¥APIæ”¯æŒ å¯¹ç§°åŠ å¯†ï¼ˆAESï¼‰ ç”Ÿæˆå¯†é’¥ 1 2 3 4 5 6 7 8 9 10 11 12 // ç”ŸæˆAESå¯†é’¥ async function generateAesKey() { const key = await crypto.subtle.generateKey( { name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt'] ) return key } åŠ å¯†æ•°æ® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 async function encryptData(data, key) { const encoder = new TextEncoder() const iv = crypto.getRandomValues(new Uint8Array(12)) const encrypted = await crypto.subtle.encrypt( { name: 'AES-GCM', iv: iv }, key, encoder.encode(data) ) return { ciphertext: new Uint8Array(encrypted), iv: iv } } è§£å¯†æ•°æ® 1 2 3 4 5 6 7 8 9 10 11 12 13 async function decryptData(encryptedData, key, iv) { const decrypted = await crypto.subtle.decrypt( { name: 'AES-GCM', iv: iv }, key, encryptedData ) const decoder = new TextDecoder() return decoder.decode(decrypted) } éå¯¹ç§°åŠ å¯†ï¼ˆRSAï¼‰ ç”Ÿæˆå¯†é’¥å¯¹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 async function generateRsaKeyPair() { const keyPair = await crypto.subtle.generateKey( { name: 'RSA-OAEP', modulusLength: 2048, publicExponent: new Uint8Array([1, 0, 1]), hash: 'SHA-256' }, true, ['encrypt', 'decrypt'] ) return keyPair } å¯¼å‡ºå’Œå¯¼å…¥å¯†é’¥ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 // å¯¼å‡ºå…¬é’¥ async function exportPublicKey(key) { const exported = await crypto.subtle.exportKey( 'spki', key ) return new Uint8Array(exported) } // å¯¼å…¥å…¬é’¥ async function importPublicKey(keyData) { return await crypto.subtle.importKey( 'spki', keyData, { name: 'RSA-OAEP', hash: 'SHA-256' }, true, ['encrypt'] ) } å“ˆå¸Œç®—æ³• è®¡ç®—å“ˆå¸Œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 async function hashData(data, algorithm = 'SHA-256') { const encoder = new TextEncoder() const dataBuffer = encoder.encode(data) const hashBuffer = await crypto.subtle.digest( algorithm, dataBuffer ) const hashArray = Array.from(new Uint8Array(hashBuffer)) return hashArray.map(b => b.toString(16).padStart(2, '0')).join('') } // ä½¿ç”¨ const hash = await hashData('Hello, WebCrypto!', 'SHA-256') console.log(hash) // 64ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸² HMAC 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 async function hmac(key, message) { const encoder = new TextEncoder() const cryptoKey = await crypto.subtle.importKey( 'raw', encoder.encode(key), { name: 'HMAC', hash: 'SHA-256' }, false, ['sign'] ) const signature = await crypto.subtle.sign( 'HMAC', cryptoKey, encoder.encode(message) ) const hashArray = Array.from(new Uint8Array(signature)) return hashArray.map(b => b.toString(16).padStart(2, '0')).join('') } æ•°å­—ç­¾å ç”Ÿæˆç­¾å 1 2 3 4 5 6 7 8 9 10 11 12 13 14 async function signData(data, privateKey) { const encoder = new TextEncoder() const signature = await crypto.subtle.sign( { name: 'RSA-PSS', saltLength: 32 }, privateKey, encoder.encode(data) ) return new Uint8Array(signature) } éªŒè¯ç­¾å 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 async function verifySignature(data, signature, publicKey) { const encoder = new TextEncoder() const result = await crypto.subtle.verify( { name: 'RSA-PSS', saltLength: 32 }, publicKey, signature, encoder.encode(data) ) return result } å¯†é’¥æ´¾ç”Ÿï¼ˆPBKDF2ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 async function deriveKey(password, salt) { const encoder = new TextEncoder() const keyMaterial = await crypto.subtle.importKey( 'raw', encoder.encode(password), 'PBKDF2', false, ['deriveKey'] ) const key = await crypto.subtle.deriveKey( { name: 'PBKDF2', salt: encoder.encode(salt), iterations: 100000, hash: 'SHA-256' }, keyMaterial, { name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt'] ) return key } å®æˆ˜æ¡ˆä¾‹ ç«¯åˆ°ç«¯åŠ å¯†èŠå¤© 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 class E2EChat { constructor() { this.keyPair = null this.peerKeys = new Map() } async init() { // ç”Ÿæˆå¯†é’¥å¯¹ this.keyPair = await crypto.subtle.generateKey( { name: 'RSA-OAEP', modulusLength: 2048, publicExponent: new Uint8Array([1, 0, 1]), hash: 'SHA-256' }, true, ['encrypt', 'decrypt'] ) } async getPublicKey() { const exported = await crypto.subtle.exportKey('spki', this.keyPair.publicKey) return btoa(String.fromCharCode(...new Uint8Array(exported))) } async addPeer(id, publicKeyData) { const binaryString = atob(publicKeyData) const bytes = new Uint8Array(binaryString.length) for (let i = 0; i &lt; binaryString.length; i++) { bytes[i] = binaryString.charCodeAt(i) } const publicKey = await crypto.subtle.importKey( 'spki', bytes, { name: 'RSA-OAEP', hash: 'SHA-256' }, true, ['encrypt'] ) this.peerKeys.set(id, publicKey) } async sendMessage(peerId, message) { const publicKey = this.peerKeys.get(peerId) if (!publicKey) throw new Error('Peer not found') // ç”Ÿæˆä¼šè¯å¯†é’¥ const sessionKey = await this.generateSessionKey() // åŠ å¯†æ¶ˆæ¯ const encryptedMessage = await this.encryptMessage(message, sessionKey) // åŠ å¯†ä¼šè¯å¯†é’¥ const encryptedKey = await this.encryptSessionKey(sessionKey, publicKey) return { message: encryptedMessage, key: encryptedKey } } async receiveMessage(data) { // è§£å¯†ä¼šè¯å¯†é’¥ const sessionKey = await this.decryptSessionKey(data.key) // è§£å¯†æ¶ˆæ¯ return await this.decryptMessage(data.message, sessionKey) } async generateSessionKey() { return await crypto.subtle.generateKey( { name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt'] ) } async encryptMessage(message, key) { const encoder = new TextEncoder() const iv = crypto.getRandomValues(new Uint8Array(12)) const encrypted = await crypto.subtle.encrypt( { name: 'AES-GCM', iv: iv }, key, encoder.encode(message) ) return { data: btoa(String.fromCharCode(...new Uint8Array(encrypted))), iv: btoa(String.fromCharCode(...iv)) } } async decryptMessage(data, key) { const ciphertext = Uint8Array.from(atob(data.data), c => c.charCodeAt(0)) const iv = Uint8Array.from(atob(data.iv), c => c.charCodeAt(0)) const decrypted = await crypto.subtle.decrypt( { name: 'AES-GCM', iv: iv }, key, ciphertext ) const decoder = new TextDecoder() return decoder.decode(decrypted) } } å®‰å…¨æœ€ä½³å®è·µ å¯†é’¥ç®¡ç†
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/ class=category-link>å‰ç«¯æŠ€æœ¯</a><a href=/blog/categories/%E5%AE%89%E5%85%A8/ class=category-link>å®‰å…¨</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to WebCrypto APIå®æˆ˜ï¼šå‰ç«¯åŠ å¯†ä¸å®‰å…¨é€šä¿¡å®Œå…¨æŒ‡å—" href=/blog/articles/webcrypto-api%E5%AE%9E%E6%88%98%E5%89%8D%E7%AB%AF%E5%8A%A0%E5%AF%86%E4%B8%8E%E5%AE%89%E5%85%A8%E9%80%9A%E4%BF%A1%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>TypeScriptç±»å‹ä½“æ“è¿›é˜¶ï¼šæŒæ¡é«˜çº§ç±»å‹ç³»ç»Ÿ</h2></header><div class=entry-content><p>TypeScriptç±»å‹ç³»ç»Ÿè¿›é˜¶ TypeScriptçš„ç±»å‹ç³»ç»Ÿéå¸¸å¼ºå¤§ï¼ŒæŒæ¡é«˜çº§ç±»å‹ç‰¹æ€§å¯ä»¥å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å®‰å…¨ã€æ›´ä¼˜é›…çš„ä»£ç ã€‚
æ¡ä»¶ç±»å‹ åŸºç¡€æ¡ä»¶ç±»å‹ 1 2 3 4 5 6 7 8 9 10 // ç±»ä¼¼ä¸‰å…ƒè¡¨è¾¾å¼ type IsString&lt;T> = T extends string ? true : false type Test1 = IsString&lt;string> // true type Test2 = IsString&lt;number> // false // åµŒå¥—æ¡ä»¶ç±»å‹ type NonNullable&lt;T> = T extends null | undefined ? never : T type Test3 = NonNullable&lt;string | null> // string åˆ†å¸ƒå¼æ¡ä»¶ç±»å‹ 1 2 3 4 5 6 7 8 9 // è”åˆç±»å‹ä¼šåˆ†å¸ƒå¼åº”ç”¨æ¡ä»¶ç±»å‹ type ToArray&lt;T> = T extends any ? T[] : never type Test4 = ToArray&lt;string | number> // string[] | number[] // é˜»æ­¢åˆ†å¸ƒ type ToArrayNonDistributive&lt;T> = [T] extends [any] ? T[] : never type Test5 = ToArrayNonDistributive&lt;string | number> // (string | number)[] ç±»å‹æ¨æ–­ 1 2 3 4 5 6 7 8 9 10 // Inferå…³é”®å­— type ReturnType&lt;T> = T extends (...args: any[]) => infer R ? R : never type Fn = (x: number) => string type Test6 = ReturnType&lt;Fn> // string // è§£åŒ…Promise type UnwrapPromise&lt;T> = T extends Promise&lt;infer U> ? U : T type Test7 = UnwrapPromise&lt;Promise&lt;string>> // string æ˜ å°„ç±»å‹ åŸºç¡€æ˜ å°„ç±»å‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 // å°†æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰ type Partial&lt;T> = { [P in keyof T]?: T[P] } // å°†æ‰€æœ‰å±æ€§å˜ä¸ºå¿…éœ€ type Required&lt;T> = { [P in keyof T]-?: T[P] } // åªè¯» type Readonly&lt;T> = { readonly [P in keyof T]: T[P] } é«˜çº§æ˜ å°„ç±»å‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // åªä¿ç•™ç‰¹å®šç±»å‹ type OnlyStrings&lt;T> = { [P in keyof T as T[P] extends string ? P : never]: T[P] } interface User { name: string age: number email: string } type Test8 = OnlyStrings&lt;User> // { name: string; email: string } // æ¡ä»¶æ˜ å°„ type Getters&lt;T> = { [P in keyof T as `get${Capitalize&lt;string & P>}`]: () => T[P] } type Test9 = Getters&lt;{ name: string; age: number }> // { getName: () => string; getAge: () => number } æ¨¡æ¿å­—é¢é‡ç±»å‹ åŸºç¡€ç”¨æ³• 1 2 3 4 type Greeting = `hello ${string}` const test: Greeting = 'hello world' // âœ“ const test2: Greeting = 'hi world' // âœ— é«˜çº§åº”ç”¨ 1 2 3 4 5 6 7 8 9 10 // äº‹ä»¶åç§°ç±»å‹ type EventName&lt;T extends string> = `on${Capitalize&lt;T>}` type Test10 = EventName&lt;'click'> // 'onClick' // è·¯å¾„ç±»å‹ type Path&lt;T extends string> = `/${T}` | `${Path&lt;T>}/${T}` // ç»„åˆç±»å‹ type CssValue&lt;T extends number> = `${T}px` | `${T}%` | `${t}em` é€’å½’ç±»å‹ æ·±åº¦åªè¯» 1 2 3 4 5 6 7 8 9 10 11 12 13 type DeepReadonly&lt;T> = { readonly [P in keyof T]: T[P] extends object ? DeepReadonly&lt;T[P]> : T[P] } interface Config { database: { host: string port: number } } type Test11 = DeepReadonly&lt;Config> // æ‰€æœ‰åµŒå¥—å±æ€§éƒ½å˜ä¸ºåªè¯» æ·±åº¦å¿…éœ€ 1 2 3 type DeepRequired&lt;T> = { [P in keyof T]-?: T[P] extends object ? DeepRequired&lt;T[P]> : T[P] } å“ç‰Œç±»å‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // åˆ›å»ºå”¯ä¸€ç±»å‹ type Brand&lt;T, B> = T & { __brand: B } type USD = Brand&lt;number, 'USD'> type EUR = Brand&lt;number, 'EUR'> const usd: USD = 100 as USD const eur: EUR = 100 as EUR // ä¸èƒ½ç›´æ¥èµ‹å€¼ // eur = usd // âœ— ç±»å‹é”™è¯¯ function addUSD(a: USD, b: USD): USD { return (a + b) as USD } å‡½æ•°ç±»å‹é«˜çº§åº”ç”¨ å‡½æ•°é‡è½½ 1 2 3 4 5 6 7 8 function process(input: string): string function process(input: number): number function process(input: string | number): string | number { return input } const result1 = process('hello') // string const result2 = process(123) // number å‚æ•°ç±»å‹æ¨æ–­ 1 2 3 4 5 6 7 8 9 10 // å…ƒç»„è½¬å‡½æ•°å‚æ•° type TupleToFn&lt;T extends any[]> = T extends [...infer Args, infer R] ? (...args: Args) => R : never type Test12 = TupleToFn&lt;[string, number, boolean]> // åå‘æ¨æ–­ type FnToTuple&lt;T extends (...args: any[]) => any> = T extends (...args: infer A) => any ? A : never ç±»å‹å®ˆå« typeofå®ˆå« 1 2 3 4 5 6 7 8 9 10 function isString(value: unknown): value is string { return typeof value === 'string' } function process(value: unknown) { if (isString(value)) { // è¿™é‡Œvalueçš„ç±»å‹æ˜¯string console.log(value.toUpperCase()) } } inå®ˆå« 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 interface Cat { meow(): void } interface Dog { bark(): void } function makeSound(animal: Cat | Dog) { if ('meow' in animal) { animal.meow() } else { animal.bark() } } instanceofå®ˆå« 1 2 3 4 5 6 7 8 9 10 11 12 13 class Error1 extends Error { code = 'ERROR_1' } class Error2 extends Error { code = 'ERROR_2' } function handleError(error: Error) { if (error instanceof Error1) { console.log(error.code) } } é«˜çº§å·¥å…·ç±»å‹ OmitByType 1 2 3 4 5 6 7 8 9 10 11 12 type OmitByType&lt;T, U> = { [P in keyof T as T[P] extends U ? never : P]: T[P] } interface Test { name: string age: number active: boolean } type Test13 = OmitByType&lt;Test, boolean> // { name: string; age: number } DeepPick 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 type DeepPick&lt;T, K extends string> = K extends `${infer Key}.${infer Rest}` ? Key extends keyof T ? { [P in Key]: DeepPick&lt;T[P], Rest> } : never : K extends keyof T ? { [P in K]: T[K] } : never interface User { profile: { name: string email: string } settings: { theme: string } } type Test14 = DeepPick&lt;User, 'profile.name'> // { profile: { name: string } } å®æˆ˜æ¡ˆä¾‹ è¡¨å•ç±»å‹å®šä¹‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 type FieldProps&lt;T> = { value: T onChange: (value: T) => void error?: string } type FormFields&lt;T> = { [K in keyof T]: FieldProps&lt;T[K]> } interface LoginData { email: string password: string remember: boolean } type LoginForm = FormFields&lt;LoginData> APIå“åº”ç±»å‹ 1 2 3 4 5 6 type ApiResponse&lt;T, E = Error> = | { success: true; data: T } | { success: false; error: E } type UserResponse = ApiResponse&lt;User> type ErrorResponse = ApiResponse&lt;never, NetworkError> æœ€ä½³å®è·µ ä¼˜å…ˆä½¿ç”¨ç±»å‹æ¨å¯¼ - è®©TypeScriptè‡ªåŠ¨æ¨å¯¼ç±»å‹ é¿å…ä½¿ç”¨any - ä½¿ç”¨unknownä»£æ›¿ åˆç†ä½¿ç”¨æ³›å‹ - æé«˜ä»£ç å¤ç”¨æ€§ ç±»å‹å®ˆå« - ç¼©å°ç±»å‹èŒƒå›´ å“ç‰Œç±»å‹ - åˆ›å»ºè¯­ä¹‰åŒ–ç±»å‹ æ€»ç»“ TypeScriptç±»å‹ç³»ç»Ÿéå¸¸å¼ºå¤§ï¼ŒæŒæ¡é«˜çº§ç±»å‹ç‰¹æ€§å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºæ›´å®‰å…¨çš„ä»£ç ã€‚
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/ class=category-link>å‰ç«¯æŠ€æœ¯</a><a href=/blog/categories/typescript/ class=category-link>TypeScript</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to TypeScriptç±»å‹ä½“æ“è¿›é˜¶ï¼šæŒæ¡é«˜çº§ç±»å‹ç³»ç»Ÿ" href=/blog/articles/typescript%E7%B1%BB%E5%9E%8B%E4%BD%93%E6%93%8D%E8%BF%9B%E9%98%B6%E6%8E%8C%E6%8F%A1%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Nuxt 4æœåŠ¡ç«¯æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–å®æˆ˜æŒ‡å—</h2></header><div class=entry-content><p>Nuxt 4 SSRä¼˜åŒ–æ¦‚è§ˆ Nuxt 4åŸºäºVue 3å’ŒNitroæ„å»ºï¼Œæä¾›äº†å¼ºå¤§çš„SSRèƒ½åŠ›ã€‚æœ¬æ–‡å°†æ·±å…¥åˆ†æå„ç§æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ã€‚
æœåŠ¡ç«¯ç¼“å­˜ç­–ç•¥ routeRulesç¼“å­˜ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // nuxt.config.ts export default defineNuxtConfig({ routeRules: { // é™æ€é¡µé¢ç¼“å­˜1å°æ—¶ '/': { isr: 3600 }, // APIç¼“å­˜ '/api/**': { cors: true, headers: { 'cache-control': 'max-age=60' } }, // åŠ¨æ€è·¯ç”±ISR '/blog/**': { isr: true }, // å®Œå…¨é™æ€ '/about': { isr: false }, // SPAæ¨¡å¼ '/app/**': { ssr: false } } }) æœåŠ¡ç«¯æ•°æ®ç¼“å­˜ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // server/api/data.ts export default defineEventHandler(async (event) => { // ä½¿ç”¨Nitroå­˜å‚¨ç¼“å­˜ const storage = useStorage('redis') const cached = await storage.getItem('expensive-data') if (cached) { return cached } const data = await fetchExpensiveData() await storage.setItem('expensive-data', data, { ttl: 3600 }) return data }) useAsyncDataç¼“å­˜ 1 2 3 4 5 6 7 8 9 10 11 12 13 &lt;script setup lang="ts"> // ç¼“å­˜APIå“åº” const { data, refresh } = await useAsyncData( 'user-profile', () => $fetch('/api/user/profile'), { transform: (data) => data.result, // 5åˆ†é’Ÿç¼“å­˜ getCachedData: (key) => useNuxtData(key).data, dedupe: 'cancel' } ) &lt;/script> æµå¼æ¸²æŸ“ ä½¿ç”¨Suspenseæµå¼æ¸²æŸ“ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 &lt;!-- app.vue --> &lt;template> &lt;div> &lt;NuxtPage /> &lt;/div> &lt;/template> &lt;!-- pages/index.vue --> &lt;template> &lt;div> &lt;!-- ç«‹å³æ¸²æŸ“éƒ¨åˆ† --> &lt;header>Header&lt;/header> &lt;!-- å¼‚æ­¥ç»„ä»¶æµå¼åŠ è½½ --> &lt;Suspense> &lt;template #default> &lt;AsyncComponent /> &lt;/template> &lt;template #fallback> &lt;LoadingSkeleton /> &lt;/template> &lt;/Suspense> &lt;footer>Footer&lt;/footer> &lt;/div> &lt;/template> Nitroæµå¼å“åº” 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // server/api/stream.ts export default defineEventHandler(async (event) => { const stream = new ReadableStream({ async start(controller) { for (let i = 0; i &lt; 10; i++) { const data = `chunk ${i}\n` controller.enqueue(new TextEncoder().encode(data)) await new Promise(resolve => setTimeout(resolve, 100)) } controller.close() } }) return sendStream(event, stream) }) Hydrationä¼˜åŒ– æ‡’åŠ è½½Hydration 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 &lt;template> &lt;div> &lt;!-- å…³é”®å†…å®¹ç«‹å³hydration --> &lt;CriticalContent /> &lt;!-- éå…³é”®å†…å®¹å»¶è¿Ÿhydration --> &lt;LazyNonCritical @vue:mounted="hydrateComponent" /> &lt;/div> &lt;/template> &lt;script setup> function hydrateComponent() { // ç»„ä»¶mountedåæ‰hydration } &lt;/script> é€‰æ‹©æ€§Hydration 1 2 3 4 5 6 7 8 9 10 &lt;script setup> // åªhydrationéœ€è¦çš„éƒ¨åˆ† const { data } = await useAsyncData('posts', () => $fetch('/api/posts'), { // åªåœ¨å®¢æˆ·ç«¯è·å– server: false } ) &lt;/script> æ€§èƒ½ç›‘æ§ æœåŠ¡ç«¯æ€§èƒ½è¿½è¸ª 1 2 3 4 5 6 7 8 9 // server/middleware/performance.ts export default defineEventHandler((event) => { const start = Date.now() event.node.res.on('finish', () => { const duration = Date.now() - start console.log(`[Performance] ${event.node.req.url} - ${duration}ms`) }) }) ä½¿ç”¨Nitroé’©å­ 1 2 3 4 5 6 7 // server/plugins/performance.ts export default defineNitroPlugin((nitroApp) => { nitroApp.hooks.hook('renderResponse', (response, { event }) => { const timing = Date.now() - event.context.startTime event.node.res.setHeader('X-Response-Time', `${timing}ms`) }) }) æ•°æ®è·å–ä¼˜åŒ– å¹¶è¡Œæ•°æ®è·å– 1 2 3 4 5 6 7 8 &lt;script setup lang="ts"> // å¹¶è¡Œè·å–å¤šä¸ªæ•°æ® const [user, posts, comments] = await Promise.all([ $fetch('/api/user'), $fetch('/api/posts'), $fetch('/api/comments') ]) &lt;/script> useLazyAsyncDataå»¶è¿ŸåŠ è½½ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 &lt;script setup lang="ts"> // ä¸é˜»å¡å¯¼èˆª const { data, pending } = useLazyAsyncData( 'dashboard', () => $fetch('/api/dashboard') ) &lt;/script> &lt;template> &lt;div> &lt;h1>Dashboard&lt;/h1> &lt;div v-if="pending">Loading...&lt;/div> &lt;div v-else>{{ data }}&lt;/div> &lt;/div> &lt;/template> é¢„æ¸²æŸ“ç­–ç•¥ é™æ€ç”Ÿæˆ 1 2 3 4 5 # ç”Ÿæˆé™æ€ç«™ç‚¹ nuxt generate # ä»…é¢„æ¸²æŸ“ç‰¹å®šè·¯ç”± nuxt generate --prerender /about /contact å¢é‡é™æ€å†ç”Ÿ 1 2 3 4 5 6 7 8 9 10 11 // nuxt.config.ts export default defineNuxtConfig({ routeRules: { '/blog/**': { // ISRï¼šæ¯å°æ—¶é‡æ–°ç”Ÿæˆ isr: 3600, // å…è®¸é¢„æ¸²æŸ“ prerender: true } } }) ä»£ç åˆ†å‰²ä¼˜åŒ– åŠ¨æ€å¯¼å…¥ 1 2 3 4 5 6 7 8 9 10 11 12 &lt;script setup> // ç»„ä»¶æ‡’åŠ è½½ const HeavyComponent = defineAsyncComponent(() => import('~/components/HeavyComponent.vue') ) &lt;/script> &lt;template> &lt;Suspense> &lt;component :is="HeavyComponent" /> &lt;/Suspense> &lt;/template> è·¯ç”±çº§ä»£ç åˆ†å‰² 1 2 3 4 5 6 7 // nuxt.config.ts export default defineNuxtConfig({ experimental: { // å¯ç”¨è·¯ç”±çº§ä»£ç åˆ†å‰² typedPages: true } }) ç”Ÿäº§ç¯å¢ƒä¼˜åŒ– æ„å»ºä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // nuxt.config.ts export default defineNuxtConfig({ vite: { build: { // Rollupé…ç½® rollupOptions: { output: { // æ‰‹åŠ¨ä»£ç åˆ†å‰² manualChunks: { 'vue-vendor': ['vue', 'vue-router', '@vue/runtime-core'], 'ui-vendor': ['@headlessui/vue', 'heroicons'] } } } } }, // å‹ç¼© nitro: { minify: true } }) CDNé…ç½® 1 2 3 4 5 6 7 8 9 10 11 // nuxt.config.ts export default defineNuxtConfig({ app: { // é™æ€èµ„æºCDN cdnURL: 'https://cdn.example.com' }, // å‹ç¼©ä¸­é—´ä»¶ nitro: { compressPublicAssets: true } }) æ€»ç»“ Nuxt 4æä¾›äº†å®Œæ•´çš„SSRä¼˜åŒ–å·¥å…·é“¾ã€‚é€šè¿‡åˆç†ä½¿ç”¨ç¼“å­˜ã€æµå¼æ¸²æŸ“ã€Hydrationä¼˜åŒ–ç­‰æŠ€æœ¯ï¼Œå¯ä»¥æ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½ã€‚
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/ class=category-link>å‰ç«¯æŠ€æœ¯</a><a href=/blog/categories/nuxt/ class=category-link>Nuxt</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to Nuxt 4æœåŠ¡ç«¯æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–å®æˆ˜æŒ‡å—" href=/blog/articles/nuxt-4%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Vue 3.5æ–°ç‰¹æ€§æ·±åº¦è§£æï¼šå“åº”å¼ç³»ç»Ÿçš„é‡å¤§å‡çº§</h2></header><div class=entry-content><p>å¼•è¨€ Vue 3.5ä½œä¸ºVue 3ç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°ç‰¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–ã€‚æœ¬æ–‡å°†æ·±å…¥åˆ†æè¿™äº›æ–°ç‰¹æ€§çš„æŠ€æœ¯ç»†èŠ‚ï¼Œå¹¶é€šè¿‡å®é™…ä»£ç ç¤ºä¾‹å±•ç¤ºå¦‚ä½•åœ¨é¡¹ç›®ä¸­åº”ç”¨å®ƒä»¬ã€‚
æ ¸å¿ƒæ–°ç‰¹æ€§æ¦‚è§ˆ å“åº”å¼ç³»ç»Ÿä¼˜åŒ– - å†…å­˜å ç”¨é™ä½ï¼Œæ€§èƒ½æå‡ Propsè§£æ„ - æ›´ç®€æ´çš„API defineModelæ”¹è¿› - ç®€åŒ–åŒå‘ç»‘å®š Suspenseå¢å¼º - æ›´å¥½çš„å¼‚æ­¥ç»„ä»¶å¤„ç† SSRæ”¹è¿› - æœåŠ¡ç«¯æ¸²æŸ“æ€§èƒ½æå‡ TypeScriptæ”¯æŒ - æ›´å¥½çš„ç±»å‹æ¨å¯¼ å“åº”å¼ç³»ç»Ÿä¼˜åŒ– å†…å­˜ä¼˜åŒ– Vue 3.5å¯¹å“åº”å¼ç³»ç»Ÿè¿›è¡Œäº†åº•å±‚é‡æ„ï¼Œæ˜¾è‘—é™ä½äº†å†…å­˜å ç”¨ï¼š
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 &lt;script setup> import { ref, reactive, computed } from 'vue' // Vue 3.5: å†…å­˜å ç”¨ä¼˜åŒ– const items = ref(new Array(10000).fill(0).map((_, i) => ({ id: i, name: `Item ${i}`, value: Math.random() })) // è®¡ç®—å±æ€§ç¼“å­˜ä¼˜åŒ– const total = computed(() => { return items.value.reduce((sum, item) => sum + item.value, 0) }) // å“åº”å¼Map/Setæ€§èƒ½æå‡ const mapData = reactive(new Map()) const setData = reactive(new Set()) &lt;/script> Proxyä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 // Vue 3.5çš„Proxyå®ç°æ›´åŠ é«˜æ•ˆ const state = reactive({ nested: { deeply: { value: 1 } } }) // è§¦å‘è¿½è¸ªä¼˜åŒ– watchEffect(() => { console.log(state.nested.deeply.value) // æ›´å°‘çš„ä¾èµ–è¿½è¸ªå¼€é”€ }) Propsè§£æ„ åŸºç¡€ç”¨æ³• Vue 3.5ä¸­æœ€å…·å®ç”¨æ€§çš„ç‰¹æ€§ä¹‹ä¸€ï¼š
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/ class=category-link>å‰ç«¯æŠ€æœ¯</a><a href=/blog/categories/vue/ class=category-link>Vue</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to Vue 3.5æ–°ç‰¹æ€§æ·±åº¦è§£æï¼šå“åº”å¼ç³»ç»Ÿçš„é‡å¤§å‡çº§" href=/blog/articles/vue-3.5%E6%96%B0%E7%89%B9%E6%80%A7%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%87%8D%E5%A4%A7%E5%8D%87%E7%BA%A7/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ç”¨Rustæ„å»ºé«˜æ€§èƒ½CLIå·¥å…·ï¼šä»é›¶åˆ°éƒ¨ç½²å®Œæ•´æŒ‡å—</h2></header><div class=entry-content><p>å‰è¨€ å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰æ˜¯å¼€å‘è€…æ—¥å¸¸å·¥ä½œä¸­ä¸å¯æˆ–ç¼ºçš„åˆ©å™¨ã€‚ä¼ ç»Ÿçš„Node.jsæˆ–Pythonè„šæœ¬åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶å¾€å¾€é¢ä¸´æ€§èƒ½ç“¶é¢ˆã€‚Rustè¯­è¨€å‡­å€Ÿå…¶é›¶æˆæœ¬æŠ½è±¡ã€å†…å­˜å®‰å…¨å’Œå“è¶Šçš„æ€§èƒ½ï¼Œæˆä¸ºæ„å»ºCLIå·¥å…·çš„ç†æƒ³é€‰æ‹©ã€‚
æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªå®é™…é¡¹ç›®â€”â€”æ‰¹é‡å›¾ç‰‡å¤„ç†å·¥å…·ï¼Œå®Œæ•´å±•ç¤ºä½¿ç”¨Rustæ„å»ºCLIå·¥å…·çš„å…¨è¿‡ç¨‹ã€‚
é¡¹ç›®åˆå§‹åŒ– 1. åˆ›å»ºé¡¹ç›® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # å®‰è£…Rustå·¥å…·é“¾ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh # åˆ›å»ºæ–°çš„äºŒè¿›åˆ¶é¡¹ç›® cargo new imgproc --bin cd imgproc # æ·»åŠ å¸¸ç”¨ä¾èµ– cargo add clap --features derive cargo add anyhow cargo add thiserror cargo add tokio --features full cargo add indicatif cargo add console 2. é¡¹ç›®ç»“æ„ imgproc/ â”œâ”€â”€ Cargo.toml # ä¾èµ–é…ç½® â”œâ”€â”€ src/ â”‚ â”œâ”€â”€ main.rs # å…¥å£æ–‡ä»¶ â”‚ â”œâ”€â”€ cli.rs # å‘½ä»¤è¡Œå‚æ•°å®šä¹‰ â”‚ â”œâ”€â”€ processor.rs # æ ¸å¿ƒå¤„ç†é€»è¾‘ â”‚ â”œâ”€â”€ error.rs # é”™è¯¯ç±»å‹å®šä¹‰ â”‚ â””â”€â”€ utils.rs # å·¥å…·å‡½æ•° â”œâ”€â”€ tests/ â”‚ â””â”€â”€ integration_test.rs â””â”€â”€ README.md å‘½ä»¤è¡Œå‚æ•°å¤„ç† ä½¿ç”¨clapåº“å®šä¹‰å‘½ä»¤è¡Œæ¥å£ï¼š
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/rust/ class=category-link>Rust</a><a href=/blog/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/ class=category-link>å¼€å‘å·¥å…·</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to ç”¨Rustæ„å»ºé«˜æ€§èƒ½CLIå·¥å…·ï¼šä»é›¶åˆ°éƒ¨ç½²å®Œæ•´æŒ‡å—" href=/blog/articles/%E7%94%A8rust%E6%9E%84%E5%BB%BA%E9%AB%98%E6%80%A7%E8%83%BDcli%E5%B7%A5%E5%85%B7%E4%BB%8E%E9%9B%B6%E5%88%B0%E9%83%A8%E7%BD%B2%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>WebAssemblyåœ¨å‰ç«¯å·¥ç¨‹ä¸­çš„å®è·µï¼šçªç ´JavaScriptæ€§èƒ½ç“¶é¢ˆ</h2></header><div class=entry-content><p>å¼•è¨€ éšç€Webåº”ç”¨çš„å¤æ‚åº¦ä¸æ–­æå‡ï¼ŒJavaScriptåœ¨å¤„ç†è®¡ç®—å¯†é›†å‹ä»»åŠ¡æ—¶é€æ¸æš´éœ²å‡ºæ€§èƒ½ç“¶é¢ˆã€‚WebAssemblyï¼ˆWasmï¼‰ä½œä¸ºä¸€ç§æ–°å‹çš„äºŒè¿›åˆ¶æŒ‡ä»¤æ ¼å¼ï¼Œä¸ºWebå¹³å°å¸¦æ¥äº†æ¥è¿‘åŸç”Ÿçš„æ‰§è¡Œæ€§èƒ½ã€‚æœ¬æ–‡å°†ç»“åˆå®é™…é¡¹ç›®ç»éªŒï¼Œæ·±å…¥æ¢è®¨WebAssemblyåœ¨å‰ç«¯å·¥ç¨‹ä¸­çš„åº”ç”¨å®è·µã€‚
WebAssemblyçš„æ ¸å¿ƒä¼˜åŠ¿ 1. è¿‘åŸç”Ÿæ‰§è¡Œæ€§èƒ½ WebAssemblyé‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œä½“ç§¯å°ã€è§£æå¿«ï¼Œæ‰§è¡Œé€Ÿåº¦æ¥è¿‘åŸç”Ÿä»£ç ã€‚ä»¥ä¸‹æ˜¯æ€§èƒ½å¯¹æ¯”æ•°æ®ï¼ˆåŸºäºæ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—ï¼‰ï¼š
1 2 3 4 5 6 // JavaScriptå®ç° function fibonacci(n) { return n &lt; 2 ? n : fibonacci(n - 1) + fibonacci(n - 2); } // WebAssembly (Rustç¼–è¯‘) å¯æå‡10-50å€æ€§èƒ½ 2. å¤šè¯­è¨€æ”¯æŒ å¼€å‘è€…å¯ä»¥ä½¿ç”¨Rustã€C++ã€Goç­‰å¤šç§è¯­è¨€ç¼–å†™Wasmæ¨¡å—ï¼š
1 2 3 4 5 6 7 8 9 // Rustå®ç°æ–æ³¢é‚£å¥‘ #[wasm_bindgen] pub fn fibonacci(n: u32) -> u32 { match n { 0 => 0, 1 => 1, _ => fibonacci(n - 1) + fibonacci(n - 2), } } 3. å®‰å…¨éš”ç¦» Wasmè¿è¡Œåœ¨æ²™ç®±ç¯å¢ƒä¸­ï¼Œå†…å­˜éš”ç¦»ç¡®ä¿äº†å®‰å…¨æ€§ã€‚
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/ class=category-link>å‰ç«¯æŠ€æœ¯</a><a href=/blog/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/ class=category-link>æ€§èƒ½ä¼˜åŒ–</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to WebAssemblyåœ¨å‰ç«¯å·¥ç¨‹ä¸­çš„å®è·µï¼šçªç ´JavaScriptæ€§èƒ½ç“¶é¢ˆ" href=/blog/articles/webassembly%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E4%B8%AD%E7%9A%84%E5%AE%9E%E8%B7%B5%E7%AA%81%E7%A0%B4javascript%E6%80%A7%E8%83%BD%E7%93%B6%E9%A2%88/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=/blog/posts/>Â«&nbsp;&nbsp;
</a><a class=next href=/blog/posts/page/3/>&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>Â© 2024-2025 æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢</span> Â·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>