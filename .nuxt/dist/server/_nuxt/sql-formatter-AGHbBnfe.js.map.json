{"file":"sql-formatter-AGHbBnfe.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderAttr","_ssrRenderComponent","_unref","_ssrRenderList","_push","_parent","_ssrRenderVNode","_createVNode","_resolveDynamicComponent","_ssrInterpolate","_createBlock","_toDisplayString"],"sources":["../../../../src/pages/tools/sql-formatter.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-8xl mx-auto\">\n    <!-- 面包屑导航 -->\n    <!-- <Breadcrumb :category=\"category\" :tool=\"tool\" /> -->\n\n    <!-- Hero 头部区 -->\n    <div class=\"mb-8\">\n      <h1 class=\"text-3xl font-bold text-foreground mb-3\">SQL格式化 - 在线SQL美化与格式化工具</h1>\n      <p class=\"text-muted-foreground \">一款免费的在线 SQL Formatter。支持一键美化、格式化各种 SQL 语句，包括 SELECT、INSERT、UPDATE、DELETE 等。支持多种数据库方言，纯本地计算，数据隐私绝对安全。</p>\n    </div>\n\n    <!-- 工具交互区 -->\n    <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\n      <!-- 输入区域 -->\n      <div class=\"flex flex-col h-full\">\n        <div class=\"flex items-center justify-between mb-3\">\n          <label class=\"text-sm font-medium text-foreground\">输入SQL</label>\n          <div class=\"flex gap-2\">\n            <button\n              class=\"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground\"\n              @click=\"clearInput\"\n            >\n              清空\n            </button>\n            <button\n              class=\"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground\"\n              @click=\"pasteFromClipboard\"\n            >\n              粘贴\n            </button>\n            <button\n              class=\"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground\"\n              @click=\"loadSample\"\n            >\n              示例SQL\n            </button>\n          </div>\n        </div>\n        <div class=\"flex items-center justify-between mb-2\">\n          <div class=\"flex items-center gap-2\">\n            <label class=\"text-xs text-muted-foreground\">缩进:</label>\n            <select\n              v-model=\"indentSize\"\n              class=\"text-xs bg-muted border border-border rounded px-2 py-1\"\n            >\n              <option value=\"2\">2空格</option>\n              <option value=\"4\">4空格</option>\n            </select>\n          </div>\n          <div class=\"flex items-center gap-2\">\n            <label class=\"text-xs text-muted-foreground\">数据库:</label>\n            <select\n              v-model=\"sqlDialect\"\n              class=\"text-xs bg-muted border border-border rounded px-2 py-1\"\n            >\n              <option value=\"sql\">标准SQL</option>\n              <option value=\"mysql\">MySQL</option>\n              <option value=\"postgresql\">PostgreSQL</option>\n              <option value=\"sqlite\">SQLite</option>\n              <option value=\"oracle\">Oracle</option>\n              <option value=\"sqlserver\">SQL Server</option>\n            </select>\n          </div>\n        </div>\n        <textarea\n          v-model=\"inputSQL\"\n          class=\"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-none font-mono text-sm\"\n          placeholder=\"在此输入SQL语句...\"\n          @keydown.ctrl.enter=\"formatSQL\"\n          @keydown.meta.enter=\"formatSQL\"\n        ></textarea>\n        <div v-if=\"inputError\" class=\"mt-2 p-2 bg-destructive/20 text-destructive text-sm rounded\">\n          {{ inputError }}\n        </div>\n      </div>\n\n      <!-- 输出区域 -->\n      <div class=\"flex flex-col h-full\">\n        <div class=\"flex items-center justify-between mb-3\">\n          <label class=\"text-sm font-medium text-foreground\">格式化结果</label>\n          <div class=\"flex gap-2\">\n            <button\n              class=\"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground\"\n              @click=\"copyOutput\"\n            >\n              复制\n            </button>\n            <button\n              class=\"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground\"\n              @click=\"downloadOutput\"\n            >\n              下载SQL\n            </button>\n            <button\n              class=\"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground\"\n              @click=\"toggleFullscreen\"\n            >\n              全屏模式\n            </button>\n          </div>\n        </div>\n        <pre\n          ref=\"outputPre\"\n          class=\"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg overflow-auto font-mono text-sm whitespace-pre-wrap\"\n        >{{ outputSQL }}</pre>\n      </div>\n    </div>\n\n    <!-- 格式化按钮 -->\n    <div class=\"flex justify-center mb-12\">\n      <button\n        @click=\"formatSQL\"\n        class=\"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium\"\n      >\n        格式化 SQL\n      </button>\n    </div>\n\n    <!-- SEO 内容长尾区 -->\n    <div class=\"p-6 mb-12 relative\">\n      <!-- 折叠按钮 -->\n      <button\n        @click=\"toggleSeoContent\"\n        class=\"absolute top-4 right-4 text-muted-foreground hover:text-foreground transition-colors\"\n        :title=\"isSeoContentVisible ? '折叠内容' : '展开内容'\"\n      >\n        <HelpCircle v-if=\"!isSeoContentVisible\" class=\"w-5 h-5\" />\n        <ChevronUp v-else class=\"w-5 h-5\" />\n      </button>\n\n      <!-- 内容区域 -->\n      <div v-show=\"isSeoContentVisible\">\n        <h2 class=\"text-2xl font-bold text-foreground mb-4 flex items-center\">\n          <span class=\"text-primary mr-2\">#</span>\n          什么是 SQL 格式化？\n        </h2>\n        <p class=\"text-muted-foreground mb-4\">\n          SQL（Structured Query Language）是用于管理关系数据库系统的标准化语言。\n          SQL 格式化是将混乱、压缩的 SQL 语句转换为具有良好缩进、换行和结构化的可读格式的过程。\n          这不仅提高了代码的可读性，也有助于团队协作和代码维护。\n        </p>\n        <p class=\"text-muted-foreground\">\n          在实际开发中，ORM 工具生成的 SQL 或为了节省传输带宽而压缩的 SQL 往往难以阅读。\n          SQL 格式化工具可以帮助开发者快速分析和优化 SQL 查询，提高开发效率。\n        </p>\n\n        <h2 class=\"text-2xl font-bold text-foreground mt-8 mb-4 flex items-center\">\n          <span class=\"text-primary mr-2\">#</span>\n          如何使用本工具\n        </h2>\n        <ol class=\"list-decimal list-inside space-y-2 text-muted-foreground mb-6\">\n          <li>将您的 SQL 语句粘贴到左侧输入框</li>\n          <li>选择合适的数据库类型（标准SQL、MySQL、PostgreSQL等）</li>\n          <li>调整缩进大小（2空格或4空格）</li>\n          <li>点击\"格式化 SQL\"按钮或使用快捷键 Ctrl+Enter</li>\n          <li>查看右侧格式化后的结果，可复制或下载</li>\n        </ol>\n\n        <h2 class=\"text-2xl font-bold text-foreground mt-8 mb-4 flex items-center\">\n          <span class=\"text-primary mr-2\">#</span>\n          核心功能特性\n        </h2>\n        <ul class=\"list-disc list-inside space-y-2 text-muted-foreground mb-6\">\n          <li><strong>多数据库支持</strong>: 支持 MySQL、PostgreSQL、SQLite、Oracle、SQL Server 等主流数据库方言</li>\n          <li><strong>智能格式化</strong>: 自动识别 SQL 关键字、表名、字段名并进行合理格式化</li>\n          <li><strong>自定义缩进</strong>: 支持 2 空格或 4 空格缩进，满足不同编码规范</li>\n          <li><strong>本地处理</strong>: 所有格式化都在浏览器本地完成，数据不会上传到服务器</li>\n          <li><strong>快捷操作</strong>: 支持快捷键操作，提高工作效率</li>\n          <li><strong>导出功能</strong>: 支持复制和下载格式化后的 SQL</li>\n        </ul>\n\n        <h2 class=\"text-2xl font-bold text-foreground mt-8 mb-4 flex items-center\">\n          <span class=\"text-primary mr-2\">#</span>\n          常见问题 (FAQ)\n        </h2>\n        <div class=\"space-y-4\">\n          <div>\n            <h3 class=\"text-lg font-semibold text-foreground\">SQL 格式化工具支持哪些数据库？</h3>\n            <p class=\"text-muted-foreground mt-1\">\n              我们支持主流的数据库系统，包括标准 SQL、MySQL、PostgreSQL、SQLite、Oracle 和 SQL Server。\n              每种数据库都有其特有的语法特性，工具会根据选择的数据库类型进行相应的优化。\n            </p>\n          </div>\n          <div>\n            <h3 class=\"text-lg font-semibold text-foreground\">格式化后的 SQL 会改变执行逻辑吗？</h3>\n            <p class=\"text-muted-foreground mt-1\">\n              不会。SQL 格式化只改变代码的视觉呈现（缩进、换行、空格），不会改变 SQL 的执行逻辑和性能。\n              格式化后的 SQL 与原始 SQL 在功能上完全等价。\n            </p>\n          </div>\n          <div>\n            <h3 class=\"text-lg font-semibold text-foreground\">为什么需要 SQL 格式化？</h3>\n            <p class=\"text-muted-foreground mt-1\">\n              格式化 SQL 有多个好处：提高代码可读性、便于团队协作、有助于发现语法错误、\n              方便代码审查、提升维护效率。对于复杂的 SQL 查询，格式化尤其重要。\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 相关推荐区 -->\n    <section class=\"mb-12\">\n      <h2 class=\"text-2xl font-bold text-foreground mb-4\">您可能还需要...</h2>\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <NuxtLink\n          v-for=\"relatedTool in relatedTools\"\n          :key=\"relatedTool.id\"\n          :to=\"`/tools/${relatedTool.id}/`\"\n          class=\"block p-4 bg-card border border-border rounded-lg hover:bg-accent transition-colors\"\n        >\n          <div class=\"flex items-center gap-2 mb-2\">\n            <component\n              :is=\"iconMap[relatedTool.icon]\"\n              class=\"w-5 h-5 text-primary\"\n            />\n            <span class=\"font-medium text-foreground\">{{ relatedTool.name }}</span>\n          </div>\n          <p class=\"text-sm text-muted-foreground line-clamp-2\">{{ relatedTool.description }}</p>\n        </NuxtLink>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport {\n  Database, Copy, Download, RotateCcw,\n  FileText, Lock, Shield, Clock, Type, Wifi, Image, Code,\n  FileJson, Link, Hash, Timer, Regex, FileDiff,\n  Globe, FolderOpen, GitBranch, ChevronUp, ChevronDown, HelpCircle\n} from 'lucide-vue-next'\nimport { tools } from '~/data/tools'\nimport { categories } from '~/data/categories'\nimport { addRecentTool } from '~/composables/useTools'\nimport ToolCard from '~/components/ToolCard.vue'\nimport Breadcrumb from '~/components/Breadcrumb.vue'\n\ndefinePageMeta({\n  layout: 'default'\n})\n\nconst router = useRouter()\n\n// 定义当前工具和分类\nconst tool = tools.find(t => t.id === 'sql-formatter')\nconst category = categories.find(c => c.id === 'format')\n\n// 输入输出数据\nconst inputSQL = ref('')\nconst outputSQL = ref('')\nconst inputError = ref('')\nconst indentSize = ref('2')\nconst sqlDialect = ref('sql')\n\n// SEO内容折叠状态\nconst isSeoContentVisible = ref(true)\n\n// 全屏相关\nconst outputPre = ref(null)\nconst isFullscreen = ref(false)\n\n// 图标映射\nconst iconMap = {\n  FileText, Lock, Shield, Clock, Type, Wifi, Image, Code,\n  FileJson, Database, Link, Hash, Timer, Regex, FileDiff,\n  Globe, FolderOpen, GitBranch\n}\n\n// 相关工具\nconst relatedTools = computed(() => {\n  // 获取相关工具：同一分类下的其他工具 + 推荐工具\n  const sameCategory = tools.filter(t =>\n    t.category === 'format' && t.id !== 'sql-formatter'\n  ).slice(0, 3)\n\n  // 添加一些推荐工具\n  const recommended = [\n    tools.find(t => t.id === 'json-formatter'),\n    tools.find(t => t.id === 'xml-formatter'),\n    tools.find(t => t.id === 'yaml-converter'),\n    tools.find(t => t.id === 'base64-encoder')\n  ].filter(Boolean)\n\n  return [...sameCategory, ...recommended].slice(0, 4)\n})\n\n// SQL关键字列表\nconst sqlKeywords = new Set([\n  'SELECT', 'FROM', 'WHERE', 'INSERT', 'UPDATE', 'DELETE', 'CREATE', 'ALTER', 'DROP',\n  'TABLE', 'INDEX', 'VIEW', 'PROCEDURE', 'FUNCTION', 'TRIGGER', 'JOIN', 'INNER', 'LEFT',\n  'RIGHT', 'FULL', 'OUTER', 'ON', 'AND', 'OR', 'NOT', 'IN', 'EXISTS', 'BETWEEN',\n  'LIKE', 'ORDER', 'BY', 'GROUP', 'HAVING', 'LIMIT', 'OFFSET', 'UNION', 'ALL', 'DISTINCT',\n  'AS', 'CASE', 'WHEN', 'THEN', 'ELSE', 'END', 'IF', 'IS', 'NULL', 'COUNT', 'SUM',\n  'AVG', 'MAX', 'MIN', 'PRIMARY', 'KEY', 'FOREIGN', 'REFERENCES', 'CONSTRAINT'\n])\n\n// 格式化SQL\nconst formatSQL = () => {\n  if (!inputSQL.value) return\n\n  try {\n    inputError.value = ''\n    const formatted = formatSQLString(inputSQL.value, parseInt(indentSize.value))\n    outputSQL.value = formatted\n  } catch (error) {\n    inputError.value = `格式化错误: ${error.message}`\n    outputSQL.value = ''\n  }\n}\n\n// 格式化SQL字符串\nconst formatSQLString = (sql, indent) => {\n  const indentStr = ' '.repeat(indent)\n  let formatted = ''\n  let currentIndent = 0\n  let inString = false\n  let stringChar = ''\n  let currentWord = ''\n\n  for (let i = 0; i < sql.length; i++) {\n    const char = sql[i]\n    const prevChar = i > 0 ? sql[i - 1] : ''\n\n    // 处理字符串\n    if ((char === \"'\" || char === '\"') && prevChar !== '\\\\') {\n      if (!inString) {\n        inString = true\n        stringChar = char\n      } else if (char === stringChar) {\n        inString = false\n        stringChar = ''\n      }\n      formatted += char\n      currentWord += char\n      continue\n    }\n\n    if (inString) {\n      formatted += char\n      currentWord += char\n      continue\n    }\n\n    // 处理注释\n    if (char === '-' && prevChar === '-') {\n      // 单行注释\n      let comment = '--'\n      i++\n      while (i < sql.length && sql[i] !== '\\n') {\n        comment += sql[i]\n        i++\n      }\n      formatted += comment + '\\n' + indentStr.repeat(currentIndent)\n      currentWord = ''\n      continue\n    }\n\n    if (char === '/' && prevChar === '*') {\n      // 多行注释结束\n      formatted += char\n      continue\n    }\n\n    if (char === '*' && prevChar === '/') {\n      // 多行注释开始\n      let comment = '/*'\n      i++\n      while (i < sql.length && !(sql[i] === '/' && sql[i - 1] === '*')) {\n        comment += sql[i]\n        i++\n      }\n      comment += '/'\n      formatted += comment + '\\n' + indentStr.repeat(currentIndent)\n      currentWord = ''\n      continue\n    }\n\n    // 处理关键字和标识符\n    if (/[a-zA-Z_]/.test(char)) {\n      currentWord += char\n    } else {\n      if (currentWord) {\n        const upperWord = currentWord.toUpperCase()\n        if (sqlKeywords.has(upperWord)) {\n          // 主要关键字需要换行\n          if (['SELECT', 'FROM', 'WHERE', 'ORDER', 'GROUP', 'HAVING', 'LIMIT', 'UNION'].includes(upperWord)) {\n            formatted += '\\n' + indentStr.repeat(currentIndent) + upperWord + ' '\n          } else {\n            formatted += upperWord + ' '\n          }\n\n          // 需要增加缩进的关键字\n          if (['SELECT', 'FROM', 'WHERE', 'SET', 'VALUES'].includes(upperWord)) {\n            currentIndent++\n          }\n\n          // 需要减少缩进的关键字\n          if (['AND', 'OR'].includes(upperWord)) {\n            formatted += '\\n' + indentStr.repeat(Math.max(0, currentIndent - 1))\n          }\n        } else {\n          formatted += currentWord + ' '\n        }\n        currentWord = ''\n      }\n\n      // 处理特殊字符\n      if (char === ',') {\n        formatted += ',\\n' + indentStr.repeat(currentIndent)\n      } else if (char === '(') {\n        formatted += '(\\n' + indentStr.repeat(currentIndent + 1)\n        currentIndent++\n      } else if (char === ')') {\n        currentIndent = Math.max(0, currentIndent - 1)\n        formatted += '\\n' + indentStr.repeat(currentIndent) + ')'\n      } else if (char === ';') {\n        currentIndent = 0\n        formatted += ';\\n'\n      } else if (char !== ' ' && char !== '\\t' && char !== '\\n') {\n        formatted += char\n      }\n    }\n  }\n\n  // 处理最后一个词\n  if (currentWord) {\n    const upperWord = currentWord.toUpperCase()\n    if (sqlKeywords.has(upperWord)) {\n      formatted += upperWord\n    } else {\n      formatted += currentWord\n    }\n  }\n\n  // 清理多余的空行和空格\n  return formatted\n    .replace(/\\n\\s*\\n/g, '\\n')\n    .replace(/^\\s+|\\s+$/g, '')\n    .replace(/\\s+/g, ' ')\n    .replace(/,\\s*\\n\\s*/g, ',\\n' + indentStr)\n    .replace(/\\(\\s+/g, '(\\n' + indentStr)\n    .replace(/\\s+\\)/g, '\\n)')\n}\n\n// 清空输入\nconst clearInput = () => {\n  inputSQL.value = ''\n  outputSQL.value = ''\n  inputError.value = ''\n}\n\n// 粘贴剪贴板内容\nconst pasteFromClipboard = async () => {\n  try {\n    const text = await navigator.clipboard.readText()\n    inputSQL.value = text\n  } catch (error) {\n    console.error('粘贴失败:', error)\n  }\n}\n\n// 加载示例SQL\nconst loadSample = () => {\n  inputSQL.value = `SELECT u.id, u.name, u.email, COUNT(o.id) as order_count, SUM(o.total_amount) as total_spent FROM users u LEFT JOIN orders o ON u.id = o.user_id WHERE u.created_at >= '2023-01-01' AND u.status = 'active' GROUP BY u.id, u.name, u.email HAVING COUNT(o.id) > 0 ORDER BY total_spent DESC LIMIT 10`\n}\n\n// 复制输出\nconst copyOutput = async () => {\n  if (!outputSQL.value) return\n\n  try {\n    await navigator.clipboard.writeText(outputSQL.value)\n    // 这里可以添加复制成功的提示\n  } catch (error) {\n    console.error('复制失败:', error)\n  }\n}\n\n// 下载输出\nconst downloadOutput = () => {\n  if (!outputSQL.value) return\n\n  const blob = new Blob([outputSQL.value], { type: 'text/sql' })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = 'formatted.sql'\n  document.body.appendChild(a)\n  a.click()\n  document.body.removeChild(a)\n  URL.revokeObjectURL(url)\n}\n\n// 切换全屏模式\nconst toggleFullscreen = () => {\n  if (!outputPre.value) return\n\n  if (!isFullscreen.value) {\n    if (outputPre.value.requestFullscreen) {\n      outputPre.value.requestFullscreen()\n    } else if (outputPre.value.webkitRequestFullscreen) {\n      outputPre.value.webkitRequestFullscreen()\n    } else if (outputPre.value.msRequestFullscreen) {\n      outputPre.value.msRequestFullscreen()\n    }\n  } else {\n    if (document.exitFullscreen) {\n      document.exitFullscreen()\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen()\n    } else if (document.msExitFullscreen) {\n      document.msExitFullscreen()\n    }\n  }\n  isFullscreen.value = !isFullscreen.value\n}\n\n// 切换SEO内容显示状态\nconst toggleSeoContent = () => {\n  isSeoContentVisible.value = !isSeoContentVisible.value\n}\n\nconst handleToolSelect = (selectedTool) => {\n  // 跳转到具体工具页面\n  router.push(`/tools/${selectedTool.id}/`)\n  // 添加到最近使用\n  addRecentTool(selectedTool.id)\n}\n\n// 添加到最近使用\nif (tool) {\n  addRecentTool(tool.id)\n}\n\n// 监听全屏变化事件\nonMounted(() => {\n  document.addEventListener('fullscreenchange', () => {\n    isFullscreen.value = !!document.fullscreenElement\n  })\n  document.addEventListener('webkitfullscreenchange', () => {\n    isFullscreen.value = !!document.webkitFullscreenElement\n  })\n  document.addEventListener('msfullscreenchange', () => {\n    isFullscreen.value = !!document.msFullscreenElement\n  })\n})\n</script>"],"version":3}