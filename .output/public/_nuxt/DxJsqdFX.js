import{_ as ne}from"./D4g1_bQ7.js";import{q as ie,r as m,e as de,Q as ue,p as ce,s as me,c as f,a as e,y as I,b as v,d as x,j as i,h as T,v as D,E as y,n as b,t as d,C as P,P as pe,F as J,k as R,l as fe,x as be,o as l,w as ge,G as ve}from"./DEsTSaKd.js";import{t as S}from"./B-fbZyPE.js";import{c as xe}from"./3IwUeceH.js";import{s as ye}from"./yjlb2Dos.js";import{L as $}from"./D7HZbR80.js";import{W as L}from"./BUYFD_dQ.js";import{X as B}from"./DJb2aM7w.js";import{S as ke}from"./B-mTY5Tg.js";import{S as N}from"./BDYE61or.js";import{I as he}from"./MvNwXCJb.js";import{M as we}from"./DUrx9CVo.js";import{A as Se}from"./2jMXb9Tp.js";import{T as _e}from"./C-pOhJ0D.js";import{c as H}from"./wERbHxDK.js";import{D as We}from"./ClT_iCD-.js";import{C as Te,a as Ce}from"./BaG5JeHk.js";import{S as Me}from"./DdR6vUJO.js";import{Z as je}from"./CgBn4Hdk.js";import{F as De}from"./CRvidJJ3.js";import{T as Pe}from"./DuvvCszs.js";import{H as Le}from"./ZC22Qqbx.js";import{C as Ne}from"./BuCd20m7.js";import{S as Ue}from"./w5JABn4e.js";import{L as Ve}from"./DbWJs76d.js";import{C as qe}from"./vEvaw0F6.js";import{G as Ie}from"./B8QRyNMs.js";const Je=H("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const Re=H("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),$e={class:"max-w-8xl mx-auto"},Be={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},He={class:"lg:col-span-1 space-y-6"},Oe={class:"bg-card border border-border rounded-lg p-6"},Ae={class:"text-lg font-semibold mb-4 flex items-center"},Fe={class:"space-y-4"},Ee=["disabled"],ze=["disabled"],Ge=["disabled"],Qe=["disabled"],Ze={class:"text-sm font-medium"},Xe={class:"bg-card border border-border rounded-lg p-6"},Ke={class:"text-lg font-semibold mb-4 flex items-center"},Ye={class:"space-y-4"},et=["placeholder"],tt=["disabled"],st={class:"flex items-center justify-between"},ot=["disabled"],rt={key:0,class:"bg-card border border-border rounded-lg p-6"},lt={class:"text-lg font-semibold mb-4 flex items-center"},at={class:"space-y-3 text-sm"},nt={class:"flex justify-between"},it={class:"font-medium text-foreground"},dt={class:"flex justify-between"},ut={class:"font-medium text-foreground"},ct={class:"flex justify-between"},mt={class:"font-medium text-foreground"},pt={class:"flex justify-between"},ft={class:"font-medium text-foreground"},bt={class:"lg:col-span-2 space-y-6"},gt={class:"bg-card border border-border rounded-lg p-4"},vt={class:"flex items-center justify-between"},xt={class:"text-lg font-semibold flex items-center"},yt={class:"flex space-x-2"},kt={key:0,class:"flex flex-col items-center justify-center h-full text-muted-foreground"},ht={key:1,class:"space-y-4"},wt={class:"flex-shrink-0"},St={class:"flex-1 min-w-0"},_t={class:"flex items-center space-x-2 mb-1"},Wt={class:"text-xs text-muted-foreground"},Tt={key:0,class:"text-xs px-2 py-0.5 bg-muted rounded text-muted-foreground"},Ct={key:0,class:"whitespace-pre-wrap"},Mt={key:1,class:"whitespace-pre-wrap break-all"},jt={class:"p-6 mb-12 relative"},Dt=["title"],Pt={class:"mb-12"},Lt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Nt={class:"flex items-center gap-2 mb-2"},Ut={class:"font-medium text-foreground"},Vt={class:"text-sm text-muted-foreground line-clamp-2"},us={__name:"websocket-test",setup(qt){ie({title:"WebSocket测试工具 - 在线WebSocket连接调试工具",meta:[{name:"description",content:"专业的在线WebSocket测试工具，支持实时连接测试、消息收发、心跳检测等功能，帮助开发者快速调试WebSocket应用，纯前端实现，数据安全可靠。"},{name:"keywords",content:"WebSocket测试,WebSocket客户端,实时通信,WebSocket调试,WSS,WS,在线工具"}]});const U=S.find(s=>s.id==="websocket-test");xe.find(s=>s.id==="network");const k=m("wss://echo.websocket.org"),_=m(""),w=m("text"),h=m(""),a=m(!1),u=m(!1),C=m(!0),g=m([]),n=m(null),c=m(null),M=m(null),W=m(!0);let j=null;const O={Globe:Ie,Code:qe,Lock:Ve,Shield:Ue,Clock:Ne,Hash:Le,Terminal:Pe,FileText:De,Zap:je,Radio:Re,Server:Me,Wifi:L},A=de(()=>{const s=S.filter(r=>r.category==="network"&&r.id!=="websocket-test").slice(0,2),t=[S.find(r=>r.id==="http-client"),S.find(r=>r.id==="api-doc"),S.find(r=>r.id==="json-formatter"),S.find(r=>r.id==="base64-encoder")].filter(Boolean);return[...s,...t].slice(0,4)});ue(g,()=>{C.value&&ve(()=>{X()})},{deep:!0});const F=()=>{a.value?V():E()},E=()=>{if(!(!k.value||u.value)){u.value=!0;try{c.value=_.value?new WebSocket(k.value,_.value):new WebSocket(k.value),c.value.onopen=s=>{a.value=!0,u.value=!1,n.value={connectedAt:new Date().toLocaleTimeString(),duration:"0秒",messagesSent:0,messagesReceived:0},p({type:"system",data:"已连接到 WebSocket 服务器",timestamp:new Date}),re()},c.value.onclose=s=>{a.value=!1,u.value=!1,q(),p({type:"system",data:`连接已关闭 (${s.code}: ${s.reason||"未知原因"})`,timestamp:new Date}),n.value=null},c.value.onerror=s=>{u.value=!1,p({type:"error",data:"连接错误："+(s.message||"未知错误"),timestamp:new Date})},c.value.onmessage=s=>{n.value&&n.value.messagesReceived++;let t="text",r=s.data;if(r instanceof Blob)t="binary",r="[二进制数据]";else try{const o=JSON.parse(r);t="json",r=o}catch{}p({type:"received",data:r,messageType:t,timestamp:new Date})}}catch(s){u.value=!1,p({type:"error",data:"创建连接失败："+s.message,timestamp:new Date})}}},V=()=>{c.value&&(c.value.close(),c.value=null),q()},z=()=>{if(!(!a.value||!h.value||!c.value))try{let s=h.value,t=w.value;if(t==="json")try{JSON.parse(s)}catch{p({type:"error",data:"JSON 格式错误",timestamp:new Date});return}else t==="binary"&&(s=new TextEncoder().encode(s));c.value.send(s),n.value&&n.value.messagesSent++,p({type:"sent",data:w.value==="binary"?"[二进制数据]":h.value,messageType:w.value,timestamp:new Date}),h.value=""}catch(s){p({type:"error",data:"发送失败："+s.message,timestamp:new Date})}},G=()=>{if(!(!a.value||!c.value))try{c.value.send("ping"),p({type:"system",data:"发送 Ping",timestamp:new Date})}catch(s){p({type:"error",data:"发送 Ping 失败："+s.message,timestamp:new Date})}},Q=s=>{const r={echo:{url:"wss://echo.websocket.org",protocol:""},test:{url:"wss://websocket-echo.com",protocol:""}}[s.target.value];r&&(k.value=r.url,_.value=r.protocol),s.target.value=""},p=s=>{g.value.push(s),g.value.length>100&&(g.value=g.value.slice(-100))},Z=()=>{g.value=[]},X=()=>{M.value&&(M.value.scrollTop=M.value.scrollHeight)},K=()=>u.value?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400":a.value?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-muted text-muted-foreground",Y=()=>u.value?"连接中":a.value?"已连接":"未连接",ee=()=>u.value?$:a.value?L:B,te=()=>{switch(w.value){case"json":return'{"type": "message", "content": "Hello WebSocket!"}';case"binary":return"二进制数据内容";default:return"输入要发送的消息..."}},se=s=>{try{return JSON.stringify(s,null,2)}catch{return s}},oe=s=>s.toLocaleTimeString(),re=()=>{let s=0;j=ye(()=>{if(s++,n.value)if(s<60)n.value.duration=`${s}秒`;else if(s<3600)n.value.duration=`${Math.floor(s/60)}分${s%60}秒`;else{const t=Math.floor(s/3600),r=Math.floor(s%3600/60);n.value.duration=`${t}小时${r}分`}},1e3)},q=()=>{j&&(clearInterval(j),j=null)},le=()=>{W.value=!W.value};return U&&ce(U.id),me(()=>{V()}),(s,t)=>{const r=ne;return l(),f("div",$e,[t[28]||(t[28]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-foreground mb-3"},"WebSocket测试工具 - 在线WebSocket连接调试工具"),e("p",{class:"text-muted-foreground"},"一款专业的在线WebSocket测试工具。支持实时连接测试、消息收发、心跳检测等功能，帮助开发者快速调试WebSocket应用，纯前端实现，数据安全可靠。")],-1)),e("div",Be,[e("div",He,[e("div",Oe,[e("h2",Ae,[v(i(ke),{class:"h-5 w-5 mr-2 text-primary"}),t[5]||(t[5]=x(" 连接配置 ",-1))]),e("div",Fe,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"WebSocket URL",-1)),T(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>k.value=o),type:"text",placeholder:"wss://echo.websocket.org",class:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",disabled:a.value},null,8,Ee),[[D,k.value]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"子协议（可选）",-1)),T(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>_.value=o),type:"text",placeholder:"chat",class:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",disabled:a.value},null,8,ze),[[D,_.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"快速示例",-1)),e("select",{onChange:Q,class:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",disabled:a.value},[...t[8]||(t[8]=[e("option",{value:""},"选择示例...",-1),e("option",{value:"echo"},"WebSocket Echo",-1),e("option",{value:"test"},"测试服务器",-1)])],40,Ge)]),e("button",{onClick:F,disabled:!k.value||u.value,class:y(["w-full py-2 px-4 rounded-md transition-colors flex items-center justify-center",a.value?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"bg-primary text-primary-foreground hover:bg-primary/90 disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed"])},[u.value?(l(),b(i($),{key:0,class:"h-5 w-5 mr-2 animate-spin"})):a.value?(l(),b(i(B),{key:1,class:"h-5 w-5 mr-2"})):(l(),b(i(L),{key:2,class:"h-5 w-5 mr-2"})),x(" "+d(u.value?"连接中...":a.value?"断开连接":"连接"),1)],10,Qe),e("div",{class:y(["flex items-center justify-between p-3 rounded-lg",K()])},[e("span",Ze,d(Y()),1),(l(),b(P(ee()),{class:"h-5 w-5"}))],2)])]),e("div",Xe,[e("h2",Ke,[v(i(N),{class:"h-5 w-5 mr-2 text-primary"}),t[10]||(t[10]=x(" 发送消息 ",-1))]),e("div",Ye,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"消息类型",-1)),T(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>w.value=o),class:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},[...t[11]||(t[11]=[e("option",{value:"text"},"文本",-1),e("option",{value:"json"},"JSON",-1),e("option",{value:"binary"},"二进制",-1)])],512),[[pe,w.value]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-foreground mb-2"},"消息内容",-1)),T(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>h.value=o),placeholder:te(),class:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm resize-none",rows:"4"},null,8,et),[[D,h.value]])]),e("button",{onClick:z,disabled:!a.value||!h.value,class:"w-full bg-primary text-primary-foreground py-2 px-4 rounded-md hover:bg-primary/90 disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed transition-colors flex items-center justify-center"},[v(i(N),{class:"h-5 w-5 mr-2"}),t[14]||(t[14]=x(" 发送消息 ",-1))],8,tt),e("div",st,[t[15]||(t[15]=e("span",{class:"text-sm text-muted-foreground"},"心跳检测",-1)),e("button",{onClick:G,disabled:!a.value,class:"px-3 py-1 text-sm bg-muted hover:bg-muted/80 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," 发送 Ping ",8,ot)])])]),n.value?(l(),f("div",rt,[e("h2",lt,[v(i(he),{class:"h-5 w-5 mr-2 text-primary"}),t[16]||(t[16]=x(" 连接信息 ",-1))]),e("div",at,[e("div",nt,[t[17]||(t[17]=e("span",{class:"text-muted-foreground"},"连接时间:",-1)),e("span",it,d(n.value.connectedAt),1)]),e("div",dt,[t[18]||(t[18]=e("span",{class:"text-muted-foreground"},"持续时间:",-1)),e("span",ut,d(n.value.duration),1)]),e("div",ct,[t[19]||(t[19]=e("span",{class:"text-muted-foreground"},"发送消息:",-1)),e("span",mt,d(n.value.messagesSent),1)]),e("div",pt,[t[20]||(t[20]=e("span",{class:"text-muted-foreground"},"接收消息:",-1)),e("span",ft,d(n.value.messagesReceived),1)])])])):I("",!0)]),e("div",bt,[e("div",gt,[e("div",vt,[e("h2",xt,[v(i(we),{class:"h-5 w-5 mr-2 text-primary"}),t[21]||(t[21]=x(" 消息记录 ",-1))]),e("div",yt,[e("button",{onClick:t[4]||(t[4]=o=>C.value=!C.value),class:y(["px-3 py-1 text-sm rounded-md transition-colors",C.value?"bg-primary/10 text-primary":"bg-muted hover:bg-muted/80 text-muted-foreground"])},[v(i(Se),{class:"h-4 w-4 mr-1"}),t[22]||(t[22]=x(" 自动滚动 ",-1))],2),e("button",{onClick:Z,class:"px-3 py-1 text-sm bg-destructive/10 text-destructive hover:bg-destructive/20 rounded-md transition-colors"},[v(i(_e),{class:"h-4 w-4 mr-1"}),t[23]||(t[23]=x(" 清空 ",-1))])])])]),e("div",{ref_key:"messageContainer",ref:M,class:"bg-card border border-border rounded-lg p-6 h-[600px] overflow-y-auto"},[g.value.length===0?(l(),f("div",kt,[v(i(Je),{class:"h-16 w-16 mb-4"}),t[24]||(t[24]=e("p",{class:"text-lg"},"暂无消息",-1)),t[25]||(t[25]=e("p",{class:"text-sm mt-2"},"连接 WebSocket 后开始发送和接收消息",-1))])):(l(),f("div",ht,[(l(!0),f(J,null,R(g.value,(o,ae)=>(l(),f("div",{key:ae,class:y(["flex items-start space-x-3",{"flex-row-reverse space-x-reverse":o.type==="sent"}])},[e("div",wt,[e("div",{class:y(["w-8 h-8 rounded-full flex items-center justify-center",o.type==="sent"?"bg-primary/10":"bg-green-100 dark:bg-green-900/20"])},[(l(),b(P(o.type==="sent"?i(N):i(We)),{class:y(["h-4 w-4",o.type==="sent"?"text-primary":"text-green-600 dark:text-green-400"])},null,8,["class"]))],2)]),e("div",St,[e("div",_t,[e("span",{class:y(["text-sm font-medium",o.type==="sent"?"text-primary":"text-green-600 dark:text-green-400"])},d(o.type==="sent"?"发送":"接收"),3),e("span",Wt,d(oe(o.timestamp)),1),o.messageType?(l(),f("span",Tt,d(o.messageType.toUpperCase()),1)):I("",!0)]),e("div",{class:y(["p-3 rounded-lg text-sm",o.type==="sent"?"bg-primary/5 dark:bg-primary/10":"bg-green-50 dark:bg-green-900/10"])},[o.messageType==="json"?(l(),f("pre",Ct,d(se(o.data)),1)):(l(),f("p",Mt,d(o.data),1))],2)])],2))),128))]))],512)])]),e("div",jt,[e("button",{onClick:le,class:"absolute top-4 right-4 text-muted-foreground hover:text-foreground transition-colors",title:W.value?"折叠内容":"展开内容"},[W.value?(l(),b(i(Ce),{key:1,class:"w-5 h-5"})):(l(),b(i(Te),{key:0,class:"w-5 h-5"}))],8,Dt),T(e("div",null,[...t[26]||(t[26]=[be('<h2 class="text-2xl font-bold text-foreground mb-4 flex items-center"><span class="text-primary mr-2">#</span> 什么是 WebSocket？ </h2><p class="text-muted-foreground mb-4"> WebSocket 是一种在单个TCP连接上进行全双工通信的协议。WebSocket使得客户端和服务器之间的数据交换变得更加简单， 允许服务端主动向客户端推送数据。在WebSocket API中，浏览器和服务器只需要完成一次握手， 两者之间就直接可以创建持久性的连接，并进行双向数据传输。 </p><p class="text-muted-foreground mb-6"> 相较于传统的HTTP轮询方式，WebSocket具有更低的延迟和更高的效率，特别适合需要实时通信的应用场景， 如在线聊天、实时数据推送、股票行情、在线游戏等。使用WebSocket测试工具可以帮助开发者快速验证WebSocket服务器的功能， 调试通信问题，确保应用的稳定性和可靠性。 </p><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 如何使用本工具 </h2><ol class="list-decimal list-inside space-y-2 text-muted-foreground mb-6"><li>输入WebSocket服务器的URL地址（支持ws://和wss://协议）</li><li>可选填子协议，如chat、soap等</li><li>点击&quot;连接&quot;按钮建立WebSocket连接</li><li>连接成功后，可以选择消息类型（文本、JSON、二进制）并发送消息</li><li>实时查看服务器返回的消息和连接状态</li><li>使用心跳检测功能保持连接活跃</li></ol><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 核心功能特性 </h2><ul class="list-disc list-inside space-y-2 text-muted-foreground mb-6"><li><strong>实时通信</strong>: 支持WebSocket的实时双向通信，立即查看消息收发情况</li><li><strong>多种消息格式</strong>: 支持文本、JSON和二进制消息的发送和接收</li><li><strong>连接状态监控</strong>: 实时显示连接状态、连接时长和消息统计</li><li><strong>心跳检测</strong>: 支持发送Ping帧保持连接活跃，防止连接超时</li><li><strong>消息历史记录</strong>: 保存完整的消息收发记录，支持自动滚动和清空功能</li><li><strong>安全可靠</strong>: 纯前端实现，所有数据在本地处理，确保隐私安全</li><li><strong>快速示例</strong>: 内置常用WebSocket服务器示例，方便快速测试</li></ul><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 常见问题 (FAQ) </h2><div class="space-y-4"><div><h3 class="text-lg font-semibold text-foreground">WebSocket 和 HTTP 轮询有什么区别？</h3><p class="text-muted-foreground mt-1"> WebSocket是全双工通信协议，客户端和服务器可以同时发送数据，而HTTP轮询需要客户端不断发起请求。 WebSocket连接建立后可以持久保持，减少了握手开销，延迟更低，效率更高。 对于需要频繁通信的应用，WebSocket是更好的选择。 </p></div><div><h3 class="text-lg font-semibold text-foreground">为什么 WebSocket 连接失败？</h3><p class="text-muted-foreground mt-1"> 可能的原因包括：URL格式错误、服务器不支持WebSocket、防火墙阻止连接、SSL证书问题（对于wss://）等。 请检查URL是否正确，确保服务器正常运行，如果是wss连接，检查证书是否有效。 </p></div><div><h3 class="text-lg font-semibold text-foreground">如何保持 WebSocket 连接活跃？</h3><p class="text-muted-foreground mt-1"> 可以使用心跳检测机制，定期发送Ping帧，服务器会响应Pong帧。 本工具提供了&quot;发送Ping&quot;按钮，可以手动发送心跳。在实际应用中，建议实现自动心跳机制， 例如每30秒发送一次心跳，防止连接因超时而断开。 </p></div><div><h3 class="text-lg font-semibold text-foreground">WebSocket 支持哪些消息类型？</h3><p class="text-muted-foreground mt-1"> WebSocket协议支持两种消息类型：文本消息和二进制消息。 文本消息可以包含任何UTF-8编码的文本，如普通字符串、JSON数据等。 二进制消息可以传输任何二进制数据，如图片、音频、视频、Protocol Buffers等。 本工具提供了便捷的选项来发送不同类型的消息。 </p></div></div>',9)])],512),[[fe,W.value]])]),e("section",Pt,[t[27]||(t[27]=e("h2",{class:"text-2xl font-bold text-foreground mb-4"},"您可能还需要...",-1)),e("div",Lt,[(l(!0),f(J,null,R(A.value,o=>(l(),b(r,{key:o.id,to:`/tools/${o.id}`,class:"block p-4 bg-card border border-border rounded-lg hover:bg-accent transition-colors"},{default:ge(()=>[e("div",Nt,[(l(),b(P(O[o.icon]),{class:"w-5 h-5 text-primary"})),e("span",Ut,d(o.name),1)]),e("p",Vt,d(o.description),1)]),_:2},1032,["to"]))),128))])])])}}};export{us as default};
