{"version":3,"file":"image-watermark-CofavQ_0.js","sources":["../../../../src/pages/tools/image-watermark.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-8xl mx-auto\">\n    <!-- 面包屑导航 -->\n    <!-- <Breadcrumb :category=\"category\" /> -->\n\n    <!-- 工具标题 -->\n    <div class=\"mt-4 mb-8\">\n      <h1 class=\"text-3xl font-bold mb-3\">图片水印</h1>\n      <p class=\"text-muted-foreground\">添加文字或图片水印，保护图片版权</p>\n    </div>\n\n    <!-- 主要功能区域 -->\n    <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n      <!-- 左侧：上传和设置 -->\n      <div class=\"space-y-4\">\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">上传图片</h2>\n\n          <!-- 拖拽上传 -->\n          <div\n            class=\"border-2 border-dashed rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer\"\n            @drop=\"handleDrop\"\n            @dragover.prevent\n            @dragleave.prevent\n            @click=\"triggerFileInput\"\n          >\n            <input\n              ref=\"fileInput\"\n              type=\"file\"\n              class=\"hidden\"\n              accept=\"image/*\"\n              @change=\"handleFileSelect\"\n            />\n            <ImageIcon class=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" />\n            <p class=\"text-lg font-medium mb-2\">拖拽图片到这里</p>\n            <p class=\"text-sm text-muted-foreground\">支持 JPG、PNG、WebP 等格式</p>\n          </div>\n\n          <!-- 图片预览 -->\n          <div v-if=\"uploadedImage\" class=\"mt-4 space-y-4\">\n            <div class=\"relative\">\n              <img\n                :src=\"uploadedImage.url\"\n                :alt=\"uploadedImage.name\"\n                class=\"w-full rounded-lg\"\n              />\n              <button\n                @click=\"clearImage\"\n                class=\"absolute top-2 right-2 p-2 bg-white rounded-full shadow-md hover:shadow-lg transition-shadow\"\n              >\n                <X class=\"w-4 h-4\" />\n              </button>\n            </div>\n            <div class=\"text-sm text-muted-foreground\">\n              <p>文件名：{{ uploadedImage.name }}</p>\n              <p>尺寸：{{ uploadedImage.width }} × {{ uploadedImage.height }} px</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- 水印设置 -->\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">水印设置</h2>\n\n          <!-- 水印类型 -->\n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"text-sm font-medium\">水印类型</label>\n              <div class=\"mt-2 grid grid-cols-2 gap-2\">\n                <button\n                  @click=\"watermarkType = 'text'\"\n                  :class=\"[\n                    'px-4 py-2 rounded-md transition-colors',\n                    watermarkType === 'text'\n                      ? 'bg-primary text-primary-foreground'\n                      : 'bg-muted hover:bg-muted/80'\n                  ]\"\n                >\n                  文字水印\n                </button>\n                <button\n                  @click=\"watermarkType = 'image'\"\n                  :class=\"[\n                    'px-4 py-2 rounded-md transition-colors',\n                    watermarkType === 'image'\n                      ? 'bg-primary text-primary-foreground'\n                      : 'bg-muted hover:bg-muted/80'\n                  ]\"\n                >\n                  图片水印\n                </button>\n              </div>\n            </div>\n\n            <!-- 文字水印设置 -->\n            <div v-if=\"watermarkType === 'text'\" class=\"space-y-4\">\n              <div>\n                <label class=\"text-sm font-medium\">水印文字</label>\n                <input\n                  v-model=\"watermarkText\"\n                  type=\"text\"\n                  placeholder=\"输入水印文字\"\n                  class=\"mt-2 w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n                />\n              </div>\n\n              <div class=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label class=\"text-sm font-medium\">字体大小</label>\n                  <input\n                    v-model.number=\"textSettings.fontSize\"\n                    type=\"number\"\n                    min=\"12\"\n                    max=\"200\"\n                    class=\"mt-1 w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n                  />\n                </div>\n                <div>\n                  <label class=\"text-sm font-medium\">字体</label>\n                  <select\n                    v-model=\"textSettings.fontFamily\"\n                    class=\"mt-1 w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n                  >\n                    <option value=\"Arial\">Arial</option>\n                    <option value=\"Helvetica\">Helvetica</option>\n                    <option value=\"Times New Roman\">Times New Roman</option>\n                    <option value=\"Courier New\">Courier New</option>\n                    <option value=\"Georgia\">Georgia</option>\n                    <option value=\"Verdana\">Verdana</option>\n                    <option value=\"Comic Sans MS\">Comic Sans MS</option>\n                  </select>\n                </div>\n              </div>\n\n              <div class=\"grid grid-cols-3 gap-3\">\n                <div>\n                  <label class=\"text-sm font-medium\">颜色</label>\n                  <input\n                    v-model=\"textSettings.color\"\n                    type=\"color\"\n                    class=\"mt-1 w-full h-10 rounded cursor-pointer\"\n                  />\n                </div>\n                <div>\n                  <label class=\"text-sm font-medium\">透明度</label>\n                  <div class=\"mt-1 flex items-center gap-2\">\n                    <input\n                      v-model.number=\"textSettings.opacity\"\n                      type=\"range\"\n                      min=\"0\"\n                      max=\"1\"\n                      step=\"0.1\"\n                      class=\"flex-1\"\n                    />\n                    <span class=\"text-sm w-12 text-right\">{{ Math.round(textSettings.opacity * 100) }}%</span>\n                  </div>\n                </div>\n                <div>\n                  <label class=\"text-sm font-medium\">旋转角度</label>\n                  <div class=\"mt-1 flex items-center gap-2\">\n                    <input\n                      v-model.number=\"textSettings.rotation\"\n                      type=\"range\"\n                      min=\"-180\"\n                      max=\"180\"\n                      step=\"1\"\n                      class=\"flex-1\"\n                    />\n                    <span class=\"text-sm w-12 text-right\">{{ textSettings.rotation }}°</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <!-- 图片水印设置 -->\n            <div v-else-if=\"watermarkType === 'image'\" class=\"space-y-4\">\n              <div>\n                <label class=\"text-sm font-medium\">水印图片</label>\n                <div\n                  class=\"mt-2 border-2 border-dashed rounded-lg p-4 text-center hover:border-primary transition-colors cursor-pointer\"\n                  @drop=\"handleWatermarkDrop\"\n                  @dragover.prevent\n                  @dragleave.prevent\n                  @click=\"triggerWatermarkInput\"\n                >\n                  <input\n                    ref=\"watermarkInput\"\n                    type=\"file\"\n                    class=\"hidden\"\n                    accept=\"image/*\"\n                    @change=\"handleWatermarkSelect\"\n                  />\n                  <Upload class=\"w-8 h-8 mx-auto text-muted-foreground mb-2\" />\n                  <p class=\"text-sm\">拖拽或点击上传水印图片</p>\n                </div>\n                <div v-if=\"watermarkImage\" class=\"mt-2 relative\">\n                  <img\n                    :src=\"watermarkImage.url\"\n                    :alt=\"watermarkImage.name\"\n                    class=\"w-full max-h-32 object-contain rounded\"\n                  />\n                  <button\n                    @click=\"clearWatermark\"\n                    class=\"absolute top-1 right-1 p-1 bg-white rounded-full shadow-md hover:shadow-lg transition-shadow\"\n                  >\n                    <X class=\"w-3 h-3\" />\n                  </button>\n                </div>\n              </div>\n\n              <div class=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label class=\"text-sm font-medium\">缩放</label>\n                  <div class=\"mt-1 flex items-center gap-2\">\n                    <input\n                      v-model.number=\"imageSettings.scale\"\n                      type=\"range\"\n                      min=\"10\"\n                      max=\"200\"\n                      step=\"10\"\n                      class=\"flex-1\"\n                    />\n                    <span class=\"text-sm w-12 text-right\">{{ imageSettings.scale }}%</span>\n                  </div>\n                </div>\n                <div>\n                  <label class=\"text-sm font-medium\">透明度</label>\n                  <div class=\"mt-1 flex items-center gap-2\">\n                    <input\n                      v-model.number=\"imageSettings.opacity\"\n                      type=\"range\"\n                      min=\"0\"\n                      max=\"1\"\n                      step=\"0.1\"\n                      class=\"flex-1\"\n                    />\n                    <span class=\"text-sm w-12 text-right\">{{ Math.round(imageSettings.opacity * 100) }}%</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <!-- 位置设置 -->\n            <div>\n              <label class=\"text-sm font-medium\">位置</label>\n              <div class=\"mt-2 grid grid-cols-3 gap-2\">\n                <button\n                  v-for=\"position in positions\"\n                  :key=\"position.value\"\n                  @click=\"watermarkPosition = position.value\"\n                  :class=\"[\n                    'px-3 py-2 rounded-md transition-colors text-sm',\n                    watermarkPosition === position.value\n                      ? 'bg-primary text-primary-foreground'\n                      : 'bg-muted hover:bg-muted/80'\n                  ]\"\n                >\n                  {{ position.name }}\n                </button>\n              </div>\n            </div>\n\n            <!-- 高级选项 -->\n            <details class=\"mt-4\">\n              <summary class=\"text-sm font-medium cursor-pointer\">高级选项</summary>\n              <div class=\"mt-3 space-y-3\">\n                <label class=\"flex items-center gap-2\">\n                  <input\n                    v-model=\"repeatWatermark\"\n                    type=\"checkbox\"\n                    class=\"rounded\"\n                  />\n                  <span class=\"text-sm\">平铺水印</span>\n                </label>\n                <label class=\"flex items-center gap-2\">\n                  <input\n                    v-model=\"protectOriginal\"\n                    type=\"checkbox\"\n                    class=\"rounded\"\n                    checked\n                  />\n                  <span class=\"text-sm\">保护原图（不可撤销）</span>\n                </label>\n              </div>\n            </details>\n          </div>\n        </div>\n      </div>\n\n      <!-- 右侧：预览和操作 -->\n      <div class=\"lg:col-span-2 space-y-4\">\n        <!-- 预览 -->\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">预览效果</h2>\n\n          <div v-if=\"!uploadedImage\" class=\"text-center py-12 text-muted-foreground\">\n            <ImageIcon class=\"w-16 h-16 mx-auto mb-4\" />\n            <p>上传图片开始添加水印</p>\n          </div>\n\n          <div v-else class=\"space-y-4\">\n            <!-- 预览大小控制 -->\n            <div class=\"flex items-center gap-4\">\n              <label class=\"text-sm font-medium\">预览缩放</label>\n              <input\n                v-model=\"previewScale\"\n                type=\"range\"\n                min=\"10\"\n                max=\"100\"\n                step=\"10\"\n                class=\"flex-1\"\n              />\n              <span class=\"text-sm font-mono w-12\">{{ previewScale }}%</span>\n            </div>\n\n            <!-- 画布预览 -->\n            <div class=\"relative\">\n              <canvas\n                ref=\"canvas\"\n                class=\"w-full border rounded-lg shadow-md bg-checkered\"\n                :style=\"{ maxWidth: '100%', height: 'auto' }\"\n              ></canvas>\n            </div>\n          </div>\n        </div>\n\n        <!-- 批量处理 -->\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">批量处理</h2>\n          <p class=\"text-sm text-muted-foreground mb-4\">\n            上传多张图片，应用相同水印设置\n          </p>\n\n          <div\n            class=\"border-2 border-dashed rounded-lg p-4 text-center hover:border-primary transition-colors cursor-pointer\"\n            @drop=\"handleBatchDrop\"\n            @dragover.prevent\n            @dragleave.prevent\n            @click=\"triggerBatchInput\"\n          >\n            <input\n              ref=\"batchInput\"\n              type=\"file\"\n              class=\"hidden\"\n              accept=\"image/*\"\n              multiple\n              @change=\"handleBatchSelect\"\n            />\n            <Plus class=\"w-8 h-8 mx-auto text-muted-foreground mb-2\" />\n            <p class=\"text-sm\">添加多张图片</p>\n          </div>\n\n          <!-- 批量列表 -->\n          <div v-if=\"batchImages.length > 0\" class=\"mt-4 space-y-2\">\n            <div class=\"flex justify-between items-center mb-2\">\n              <span class=\"text-sm font-medium\">{{ batchImages.length }} 张图片</span>\n              <div class=\"flex gap-2\">\n                <button\n                  @click=\"processBatch\"\n                  :disabled=\"isProcessingBatch\"\n                  class=\"px-3 py-1 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50\"\n                >\n                  {{ isProcessingBatch ? '处理中...' : '批量添加水印' }}\n                </button>\n                <button\n                  @click=\"clearBatch\"\n                  class=\"px-3 py-1 text-sm text-destructive hover:bg-destructive/5 rounded-md transition-colors\"\n                >\n                  清空\n                </button>\n              </div>\n            </div>\n\n            <div class=\"max-h-48 overflow-y-auto space-y-2\">\n              <div\n                v-for=\"(img, index) in batchImages\"\n                :key=\"img.id\"\n                class=\"flex items-center gap-3 p-2 bg-muted rounded-lg\"\n              >\n                <img\n                  :src=\"img.url\"\n                  :alt=\"img.name\"\n                  class=\"w-12 h-12 object-cover rounded\"\n                />\n                <div class=\"flex-1 min-w-0\">\n                  <p class=\"text-sm font-medium truncate\">{{ img.name }}</p>\n                  <p class=\"text-xs text-muted-foreground\">{{ img.status }}</p>\n                </div>\n                <button\n                  @click=\"removeBatchImage(index)\"\n                  class=\"text-destructive hover:text-destructive/80\"\n                >\n                  <X class=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n\n            <button\n              v-if=\"batchProcessedCount > 0\"\n              @click=\"downloadAllBatch\"\n              class=\"w-full mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors\"\n            >\n              下载所有 ({{ batchProcessedCount }} 张)\n            </button>\n          </div>\n        </div>\n\n        <!-- 下载选项 -->\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">下载选项</h2>\n\n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"text-sm font-medium\">输出格式</label>\n              <div class=\"mt-2 grid grid-cols-3 gap-2\">\n                <button\n                  v-for=\"format in outputFormats\"\n                  :key=\"format.value\"\n                  @click=\"outputFormat = format.value\"\n                  :class=\"[\n                    'px-3 py-2 rounded-md transition-colors text-sm',\n                    outputFormat === format.value\n                      ? 'bg-primary text-primary-foreground'\n                      : 'bg-muted hover:bg-muted/80'\n                  ]\"\n                >\n                  {{ format.name }}\n                </button>\n              </div>\n            </div>\n\n            <div>\n              <label class=\"text-sm font-medium\">质量</label>\n              <div class=\"mt-2 flex items-center gap-3\">\n                <input\n                  v-model.number=\"outputQuality\"\n                  type=\"range\"\n                  min=\"10\"\n                  max=\"100\"\n                  step=\"5\"\n                  class=\"flex-1\"\n                />\n                <span class=\"text-sm font-mono w-12 text-right\">{{ outputQuality }}%</span>\n              </div>\n            </div>\n\n            <div v-if=\"processedImage\" class=\"flex gap-3\">\n              <button\n                @click=\"downloadProcessedImage\"\n                class=\"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center justify-center gap-2\"\n              >\n                <Download class=\"w-4 h-4\" />\n                下载图片\n              </button>\n              <button\n                @click=\"resetProcess\"\n                class=\"px-4 py-2 border border-muted text-muted-foreground rounded-md hover:bg-muted transition-colors flex items-center justify-center gap-2\"\n              >\n                <RotateCcw class=\"w-4 h-4\" />\n                重置\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 使用说明 -->\n    <div class=\"mt-12 space-y-6\">\n      <div class=\"bg-card   rounded-lg p-6\">\n        <h3 class=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n          <Info class=\"w-5 h-5 text-primary\" />\n          使用说明\n        </h3>\n        <div class=\"space-y-4 text-sm text-muted-foreground\">\n          <div>\n            <h4 class=\"font-medium text-foreground mb-2\">水印类型</h4>\n            <ul class=\"list-disc list-inside space-y-1 ml-4\">\n              <li><strong>文字水印</strong>：添加文字内容，可自定义字体、颜色、透明度等</li>\n              <li><strong>图片水印</strong>：上传 Logo 或图标作为水印，可调整大小和透明度</li>\n            </ul>\n          </div>\n          <div>\n            <h4 class=\"font-medium text-foreground mb-2\">使用技巧</h4>\n            <ul class=\"list-disc list-inside space-y-1 ml-4\">\n              <li>使用半透明水印既能保护版权又不会过度遮挡图片</li>\n              <li>将水印放置在角落位置，通常更美观</li>\n              <li>批量处理功能可同时为多张图片添加水印</li>\n              <li>建议在输出前调整合适的图片质量和格式</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <!-- 相关工具 -->\n      <div class=\"bg-card   rounded-lg p-6\">\n        <h3 class=\"text-lg font-semibold mb-4\">相关工具</h3>\n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <NuxtLink\n            to=\"/tools/image-crop\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Crop class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">图片裁剪</p>\n              <p class=\"text-xs text-muted-foreground\">在线裁剪图片</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n          <NuxtLink\n            to=\"/tools/image-compress\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Zap class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">图片压缩</p>\n              <p class=\"text-xs text-muted-foreground\">在线压缩图片</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n          <NuxtLink\n            to=\"/tools/image-merge\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Layers class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">图片合并</p>\n              <p class=\"text-xs text-muted-foreground\">合并多张图片</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { Info, ImageIcon, X, Upload, Download, RotateCcw, Crop, Zap, Layers, ArrowRight } from 'lucide-vue-next'\nimport Breadcrumb from '~/components/Breadcrumb.vue'\n\n// 分类信息\nconst category = { id: 'image', name: '图片处理', description: '图片处理工具集合' }\n\n// 状态管理\nconst uploadedImage = ref(null)\nconst watermarkType = ref('text')\nconst watermarkText = ref('© 版权所有')\nconst watermarkImage = ref(null)\nconst watermarkPosition = ref('bottom-right')\nconst textSettings = ref({\n  fontSize: 24,\n  fontFamily: 'Arial',\n  color: '#FFFFFF',\n  opacity: 0.5,\n  rotation: 0\n})\nconst imageSettings = ref({\n  scale: 50,\n  opacity: 0.5\n})\nconst outputFormat = ref('png')\nconst outputQuality = ref(90)\nconst previewScale = ref(50)\nconst processedImage = ref(null)\nconst repeatWatermark = ref(false)\nconst protectOriginal = ref(false)\nconst isProcessing = ref(false)\nconst isProcessingBatch = ref(false)\n\nconst fileInput = ref(null)\nconst watermarkInput = ref(null)\nconst batchInput = ref(null)\nconst batchImages = ref([])\n\n// 位置选项\nconst positions = [\n  { value: 'top-left', name: '左上' },\n  { value: 'top-center', name: '顶部居中' },\n  { value: 'top-right', name: '右上' },\n  { value: 'center-left', name: '左侧居中' },\n  { value: 'center', name: '中心' },\n  { value: 'center-right', name: '右侧居中' },\n  { value: 'bottom-left', name: '左下' },\n  { value: 'bottom-center', name: '底部居中' },\n  { value: 'bottom-right', name: '右下' }\n]\n\n// 输出格式\nconst outputFormats = [\n  { value: 'png', name: 'PNG' },\n  { value: 'jpg', name: 'JPG' },\n  { value: 'webp', name: 'WebP' }\n]\n\n// Canvas 引用\nconst canvas = ref(null)\n\n// 计算属性\nconst batchProcessedCount = computed(() => {\n  return batchImages.value.filter(img => img.processedUrl).length\n})\n\n// 监听变化并自动预览\nwatch([\n  () => uploadedImage.value,\n  watermarkType.value,\n  watermarkText.value,\n  watermarkPosition.value,\n  textSettings.value,\n  imageSettings.value,\n  repeatWatermark.value\n], () => {\n  if (uploadedImage.value) {\n    processImage()\n  }\n})\n\n// 处理单个图片\nconst processImage = async () => {\n  if (!canvas.value || !uploadedImage.value) return\n\n  const ctx = canvas.value.getContext('2d')\n  const img = new Image()\n\n  await new Promise((resolve) => {\n    img.onload = () => {\n      // 设置画布尺寸\n      const scale = previewScale.value / 100\n      canvas.value.width = img.width * scale\n      canvas.value.height = img.height * scale\n\n      // 清空画布\n      ctx.clearRect(0, 0, canvas.value.width, canvas.value.height)\n\n      // 绘制原图\n      ctx.drawImage(img, 0, 0, canvas.value.width, canvas.value.height)\n\n      // 添加水印\n      if (watermarkType.value === 'text' && watermarkText.value) {\n        addTextWatermark(ctx)\n      } else if (watermarkType.value === 'image' && watermarkImage.value) {\n        addImageWatermark(ctx)\n      }\n\n      // 获取处理后的图片\n      canvas.value.toBlob((blob) => {\n        const url = URL.createObjectURL(blob)\n        processedImage.value = url\n        resolve()\n      }, getMimeType())\n    }\n    img.src = uploadedImage.value.url\n  })\n}\n\n// 添加文字水印\nconst addTextWatermark = (ctx) => {\n  const { width, height } = canvas.value\n  const {\n    fontSize,\n    fontFamily,\n    color,\n    opacity,\n    rotation\n  } = textSettings.value\n\n  ctx.save()\n  ctx.globalAlpha = opacity\n  ctx.font = `${fontSize * (previewScale.value / 100)}px ${fontFamily}`\n  ctx.fillStyle = color\n\n  // 计算位置\n  const { x, y } = getWatermarkPosition(width, height)\n\n  // 旋转\n  if (rotation !== 0) {\n    ctx.translate(x, y)\n    ctx.rotate((rotation * Math.PI) / 180)\n    ctx.fillText(watermarkText.value, 0, 0)\n  } else {\n    ctx.fillText(watermarkText.value, x, y)\n  }\n\n  ctx.restore()\n}\n\n// 添加图片水印\nconst addImageWatermark = async (ctx) => {\n  if (!watermarkImage.value) return\n\n  const img = new Image()\n  await new Promise((resolve) => {\n    img.onload = () => {\n      const { width, height } = canvas.value\n      const { scale, opacity } = imageSettings.value\n\n      ctx.save()\n      ctx.globalAlpha = opacity\n\n      // 计算水印尺寸和位置\n      const watermarkWidth = (img.width * scale / 100) * (previewScale.value / 100)\n      const watermarkHeight = (img.height * scale / 100) * (previewScale.value / 100)\n      const { x, y } = getWatermarkPosition(width, height, watermarkWidth, watermarkHeight)\n\n      ctx.drawImage(img, x, y, watermarkWidth, watermarkHeight)\n      ctx.restore()\n    }\n    img.src = watermarkImage.value.url\n  })\n}\n\n// 获取水印位置\nconst getWatermarkPosition = (width, height, watermarkWidth = 0, watermarkHeight = 0) => {\n  const positions = {\n    'top-left': { x: 20, y: 20 },\n    'top-center': { x: (width - watermarkWidth) / 2, y: 20 },\n    'top-right': { x: width - watermarkWidth - 20, y: 20 },\n    'center-left': { x: 20, y: (height - watermarkHeight) / 2 },\n    'center': { x: (width - watermarkWidth) / 2, y: (height - watermarkHeight) / 2 },\n    'center-right': { x: width - watermarkWidth - 20, y: (height - watermarkHeight) / 2 },\n    'bottom-left': { x: 20, y: height - watermarkHeight - 20 },\n    'bottom-center': { x: (width - watermarkWidth) / 2, y: height - watermarkHeight - 20 },\n    'bottom-right': { x: width - watermarkWidth - 20, y: height - watermarkHeight - 20 }\n  }\n\n  return positions[watermarkPosition.value] || positions['bottom-right']\n}\n\n// 获取 MIME 类型\nconst getMimeType = () => {\n  const mimeTypes = {\n    png: 'image/png',\n    jpg: 'image/jpeg',\n    webp: 'image/webp'\n  }\n  return mimeTypes[outputFormat.value] || 'image/png'\n}\n\n// 处理文件选择\nconst handleFileSelect = (e) => {\n  const file = e.target.files[0]\n  if (file && file.type.startsWith('image/')) {\n    processImageFile(file)\n  }\n}\n\n// 处理拖拽\nconst handleDrop = (e) => {\n  e.preventDefault()\n  const file = e.dataTransfer.files[0]\n  if (file && file.type.startsWith('image/')) {\n    processImageFile(file)\n  }\n}\n\n// 处理图片文件\nconst processImageFile = (file) => {\n  const reader = new FileReader()\n  reader.onload = (e) => {\n    const img = new Image()\n    img.onload = () => {\n      uploadedImage.value = {\n        name: file.name,\n        url: e.target.result,\n        width: img.width,\n        height: img.height\n      }\n    }\n    img.src = e.target.result\n  }\n  reader.readAsDataURL(file)\n}\n\n// 清空图片\nconst clearImage = () => {\n  uploadedImage.value = null\n  processedImage.value = null\n}\n\n// 重置处理\nconst resetProcess = () => {\n  if (!protectOriginal.value) {\n    uploadedImage.value = null\n    processedImage.value = null\n  }\n}\n\n// 水印图片相关\nconst handleWatermarkDrop = (e) => {\n  e.preventDefault()\n  const file = e.dataTransfer.files[0]\n  if (file && file.type.startsWith('image/')) {\n    processWatermarkFile(file)\n  }\n}\n\nconst triggerWatermarkInput = () => {\n  watermarkInput.value.click()\n}\n\nconst handleWatermarkSelect = (e) => {\n  const file = e.target.files[0]\n  if (file && file.type.startsWith('image/')) {\n    processWatermarkFile(file)\n  }\n}\n\nconst processWatermarkFile = (file) => {\n  const reader = new FileReader()\n  reader.onload = (e) => {\n    watermarkImage.value = {\n      name: file.name,\n      url: e.target.result\n    }\n  }\n  reader.readAsDataURL(file)\n}\n\nconst clearWatermark = () => {\n  watermarkImage.value = null\n}\n\n// 批量处理相关\nconst handleBatchDrop = (e) => {\n  e.preventDefault()\n  const files = Array.from(e.dataTransfer.files)\n  processBatchFiles(files)\n}\n\nconst triggerBatchInput = () => {\n  batchInput.value.click()\n}\n\nconst handleBatchSelect = (e) => {\n  const files = Array.from(e.target.files)\n  processBatchFiles(files)\n}\n\nconst processBatchFiles = (files) => {\n  files.forEach(file => {\n    if (file.type.startsWith('image/')) {\n      const reader = new FileReader()\n      reader.onload = (e) => {\n        const img = new Image()\n        img.onload = () => {\n          batchImages.value.push({\n          id: Date.now() + Math.random(),\n          name: file.name,\n          url: e.target.result,\n          width: img.width,\n          height: img.height,\n          status: '待处理',\n          processedUrl: null\n        })\n      }\n      img.src = e.target.result\n      }\n    }\n    reader.readAsDataURL(file)\n  })\n}\n\nconst removeBatchImage = (index) => {\n  const image = batchImages.value[index]\n  if (image.processedUrl) {\n    URL.revokeObjectURL(image.processedUrl)\n  }\n  batchImages.value.splice(index, 1)\n}\n\nconst clearBatch = () => {\n  batchImages.value.forEach(img => {\n    if (img.processedUrl) {\n      URL.revokeObjectURL(img.processedUrl)\n    }\n  })\n  batchImages.value = []\n}\n\nconst processBatch = async () => {\n  isProcessingBatch.value = true\n\n  for (const batchImg of batchImages.value) {\n    batchImg.status = '处理中...'\n\n    // 模拟处理延迟\n    await new Promise(resolve => setTimeout(resolve, 100))\n\n    try {\n      // 创建临时画布\n      const tempCanvas = document.createElement('canvas')\n      const tempCtx = tempCanvas.getContext('2d')\n\n      tempCanvas.width = batchImg.width\n      tempCanvas.height = batchImg.height\n\n      // 绘制原图\n      const img = new Image()\n      img.src = batchImg.url\n      await new Promise((resolve) => {\n        img.onload = () => {\n          tempCtx.drawImage(img, 0, 0)\n\n          // 添加水印\n          if (watermarkType.value === 'text' && watermarkText.value) {\n            tempCtx.save()\n            tempCtx.globalAlpha = textSettings.value.opacity\n            tempCtx.font = `${textSettings.value.fontSize}px ${textSettings.value.fontFamily}`\n            tempCtx.fillStyle = textSettings.value.color\n\n            // 使用全局计算位置\n            const { x, y } = getWatermarkPosition(batchImg.width, batchImg.height)\n            tempCtx.fillText(watermarkText.value, x, y)\n            tempCtx.restore()\n\n            // 保存结果\n            tempCanvas.toBlob((blob) => {\n              if (blob) {\n                const processedUrl = URL.createObjectURL(blob)\n                batchImg.processedUrl = processedUrl\n                batchImg.status = '已完成'\n              } else {\n                batchImg.status = '处理失败'\n              }\n              resolve()\n            })\n          } else if (watermarkType.value === 'image' && watermarkImage.value) {\n            const watermarkImg = new Image()\n            watermarkImg.src = watermarkImage.value.url\n            watermarkImg.onload = () => {\n              const watermarkWidth = (watermarkImg.width * imageSettings.value.scale / 100)\n              const watermarkHeight = (watermarkImg.height * imageSettings.value.scale / 100)\n              const { x, y } = getWatermarkPosition(batchImg.width, batchImg.height, watermarkWidth, watermarkHeight)\n\n              tempCtx.globalAlpha = imageSettings.value.opacity\n              tempCtx.drawImage(watermarkImg, x, y, watermarkWidth, watermarkHeight)\n\n              // 保存结果\n              tempCanvas.toBlob((blob) => {\n                if (blob) {\n                  const processedUrl = URL.createObjectURL(blob)\n                  batchImg.processedUrl = processedUrl\n                  batchImg.status = '已完成'\n                } else {\n                  batchImg.status = '处理失败'\n                }\n                resolve()\n              })\n            }\n            watermarkImg.onerror = () => {\n              batchImg.status = '处理失败'\n              resolve()\n            }\n          } else {\n            // 保存结果（无水印）\n            tempCanvas.toBlob((blob) => {\n              if (blob) {\n                const processedUrl = URL.createObjectURL(blob)\n                batchImg.processedUrl = processedUrl\n                batchImg.status = '已完成'\n              } else {\n                batchImg.status = '处理失败'\n              }\n              resolve()\n            })\n          }\n        }\n        img.onerror = () => {\n          batchImg.status = '处理失败'\n          resolve()\n        }\n      })\n    } catch (error) {\n      console.error('处理失败:', error)\n      batchImg.status = '失败'\n      batchImg.processedUrl = null\n    }\n  }\n\n  isProcessingBatch.value = false\n}\n\n// 下载所有批量处理的图片\nconst downloadAllBatch = async () => {\n  const zip = new JSZip()\n\n  const processedImages = batchImages.value.filter(img => img.processedUrl)\n\n  for (const img of processedImages) {\n    const response = await fetch(img.processedUrl)\n    const blob = await response.blob()\n    zip.file(img.name, blob)\n  }\n\n  const zipBlob = await zip.generateAsync({ type: 'blob' })\n  const url = URL.createObjectURL(zipBlob)\n\n  const a = document.createElement('a')\n  a.href = url\n  a.download = `watermarked_images_${Date.now()}.zip`\n  a.click()\n\n  URL.revokeObjectURL(url)\n}\n\n// 下载处理后的图片\nconst downloadProcessedImage = () => {\n  if (!processedImage.value) return\n\n  const a = document.createElement('a')\n  a.href = processedImage.value\n  a.download = `watermarked_${uploadedImage.value.name.split('.')[0]}.${outputFormat.value}`\n  a.click()\n}\n\n// 触发文件输入\nconst triggerFileInput = () => {\n  fileInput.value.click()\n}\n\n\n\n// 初始化\nonMounted(() => {\n  // 获取 canvas 引用\n  setTimeout(() => {\n    canvas.value = document.querySelector('canvas')\n  }, 100)\n})\n\n// SEO配置\nuseSeoMeta({\n  title: '图片水印 - 在线添加文字/图片水印工具',\n  description: '免费在线图片水印工具，支持文字和图片水印，批量处理，自定义位置和样式。',\n  keywords: ['图片水印', '水印生成', '版权保护', '批量水印', '在线工具']\n})\n\ndefinePageMeta({\n  layout: 'default'\n})\n\n// 清理\nonUnmounted(() => {\n  if (processedImage.value) {\n    URL.revokeObjectURL(processedImage.value)\n  }\n  batchImages.value.forEach(img => {\n    if (img.processedUrl) {\n      URL.revokeObjectURL(img.processedUrl)\n    }\n  })\n})\n</script>\n\n<style scoped>\n.bg-checkered {\n  background-image:\n    linear-gradient(45deg, #f0f0f0 25%, transparent 25%),\n    linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #f0f0f0 75%),\n    linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px 0, 5px -5px;\n}\n</style>"],"names":["positions","_ssrRenderAttrs","_mergeProps","_ssrRenderComponent","_unref","_ssrInterpolate","_ssrRenderAttr","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrLooseEqual","_ssrRenderList","_push","_parent","_createVNode"],"mappings":"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"}