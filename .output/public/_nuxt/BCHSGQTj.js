import{_ as B}from"./D4g1_bQ7.js";import{q as V,u as z,r as u,e as G,p as H,f as P,c as O,a as t,h as v,y as I,P as X,v as K,z as w,V as C,t as h,n as y,j as F,l as W,x as $,F as Q,k as Y,m as Z,o as m,w as ee,C as te}from"./DEsTSaKd.js";import{t as f}from"./B-fbZyPE.js";import{c as oe}from"./3IwUeceH.js";import{C as se,a as re}from"./BaG5JeHk.js";import{G as le}from"./sCtjrDU-.js";import{F as ne}from"./OWHW6ZUB.js";import{G as ie}from"./B8QRyNMs.js";import{F as ae}from"./BIbbmz6B.js";import{R as de}from"./b4Up8kzW.js";import{T as ue}from"./C1JgnPlw.js";import{H as ce}from"./ZC22Qqbx.js";import{L as me}from"./BP6Cft7q.js";import{D as pe}from"./DESX2TF9.js";import{F as fe}from"./C-LEKrTT.js";import{C as xe}from"./vEvaw0F6.js";import{I as ge}from"./4T928kbW.js";import{W as be}from"./BUYFD_dQ.js";import{T as ve}from"./Z_ZHHb8E.js";import{C as he}from"./BuCd20m7.js";import{S as ye}from"./w5JABn4e.js";import{L as Se}from"./DbWJs76d.js";import{F as Le}from"./CRvidJJ3.js";import"./wERbHxDK.js";const Oe={class:"max-w-8xl mx-auto"},Ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Me={class:"flex flex-col h-full"},Je={class:"flex items-center justify-between mb-2"},ke={class:"flex items-center gap-2"},Xe={class:"flex items-center gap-2"},we=["onKeydown"],Ce={key:0,class:"mt-2 p-2 bg-destructive/20 text-destructive text-sm rounded"},Fe={class:"flex flex-col h-full"},qe={class:"p-6 mb-12 relative"},_e=["title"],je={class:"mb-12"},Ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Te={class:"flex items-center gap-2 mb-2"},Ae={class:"font-medium text-foreground"},Re={class:"text-sm text-muted-foreground line-clamp-2"},ut={__name:"xml-to-json",setup(De){V({title:"XML转JSON - 在线XML转JSON格式转换工具",description:"免费在线 XML to JSON 转换工具，支持将 XML 数据快速转换为 JSON 格式，保留数据结构，支持属性转换和数组检测。纯本地计算，数据安全。",keywords:"XML转JSON, XML to JSON, XML JSON转换, 数据格式转换, 在线工具",author:"Util工具箱",ogTitle:"XML转JSON - 在线XML转JSON格式转换工具",ogDescription:"免费在线 XML to JSON 转换工具，支持将 XML 数据快速转换为 JSON 格式。",ogType:"website",twitterCard:"summary_large_image"}),z({script:[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"WebApplication",name:"XML转JSON工具",description:"免费在线 XML to JSON 转换工具，支持将 XML 数据快速转换为 JSON 格式",url:"https://util.example.com/tools/xml-to-json",applicationCategory:"DeveloperApplication",operatingSystem:"Any",offers:{"@type":"Offer",price:"0",priceCurrency:"USD"},featureList:["XML转JSON","属性处理选项","数组自动检测","保留数据结构","本地处理"]})}]}),Z();const N=f.find(s=>s.id==="xml-to-json");oe.find(s=>s.id==="format");const c=u(""),i=u(""),x=u(""),S=u("2"),g=u("prefix"),b=u(!0),a=u(null),p=u(!1),q={FileText:Le,Lock:Se,Shield:ye,Clock:he,Type:ve,Wifi:be,Image:ge,Code:xe,FileJson:fe,Database:pe,Link:me,Hash:ce,Timer:ue,Regex:de,FileDiff:ae,Globe:ie,FolderOpen:ne,GitBranch:le},_=G(()=>{const s=f.filter(o=>o.category==="format"&&o.id!=="xml-to-json").slice(0,3),e=[f.find(o=>o.id==="json-to-xml"),f.find(o=>o.id==="json-formatter"),f.find(o=>o.id==="xml-formatter"),f.find(o=>o.id==="json-to-yaml")].filter(Boolean);return[...s,...e].slice(0,4)}),L=()=>{if(c.value)try{x.value="";const e=new DOMParser().parseFromString(c.value,"text/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("XML格式错误，请检查语法");const r=M(e.documentElement),d=parseInt(S.value);i.value=JSON.stringify(r,null,d)}catch(s){x.value=`转换失败: ${s.message}`,i.value=""}},M=s=>{const e={},o={};for(let l=0;l<s.attributes.length;l++){const n=s.attributes[l];g.value==="prefix"?e[`@${n.name}`]=n.value:g.value==="separate"&&(o[n.name]=n.value)}g.value==="separate"&&Object.keys(o).length>0&&(e["@attributes"]=o);const r=Array.from(s.childNodes).filter(l=>l.nodeType!==7&&l.nodeType!==8);let d="";const J=[];for(const l of r)l.nodeType===3?d+=l.textContent:l.nodeType===1&&J.push(l);for(const l of J){const n=l.tagName,k=M(l);e[n]?(Array.isArray(e[n])||(e[n]=[e[n]]),e[n].push(k)):e[n]=k}if(d=d.trim(),d){if(Object.keys(e).length===0)return d;Object.keys(e).length>0&&(e["#text"]=d)}return Object.keys(e).length===0?null:e},j=()=>{c.value="",i.value="",x.value=""},E=async()=>{try{const s=await navigator.clipboard.readText();c.value=s}catch(s){console.error("粘贴失败:",s)}},T=()=>{c.value=`<?xml version="1.0" encoding="UTF-8"?>
<bookstore>
  <book category="fiction" isbn="978-0-7432-7356-5">
    <title lang="en">The Great Gatsby</title>
    <author>F. Scott Fitzgerald</author>
    <year>1925</year>
    <price>10.99</price>
    <description>
      A classic American novel set in the Jazz Age.
    </description>
  </book>
  <book category="children" isbn="978-0-439-70818-1">
    <title lang="en">Harry Potter</title>
    <author>J.K. Rowling</author>
    <year>2005</year>
    <price>29.99</price>
    <description>
      A magical adventure of a young wizard.
    </description>
  </book>
  <metadata>
    <created>2023-01-01</created>
    <version>1.0</version>
  </metadata>
</bookstore>`},A=async()=>{if(i.value)try{await navigator.clipboard.writeText(i.value)}catch(s){console.error("复制失败:",s)}},R=()=>{if(!i.value)return;const s=new Blob([i.value],{type:"application/json"}),e=URL.createObjectURL(s),o=document.createElement("a");o.href=e,o.download="converted.json",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(e)},D=()=>{a.value&&(p.value?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():a.value.requestFullscreen?a.value.requestFullscreen():a.value.webkitRequestFullscreen?a.value.webkitRequestFullscreen():a.value.msRequestFullscreen&&a.value.msRequestFullscreen(),p.value=!p.value)},U=()=>{b.value=!b.value};return N&&H(N.id),P(()=>{document.addEventListener("fullscreenchange",()=>{p.value=!!document.fullscreenElement}),document.addEventListener("webkitfullscreenchange",()=>{p.value=!!document.webkitFullscreenElement}),document.addEventListener("msfullscreenchange",()=>{p.value=!!document.msFullscreenElement})}),(s,e)=>{const o=B;return m(),O("div",Oe,[e[11]||(e[11]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-foreground mb-3"},"XML转JSON - 在线XML转JSON格式转换工具"),t("p",{class:"text-muted-foreground"},"一款免费的在线 XML to JSON Converter。支持将 XML 数据快速转换为 JSON 格式，保留数据结构，支持属性转换和数组检测。纯本地计算，数据隐私绝对安全。")],-1)),t("div",Ne,[t("div",Me,[t("div",{class:"flex items-center justify-between mb-3"},[e[3]||(e[3]=t("label",{class:"text-sm font-medium text-foreground"},"输入XML",-1)),t("div",{class:"flex gap-2"},[t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:j}," 清空 "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:E}," 粘贴 "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:T}," 示例数据 ")])]),t("div",Je,[t("div",ke,[e[5]||(e[5]=t("label",{class:"text-xs text-muted-foreground"},"缩进:",-1)),v(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>S.value=r),class:"text-xs bg-muted border border-border rounded px-2 py-1"},[...e[4]||(e[4]=[t("option",{value:"2"},"2空格",-1),t("option",{value:"4"},"4空格",-1)])],512),[[X,S.value]])]),t("div",Xe,[e[7]||(e[7]=t("label",{class:"text-xs text-muted-foreground"},"处理属性:",-1)),v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>g.value=r),class:"text-xs bg-muted border border-border rounded px-2 py-1"},[...e[6]||(e[6]=[t("option",{value:"prefix"},"加@前缀",-1),t("option",{value:"separate"},"单独对象",-1),t("option",{value:"ignore"},"忽略",-1)])],512),[[X,g.value]])])]),v(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>c.value=r),class:"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary resize-none font-mono text-sm",placeholder:"在此输入XML数据...",onKeydown:[w(C(L,["ctrl"]),["enter"]),w(C(L,["meta"]),["enter"])]},null,40,we),[[K,c.value]]),x.value?(m(),O("div",Ce,h(x.value),1)):I("",!0)]),t("div",Fe,[t("div",{class:"flex items-center justify-between mb-3"},[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-foreground"},"JSON输出",-1)),t("div",{class:"flex gap-2"},[t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:A}," 复制 "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:R}," 下载JSON "),t("button",{class:"text-xs px-2 py-1 bg-muted hover:bg-muted/80 rounded text-muted-foreground",onClick:D}," 全屏模式 ")])]),t("pre",{ref_key:"outputPre",ref:a,class:"flex-1 w-full min-h-[300px] p-4 bg-muted border border-border rounded-lg overflow-auto font-mono text-sm whitespace-pre-wrap"},h(i.value),513)])]),t("div",{class:"flex justify-center mb-12"},[t("button",{onClick:L,class:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium"}," 转换为 JSON ")]),t("div",qe,[t("button",{onClick:U,class:"absolute top-4 right-4 text-muted-foreground hover:text-foreground transition-colors",title:b.value?"折叠内容":"展开内容"},[b.value?(m(),y(F(re),{key:1,class:"w-5 h-5"})):(m(),y(F(se),{key:0,class:"w-5 h-5"}))],8,_e),v(t("div",null,[...e[9]||(e[9]=[$('<h2 class="text-2xl font-bold text-foreground mb-4 flex items-center"><span class="text-primary mr-2">#</span> 什么是 XML 转 JSON？ </h2><p class="text-muted-foreground mb-4"> XML（eXtensible Markup Language）和 JSON（JavaScript Object Notation）都是常用的数据交换格式。 XML 转 JSON 是将 XML 标记语言数据转换为 JSON 对象格式的过程。JSON 更轻量级、更易解析， 在现代 Web 应用中被广泛使用。 </p><p class="text-muted-foreground"> 转换过程中，XML 的元素、属性、文本内容会被映射到 JSON 的对象、属性和值。 需要考虑如何处理 XML 特有的特性，如属性、命名空间、注释等。 </p><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 如何使用本工具 </h2><ol class="list-decimal list-inside space-y-2 text-muted-foreground mb-6"><li>将您的 XML 数据粘贴到左侧输入框</li><li>选择 JSON 缩进大小（2空格或4空格）</li><li>选择属性处理方式（加@前缀、单独对象或忽略）</li><li>点击&quot;转换为 JSON&quot;按钮或使用快捷键 Ctrl+Enter</li><li>查看右侧转换后的 JSON 结果</li></ol><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 转换规则说明 </h2><ul class="list-disc list-inside space-y-2 text-muted-foreground mb-6"><li><strong>元素转换</strong>: XML 元素转换为 JSON 对象的属性</li><li><strong>属性处理</strong>: XML 属性可转换为带@前缀的属性或单独的对象</li><li><strong>文本内容</strong>: 元素的文本内容作为特殊属性 &quot;#text&quot; 或直接作为值</li><li><strong>数组检测</strong>: 相同名称的兄弟元素自动转换为 JSON 数组</li><li><strong>混合内容</strong>: 包含文本和子元素的元素会被特殊处理</li></ul><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 属性处理选项 </h2><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div class="p-4 bg-muted/50 rounded-lg"><h4 class="font-semibold text-foreground mb-2">加@前缀</h4><p class="text-sm text-muted-foreground"> 将 XML 属性转换为以 @ 开头的 JSON 属性。 例如：&lt;item id=&quot;1&quot;&gt; → {&quot;@id&quot;: &quot;1&quot;} </p></div><div class="p-4 bg-muted/50 rounded-lg"><h4 class="font-semibold text-foreground mb-2">单独对象</h4><p class="text-sm text-muted-foreground"> 将所有属性收集到单独的 &quot;@attributes&quot; 对象中。 例如：&lt;item id=&quot;1&quot;&gt; → {&quot;@attributes&quot;: {&quot;id&quot;: &quot;1&quot;}} </p></div><div class="p-4 bg-muted/50 rounded-lg"><h4 class="font-semibold text-foreground mb-2">忽略</h4><p class="text-sm text-muted-foreground"> 完全忽略 XML 属性，只保留元素和文本内容。 这适用于只需要数据的场景。 </p></div></div><h2 class="text-2xl font-bold text-foreground mt-8 mb-4 flex items-center"><span class="text-primary mr-2">#</span> 常见问题 (FAQ) </h2><div class="space-y-4"><div><h3 class="text-lg font-semibold text-foreground">XML 中的命名空间如何处理？</h3><p class="text-muted-foreground mt-1"> 命名空间前缀会保留在元素名称中。例如 &lt;ns:item&gt; 会被转换为 {&quot;ns:item&quot;: ...}。 如果需要完全移除命名空间，可以在转换后进行后处理。 </p></div><div><h3 class="text-lg font-semibold text-foreground">如何处理 CDATA 部分？</h3><p class="text-muted-foreground mt-1"> CDATA 部分的内容会作为普通文本处理，不会被解析为 XML 标记。 这确保了特殊字符和代码片段能够正确保留。 </p></div><div><h3 class="text-lg font-semibold text-foreground">转换后的 JSON 可以再转回 XML 吗？</h3><p class="text-muted-foreground mt-1"> 可以。使用我们的 JSON 转 XML 工具可以将转换后的 JSON 再转回 XML 格式。 某些 XML 特性（如注释、处理指令）在转换过程中可能会丢失。 </p></div></div>',11)])],512),[[W,b.value]])]),t("section",je,[e[10]||(e[10]=t("h2",{class:"text-2xl font-bold text-foreground mb-4"},"您可能还需要...",-1)),t("div",Ee,[(m(!0),O(Q,null,Y(_.value,r=>(m(),y(o,{key:r.id,to:`/tools/${r.id}/`,class:"block p-4 bg-card border border-border rounded-lg hover:bg-accent transition-colors"},{default:ee(()=>[t("div",Te,[(m(),y(te(q[r.icon]),{class:"w-5 h-5 text-primary"})),t("span",Ae,h(r.name),1)]),t("p",Re,h(r.description),1)]),_:2},1032,["to"]))),128))])])])}}};export{ut as default};
