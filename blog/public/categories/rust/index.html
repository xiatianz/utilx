<!doctype html><html lang=zh-cn dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Rust | æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</title><meta name=keywords content><meta name=description content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·ï¼šåˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒ"><meta name=author content="util.cn Team"><link rel=canonical href=/blog/categories/rust/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.7e8505b7cdf8bb22ab2305e53c2700bb06c7e64faeb72cd3468823a9a3bd3d6e.css integrity="sha256-foUFt834uyKrIwXlPCcAuwbH5k+utyzTRogjqaO9PW4=" rel="preload stylesheet" as=style><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/blog/favicon-32x32.png><link rel=apple-touch-icon href=/blog/apple-touch-icon.png><link rel=mask-icon href=/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=/blog/categories/rust/feed.xml title=rss><link rel=alternate hreflang=zh-cn href=/blog/categories/rust/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script src=/js/external-link-config.js></script><script src=/js/external-link-interceptor.js></script><link rel=stylesheet href=/blog/css/custom.css media=screen><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«","url":"https://www.util.cn/blog/","description":"æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚","publisher":{"@type":"Organization","name":"æœ‰æ¡å·¥å…·","url":"https://www.util.cn","logo":{"@type":"ImageObject","url":"https://www.util.cn/blog/logo/logo-256.png","width":256,"height":256}},"potentialAction":[{"@type":"SearchAction","target":"https://www.util.cn/blog/search?q={search_term_string}","query-input":"required name=search_term_string"}]}</script><meta property="og:type" content="website"><meta property="og:title" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta property="og:description" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚æä¾›JSONæ ¼å¼åŒ–ã€SQLä¼˜åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰åœ¨çº¿å·¥å…·çš„è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å·¥ä½œæ•ˆç‡ã€‚"><meta property="og:url" content="https://www.util.cn/blog/"><meta property="og:site_name" content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢"><meta property="og:image" content="https://www.util.cn/blog/logo/logo-256.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· | å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ & ç¼–ç¨‹æŠ€å·§åˆ†äº«"><meta name=twitter:description content="æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ - åˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒã€‚"><meta name=twitter:image content="https://www.util.cn/blog/logo/logo-256.png"><meta name=baidu-site-verification content><meta name=category content="æŠ€æœ¯åšå®¢,å¼€å‘è€…å·¥å…·,ç¼–ç¨‹æ•™ç¨‹"><meta name=coverage content="Worldwide"><meta name=distribution content="Global"><meta name=rating content="General"><script id=51la_code async crossorigin=anonymous src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=pro"></script><script>window.addEventListener("load",function(){setTimeout(function(){typeof la!="undefined"?console.log("51laç»Ÿè®¡å·²åŠ è½½"):(console.warn("51laç»Ÿè®¡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ"),function(){var e=document.createElement("script");e.src="https://sdk.51.la/js-sdk-pro.min.js?id=3OM52V0xJAPv6ozF&hash=backup",e.async=!0,document.head.appendChild(e)}())},3e3)})</script><meta property="og:url" content="/blog/categories/rust/"><meta property="og:site_name" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·"><meta property="og:title" content="Rust"><meta property="og:description" content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·ï¼šåˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒ"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Rust"><meta name=twitter:description content="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·ï¼šåˆ†äº«å¼€å‘è€…å·¥å…·ä½¿ç”¨æ•™ç¨‹ã€ç¼–ç¨‹æŠ€å·§å’Œå®æˆ˜å¼€å‘ç»éªŒ"></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=/blog/ accesskey=h title="æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…· (Alt + H)">æŠ€æœ¯åšå®¢ - æœ‰æ¡å·¥å…·</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=/blog/posts/ title="æ‰€æœ‰æ–‡ç« åˆ—è¡¨ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŸ¥çœ‹æ‰€æœ‰æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ–‡ç« </span></a></li><li><a href=https://www.util.cn title="æœ‰æ¡å·¥å…· - å¼€å‘è€…çš„å¸¸ç”¨å·¥å…·é›†åˆï¼šæ— å¹¿å‘Š Â· æœ¬åœ°è®¡ç®— Â· å³å¼€å³ç”¨çš„åœ¨çº¿å·¥å…·å¹³å°ï¼Œæä¾›JSONæ ¼å¼åŒ–ã€SQLæ ¼å¼åŒ–ã€Markdownç¼–è¾‘å™¨ç­‰å®ç”¨å·¥å…·"><span>æœ‰æ¡å·¥å…·</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=/blog/categories/ title="æ–‡ç« åˆ†ç±» - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æŠ€æœ¯é¢†åŸŸåˆ†ç±»çš„ä¼˜è´¨æ–‡ç« ï¼ŒåŒ…æ‹¬å‰ç«¯å¼€å‘ã€å·¥å…·ä½¿ç”¨ã€ç¼–ç¨‹æŠ€å·§ç­‰"><span>åˆ†ç±»</span></a></li><li><a href=/blog/tags/ title="æ ‡ç­¾äº‘ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡æ ‡ç­¾å¿«é€Ÿæ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹"><span>æ ‡ç­¾</span></a></li><li><a href=/blog/archives/ title="æ–‡ç« å½’æ¡£ - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šæŒ‰æ—¶é—´æŸ¥çœ‹å†å²æ–‡ç« "><span>å½’æ¡£</span></a></li><li><a href=/blog/search/ title="æœç´¢æ–‡ç«  - æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢ï¼šé€šè¿‡å…³é”®è¯æœç´¢æ‰¾åˆ°æ„Ÿå…´è¶£çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹å†…å®¹ï¼Œæ”¯æŒæ ‡é¢˜ã€å†…å®¹ã€åˆ†ç±»å’Œæ ‡ç­¾æœç´¢"><span>æœç´¢</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Rust</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ç”¨Rustæ„å»ºé«˜æ€§èƒ½CLIå·¥å…·ï¼šä»é›¶åˆ°éƒ¨ç½²å®Œæ•´æŒ‡å—</h2></header><div class=entry-content><p>å‰è¨€ å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰æ˜¯å¼€å‘è€…æ—¥å¸¸å·¥ä½œä¸­ä¸å¯æˆ–ç¼ºçš„åˆ©å™¨ã€‚ä¼ ç»Ÿçš„Node.jsæˆ–Pythonè„šæœ¬åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶å¾€å¾€é¢ä¸´æ€§èƒ½ç“¶é¢ˆã€‚Rustè¯­è¨€å‡­å€Ÿå…¶é›¶æˆæœ¬æŠ½è±¡ã€å†…å­˜å®‰å…¨å’Œå“è¶Šçš„æ€§èƒ½ï¼Œæˆä¸ºæ„å»ºCLIå·¥å…·çš„ç†æƒ³é€‰æ‹©ã€‚
æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªå®é™…é¡¹ç›®â€”â€”æ‰¹é‡å›¾ç‰‡å¤„ç†å·¥å…·ï¼Œå®Œæ•´å±•ç¤ºä½¿ç”¨Rustæ„å»ºCLIå·¥å…·çš„å…¨è¿‡ç¨‹ã€‚
é¡¹ç›®åˆå§‹åŒ– 1. åˆ›å»ºé¡¹ç›® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # å®‰è£…Rustå·¥å…·é“¾ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh # åˆ›å»ºæ–°çš„äºŒè¿›åˆ¶é¡¹ç›® cargo new imgproc --bin cd imgproc # æ·»åŠ å¸¸ç”¨ä¾èµ– cargo add clap --features derive cargo add anyhow cargo add thiserror cargo add tokio --features full cargo add indicatif cargo add console 2. é¡¹ç›®ç»“æ„ imgproc/ â”œâ”€â”€ Cargo.toml # ä¾èµ–é…ç½® â”œâ”€â”€ src/ â”‚ â”œâ”€â”€ main.rs # å…¥å£æ–‡ä»¶ â”‚ â”œâ”€â”€ cli.rs # å‘½ä»¤è¡Œå‚æ•°å®šä¹‰ â”‚ â”œâ”€â”€ processor.rs # æ ¸å¿ƒå¤„ç†é€»è¾‘ â”‚ â”œâ”€â”€ error.rs # é”™è¯¯ç±»å‹å®šä¹‰ â”‚ â””â”€â”€ utils.rs # å·¥å…·å‡½æ•° â”œâ”€â”€ tests/ â”‚ â””â”€â”€ integration_test.rs â””â”€â”€ README.md å‘½ä»¤è¡Œå‚æ•°å¤„ç† ä½¿ç”¨clapåº“å®šä¹‰å‘½ä»¤è¡Œæ¥å£ï¼š
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/rust/ class=category-link>Rust</a><a href=/blog/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/ class=category-link>å¼€å‘å·¥å…·</a></div><span class=post-date>2026-01-04</span><span class=post-author>æŠ€æœ¯å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to ç”¨Rustæ„å»ºé«˜æ€§èƒ½CLIå·¥å…·ï¼šä»é›¶åˆ°éƒ¨ç½²å®Œæ•´æŒ‡å—" href=/blog/articles/%E7%94%A8rust%E6%9E%84%E5%BB%BA%E9%AB%98%E6%80%A7%E8%83%BDcli%E5%B7%A5%E5%85%B7%E4%BB%8E%E9%9B%B6%E5%88%B0%E9%83%A8%E7%BD%B2%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Rustå†…å­˜å®‰å…¨ä¸æ‰€æœ‰æƒæœºåˆ¶æ·±åº¦è§£æï¼šé›¶æˆæœ¬æŠ½è±¡çš„å®ç°åŸç†</h2></header><div class=entry-content><p>å¼•è¨€ Rusté€šè¿‡ç‹¬ç‰¹çš„æ‰€æœ‰æƒç³»ç»Ÿåœ¨ç¼–è¯‘é˜¶æ®µä¿è¯å†…å­˜å®‰å…¨ï¼Œæ— éœ€åƒåœ¾å›æ”¶å™¨ï¼Œä¹Ÿæ— éœ€æ‰‹åŠ¨ç®¡ç†å†…å­˜ã€‚è¿™ç§è®¾è®¡ä½¿Rustèƒ½å¤Ÿåœ¨æä¾›C/C++çº§åˆ«æ€§èƒ½çš„åŒæ—¶ï¼Œé¿å…å¸¸è§çš„å†…å­˜å®‰å…¨æ¼æ´ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æRustçš„å†…å­˜å®‰å…¨æœºåˆ¶ã€‚
ä¸€ã€æ‰€æœ‰æƒç³»ç»ŸåŸºç¡€ 1.1 æ‰€æœ‰æƒè§„åˆ™ Rustæœ‰ä¸‰æ¡æ ¸å¿ƒçš„æ‰€æœ‰æƒè§„åˆ™ï¼š
1 2 3 4 5 6 7 8 9 10 11 // è§„åˆ™1ï¼šæ¯ä¸ªå€¼æœ‰ä¸€ä¸ªæ‰€æœ‰è€… let s = String::from("hello"); // sæ˜¯å­—ç¬¦ä¸²çš„æ‰€æœ‰è€… // è§„åˆ™2ï¼šåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€… let s1 = s; // sçš„æ‰€æœ‰æƒè½¬ç§»ç»™s1ï¼Œsä¸å†æœ‰æ•ˆ // println!("{}", s); // ç¼–è¯‘é”™è¯¯ï¼švalue borrowed here after move // è§„åˆ™3ï¼šæ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸï¼Œå€¼è¢«ä¸¢å¼ƒ { let s2 = String::from("world"); } // s2åœ¨è¿™é‡Œè¢«è‡ªåŠ¨drop 1.2 ç§»åŠ¨è¯­ä¹‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 // åŸºæœ¬ç±»å‹å®ç°äº†Copy traitï¼Œèµ‹å€¼æ˜¯æ‹·è´ let x = 5; let y = x; // xä»ç„¶æœ‰æ•ˆ println!("x = {}, y = {}", x, y); // Stringæ²¡æœ‰å®ç°Copyï¼Œèµ‹å€¼æ˜¯ç§»åŠ¨ let s1 = String::from("hello"); let s2 = s1; // s1è¢«ç§»åŠ¨åˆ°s2 // println!("{}", s1); // ç¼–è¯‘é”™è¯¯ // ä½¿ç”¨clone()è¿›è¡Œæ·±æ‹·è´ let s3 = String::from("world"); let s4 = s3.clone(); // æ˜¾å¼å…‹éš† println!("s3 = {}, s4 = {}", s3, s4); 1.3 å‡½æ•°è°ƒç”¨ä¸­çš„æ‰€æœ‰æƒ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 fn main() { let s = String::from("hello"); // æ‰€æœ‰æƒä¼ é€’ç»™å‡½æ•° takes_ownership(s); // println!("{}", s); // ç¼–è¯‘é”™è¯¯ï¼šså·²è¢«ç§»åŠ¨ let x = 5; // Copyç±»å‹ä¼ é€’æ‹·è´ makes_copy(x); println!("x = {}", x); // xä»ç„¶æœ‰æ•ˆ // å‡½æ•°è¿”å›æ‰€æœ‰æƒ let s2 = gives_ownership(); println!("{}", s2); } fn takes_ownership(some_string: String) { println!("{}", some_string); } // some_stringåœ¨è¿™é‡Œè¢«drop fn makes_copy(some_integer: i32) { println!("{}", some_integer); } fn gives_ownership() -> String { let some_string = String::from("yours"); some_string // è¿”å›æ‰€æœ‰æƒ } äºŒã€å€Ÿç”¨ä¸å¼•ç”¨ 2.1 ä¸å¯å˜å€Ÿç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 fn main() { let s1 = String::from("hello"); // åˆ›å»ºä¸å¯å˜å¼•ç”¨ let len = calculate_length(&amp;s1); println!("The length of '{}' is {}.", s1, len); // s1ä»ç„¶æœ‰æ•ˆï¼Œå› ä¸ºæˆ‘ä»¬åªæ˜¯å€Ÿç”¨ } fn calculate_length(s: &amp;String) -> usize { s.len() } // sç¦»å¼€ä½œç”¨åŸŸï¼Œä½†å› ä¸ºæ²¡æœ‰æ‰€æœ‰æƒï¼Œæ‰€ä»¥ä¸ä¼šdrop 2.2 å¯å˜å€Ÿç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 fn main() { let mut s = String::from("hello"); // åˆ›å»ºå¯å˜å¼•ç”¨ change(&amp;mut s); println!("{}", s); // è¾“å‡º: hello, world } fn change(some_string: &amp;mut String) { some_string.push_str(", world"); } 2.3 å€Ÿç”¨è§„åˆ™ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 fn main() { let mut s = String::from("hello"); // è§„åˆ™1ï¼šåŒä¸€æ—¶é—´å¯ä»¥æœ‰å¤šä¸ªä¸å¯å˜å¼•ç”¨ let r1 = &amp;s; let r2 = &amp;s; println!("{} and {}", r1, r2); // r1å’Œr2åœ¨è¿™é‡Œä¸å†ä½¿ç”¨ // è§„åˆ™2ï¼šåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ let r3 = &amp;mut s; // let r4 = &amp;mut s; // ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½æœ‰å¤šä¸ªå¯å˜å¼•ç”¨ println!("{}", r3); // è§„åˆ™3ï¼šä¸å¯å˜å¼•ç”¨å’Œå¯å˜å¼•ç”¨ä¸èƒ½åŒæ—¶å­˜åœ¨ let r5 = &amp;s; // let r6 = &amp;mut s; // ç¼–è¯‘é”™è¯¯ println!("{}", r5); let r6 = &amp;mut s; // r5ä¸å†ä½¿ç”¨ï¼Œå¯ä»¥åˆ›å»ºå¯å˜å¼•ç”¨ } 2.4 æ‚¬å‚å¼•ç”¨ 1 2 3 4 5 6 7 8 9 10 11 // ç¼–è¯‘é”™è¯¯ï¼šè¿”å›æŒ‡å‘å·²é‡Šæ”¾å†…å­˜çš„å¼•ç”¨ fn dangle() -> &amp;String { // ç¼–è¯‘é”™è¯¯ let s = String::from("hello"); &amp;s // è¿”å›æŒ‡å‘sçš„å¼•ç”¨ï¼Œä½†så°†è¢«drop } // såœ¨è¿™é‡Œè¢«dropï¼Œå†…å­˜è¢«é‡Šæ”¾ // æ­£ç¡®çš„åšæ³•ï¼šè¿”å›String fn no_dangle() -> String { let s = String::from("hello"); s // sçš„æ‰€æœ‰æƒè¢«ç§»åŠ¨å‡ºå» } ä¸‰ã€ç”Ÿå‘½å‘¨æœŸ 3.1 ç”Ÿå‘½å‘¨æœŸæ³¨è§£ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // ç”Ÿå‘½å‘¨æœŸæ³¨è§£è¯­æ³• fn longest&lt;'a>(x: &'a str, y: &'a str) -> &'a str { if x.len() > y.len() { x } else { y } } fn main() { let string1 = String::from("long string is long"); let string2 = String::from("xyz"); let result = longest(string1.as_str(), string2.as_str()); println!("The longest string is {}", result); } 3.2 ç»“æ„ä½“ä¸­çš„ç”Ÿå‘½å‘¨æœŸ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // ç»“æ„ä½“å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸ struct ImportantExcerpt&lt;'a> { part: &'a str, } fn main() { let novel = String::from("Call me Ishmael. Some years ago..."); let first_sentence = novel.split('.').next().unwrap(); let i = ImportantExcerpt { part: first_sentence, }; println!("{}", i.part); } 3.3 ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 // è§„åˆ™1ï¼šæ¯ä¸ªå¼•ç”¨å‚æ•°éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸ fn first_word&lt;'a>(s: &'a str) -> &'a str { // ç¼–è¯‘å™¨è‡ªåŠ¨æ·»åŠ ç”Ÿå‘½å‘¨æœŸ let bytes = s.as_bytes(); for (i, &amp;item) in bytes.iter().enumerate() { if item == b' ' { return &amp;s[0..i]; } } &amp;s[..] } // ç­‰ä»·äº fn first_word(s: &amp;str) -> &amp;str { // ç¼–è¯‘å™¨åº”ç”¨çœç•¥è§„åˆ™ let bytes = s.as_bytes(); for (i, &amp;item) in bytes.iter().enumerate() { if item == b' ' { return &amp;s[0..i]; } } &amp;s[..] } // è§„åˆ™2ï¼šå¦‚æœåªæœ‰ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸï¼Œåˆ™èµ‹äºˆæ‰€æœ‰è¾“å‡ºç”Ÿå‘½å‘¨æœŸ // è§„åˆ™3ï¼šå¦‚æœæœ‰å¤šä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸï¼Œä½†å…¶ä¸­ä¸€ä¸ªæ˜¯&amp;selfæˆ–&amp;mut selfï¼Œ // åˆ™èµ‹äºˆæ‰€æœ‰è¾“å‡ºç”Ÿå‘½å‘¨æœŸ 3.4 é™æ€ç”Ÿå‘½å‘¨æœŸ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // 'staticç”Ÿå‘½å‘¨æœŸå­˜æ´»äºæ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´ let s: &'static str = "I have a static lifetime."; // ç¤ºä¾‹ï¼šåœ¨ç»“æ„ä½“ä¸­ä½¿ç”¨ struct Config&lt;'a> { app_name: &'static str, data: &'a str, } fn main() { let data = String::from("some data"); let config = Config { app_name: "MyApp", data: &amp;data, }; } å››ã€æ™ºèƒ½æŒ‡é’ˆ 4.1 Box - å †åˆ†é… 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 // åœ¨å †ä¸Šå­˜å‚¨æ•°æ® fn main() { let b = Box::new(5); println!("b = {}", b); // é€’å½’ç±»å‹ enum List { Cons(i32, Box&lt;List>), Nil, } use List::{Cons, Nil}; let list = Cons(1, Box::new(Cons(2, Box::new(Cons(3, Box::new(Nil) )) )) ); } 4.2 Rc - å¼•ç”¨è®¡æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 use std::rc::Rc; fn main() { let a = Rc::new(5); println!("count after creating a = {}", Rc::strong_count(&amp;a)); let b = Rc::clone(&amp;a); println!("count after creating b = {}", Rc::strong_count(&amp;a)); { let c = Rc::clone(&amp;a); println!("count after creating c = {}", Rc::strong_count(&amp;a)); } println!("count after c goes out of scope = {}", Rc::strong_count(&amp;a)); } 4.3 Arc - çº¿ç¨‹å®‰å…¨å¼•ç”¨è®¡æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 use std::sync::Arc; use std::thread; fn main() { let a = Arc::new(5); let b = Arc::clone(&amp;a); let handle = thread::spawn(move || { println!("Thread: value = {}", b); }); println!("Main: value = {}", a); handle.join().unwrap(); } 4.4 RefCell - å†…éƒ¨å¯å˜æ€§ 1 2 3 4 5 6 7 8 9 10 11 12 13 use std::cell::RefCell; fn main() { let data = RefCell::new(5); // è·å–å¤šä¸ªä¸å¯å˜å¼•ç”¨ *data.borrow() = 10; println!("{}", data.borrow()); // è·å–å¯å˜å¼•ç”¨ *data.borrow_mut() = 20; println!("{}", data.borrow()); } äº”ã€å¹¶å‘ä¸çº¿ç¨‹å®‰å…¨ 5.1 Sendå’ŒSync trait 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 // Sendï¼šå¯ä»¥åœ¨çº¿ç¨‹é—´è½¬ç§»æ‰€æœ‰æƒ // Syncï¼šå¯ä»¥åœ¨çº¿ç¨‹é—´å…±äº«å¼•ç”¨ // å¤§å¤šæ•°ç±»å‹å®ç°äº†Sendå’ŒSync // Rc&lt;T>ä¸æ˜¯Sendä¹Ÿä¸æ˜¯Sync // Arc&lt;T>æ˜¯Sendå’ŒSync use std::sync::{Arc, Mutex}; use std::thread; fn main() { let counter = Arc::new(Mutex::new(0)); let mut handles = vec![]; for _ in 0..10 { let counter = Arc::clone(&amp;counter); let handle = thread::spawn(move || { let mut num = counter.lock().unwrap(); *num += 1; }); handles.push(handle); } for handle in handles { handle.join().unwrap(); } println!("Result: {}", *counter.lock().unwrap()); } 5.2 é€šé“é€šä¿¡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 use std::sync::mpsc; use std::thread; fn main() { let (tx, rx) = mpsc::channel(); thread::spawn(move || { let val = String::from("hi"); tx.send(val).unwrap(); }); let received = rx.recv().unwrap(); println!("Got: {}", received); } å…­ã€å†…å­˜å¸ƒå±€ä¸æ€§èƒ½ 6.1 æ ˆä¸å † 1 2 3 4 5 6 7 8 9 10 11 12 13 14 fn main() { // æ ˆåˆ†é…ï¼šå›ºå®šå¤§å°ï¼Œç¼–è¯‘æ—¶å·²çŸ¥ let x: i32 = 5; let y: bool = true; let z: char = 'a'; // å †åˆ†é…ï¼šåŠ¨æ€å¤§å° let s1: String = String::from("hello"); let s2: Box&lt;i32> = Box::new(42); // Stringçš„å†…å­˜å¸ƒå±€ // æ ˆä¸Šï¼šptr(8å­—èŠ‚) | len(8å­—èŠ‚) | capacity(8å­—èŠ‚) // å †ä¸Šï¼šå®é™…å­—ç¬¦ä¸²æ•°æ® } 6.2 é›¶æˆæœ¬æŠ½è±¡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 // è¿­ä»£å™¨ç¤ºä¾‹ï¼šç¼–è¯‘å™¨ä¼šä¼˜åŒ–æ‰æŠ½è±¡å¼€é”€ fn main() { let numbers = vec![1, 2, 3, 4, 5]; // é«˜çº§æŠ½è±¡ let sum: i32 = numbers.iter() .map(|x| x * 2) .filter(|x| x > &amp;5) .sum(); println!("Sum: {}", sum); // ç¼–è¯‘åç”Ÿæˆçš„ä»£ç ä¸æ‰‹å†™å¾ªç¯åŒæ ·é«˜æ•ˆ // é›¶æˆæœ¬æŠ½è±¡ï¼šç¼–è¯‘æœŸä¼˜åŒ–ç§»é™¤æ‰€æœ‰æŠ½è±¡å¼€é”€ } 6.3 å†…è”ä¸ä¼˜åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 // å‡½æ•°å¯èƒ½è¢«å†…è” #[inline] fn add(a: i32, b: i32) -> i32 { a + b } // å¼ºåˆ¶å†…è” #[inline(always)] fn multiply(a: i32, b: i32) -> i32 { a * b } // ç¦æ­¢å†…è” #[inline(never)] fn complex_calculation(x: i32) -> i32 { // å¤æ‚è®¡ç®— x * 2 + 1 } fn main() { let result = add(1, 2); // ç¼–è¯‘å™¨å¯èƒ½å†…è”ä¸ºï¼šlet result = 1 + 2; } ä¸ƒã€é”™è¯¯å¤„ç† 7.1 Result&lt;T, E> 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 use std::fs::File; use std::io::{self, Read}; fn read_username_from_file() -> Result&lt;String, io::Error> { let mut username = String::new(); File::open("username.txt")?.read_to_string(&amp;mut username)?; Ok(username) } // ç­‰ä»·äºä¸Šé¢çš„ä»£ç ï¼Œä½¿ç”¨?è¿ç®—ç¬¦ fn read_username_from_file_v2() -> Result&lt;String, io::Error> { let mut username = String::new(); let mut file = File::open("username.txt")?; file.read_to_string(&amp;mut username)?; Ok(username) } // é“¾å¼è°ƒç”¨ fn read_username_from_file_v3() -> Result&lt;String, io::Error> { let mut username = String::new(); File::open("username.txt")?.read_to_string(&amp;mut username)?; Ok(username) } 7.2 Option 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 fn main() { let some_number = Some(5); let some_string = Some("a string"); let absent_number: Option&lt;i32> = None; // ä½¿ç”¨matchå¤„ç†Option fn plus_one(x: Option&lt;i32>) -> Option&lt;i32> { match x { None => None, Some(i) => Some(i + 1), } } // ä½¿ç”¨if letç®€åŒ– if let Some(i) = some_number { println!("The number is {}", i); } // ä½¿ç”¨mapå’Œand_thenç»„åˆ let result = some_number .map(|i| i * 2) .and_then(|i| if i > 5 { Some(i) } else { None }); } å…«ã€é«˜çº§ç‰¹æ€§ 8.1 traitå¯¹è±¡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 trait Draw { fn draw(&amp;self); } struct Button { width: u32, height: u32, } impl Draw for Button { fn draw(&amp;self) { println!("Drawing button {}x{}", self.width, self.height); } } struct TextField { text: String, } impl Draw for TextField { fn draw(&amp;self) { println!("Drawing text: {}", self.text); } } fn main() { let components: Vec&lt;Box&lt;dyn Draw>> = vec![ Box::new(Button { width: 50, height: 10 }), Box::new(TextField { text: String::from("Hello") }), ]; for component in components { component.draw(); } } 8.2 é—­åŒ… 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 fn main() { // é—­åŒ…æ•è·ç¯å¢ƒå˜é‡ let x = 4; // ä¸å¯å˜å€Ÿç”¨ let equal_to_x = |z| z == x; println!("{}", equal_to_x(4)); // å¯å˜å€Ÿç”¨ let mut x = 4; let mut borrow_mutably = || x += 1; borrow_mutably(); println!("x = {}", x); // è·å–æ‰€æœ‰æƒ let x = vec![1, 2, 3]; let consume = || { let _x = x; // xè¢«ç§»åŠ¨åˆ°é—­åŒ…ä¸­ }; consume(); // é—­åŒ…ä½œä¸ºå‚æ•° fn apply&lt;F>(f: F, value: i32) -> i32 where F: Fn(i32) -> i32, { f(value) } let double = |x| x * 2; println!("{}", apply(double, 5)); } 8.3 è¿­ä»£å™¨é€‚é…å™¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 fn main() { let numbers = vec![1, 2, 3, 4, 5]; // map let doubled: Vec&lt;i32> = numbers.iter().map(|x| x * 2).collect(); // filter let evens: Vec&lt;&amp;i32> = numbers.iter().filter(|&amp;x| x % 2 == 0).collect(); // fold let sum: i32 = numbers.iter().fold(0, |acc, x| acc + x); // é“¾å¼æ“ä½œ let result: Vec&lt;i32> = numbers.iter() .filter(|&&amp;x| x > 2) .map(|&amp;x| x * 2) .take(2) .collect(); println!("Result: {:?}", result); // [6, 8] } æ€»ç»“ Rustçš„å†…å­˜å®‰å…¨æœºåˆ¶æ ¸å¿ƒè¦ç‚¹ï¼š
...</p></div><footer class=entry-footer><div class=post-meta-content><div class=post-categories-inline><a href=/blog/categories/rust/ class=category-link>Rust</a><a href=/blog/categories/%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/ class=category-link>ç³»ç»Ÿç¼–ç¨‹</a></div><span class=post-date>2025-12-24</span><span class=post-author>æœ‰æ¡å·¥å…·å›¢é˜Ÿ</span></div><style>.post-meta-content{display:flex;align-items:center;flex-wrap:wrap;gap:.75rem;font-family:sf mono,monaco,courier new,monospace;font-size:.875rem;color:#9ca3af !important}.post-categories-inline{display:inline-flex;align-items:center;gap:.5rem}.category-link{display:inline-flex;align-items:center;gap:.25rem;padding:.25rem .75rem;background:rgba(255,255,255,.1);color:#e5e7eb !important;text-decoration:none;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;border:1px solid rgba(255,255,255,.2);border-radius:0;transition:all .3s ease;white-space:nowrap}.category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3);transform:translateY(-1px)}.category-link::before{content:'ğŸ“';font-size:.7rem;opacity:.8}.post-date,.post-reading-time,.post-word-count,.post-author{color:#9ca3af !important}[data-theme=dark] .post-meta-content{color:#9ca3af !important}[data-theme=dark] .category-link{background:rgba(255,255,255,.1);color:#e5e7eb !important;border-color:rgba(255,255,255,.2)}[data-theme=dark] .category-link:hover{background:rgba(255,255,255,.2);color:#fff !important;border-color:rgba(255,255,255,.3)}[data-theme=dark] .post-date,[data-theme=dark] .post-reading-time,[data-theme=dark] .post-word-count,[data-theme=dark] .post-author{color:#9ca3af !important}[data-theme=light] .post-meta-content{color:#6c757d !important}[data-theme=light] .category-link{background:rgba(0,0,0,5%);color:#495057 !important;border-color:rgba(0,0,0,.15)}[data-theme=light] .category-link:hover{background:rgba(0,102,204,.1);color:#212529 !important;border-color:rgba(0,102,204,.3)}[data-theme=light] .post-date,[data-theme=light] .post-reading-time,[data-theme=light] .post-word-count,[data-theme=light] .post-author{color:#6c757d !important}@media(max-width:768px){.post-meta-content{gap:.5rem;font-size:.8rem}.category-link{padding:.2rem .6rem;font-size:.7rem}}</style></footer><a class=entry-link aria-label="post link to Rustå†…å­˜å®‰å…¨ä¸æ‰€æœ‰æƒæœºåˆ¶æ·±åº¦è§£æï¼šé›¶æˆæœ¬æŠ½è±¡çš„å®ç°åŸç†" href=/blog/articles/rust%E5%86%85%E5%AD%98%E5%AE%89%E5%85%A8%E4%B8%8E%E6%89%80%E6%9C%89%E6%9D%83%E6%9C%BA%E5%88%B6%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%E9%9B%B6%E6%88%90%E6%9C%AC%E6%8A%BD%E8%B1%A1%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/></a></article></main><footer class=footer><span>Â© 2024-2025 æœ‰æ¡å·¥å…·æŠ€æœ¯åšå®¢</span> Â·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>