{"file":"workday-calculator-r8-rYD93.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrRenderAttr","_ssrRenderComponent","_unref","_push","_parent","_createVNode"],"sources":["../../../../src/pages/tools/workday-calculator.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-8xl mx-auto\">\n    <!-- 面包屑导航 -->\n    <!-- <Breadcrumb :category=\"category\" /> -->\n\n    <!-- 工具标题 -->\n    <div class=\"mt-4 mb-8\">\n      <h1 class=\"text-3xl font-bold mb-3\">工作日计算器</h1>\n      <p class=\"text-muted-foreground\">计算两个日期之间的工作日天数，支持自定义节假日</p>\n    </div>\n\n    <!-- 主要功能区域 -->\n    <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n      <!-- 左侧：日期选择 -->\n      <div class=\"space-y-4\">\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">日期范围</h2>\n\n          <!-- 开始日期 -->\n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"text-sm font-medium\">开始日期</label>\n              <input\n                v-model=\"startDate\"\n                type=\"date\"\n                class=\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary mt-2\"\n                @change=\"calculateWorkdays\"\n              />\n              <div class=\"mt-2 flex gap-2\">\n                <button\n                  @click=\"setToday('start')\"\n                  class=\"px-3 py-1 text-sm text-primary hover:text-primary/80 transition-colors\"\n                >\n                  今天\n                </button>\n                <button\n                  @click=\"setThisWeek('start')\"\n                  class=\"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors\"\n                >\n                  本周一\n                </button>\n                <button\n                  @click=\"setThisMonth('start')\"\n                  class=\"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors\"\n                >\n                  本月1号\n                </button>\n              </div>\n            </div>\n\n            <!-- 结束日期 -->\n            <div>\n              <label class=\"text-sm font-medium\">结束日期</label>\n              <input\n                v-model=\"endDate\"\n                type=\"date\"\n                class=\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary mt-2\"\n                @change=\"calculateWorkdays\"\n              />\n              <div class=\"mt-2 flex gap-2\">\n                <button\n                  @click=\"setToday('end')\"\n                  class=\"px-3 py-1 text-sm text-primary hover:text-primary/80 transition-colors\"\n                >\n                  今天\n                </button>\n                <button\n                  @click=\"setThisWeek('end')\"\n                  class=\"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors\"\n                >\n                  本周日\n                </button>\n                <button\n                  @click=\"setThisMonth('end')\"\n                  class=\"px-3 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors\"\n                >\n                  本月底\n                </button>\n              </div>\n            </div>\n\n            <!-- 快捷选择 -->\n            <div>\n              <label class=\"text-sm font-medium\">快捷选择</label>\n              <div class=\"mt-2 grid grid-cols-2 gap-2\">\n                <button\n                  v-for=\"preset in datePresets\"\n                  :key=\"preset.name\"\n                  @click=\"applyPreset(preset)\"\n                  class=\"px-3 py-2 bg-muted hover:bg-muted/80 rounded-md transition-colors text-sm\"\n                >\n                  {{ preset.name }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 自定义设置 -->\n        <div class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">自定义设置</h2>\n\n          <div class=\"space-y-4\">\n            <!-- 工作日设置 -->\n            <div>\n              <label class=\"text-sm font-medium mb-2 block\">工作日</label>\n              <div class=\"grid grid-cols-7 gap-2\">\n                <label\n                  v-for=\"(day, index) in weekDays\"\n                  :key=\"index\"\n                  class=\"flex flex-col items-center\"\n                >\n                  <input\n                    v-model=\"workdays[index]\"\n                    type=\"checkbox\"\n                    :disabled=\"index === 0 || index === 6\"\n                    class=\"mb-1\"\n                    @change=\"calculateWorkdays\"\n                  />\n                  <span class=\"text-xs\">{{ day }}</span>\n                </label>\n              </div>\n            </div>\n\n            <!-- 添加节假日 -->\n            <div>\n              <label class=\"text-sm font-medium\">自定义节假日</label>\n              <div class=\"mt-2 space-y-2\">\n                <div v-for=\"(holiday, index) in customHolidays\" :key=\"index\" class=\"flex gap-2\">\n                  <input\n                    v-model=\"holiday.date\"\n                    type=\"date\"\n                    class=\"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n                    @change=\"calculateWorkdays\"\n                  />\n                  <input\n                    v-model=\"holiday.name\"\n                    type=\"text\"\n                    placeholder=\"节日名称\"\n                    class=\"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\n                  />\n                  <button\n                    @click=\"removeHoliday(index)\"\n                    class=\"px-3 py-2 text-destructive hover:text-destructive/80 transition-colors\"\n                  >\n                    <X class=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n              <button\n                @click=\"addHoliday\"\n                class=\"mt-2 px-4 py-2 bg-muted hover:bg-muted/80 rounded-md transition-colors text-sm w-full\"\n              >\n                添加节假日\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 右侧：计算结果 -->\n      <div class=\"space-y-4\">\n        <!-- 统计结果 -->\n        <div v-if=\"result\" class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">计算结果</h2>\n\n          <div class=\"space-y-4\">\n            <!-- 主要结果 -->\n            <div class=\"p-4 bg-primary/5 border border-primary/20 rounded-lg\">\n              <div class=\"text-sm text-muted-foreground mb-2\">工作日天数</div>\n              <div class=\"text-3xl font-bold\">{{ result.workdays }}天</div>\n              <div class=\"text-sm text-muted-foreground mt-1\">\n                (总共{{ result.totalDays }}天，其中周末{{ result.weekends }}天)\n              </div>\n            </div>\n\n            <!-- 详细分解 -->\n            <div class=\"grid grid-cols-2 gap-3\">\n              <div class=\"p-3 bg-muted rounded-lg\">\n                <div class=\"text-sm text-muted-foreground mb-1\">总天数</div>\n                <div class=\"text-xl font-bold\">{{ result.totalDays }}天</div>\n              </div>\n              <div class=\"p-3 bg-muted rounded-lg\">\n                <div class=\"text-sm text-muted-foreground mb-1\">工作日</div>\n                <div class=\"text-xl font-bold text-primary\">{{ result.workdays }}天</div>\n              </div>\n              <div class=\"p-3 bg-muted rounded-lg\">\n                <div class=\"text-sm text-muted-foreground mb-1\">周末</div>\n                <div class=\"text-xl font-bold text-muted-foreground\">{{ result.weekends }}天</div>\n              </div>\n              <div class=\"p-3 bg-muted rounded-lg\">\n                <div class=\"text-sm text-muted-foreground mb-1\">节假日</div>\n                <div class=\"text-xl font-bold text-destructive\">{{ result.holidays }}天</div>\n              </div>\n            </div>\n\n            <!-- 每周统计 -->\n            <div>\n              <h3 class=\"text-sm font-medium mb-3\">每周统计</h3>\n              <div class=\"space-y-2\">\n                <div\n                  v-for=\"(week, index) in result.weeklyStats\"\n                  :key=\"index\"\n                  class=\"flex justify-between items-center p-2 hover:bg-muted/50 rounded transition-colors\"\n                >\n                  <span class=\"text-sm\">第{{ week.number }}周</span>\n                  <div class=\"flex items-center gap-4\">\n                    <span class=\"text-sm text-muted-foreground\">{{ week.dateRange }}</span>\n                    <span class=\"text-sm font-mono\">{{ week.workdays }}个工作日</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 节假日列表 -->\n        <div v-if=\"holidayList.length > 0\" class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">节假日列表</h2>\n          <div class=\"space-y-2 max-h-64 overflow-y-auto\">\n            <div\n              v-for=\"holiday in holidayList\"\n              :key=\"holiday.date\"\n              class=\"flex justify-between items-center p-2 hover:bg-muted/50 rounded transition-colors\"\n            >\n              <div>\n                <div class=\"font-medium\">{{ holiday.name }}</div>\n                <div class=\"text-sm text-muted-foreground\">{{ holiday.date }}</div>\n              </div>\n              <span class=\"text-sm px-2 py-1 bg-destructive/10 text-destructive rounded\">\n                节假日\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <!-- 导出功能 -->\n        <div v-if=\"result\" class=\"bg-card   rounded-lg p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">导出数据</h2>\n          <div class=\"grid grid-cols-2 gap-3\">\n            <button\n              @click=\"exportCSV\"\n              class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors flex items-center justify-center gap-2\"\n            >\n              <Download class=\"w-4 h-4\" />\n              导出 CSV\n            </button>\n            <button\n              @click=\"exportJSON\"\n              class=\"px-4 py-2 border border-primary text-primary rounded-md hover:bg-primary/5 transition-colors flex items-center justify-center gap-2\"\n            >\n              <Share2 class=\"w-4 h-4\" />\n              导出 JSON\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 使用说明 -->\n    <div class=\"mt-12 space-y-6\">\n      <div class=\"bg-card   rounded-lg p-6\">\n        <h3 class=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n          <Info class=\"w-5 h-5 text-primary\" />\n          关于工作日计算\n        </h3>\n        <div class=\"space-y-4 text-sm text-muted-foreground\">\n          <div>\n            <h4 class=\"font-medium text-foreground mb-2\">计算规则</h4>\n            <ul class=\"list-disc list-inside space-y-1 ml-4\">\n              <li>默认工作日为周一至周五，周末为周六和周日</li>\n              <li>可以自定义哪些日期为工作日</li>\n              <li>支持添加自定义节假日，这些日期将从工作日中排除</li>\n              <li>计算包含开始日期和结束日期</li>\n            </ul>\n          </div>\n          <div>\n            <h4 class=\"font-medium text-foreground mb-2\">常见应用</h4>\n            <ul class=\"list-disc list-inside space-y-1 ml-4\">\n              <li>项目工期计算，排除周末和节假日</li>\n              <li>计算请假天数和工作日</li>\n              <li>确定交货日期和工作进度</li>\n              <li>薪资结算周期计算</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <!-- 相关工具 -->\n      <div class=\"bg-card   rounded-lg p-6\">\n        <h3 class=\"text-lg font-semibold mb-4\">相关工具</h3>\n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <NuxtLink\n            to=\"/tools/date-diff\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Calendar class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">日期差计算</p>\n              <p class=\"text-xs text-muted-foreground\">计算两个日期的时间差</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n          <NuxtLink\n            to=\"/tools/countdown-timer\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Timer class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">倒计时器</p>\n              <p class=\"text-xs text-muted-foreground\">设置倒计时</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n          <NuxtLink\n            to=\"/tools/cron-parser\"\n            class=\"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors group\"\n          >\n            <Clock class=\"w-5 h-5 text-primary\" />\n            <div>\n              <p class=\"font-medium group-hover:text-primary\">Cron 解析器</p>\n              <p class=\"text-xs text-muted-foreground\">解析定时任务表达式</p>\n            </div>\n            <ArrowRight class=\"w-4 h-4 ml-auto text-muted-foreground group-hover:text-primary\" />\n          </NuxtLink>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { Info, Calendar, Timer, Clock, X, Download, Share2, ArrowRight } from 'lucide-vue-next'\nimport Breadcrumb from '~/components/Breadcrumb.vue'\n\n// 分类信息\nconst category = { id: 'time', name: '时间日期', description: '时间日期相关工具集合' }\n\n// 状态管理\nconst startDate = ref('')\nconst endDate = ref('')\nconst workdays = ref([true, true, true, true, true, false, false]) // 周一到周日\nconst customHolidays = ref([])\nconst result = ref(null)\nconst holidayList = ref([])\n\n// 星期名称\nconst weekDays = ['一', '二', '三', '四', '五', '六', '日']\n\n// 快捷预设\nconst datePresets = [\n  { name: '本周', days: 7 },\n  { name: '本月', days: 30 },\n  { name: '本季度', days: 90 },\n  { name: '本年', days: 365 },\n  { name: '下月', days: 60, offset: 30 },\n  { name: '下季度', days: 180, offset: 90 }\n]\n\n// 中国法定节假日（简化版）\nconst chinaHolidays = [\n  { date: '2024-01-01', name: '元旦' },\n  { date: '2024-02-10', name: '春节' },\n  { date: '2024-02-11', name: '春节' },\n  { date: '2024-02-12', name: '春节' },\n  { date: '2024-04-04', name: '清明节' },\n  { date: '2024-05-01', name: '劳动节' },\n  { date: '2024-06-10', name: '端午节' },\n  { date: '2024-09-17', name: '中秋节' },\n  { date: '2024-10-01', name: '国庆节' },\n  { date: '2024-10-02', name: '国庆节' },\n  { date: '2024-10-03', name: '国庆节' }\n]\n\n// 判断是否为工作日\nconst isWorkday = (date) => {\n  const dayOfWeek = date.getDay()\n  // 周日为0，周一为1\n  const dayIndex = dayOfWeek === 0 ? 6 : dayOfWeek - 1\n\n  // 检查是否为自定义工作日\n  if (!workdays.value[dayIndex]) return false\n\n  // 检查是否为节假日\n  const dateStr = date.toISOString().split('T')[0]\n  const isHoliday = chinaHolidays.some(h => h.date === dateStr) ||\n                   customHolidays.value.some(h => h.date === dateStr)\n\n  return !isHoliday\n}\n\n// 计算工作日\nconst calculateWorkdays = () => {\n  if (!startDate.value || !endDate.value) {\n    result.value = null\n    return\n  }\n\n  const start = new Date(startDate.value)\n  const end = new Date(endDate.value)\n\n  if (start > end) {\n    result.value = null\n    return\n  }\n\n  let totalDays = 0\n  let workdayCount = 0\n  let weekendCount = 0\n  let holidayCount = 0\n  const weeklyStats = []\n  let currentWeek = { number: 1, workdays: 0, dateRange: '', dates: [] }\n\n  const current = new Date(start)\n  let weekNumber = 1\n\n  while (current <= end) {\n    totalDays++\n    const dayOfWeek = current.getDay()\n    const isWeekend = dayOfWeek === 0 || dayOfWeek === 6\n    const isHoliday = chinaHolidays.some(h => h.date === current.toISOString().split('T')[0]) ||\n                      customHolidays.value.some(h => h.date === current.toISOString().split('T')[0])\n\n    if (isWeekend) {\n      weekendCount++\n    } else if (isHoliday) {\n      holidayCount++\n    } else if (isWorkday(current)) {\n      workdayCount++\n      currentWeek.workdays++\n    }\n\n    currentWeek.dates.push(new Date(current))\n\n    // 检查是否为周末，结束当前周统计\n    if (dayOfWeek === 0 || current.getTime() === end.getTime()) {\n      const firstDate = currentWeek.dates[0]\n      const lastDate = currentWeek.dates[currentWeek.dates.length - 1]\n      currentWeek.dateRange = `${firstDate.toLocaleDateString('zh-CN')} - ${lastDate.toLocaleDateString('zh-CN')}`\n      weeklyStats.push({ ...currentWeek })\n      currentWeek = { number: ++weekNumber, workdays: 0, dateRange: '', dates: [] }\n    }\n\n    current.setDate(current.getDate() + 1)\n  }\n\n  result.value = {\n    totalDays,\n    workdays: workdayCount,\n    weekends: weekendCount,\n    holidays: holidayCount,\n    weeklyStats\n  }\n\n  // 获取期间的所有节假日\n  updateHolidayList(start, end)\n}\n\n// 更新节假日列表\nconst updateHolidayList = (start, end) => {\n  holidayList.value = []\n\n  // 添加中国法定节假日\n  chinaHolidays.forEach(holiday => {\n    const holidayDate = new Date(holiday.date)\n    if (holidayDate >= start && holidayDate <= end) {\n      holidayList.value.push(holiday)\n    }\n  })\n\n  // 添加自定义节假日\n  customHolidays.value.forEach(holiday => {\n    if (holiday.date) {\n      const holidayDate = new Date(holiday.date)\n      if (holidayDate >= start && holidayDate <= end) {\n        holidayList.value.push({\n          date: holiday.date,\n          name: holiday.name || '自定义节假日'\n        })\n      }\n    }\n  })\n\n  holidayList.value.sort((a, b) => a.date.localeCompare(b.date))\n}\n\n// 设置日期\nconst setToday = (type) => {\n  const today = new Date().toISOString().split('T')[0]\n  if (type === 'start') {\n    startDate.value = today\n  } else {\n    endDate.value = today\n  }\n  calculateWorkdays()\n}\n\nconst setThisWeek = (type) => {\n  const now = new Date()\n  const dayOfWeek = now.getDay()\n  const diff = now.getDate() - dayOfWeek + (dayOfWeek === 0 ? -6 : 1)\n  const monday = new Date(now.setDate(diff))\n  const sunday = new Date(now.setDate(diff + 6))\n\n  if (type === 'start') {\n    startDate.value = monday.toISOString().split('T')[0]\n  } else {\n    endDate.value = sunday.toISOString().split('T')[0]\n  }\n  calculateWorkdays()\n}\n\nconst setThisMonth = (type) => {\n  const now = new Date()\n  if (type === 'start') {\n    startDate.value = new Date(now.getFullYear(), now.getMonth(), 1).toISOString().split('T')[0]\n  } else {\n    endDate.value = new Date(now.getFullYear(), now.getMonth() + 1, 0).toISOString().split('T')[0]\n  }\n  calculateWorkdays()\n}\n\n// 应用预设\nconst applyPreset = (preset) => {\n  const start = new Date()\n  const end = new Date()\n\n  if (preset.offset) {\n    start.setDate(start.getDate() + preset.offset)\n    end.setDate(end.getDate() + preset.offset)\n  }\n\n  end.setDate(end.getDate() + preset.days)\n\n  startDate.value = start.toISOString().split('T')[0]\n  endDate.value = end.toISOString().split('T')[0]\n  calculateWorkdays()\n}\n\n// 添加节假日\nconst addHoliday = () => {\n  customHolidays.value.push({ date: '', name: '' })\n}\n\n// 删除节假日\nconst removeHoliday = (index) => {\n  customHolidays.value.splice(index, 1)\n  calculateWorkdays()\n}\n\n// 导出CSV\nconst exportCSV = () => {\n  if (!result.value) return\n\n  let csv = '日期,是否工作日,类型\\n'\n  const current = new Date(startDate.value)\n  const end = new Date(endDate.value)\n\n  while (current <= end) {\n    const dateStr = current.toLocaleDateString('zh-CN')\n    const isWorkdayValue = isWorkday(current)\n    let type = '工作日'\n\n    const dayOfWeek = current.getDay()\n    if (dayOfWeek === 0 || dayOfWeek === 6) {\n      type = '周末'\n    } else {\n      const dateISO = current.toISOString().split('T')[0]\n      if (chinaHolidays.some(h => h.date === dateISO) || customHolidays.value.some(h => h.date === dateISO)) {\n        type = '节假日'\n      }\n    }\n\n    csv += `${dateStr},${isWorkdayValue ? '是' : '否'},${type}\\n`\n    current.setDate(current.getDate() + 1)\n  }\n\n  downloadFile(csv, 'workdays.csv', 'text/csv')\n}\n\n// 导出JSON\nconst exportJSON = () => {\n  if (!result.value) return\n\n  const data = {\n    startDate: startDate.value,\n    endDate: endDate.value,\n    workdays: workdays.value,\n    customHolidays: customHolidays.value,\n    result: result.value,\n    exportTime: new Date().toISOString()\n  }\n\n  downloadFile(JSON.stringify(data, null, 2), 'workdays.json', 'application/json')\n}\n\n// 下载文件\nconst downloadFile = (content, filename, type) => {\n  const blob = new Blob([content], { type })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = filename\n  a.click()\n  URL.revokeObjectURL(url)\n}\n\n// SEO配置\nuseSeoMeta({\n  title: '工作日计算器 - 在线计算工作日天数',\n  description: '免费在线工作日计算工具，支持自定义节假日、计算工作日天数、排除周末等功能。',\n  keywords: ['工作日计算', '工作日天数', '日期计算', '节假日', '在线工具']\n})\n\ndefinePageMeta({\n  layout: 'default'\n})\n\n// 初始化\nonMounted(() => {\n  const today = new Date()\n  const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1)\n  const endOfMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0)\n\n  startDate.value = startOfMonth.toISOString().split('T')[0]\n  endDate.value = endOfMonth.toISOString().split('T')[0]\n\n  calculateWorkdays()\n})\n</script>"],"version":3}